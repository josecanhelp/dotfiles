{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"vscode\"","webpack:///./src/system/array.ts","webpack:///./src/system/date.ts","webpack:///./src/system/decorators/gate.ts","webpack:///./src/system/decorators/memoize.ts","webpack:///./src/system/iterable.ts","webpack:///./src/system/object.ts","webpack:///./src/system/searchTree.ts","webpack:///./src/system/version.ts","webpack:///./src/system.ts","webpack:///./src/constants.ts","webpack:///./src/annotations/annotationProvider.ts","webpack:///./src/webviews/apps/shared/colors.ts","webpack:///./src/annotations/annotations.ts","webpack:///./src/annotations/fileAnnotationController.ts","webpack:///./src/annotations/blameAnnotationProvider.ts","webpack:///./src/annotations/gutterBlameAnnotationProvider.ts","webpack:///./src/annotations/heatmapBlameAnnotationProvider.ts","webpack:///./src/annotations/recentChangesAnnotationProvider.ts","webpack:///./src/annotations/lineAnnotationController.ts","webpack:///./src/codelens/codeLensProvider.ts","webpack:///./src/codelens/codeLensController.ts","webpack:///./src/git/fsProvider.ts","webpack:///./src/hovers/lineHoverController.ts","webpack:///./src/statusbar/statusBarController.ts","webpack:///./src/trackers/lineTracker.ts","webpack:///./src/trackers/gitLineTracker.ts","webpack:///./src/views/viewBase.ts","webpack:///./src/views/compareView.ts","webpack:///./src/views/fileHistoryView.ts","webpack:///./src/views/lineHistoryView.ts","webpack:///./src/views/repositoriesView.ts","webpack:///./src/views/searchView.ts","webpack:///./src/views/viewCommands.ts","webpack:///./src/webviews/protocol.ts","webpack:///./src/webviews/webviewBase.ts","webpack:///./src/webviews/settingsWebview.ts","webpack:///./src/webviews/welcomeWebview.ts","webpack:///./src/container.ts","webpack:///./src/configuration.ts","webpack:///./src/git/gitService.ts","webpack:///./src/commands/common.ts","webpack:///./src/logger.ts","webpack:///./src/git/git.ts","webpack:///./src/views/nodes/viewNode.ts","webpack:///./src/quickpicks/gitQuickPicks.ts","webpack:///./src/quickpicks/referencesQuickPick.ts","webpack:///./src/quickpicks/commonQuickPicks.ts","webpack:///./src/quickpicks/remotesQuickPick.ts","webpack:///./src/quickpicks/branchHistoryQuickPick.ts","webpack:///./src/quickpicks/commitFileQuickPick.ts","webpack:///./src/quickpicks/commitQuickPick.ts","webpack:///./src/quickpicks/commitsQuickPick.ts","webpack:///./src/quickpicks/fileHistoryQuickPick.ts","webpack:///./src/quickpicks/modesQuickPick.ts","webpack:///./src/quickpicks/repositoriesQuickPick.ts","webpack:///./src/quickpicks/repoStatusQuickPick.ts","webpack:///./src/quickpicks/stashListQuickPick.ts","webpack:///./src/quickpicks.ts","webpack:///./src/commands/annotations.ts","webpack:///./src/commands/closeUnchangedFiles.ts","webpack:///./src/commands/copyMessageToClipboard.ts","webpack:///./src/commands/copyRemoteFileUrlToClipboard.ts","webpack:///./src/commands/copyShaToClipboard.ts","webpack:///./src/commands/diffBranchWith.ts","webpack:///./src/commands/diffDirectory.ts","webpack:///./src/commands/diffLineWithPrevious.ts","webpack:///./src/commands/diffLineWithWorking.ts","webpack:///./src/commands/diffWith.ts","webpack:///./src/commands/diffWithNext.ts","webpack:///./src/commands/diffWithPrevious.ts","webpack:///./src/commands/diffWithRef.ts","webpack:///./src/commands/diffWithRevision.ts","webpack:///./src/commands/diffWithWorking.ts","webpack:///./src/commands/externalDiff.ts","webpack:///./src/commands/inviteToLiveShare.ts","webpack:///./src/commands/openBranchesInRemote.ts","webpack:///./src/commands/openBranchInRemote.ts","webpack:///./src/commands/openChangedFiles.ts","webpack:///./src/commands/openCommitInRemote.ts","webpack:///./src/commands/openFileInRemote.ts","webpack:///./src/commands/openFileRevision.ts","webpack:///./src/commands/openFileRevisionFrom.ts","webpack:///./src/commands/openInRemote.ts","webpack:///./src/commands/openRepoInRemote.ts","webpack:///./src/commands/openWorkingFile.ts","webpack:///./src/commands/quick/quickCommand.ts","webpack:///./src/commands/quick/gitCommand.ts","webpack:///./src/commands/quick/cherry-pick.ts","webpack:///./src/commands/quick/fetch.ts","webpack:///./src/commands/quick/merge.ts","webpack:///./src/commands/quick/push.ts","webpack:///./src/commands/quick/pull.ts","webpack:///./src/commands/quick/checkout.ts","webpack:///./src/commands/quick/rebase.ts","webpack:///./src/commands/gitCommands.ts","webpack:///./src/commands/repositories.ts","webpack:///./src/commands/resetSuppressedWarnings.ts","webpack:///./src/commands/searchCommits.ts","webpack:///./src/commands/showLastQuickPick.ts","webpack:///./src/commands/showQuickBranchHistory.ts","webpack:///./src/commands/showQuickCommitDetails.ts","webpack:///./src/commands/showQuickCommitFileDetails.ts","webpack:///./src/commands/showQuickCurrentBranchHistory.ts","webpack:///./src/commands/showQuickFileHistory.ts","webpack:///./src/commands/showQuickRepoStatus.ts","webpack:///./src/commands/showQuickStashList.ts","webpack:///./src/commands/showView.ts","webpack:///./src/commands/stashApply.ts","webpack:///./src/commands/stashDelete.ts","webpack:///./src/commands/stashSave.ts","webpack:///./src/commands/supportGitLens.ts","webpack:///./src/commands/switchMode.ts","webpack:///./src/commands/toggleCodeLens.ts","webpack:///./src/commands.ts","webpack:///./src/views/nodes/branchTrackingStatusNode.ts","webpack:///./src/views/nodes/branchNode.ts","webpack:///./src/views/nodes/branchOrTagFolderNode.ts","webpack:///./src/views/nodes/branchesNode.ts","webpack:///./src/views/nodes/comparePickerNode.ts","webpack:///./src/views/nodes/compareNode.ts","webpack:///./src/views/nodes/compareResultsNode.ts","webpack:///./src/views/nodes/contributorNode.ts","webpack:///./src/views/nodes/contributorsNode.ts","webpack:///./src/views/nodes/fileHistoryNode.ts","webpack:///./src/views/nodes/fileHistoryTrackerNode.ts","webpack:///./src/views/nodes/lineHistoryNode.ts","webpack:///./src/views/nodes/lineHistoryTrackerNode.ts","webpack:///./src/views/nodes/reflogRecordNode.ts","webpack:///./src/views/nodes/reflogNode.ts","webpack:///./src/views/nodes/remoteNode.ts","webpack:///./src/views/nodes/remotesNode.ts","webpack:///./src/views/nodes/stashFileNode.ts","webpack:///./src/views/nodes/stashNode.ts","webpack:///./src/views/nodes/stashesNode.ts","webpack:///./src/views/nodes/statusFileNode.ts","webpack:///./src/views/nodes/statusFilesNode.ts","webpack:///./src/views/nodes/tagNode.ts","webpack:///./src/views/nodes/tagsNode.ts","webpack:///./src/views/nodes/repositoryNode.ts","webpack:///./src/views/nodes/repositoriesNode.ts","webpack:///./src/views/nodes/searchNode.ts","webpack:///./src/views/nodes/searchResultsCommitsNode.ts","webpack:///./src/views/nodes.ts","webpack:///./src/messages.ts","webpack:///external \"path\"","webpack:///./src/git/gitUri.ts","webpack:///./src/views/nodes/common.ts","webpack:///./src/comparers.ts","webpack:///./src/terminal.ts","webpack:///./src/keyboard.ts","webpack:///./src/git/remotes/provider.ts","webpack:///./src/views/nodes/commitNode.ts","webpack:///./src/views/nodes/helpers.ts","webpack:///./src/views/nodes/commitFileNode.ts","webpack:///./src/config.ts","webpack:///external \"fs\"","webpack:///./src/git/models/file.ts","webpack:///./src/git/parsers/blameParser.ts","webpack:///./src/git/parsers/branchParser.ts","webpack:///./src/git/parsers/logParser.ts","webpack:///./src/git/parsers/reflogParser.ts","webpack:///./src/git/parsers/remoteParser.ts","webpack:///./src/git/parsers/shortlogParser.ts","webpack:///./src/git/parsers/stashParser.ts","webpack:///./src/git/parsers/statusParser.ts","webpack:///./src/git/parsers/tagParser.ts","webpack:///./src/git/parsers/treeParser.ts","webpack:///./src/git/parsers/parsers.ts","webpack:///./src/system/string.ts","webpack:///./src/git/models/commit.ts","webpack:///./src/views/nodes/folderNode.ts","webpack:///./src/views/nodes/resultsCommitsNode.ts","webpack:///./src/system/decorators/log.ts","webpack:///./src/avatars.ts","webpack:///./src/git/remotes/azure-devops.ts","webpack:///./src/git/remotes/bitbucket.ts","webpack:///./src/git/remotes/bitbucket-server.ts","webpack:///./src/git/remotes/custom.ts","webpack:///./src/git/remotes/github.ts","webpack:///./src/git/remotes/gitlab.ts","webpack:///./src/git/remotes/factory.ts","webpack:///./src/git/shell.ts","webpack:///./node_modules/safer-buffer/safer.js","webpack:///./src/git/models/branch.ts","webpack:///./src/trackers/trackedDocument.ts","webpack:///./src/trackers/documentTracker.ts","webpack:///./src/trackers/gitDocumentTracker.ts","webpack:///./src/system/promise.ts","webpack:///./src/views/nodes/compareBranchNode.ts","webpack:///./src/views/nodes/resultsFilesNode.ts","webpack:///./src/emojis.ts","webpack:///external \"buffer\"","webpack:///./node_modules/iconv-lite/lib/index.js","webpack:///./src/git/models/models.ts","webpack:///./src/git/models/status.ts","webpack:///./src/git/parsers/diffParser.ts","webpack:///./src/git/models/reflog.ts","webpack:///./src/git/models/logCommit.ts","webpack:///./src/views/nodes/resultsFileNode.ts","webpack:///./node_modules/lodash-es/isObject.js","webpack:///./node_modules/lodash-es/_freeGlobal.js","webpack:///./node_modules/lodash-es/_root.js","webpack:///./node_modules/lodash-es/now.js","webpack:///./node_modules/lodash-es/_Symbol.js","webpack:///./node_modules/lodash-es/_getRawTag.js","webpack:///./node_modules/lodash-es/_objectToString.js","webpack:///./node_modules/lodash-es/_baseGetTag.js","webpack:///./node_modules/lodash-es/isObjectLike.js","webpack:///./node_modules/lodash-es/isSymbol.js","webpack:///./node_modules/lodash-es/toNumber.js","webpack:///./node_modules/lodash-es/debounce.js","webpack:///./node_modules/lodash-es/toFinite.js","webpack:///./node_modules/lodash-es/toInteger.js","webpack:///./node_modules/lodash-es/before.js","webpack:///./node_modules/lodash-es/once.js","webpack:///./src/system/function.ts","webpack:///./src/git/formatters/formatter.ts","webpack:///./src/git/formatters/commitFormatter.ts","webpack:///./src/git/formatters/statusFormatter.ts","webpack:///./src/git/formatters/formatters.ts","webpack:///./src/vsls/protocol.ts","webpack:///./src/vsls/host.ts","webpack:///./src/vsls/guest.ts","webpack:///./src/vsls/vsls.ts","webpack:///./node_modules/dayjs/dayjs.min.js","webpack:///./node_modules/vsls/vscode.js","webpack:///external \"stream\"","webpack:///external \"crypto\"","webpack:///./node_modules/lodash/lodash.js","webpack:///./src/git/models/blameCommit.ts","webpack:///./src/git/models/contributor.ts","webpack:///./src/git/models/diff.ts","webpack:///./src/git/models/remote.ts","webpack:///./src/git/models/repository.ts","webpack:///./src/git/models/stashCommit.ts","webpack:///./src/git/models/tag.ts","webpack:///./node_modules/dayjs/plugin/advancedFormat.js","webpack:///./node_modules/dayjs/plugin/relativeTime.js","webpack:///./src/git/locator.ts","webpack:///external \"child_process\"","webpack:///./src/extension.ts","webpack:///./node_modules/iconv-lite/lib/bom-handling.js","webpack:///./node_modules/iconv-lite/encodings/index.js","webpack:///./node_modules/iconv-lite/encodings/internal.js","webpack:///external \"string_decoder\"","webpack:///./node_modules/iconv-lite/encodings/utf32.js","webpack:///./node_modules/iconv-lite/encodings/utf16.js","webpack:///./node_modules/iconv-lite/encodings/utf7.js","webpack:///./node_modules/iconv-lite/encodings/sbcs-codec.js","webpack:///./node_modules/iconv-lite/encodings/sbcs-data.js","webpack:///./node_modules/iconv-lite/encodings/sbcs-data-generated.js","webpack:///./node_modules/iconv-lite/encodings/dbcs-codec.js","webpack:///./node_modules/iconv-lite/encodings/dbcs-data.js","webpack:///./node_modules/iconv-lite/lib/streams.js","webpack:///./node_modules/iconv-lite/lib/extend-node.js","webpack:///(webpack)/buildin/module.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","Arrays","compactHierarchy","root","joinPath","isRoot","undefined","children","values","every","siblings","parent","delete","child","set","length","relativePath","countUniques","source","accessor","uniqueCounts","item","filterMap","predicateMapper","reduce","accumulator","current","mapped","push","filterMapAsync","async","groupBy","groupings","groupByMap","group","Map","groupByFilterMap","makeHierarchical","splitPath","compact","seed","descendants","hierarchy","folder","folderName","f","uniqueBy","predicate","uniqueValues","filter","Dates","advancedFormat","relativeTime","MillisecondsPerMinute","MillisecondsPerHour","MillisecondsPerDay","getFormatter","date","emptyStr","gate","resolver","target","descriptor","fn","Error","gateKey","args","prop","arg0","String","JSON","stringify","this","configurable","writable","promise","result","apply","isPromise","then","memoize","fnKey","memoizeKey","Iterables","Objects","some","count","next","done","forEach","find","first","iterator","flatMap","mapper","has","isIterable","join","separator","toString","last","map","skip","take","union","sources","entries","flatten","prefix","flattened","_flatten","Array","isArray","len","isEmpty","paths","path","results","FIN","StringIterator","_value","_pos","a","charCodeAt","replace","_from","_to","justSeps","ch","CharCode","Slash","Backslash","aPos","aLen","thisPos","cmp","substring","TernarySearchTreeNode","left","mid","right","segments","_iter","_root","element","iter","reset","node","segment","val","hasNext","oldElement","stack","dir","pop","candidate","limit","_nodeIterator","res","idx","data","_forEach","callback","e","_iterator","Versions","from","major","minor","patch","pre","parseInt","compare","v1","v2","localeCompare","fromString","version","ver","split","extensionId","extensionOutputChannelName","extensionQualifiedId","extensionTerminalName","BuiltInCommands","CommandContext","DocumentSchemes","GlyphChars","GlobalState","setCommandContext","executeCommand","SetContext","getEditorIfActive","document","editor","activeTextEditor","isActiveDocument","isTextEditor","scheme","uri","Output","DebugConsole","ImageMimetypes","WorkspaceState","AnnotationStatus","trackedDocument","decoration","highlightDecoration","correlationKey","getCorrelationKey","disposable","onDidChangeTextEditorSelection","onTextEditorSelectionChanged","id","clear","dispose","equals","textEditor","selection","selections","active","line","status","setDecorations","additionalDecorations","changes","_resetDebounced","debounce","onReset","provideAnnotation","_disposed","Computing","decorations","ranges","Computed","shaOrLine","onProvideAnnotation","cssColorRegex","toRgba","color","trim","exec","hex","parseFloat","defaultHeatmapHotColor","defaultHeatmapColdColor","computedHeatmapColor","heatmap","getHeatmapColor","renderOptions","before","borderColor","commit","editorLine","hunkLine","documentRef","sha","is","ref","isUncommitted","isUncommittedStaged","commitLine","lines","originalFileName","fsPath","fileName","originalLine","git","getDiffForLine","uncommittedStagedSha","previousSha","diff","getDiffFromHunkLine","message","previous","diffUris","getPreviousLineDiffUris","getMarkdownCommandArgs","lhs","documentUri","rhs","repoPath","shortenSha","working","previousShortSha","shortSha","Dash","ArrowLeftRightLong","markdown","isTrusted","dateFormat","annotationType","presence","previousLineDiffUris","remotes","Promise","all","vsls","getContactPresence","email","getRemotes","sort","fromTemplate","config","hovers","detailsMarkdownFormat","format","dateFormatOrFormatOptions","uncommittedColor","contentText","pad","Space","separateLines","options","chars","token","tokenOptions","truncateTo","getWidth","interpolate","width","borderStyle","borderWidth","enabled","location","spacing","configuration","getAny","Math","round","backgroundColor","fontWeight","fontStyle","height","margin","textDecoration","applyHeatmap","scrollable","getBranchAndTagTips","truncateMessageAtNewLine","after","changesDiff","hunk","baseColor","cold","colors","hot","age","computeAge","rgba","g","b","rgb","toFixed","AnnotationClearReason","super","_uri","_blame","isDirty","getBlameForFileContents","getText","getBlameForFile","setForceDirtyStateChangeOnNextDocumentChange","_hoverProviderDisposable","blame","commits","highlightDecorationRanges","validateRange","Number","MAX_SAFE_INTEGER","dates","getTime","half","floor","median","lookup","newest","step","oldest","Date","setDate","getDate","ageThreshold","coldColor","hotColor","time","index","providers","annotations","details","subscriptions","registerHoverProvider","pattern","provideHover","provideChangesHover","provideDetailsHover","position","getCommitForHover","logCommit","getCommitForFile","previousFileName","detailsHoverMessage","fromUri","defaultDateFormat","changesHoverMessage","over","character","getBlame","type","cc","getCorrelationContext","Blame","start","process","hrtime","cfg","getTokensFromTemplate","getBranchesAndTagsTipsFn","avatars","gravatarDefault","defaultGravatarsStyle","gutterRenderOptions","decorationsMap","avatarDecorationsMap","gutter","computedHeatmap","compacted","getComputedHeatmap","range","addOrUpdateGravatarDecoration","repeat","log","getDurationMilliseconds","registerHoverProviders","avatarDecoration","createTextEditorDecorationType","gutterIconPath","getGravatarUri","gutterIconSize","Heatmap","heatmapRenderOptions","RecentChanges","getDiffForFile","hunks","currentPosition","state","hoverMessage","resolve","Decorations","blameAnnotation","rangeBehavior","ClosedOpen","blameHighlight","heatmapAnnotation","ZeroWidthSpace","heatmapHighlight","recentChangesAnnotation","recentChangesHighlight","_onDidToggleAnnotations","_annotationProviders","_keyboardScope","_annotationType","_disposable","onDidChange","onConfigurationChanged","_toggleModes","initializingChangeEvent","event","clearAll","_annotationsDisposable","changed","cfgHighlight","highlight","isWholeLine","overviewRulerLane","Right","locations","includes","Line","overviewRulerColor","Overview","dark","Gutter","context","asAbsolutePath","light","recentChanges","initializing","toggleMode","File","provider","show","_editor","isInWindowToggle","getProvider","detachKeyboardHook","attachKeyboardHook","blameable","BlameabilityChanged","clearCore","DocumentChanged","isTrackable","DocumentClosed","restore","fuzzyProvider","ColumnChanged","editors","getToggleMode","Window","reason","User","Disposing","tracker","isBlameable","visibleTextEditors","getOrAdd","currentProvider","withProgress","progress","computingAnnotations","showAnnotationsCore","on","isTracked","reopen","keyboard","beginScope","escape","onDidPressKey","size","fire","annotationsLabel","report","validate","onDidChangeActiveTextEditor","onActiveTextEditorChanged","onDidChangeTextEditorViewColumn","onTextEditorViewColumnChanged","onDidChangeVisibleTextEditors","onVisibleTextEditorsChanged","onDidCloseTextDocument","onTextDocumentClosed","onDidChangeBlameState","onBlameStateChanged","onDidChangeDirtyState","onDirtyStateChanged","annotationDecoration","_enabled","_suspended","fileAnnotations","onDidToggleAnnotations","onFileAnnotationsToggled","clearAnnotations","lineTracker","stop","currentLine","resume","setLineTracker","refresh","pending","suspended","suspend","includesAll","exitDetails","Dot","getState","trailing","isSubscribed","onDidChangeActiveLines","onActiveLinesChanged","languageId","symbol","blameRange","isFullRange","desiredCommand","command","_git","_tracker","_onDidChangeCodeLenses","dirty","isDirtyIdle","maxLines","advanced","sizeThresholdAfterEdit","lineCount","languageScope","scopesByLanguage","ll","language","toLowerCase","scopes","symbolScopes","lenses","gitUri","symbols","Document","ExecuteDocumentSymbolProvider","isCancellationRequested","documentRangeFn","once","dirtyCommand","title","getDirtyTitle","sym","provideCodeLens","end","blameForRangeFn","recentChange","getBlameForRangeSync","fileSymbol","getRangeFromSymbol","authors","includeSingleLineSymbols","valid","symbolName","kind","Containers","Package","Class","Interface","Module","Namespace","Struct","isSingleLine","Constructor","Enum","Function","Method","Property","Blocks","getValidateSymbolRange","lineAt","lineNumber","startChar","with","multiline","isDocumentSymbol","lens","resolveGitRecentChangeCodeLens","resolveGitAuthorsCodeLens","reject","recentCommit","author","formattedDate","debug","containerName","DiffWithPrevious","applyDiffWithPreviousCommand","ShowQuickCommitDetails","applyShowQuickCommitDetailsCommand","ShowQuickCommitFileDetails","applyShowQuickCommitFileDetailsCommand","ShowQuickCurrentBranchHistory","applyShowQuickCurrentBranchHistoryCommand","ShowQuickFileHistory","applyShowQuickFileHistoryCommand","ToggleFileBlame","applyToggleFileBlameCommand","blameLine","allLines","commandArgs","arguments","toFileUri","strings","codeLens","unsavedChanges","recentChangeAndAuthors","recentChangeOnly","authorsOnly","selector","Vsls","Git","GitLens","_canToggle","_providerDisposable","section","_provider","createProvider","CanToggleCodeLens","registerCodeLensProvider","onDidTriggerDirtyIdle","onDirtyIdleTriggered","emptyArray","Uint8Array","fromGitLensFSUri","fromRevisionUri","_searchTreeMap","_onDidChangeFile","registerFileSystemProvider","isCaseSensitive","isReadonly","NoPermissions","tree","getTree","FileNotFound","normalizePath","typeToFileType","deletedOrMissingSha","buffer","getVersionedFileBuffer","ctime","mtime","treeItem","searchTree","Directory","getTreeFileForRevision","forPaths","trees","getTreeForRevision","commitSha","createSearchTree","getOrCreateSearchTree","findSuperstr","Unknown","unregister","register","registered","lineState","getAnnotationType","wholeLine","lineAnnotations","clearBlame","_blameStatusBarItem","_modeStatusBarItem","statusBar","modes","statusBarItemName","alignment","Left","createStatusBarItem","SwitchMode","text","tooltip","reduceFlicker","updateBlame","hide","DiffLineWithPrevious","DiffWithWorking","DiffLineWithWorking","ToggleCodeLens","_onDidChangeActiveLines","_state","_lines","trigger","subscriber","subscription","setImmediate","_linesChangedDebounced","cancel","onLinesChanged","fireLinesChanged","track","lines1","lines2","v","GitLineState","_count","_subscriptions","updated","updateState","force","getBlameForLineContents","getBlameForLine","setState","_onDidChangeTreeData","_onDidChangeVisibility","_onDidChangeNodeState","_lastMaxCounts","isDebugging","getTreeItem","label","contextValue","registerCommands","container","_tree","createTreeView","treeDataProvider","onDidChangeVisibility","onVisibilityChanged","onDidCollapseElement","onElementCollapsed","onDidExpandElement","onElementExpanded","getRoot","getChildren","ensureRoot","getParent","resetNodeLastMaxCount","Collapsed","Expanded","visible","triggerNodeChange","reveal","ex","error","setting","splitSingle","actions","isCloseAffordance","showErrorMessage","update","Global","rememberLastMaxCount","maxCount","previousNode","select","refreshNode","0","3","ViewsCompareKeepResults","keepResults","viewCommands","registerCommand","getQualifiedCommand","setFilesLayout","Auto","List","Tree","setKeepResults","pinComparison","unpinComparison","swapComparison","selectForCompare","compareWithSelected","initialize","showCollapseAll","views","workspaceState","canDismiss","dismiss","ref1","ref2","addResults","pinned","PinnedComparisons","notation","pin","_","rest","addOrReplace","expand","focus","layout","updateEffective","swap","unpin","changeBase","setEditorFollowing","setRenameFollowing","ViewsFileHistoryEditorFollowing","fileHistory","baseRef","showHistoryForUri","ViewsLineHistoryEditorFollowing","lineHistory","_onDidChangeAutoRefresh","setAutoRefresh","repositories","autoRefresh","setBranchComparison","Working","Branch","ViewsRepositoriesAutoRefresh","workspaceEnabled","comparisonType","setComparisonType","ViewsSearchKeepResults","search","searchBy","searchQueryFn","getSearchQueryFn","getLogForSearch","getSearchLabel","cachedOnce","truncated","resultsType","singular","plural","pluralize","number","zero","query","view","dismissNode","showMore","showAll","fetch","pull","closeRepository","setAsDefault","unsetAsDefault","openInTerminal","star","unstar","exploreRepoRevision","contributorAddCoauthoredBy","contributorCopyToClipboard","openChanges","openChangesWithWorking","openFile","openFileRevision","openFileRevisionInRemote","openChangedFiles","openChangedFileChanges","openChangedFileChangesWithWorking","openChangedFileRevisions","applyChanges","checkout","addRemote","stageDirectory","stageFile","unstageDirectory","unstageFile","compareAncestryWithWorking","compareWithHead","compareWithRemote","compareFileWithSelected","selectFileForCompare","compareWithWorking","setComparisonNotation","terminalCheckoutBranch","terminalCreateBranch","terminalDeleteBranch","terminalMergeBranch","terminalRebaseBranch","terminalRebaseBranchToRemote","terminalSquashBranchIntoCommit","terminalCheckoutCommit","terminalCherryPickCommit","terminalPushCommit","terminalRebaseCommit","terminalResetCommit","terminalRevertCommit","terminalRemoveRemote","terminalCreateTag","terminalDeleteTag","gitApi","getBuiltInGitApi","repo","rootUri","contributor","coauthor","inputBox","newlines","clipboard","writeText","applyChangesToWorkingFile","branch","pick","checkmarks","filterBranches","include","remote","branches","getBranches","tracking","showInputBox","prompt","placeHolder","getName","ignoreFocusOut","createBranch","url","closed","compareView","getBranch","commonAncestor","getMergeBase","_selectedFile","selected","ViewsCanCompareFile","diffArgs","DiffWith","toRevisionUri","FocusFilesExplorer","getCommand","showOptions","preview","preserveFocus","OpenWorkingFile","previousUri","OpenFileInRemote","toGitUri","files","getFilesQueryResults","showWarningMessage","file","uri1","fromFile","uri2","openDiffWith","toFileCommit","previousFileSha","OpenInTerminal","triggerChange","unStageDirectory","unStageFile","comparisonNotation","remoteBranch","getRemoteName","upstream","IpcNotificationType","method","IpcCommandType","onIpcCommand","params","DidChangeConfigurationNotificationType","ReadyCommandType","UpdateConfigurationCommandType","SettingsDidRequestJumpToNotificationType","ipcSequence","emptyCommands","showCommand","column","_disposablePanel","notifyDidChangeConfiguration","_panel","webviewPanel","scope","Workspace","inspect","defaultValue","removes","onMessageReceived","Active","html","getHtml","createWebviewPanel","viewColumn","retainContextWhenHidden","enableFindWidget","enableCommandUris","enableScripts","iconPath","onDidDispose","onPanelDisposed","onDidChangeViewState","onViewStateChanged","webview","onDidReceiveMessage","onMessageReceivedCore","filename","content","err","_html","openTextDocument","renderHead","renderBody","renderEndOfBody","postMessage","nextIpcId","notify","anchorRegex","ShowSettingsPage","ShowSettingsPageAndJumpToCompareView","ShowSettingsPageAndJumpToFileHistoryView","ShowSettingsPageAndJumpToLineHistoryView","ShowSettingsPageAndJumpToRepositoriesView","ShowSettingsPageAndJumpToSearchCommitsView","anchor","match","_pendingJumpToAnchor","workspaceFolders","bootstrap","applyViewLayoutPreset","preset","histories","compareAndSearch","SourceControl","Explorer","ShowWelcomePage","_context","_config","applyMode","_lineTracker","_vsls","_fileAnnotationController","_lineAnnotationController","_lineHoverController","_statusBarController","_codeLensController","_keyboard","_settingsWebview","_welcomeWebview","_compareView","_fileHistoryView","_lineHistoryView","_repositoriesView","_searchView","onWillChange","onConfigurationChanging","change","level","_applyModeConfigurationTransformBound","applyModeConfigurationTransform","transform","_viewCommands","ToggleFileHeatmap","ToggleFileRecentChanges","setTimeout","_configsAffectedByMode","original","affectsConfiguration","resource","startsWith","emptyConfig","Proxy","Configuration","_onDidChange","_onDidChangeAny","_onWillChange","onDidChangeConfiguration","evt","getConfiguration","to","inspection","migrated","globalValue","migrationFn","workspaceValue","workspaceFolderValue","WorkspaceFolder","fallbackValue","fromInspection","toInspection","propOf","slash","RepoSearchWarnings","doesNotExist","userConfigRegex","mappedAuthorRegex","GitRepoSearchBy","emptyPromise","reflogCommands","GitService","_onDidChangeRepositories","_branchesCache","_tagsCache","_tagsWithRefsCache","_trackedCache","_userMapCache","_repositoryTree","onDidChangeWindowState","onWindowStateChanged","onDidChangeWorkspaceFolders","onWorkspaceFoldersChanged","_repositoriesLoadingPromise","gitPath","setOrFindGitPath","caching","Config","Closed","updateContext","fireRepositoriesChanged","focused","added","removed","isMaybeGuest","guest","getRepositoriesInFolder","onAnyRepositoryChanged","repositorySearch","repos","reposToDelete","k","depth","anyRepoChangedFn","rootPath","getRepoPathCore","excludes","repoPaths","repositorySearchCore","test","rp","withFileTypes","isDirectory","repositoryTree","hasRepository","any","Enabled","hasRemotes","HasRemotes","watcher","createFileSystemWatcher","onDidCreate","getWorkspaceFolder","remote__add","similarityThreshold","allowConflicts","showGenericErrorMessage","getOrderedRepositories","Notification","getActiveRepoPath","getRepository","doc","getHighlanderRepoPath","entry","highlander","useCaching","cachedBlame","getBlameForFileCore","customArguments","ignoreWhitespace","parse","getCurrentUser","msg","errorMessage","setBlameFailure","contents","sha1","getBlameForFileContentsCore","blame__contents","skipCache","lineToBlame","startLine","endLine","currentUser","slice","shas","Set","sortedAuthors","rev_parse__currentBranch","for_each_ref__branch","supportsChangeEvents","filterTags","tags","getTags","currentName","includeRefs","branchesAndTagsBySha","concat","bt","branchesAndTags","diff__shortstat","parseShortStat","getLog","refs","rev_list","getLogForFile","reverse","firstIfNotFound","isSha","config__get","shortlog","contributors","user","config__get_regex","local","substr","mappedAuthor","check_mailmap","cachedDiff","getDiffForFileCore","encoding","getEncoding","show__diff","diff__name_status","parseNameStatus","show__name_status","maxListItems","merges","Log","opts","maxSearchItems","searchArgs","Author","Changes","Files","Message","Sha","log__search","renames","fileHistoryFollowsRenames","cachedLog","getLogForFileCore","log__file","LogFile","repository","hasTrackingBranch","merge_base","relativeTo","getNextUri","getStatusForFile","indexStatus","filters","simple","nextRef","parseSimple","nextRenamedRef","renamedFile","parseSimpleRenamed","firstParent","workingTreeStatus","getPreviousUri","resolveToUri","uncommittedSha","invalidLineCount","log__file_recent","previousRef","reflog","getRemotesCore","includeAll","loadProviders","factory","filePathOrUri","skipCacheUpdate","isVslsScheme","findRepositoryForPath","parts","filePath","rev_parse__show_toplevel","getRepoPath","getRepositoryTree","getRepositories","repoPathOrUri","findSubstr","vslsPath","stash__list","porcelainVersion","validateVersion","status__file","show_ref__tags","parseWithRef","tag","ls_tree","ls_files","untracked","renamedRef","schemeOruri","fileNameOrUri","cacheKey","toKey","tracked","isTrackedCore","Boolean","tool","getDiffTool","difftool","difftool__dir_diff","isShaLike","endsWith","rev_parse","shaParentRegex","parentRef","ensuredRef","cat_file__resolve","cat_file__validate","add","directoryOrUri","stashName","deleteAfter","stash__apply","stash__delete","uris","stash__save","ensureGitVersion","pathspecs","u","stash__push","getGitVersion","feature","gitVersion","extension","getExtension","isActive","activate","getAPI","deletedOrMissing","getGitPath","isShaParent","singleLine","exit","1","2","toLoggable","Commands","registrableCommands","getCommandUri","getRepoPathOrActiveOrPrompt","placeholder","goBackCommand","getRepoPathOrActive","execute","getRepoPathOrPrompt","isCommandViewContextWithBranch","isCommandViewContextWithCommit","isCommandViewContextWithContributor","isCommandViewContextWithFile","isCommandViewContextWithFileCommit","isCommandViewContextWithFileRefs","isCommandViewContextWithRef","isCommandViewContextWithRemote","isCommandViewContextWithRepo","isCommandViewContextWithRepoPath","isScmResourceGroup","handle","resourceStates","isScmResourceState","resourceUri","Command","contextParsingOptions","_execute","cmd","encodeURIComponent","parseContext","preExecute","firstArg","edit","states","arg","scmResourceStates","groups","scmResourceGroups","ActiveEditorCommand","lastCommand","getLastCommand","ActiveEditorCachedCommand","EditorCommand","registerTextEditorCommand","executeCore","openEditor","rethrow","Open","showTextDocument","openWorkspace","openInNewWindow","OpenFolder","updateWorkspaceFolders","TraceLevel","ConsolePrefix","isDebuggingRegex","Logger","loggableFn","customLoggableFn","_level","Silent","output","createOutputChannel","contextOrMessage","Debug","shift","console","timestamp","appendLine","toLoggableParams","Verbose","warn","sanitize","loggable","instance","constructor","indexOf","now","toISOString","getUTCMilliseconds","debugOnly","loggableParams","_isDebugging","env","VSCODE_DEBUGGING_EXTENSION","gitOutput","freeze","emptyObj","rootSha","GitErrors","badRevision","notAValidObjectName","GitWarnings","notARepository","outsideRepository","noPath","noCommits","notFound","foundButNotInRevision","headNotABranch","noUpstream","unknownRevision","mustRunInWorkTree","patchWithConflicts","noRemoteRepositorySpecified","remoteConnectionError","notAGitCommand","GitErrorHandling","pendingCommands","cwd","configs","errors","errorHandling","runOpts","GCM_INTERACTIVE","GCM_PRESERVE_CREDS","LC_ALL","gitCommand","waiting","exception","splice","gitInfo","Ignore","Throw","defaultExceptionHandler","duration","logGitCommand","warning","isMatch","shaRegex","shaLikeRegex","uncommittedRegex","uncommittedStagedRegex","uncommitted","uncommittedStaged","max","abbreviatedShaLength","shaShortenRegex","rev","suffix","extract","normalizedRepoPath","gitMajor","gitMinor","regex","pathspec","stdin","staged","prune","defaultFormat","simpleFormat","forkPoint","since","stdout","log__recent","GIT_OPTIONAL_LOCKS","ResourceType","unknownGitUri","ViewNode","toLoggableName","ViewRefNode","ViewRefFileNode","nodeSupportsConditionalDismissal","nodeSupportsPaging","SubscribeableViewNode","_canSubscribe","disposables","onDidChangeNodeState","onNodeStateChanged","viewSupportsAutoRefresh","onDidChangeAutoRefresh","onAutoRefreshChanged","unsubscribe","ensureSubscription","_subscription","subscriptionPromise","onStateChanged","onParentStateChanged","canSubscribe","subscribe","viewSupportsNodeDismissal","picked","description","arrows","getRemote","types","Fetch","Push","ArrowsRightLeft","ArrowRight","ArrowLeft","getTrackingStatus","checked","SpaceThin","SpaceThinnest","getShortMessage","detail","getFormattedDiffStatus","repoStatus","getStatus","workingStatus","getUpstreamStatus","fetched","lastFetched","getLastFetched","fromNow","formattedName","annotation","cancellation","autoPick","goBack","items","getItems","itms","allowEnteringRefs","quickpick","createQuickPick","busy","getQuickPickIgnoreFocusOut","onCancellationRequested","onDidHide","onDidAccept","selectedItems","validateReference","showQuickPick","cancellable","findIndex","showQuickPickProgress","mapping","_getInfiniteCancellablePromise","_showQuickPickProgress","commandOrArgs","assign","KeyCommandQuickPickItem","MessageQuickPickItem","isStash","searchView","resultsLabel","showSearchResults","_goBack","fileHistoryView","copy","open","Branches","Commit","getFormattedPath","Repo","Revision","isFile","shortFileSha","default","OpenInRemote","Ellipsis","progressCancellation","nextPageCommand","currentCommandArgs","currentCommand","ArrowBack","ShowQuickBranchHistory","previousPageCommand","fromRepoPath","npc","matchOnDescription","matchOnDetail","_commit","fileLog","stash","workingUri","getWorkingUri","resolveReference","copyShaCommandArgs","CopyShaToClipboard","copyMessageCommandArgs","CopyMessageToClipboard","copyRemoteUrlCommandArgs","CopyRemoteFileUrlToClipboard","fileHistoryCommandArgs","commitDetailsCommandArgs","previousCommand","nextCommand","previousCommandArgs","nextUri","nextCommandArgs","ArrowRightHollow","onDidSelectItem","setKeyCommand","_file","getStatusOcticon","getFormattedDirectory","repoLog","nextSha","nextLog","onDidSelect","fs","stashApplyCommmandArgs","confirm","stashItem","StashApply","stashDeleteCommmandArgs","StashDelete","diffDirectoryCommmandArgs","DiffDirectory","showInViewCommand","showAllCommand","pickerOnly","goBackCommandArgs","keys","modeCfg","_status","realIndexStatus","getOcticon","OpenChangedFiles","stagedAdds","unstagedAdds","stagedChanges","unstagedChanges","stagedDeletes","unstagedDeletes","stagedAddsAndChanges","unstagedAddsAndChanges","unstaged","stagedStatus","unstagedStatus","workTreeStatus","numeric","sensitivity","repoStatusCommandArgs","ShowQuickRepoStatus","computed","computeStatus","unstagedIndex","CloseUnchangedFiles","stashListCommandArgs","ShowQuickStashList","ahead","branchHistoryCommandArgs","behind","StashSave","ClearFileAnnotationsCommand","ClearFileAnnotations","ComputingFileAnnotations","ToggleFileBlameCommand","toggle","ToggleFileHeatmapCommand","copyArgs","ToggleFileRecentChangesCommand","ToggleLineBlameCommand","ToggleLineBlame","CloseUnchangedFilesCommand","getStatusForRepo","CloseAllEditors","_onEditorChangedFn","loopCount","found","useId","usePosition","nextEditor","closeEditor","timeout","CloseActiveEditor","waitForEditorChange","NextEditor","timer","clearTimeout","CopyMessageToClipboardCommand","blameline","getCommit","CopyRemoteFileUrlToClipboardCommand","CopyShaToClipboardCommand","DiffBranchWithCommand","DiffHeadWith","DiffWorkingWith","DiffHeadWithBranch","DiffWorkingWithBranch","DiffDirectoryCommand","DiffDirectoryWithHead","ViewsOpenDirectoryDiff","ViewsOpenDirectoryDiffWithWorking","getDiffRefs","openDirectoryDiff","openExternal","DiffLineWithPreviousCommand","fromCommit","showCommitHasNoPreviousCommitWarningMessage","DiffLineWithWorkingCommand","showFileNotUnderSourceControlWarningMessage","DiffWithCommand","argsOrCommit","getMarkdownCommandArgsCore","lhsSha","rhsSha","getFileStatusForCommit","getVersionedUri","rhsSuffix","lhsSuffix","Diff","DiffWithNextCommand","DiffWithNext","DiffWithNextInDiff","exact","getNextDiffUris","DiffWithPreviousCommand","DiffWithPreviousInDiff","inDiffEditor","originalUri","getPreviousDiffUris","DiffWithRefCommand","DiffWithRef","DiffWithBranch","showNoRepositoryWarningMessage","renamedUri","renamedTitle","getDiffStatus","rename","DiffWithRevisionCommand","DiffWithRevision","reference","showProgress","icon","DiffWithWorkingCommand","DiffWithWorkingInDiff","showInformationMessage","Status","ResourceGroupType","ExternalDiffCommand","ExternalDiff","ExternalDiffAll","resourceGroupType","Index","isModified","BOTH_MODIFIED","INDEX_MODIFIED","MODIFIED","openDiffTool","InviteToLiveShareCommand","InviteToLiveShare","argsOrEmail","contact","getContact","invite","startSession","OpenBranchesInRemoteCommand","OpenBranchesInRemote","OpenBranchInRemoteCommand","OpenBranchInRemote","OpenChangedFilesCommand","OpenCommitInRemoteCommand","OpenCommitInRemote","argsOrSha","OpenFileInRemoteCommand","remotePart","branchPart","OpenFileRevisionCommand","OpenFileRevision","argsOrUri","OpenFileRevisionFromCommand","OpenFileRevisionFrom","OpenFileRevisionFromBranch","OpenInRemoteCommand","ensureRemoteBranchName","verb","shaSuffix","OpenRepoInRemoteCommand","OpenRepoInRemote","OpenWorkingFileCommand","CommandAbortError","QuickCommandBase","_stepsIterator","steps","_current","confirmations","createStep","counter","includeTags","singleRepo","branchesByRepo","tagsByRepo","b1","b2","t1","t2","oneRepo","getActiveRepository","canMoveNext","destination","destId","getBranchesAndOrTags","multiselect","createConfirmStep","fetchAll","flags","getCommitCount","pushAll","pullAll","rebase","showTags","buttons","Back","onDidClickButton","button","sanitizeLabel","GitCommandsCommand","GitCommands","commands","inCommand","previousLabel","canSelectMany","activeItems","onDidTriggerButton","onDidChangeValue","correlate","timed","FetchRepositoriesCommand","FetchRepositories","PullRepositoriesCommand","PullRepositories","PushRepositoriesCommand","PushRepositories","ResetSuppressedWarningsCommand","ResetSuppressedWarnings","searchByRegex","symbolToSearchByMap","searchByToSymbolMap","SearchCommitsCommand","SearchCommits","SearchCommitsInView","showInView","prefillOnly","originalArgs","_lastSearch","valueSelection","searchLabel","ShowLastQuickPickCommand","ShowLastQuickPick","ShowQuickBranchHistoryCommand","ShowQuickCommitDetailsCommand","ShowCommitInView","showLineUncommittedWarningMessage","showCommitNotFoundWarningMessage","ShowQuickCommitFileDetailsCommand","ShowQuickRevisionDetails","revisionUri","ShowQuickCurrentBranchHistoryCommand","ShowQuickFileHistoryCommand","ShowFileHistoryInView","ShowQuickRepoStatusCommand","ShowQuickStashListCommand","getStashList","ShowViewCommand","ShowCompareView","ShowFileHistoryView","ShowLineHistoryView","ShowRepositoriesView","ShowSearchView","lineHistoryView","repositoriesView","StashApplyCommand","stashApply","StashDeleteCommand","stashDelete","StashSaveCommand","StashSaveFiles","stashSave","SupportGitLensCommand","SupportGitLens","showSupportGitLensMessage","SwitchModeCommand","activeAnnotations","ToggleReviewModeCommand","ToggleReviewMode","ToggleZenModeCommand","ToggleZenMode","ToggleCodeLensCommand","toggleCodeLens","direction","supportsPaging","getNodeLastMaxCount","defaultItemLimit","previousLog","StatusAheadOfUpstream","StatusBehindUpstream","BranchStatusAheadOfUpstream","BranchStatusBehindUpstream","iconSuffix","starred","branchName","detached","getBasename","_children","showTrackingBranch","empty","Check","_key","_expanded","expanded","Folder","branchNodes","treeHierarchy","selectedRef","getRepositoryCount","None","ComparePicker","ComparePickerWithRef","_selectedRef","_comparePickerNode","getPinnedComparisons","Compare","ViewsCanCompare","promises","getRefName","autoCompare","instanceId","_ref","_compareWith","_pinned","_comparisonNotation","_instanceId","getCommitsQuery","includeDescription","getFilesQuery","CompareResults","updatePinnedComparison","getPinnableId","currentId","useSymmetricDifferenceNotation","diffComparisonNotation","Contributor","statusText","getContributors","Contributors","displayAsCommit","inFileHistory","FileHistory","directory","onRepoChanged","onDidChangeFileSystem","onRepoFileSystemChanged","stopWatchingFileSystem","startWatchingFileSystem","Repository","resetChild","_child","_fileUri","commitish","_baseRef","fileUri","ActiveFileHistory","onActiveEditorChanged","_editorContents","getBlameForRangeContents","getBlameForRange","authorDate","committerDate","firstLine","lastLine","firstActive","LineHistory","_base","_selection","ActiveLineHistory","isEqual","record","HEAD","ReflogRecord","formatDateFromNow","formatDate","getIncomingActivity","records","Reflog","displayPath","domain","Remote","Remotes","StashFile","stashFormat","stashDescriptionFormat","stashFileFormat","stashFileDescriptionFormat","Stash","Stashes","hasStagedChanges","hasUnstagedChanges","_hasStagedChanges","_hasUnstagedChanges","collapsibleState","StatusFileCommits","getStatusIcon","getChangedIn","_label","_description","statusFileDescriptionFormat","_folderName","statusFileFormat","_relativePath","changedIn","includeWorkingTree","older","setMilliseconds","getMilliseconds","toStatusFile","priority","aheadFiles","uniques","stats","getChangedFilesCount","StatusFiles","Tag","tagNodes","Tags","hasTimeRegex","_lastFetched","showBranchComparison","insiders","lastFetchedTooltip","formatLastFetched","includeTime","upstreamStatus","onFileSystemChanged","defaultDateShortFormat","resetChildren","Repositories","normalizedPath","onDidChangeRepositories","onRepositoriesChanged","autoReveal","containsUri","getCommandArgs","Search","commitsQuery","SearchResults","SuppressedMessages","Messages","showMessage","CommitHasNoPreviousCommitWarning","CommitNotFoundWarning","showOutputChannel","FileNotUnderSourceControlWarning","GitDisabledWarning","GitVersionWarning","LineUncommittedWarning","NoRepositoryWarning","ViewsHideSupportGitLens","suppressedMessage","SupportGitLensNotification","previousVersion","suppressionKey","dontShowAgain","messages","GitUri","commitOrRepoPath","authority","fragment","ensureValidUNCPath","versionedPath","getDirectory","relativeFsPath","useVersionedPath","useVslsScheme","fileOrName","normalizedFileName","uriOrRef","fileNameOrFile","addLeadingSlash","MessageNode","_message","_tooltip","_iconPath","CommandMessageNode","_command","PagerNode","_previousNode","_pageSize","pageItemLimit","showMoreNodeChildren","Pager","ShowMoreNode","itemType","pageSize","Comparer","textDocumentComparer","TextDocumentComparer","textEditorComparer","TextEditorComparer","uriComparer","UriComparer","_terminal","_terminalCwd","runGitCommandInTerminal","terminal","createTerminal","onDidCloseTerminal","sendText","ensureTerminal","keyNoopCommand","mappings","KeyboardScope","updateKeyCommandsContext","Key","Keyboard","begin","RemoteResourceType","getNameFromRemoteResource","RemoteProvider","protocol","custom","_name","baseUrl","openUrl","getUrlForBranch","getUrlForBranches","getUrlForCommit","getUrlForFile","getUrlForRepository","CommitNode","commitFormat","commitDescriptionFormat","markers","insertDateMarkers","iterable","showRelativeDateMarkers","daysAgo","marker","setUTCHours","nextDate","CommitFileNode","_options","resourceType","getCommitDescriptionTemplate","getCommitFileDescriptionTemplate","getCommitTemplate","getCommitFileTemplate","commitFileFormat","commitFileDescriptionFormat","AnnotationsToggleMode","CodeLensCommand","CodeLensScopes","CustomRemoteType","DateSource","DateStyle","FileAnnotationType","GravatarDefaultStyle","HighlightLocations","KeyMap","StatusBarCommand","ViewBranchesLayout","ViewFilesLayout","ViewLocation","ViewShowBranchComparison","GitFile","includeOriginal","getOriginalRelativePath","getRelativePath","statusIconsMap","A","C","D","M","R","T","U","X","B","statusOcticonsMap","missing","statusTextMap","getStatusText","lineParts","relativeFileName","authorEmail","authorTimeZone","committerTimeZone","summary","parseEntry","branchWithTrackingRegex","emptyEntry","diffRegex","diffRangeRegex","fileStatusRegex","fileStatusAndSummaryRegex","fileStatusAndSummaryRenamedFileRegex","fileStatusAndSummaryRenamedFilePathRegex","logFileSimpleRegex","logFileSimpleRenamedRegex","logFileSimpleRenamedFilesRegex","renamedFileName","renamedMatch","truncationCount","committedDate","parentShas","fileStats","insertions","deletions","nextFileName","skipRef","diffFile","diffRenamed","renamed","lastIndex","reflogRegex","reflogHEADRegex","head","headDate","headSha","recordDate","remoteRegex","urlRegex","providerFactory","uniqueness","parseGitUrl","shortlogRegex","fileNames","aheadStatusV1Regex","behindStatusV1Regex","parseV1","parseV2","aheadStatus","behindStatus","rawStatus","file1","file2","parseStatusFile","tagWithRefRegex","tagWithAnnotationRegex","treeRegex","GitTreeParser","Strings","getCommonBase","s1","s2","delimiter","char","secs","nanosecs","pathNormalizeRegex","pathStripTrailingSlashRegex","tokenRegex","tokenSanitizeRegex","tokenSanitizeReplacement","template","tokens","option","collapseWhitespace","padDirection","interpolationMap","padLeft","padTo","padding","padRight","j","md5","digest","stripTrailingSlash","normalized","padLeftOrTruncate","truncate","padOrTruncate","abs","padRightOrTruncate","illegalCharsForFSRegex","ellipsis","sanitizeForFileSystem","replacement","splitLast","splitter","lastIndexOf","ansiRegex","containsNonAsciiRegex","emoji","joiners","graphemes","code","codePointAt","isFullwidthCodePoint","offset","cp","GitCommitType","CommitFormatting","dateSource","dateStyle","GitCommit","_fileName","Committed","Absolute","committerDateFormatter","authorDateFormatter","dateFormatter","fallback","FolderNode","containsWorkingFiles","getFileNesting","nesting","nestingThreshold","threshold","ResultsCommitsNode","_commitsQuery","ResultsCommits","getCommitsQueryResults","TimeoutError","_commitsQueryResults","correlationContext","correlationCounter","clearCorrelationContext","correlationId","setCorrelationContext","LogInstanceNameFn","logName","logFn","parameters","getParameters","condition","instanceName","enter","argFns","argFn","logWithDebugParams","logError","timing","logResult","catch","gravatarCache","missingGravatarHash","presenceCache","clearGravatarCache","hash","gravatar","getPresenceDataUri","dataUri","encodeURI","issueEnricherRegex","gitRegex","legacyDefaultCollectionRegex","orgAndProjectRegex","sshDomainRegex","sshPathRegex","legacy","org","project","_displayPath","prEnricherRegex","formatName","urls","getContext","fileLine","fileRange","fileInCommit","fileInBranch","repoBase","issueEnricher3rdParyRegex","defaultProviders","matcher","creator","rc","getCustomProvider","Bitbucket","BitbucketServer","Custom","GitHub","GitLab","isWindows","platform","runDownPath","exe","isExecutable","PATH","haystack","needle","isGroup","gid","getgid","isUser","uid","getuid","findExecutable","possibleExts","ext","possibleFullPath","SYSTEMROOT","execPath","bufferExceededRegex","run","stdinEncoding","maxBuffer","proc","stderr","Buffer","safer","Safer","encodingOrOffset","TypeError","alloc","fill","RangeError","buf","kStringMaxLength","binding","constants","MAX_LENGTH","kMaxLength","MAX_STRING_LENGTH","GitBranch","isDetached","formatDetached","remoteName","StarredBranches","updateStarred","_document","_eventDelegates","_onDidBlameStateChange","_forceDirtyStateChangeOnNextDocumentChange","_hasRemotes","_isDirtyIdle","_isTracked","_blameFailed","_repo","waitUntil","onRepositoryChanged","ActiveFileStatus","wasBlameable","forceBlameChange","onDidBlameStateChange","isRevision","_onDidChangeBlameState","_onDidChangeDirtyState","_onDidTriggerDirtyIdle","_documentMap","onDidChangeTextDocument","onTextDocumentChanged","onDidSaveTextDocument","onTextDocumentSaved","_dirtyIdleTriggerDelay","_dirtyIdleTriggeredDebounced","_timer","addCore","forceDirtyStateChangeOnNextDocumentChange","resetForceDirtyStateChangeOnNextDocumentChange","fireDocumentDirtyStateChanged","documentOrId","_add","_get","BinaryTextDocument","MissingRevisionTextDocument","ensureInitialized","_dirtyStateChangedDebounced","eol","LF","isClosed","isUntitled","GitDocumentState","cache","Promises","obj","ms","CompareBranchNode","comparisons","BranchComparisons","compareWith","compareWithWorkingTree","CompareBranch","updateCompareWith","ResultsFilesNode","_filesQuery","ResultsFiles","_filesQueryResults","emojiMap","emojiRegex","emojify","bomHandling","iconv","encodings","defaultCharUnicode","defaultCharSingleByte","encode","str","encoder","getEncoder","write","trail","decode","skipDecodeWarning","decoder","getDecoder","encodingExists","enc","getCodec","toEncoding","fromEncoding","_codecDataCache","_canonicalizeEncoding","codecOptions","codec","codecDef","encodingName","bomAware","addBOM","PrependBOM","stripBOM","StripBOM","nodeVer","versions","nodeVerArr","GitStatus","deleted","ArrowDown","ArrowUp","GitStatusFile","getChangedValue","nameStatusDiffRegex","shortStatDiffRegex","unifiedDiffRegex","GitDiffParser","previousStart","previousCount","currentStart","currentCount","currentLines","previousLines","hunkLines","GitReflogRecord","_selector","_previousSha","emptyStats","GitLogCommit","_fileStats","ResultsFileNode","ResultsFile","statusIcon","global","freeSelf","self","objectProto","nativeObjectToString","symToStringTag","isOwn","unmasked","nullTag","undefinedTag","symbolTag","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","other","valueOf","isBinary","FUNC_ERROR_TEXT","nativeMax","nativeMin","min","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","invokeFunc","thisArg","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","leadingEdge","flush","INFINITY","MAX_INTEGER","remainder","Functions","cached","comma","openBrace","openParen","closeParen","fnBodyRegex","fnBodyStripCommentsRegex","fnBodyStripParamDefaultValueRegex","fnBody","close","param","propOrMatcher","propOfCore","interval","clearInterval","setInterval","spaceReplacementRegex","collapsableWhitespace","_item","formatter","dateFormatOrOptions","_formatter","escapeMarkdownRegex","markdownHeaderReplacement","hasTokenRegexMap","formatAuthorDate","formatAuthorDateFromNow","defaultDateStyle","_authorDate","_authorDateAgo","formatCommitterDate","formatCommitterDateFromNow","_committerDate","_committerDateAgo","_date","_dateAgo","_padOrTruncate","ago","_dateOrAgo","agoOrDate","authorAgo","_authorDateOrAgo","authorAgoOrDate","avatar","toLocaleLowerCase","changesShort","MuchLessThan","EqualsTriple","ArrowUpRight","Envelope","MiddleEllipsis","committerAgo","_committerDateOrAgo","committerAgoOrDate","enrichMessage","branchAndTagTips","tips","fromTemplateCore","RegExp","originalPath","statusFile","Pencil","EnDash","RequestType","GitCommandRequestType","RepositoriesInFolderRequestType","defaultWhitelistFn","gitWhitelist","leadingSlashRegex","_api","_service","_localToSharedPaths","_sharedToLocalPaths","onDidChangeIsServiceAvailable","onAvailabilityChanged","onRequest","onGitCommandRequest","onRepositoriesInFolderRequest","api","service","shareService","ServiceId","unshareService","requestType","handler","available","localPath","sharedPath","convertLocalUriToShared","localPaths","_localPathsRegex","sharedPaths","_sharedPathsRegex","request","isRootWorkspace","shared","localCwd","isBuffer","convertSharedUriToLocal","folderUri","vslsUri","localUri","sharedUri","vslsUriRootRegex","isServiceAvailable","getSharedService","response","sendRequest","vslsUriPrefixRegex","_host","_guest","Readonly","_waitForReady","_onReady","onDidChangeSession","onLiveShareSessionChanged","getContacts","contacts","share","session","role","Host","liveshare","allowGuestAccess","Guest","connect","h","z","utcOffset","year","month","clone","ceil","y","w","Q","$","weekdays","months","pl","locale","$L","utc","$u","$d","NaN","UTC","init","$y","getFullYear","$M","getMonth","$D","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","$utils","isValid","isSame","startOf","endOf","isAfter","isBefore","$g","day","hour","minute","second","millisecond","unix","toDate","$locale","weekStart","$set","daysInMonth","subtract","meridiem","YY","YYYY","MM","MMM","monthsShort","MMMM","DD","dd","weekdaysMin","ddd","weekdaysShort","dddd","H","HH","hh","mm","ss","SSS","Z","getTimezoneOffset","toJSON","toUTCString","extend","isDayjs","en","Ls","vscode","liveShareApiVersion","getApi","liveshareExtension","extensions","extensionApi","getApiAsync","Role","Access","View","ViewItem","LARGE_ARRAY_SIZE","CORE_ERROR_TEXT","HASH_UNDEFINED","MAX_MEMOIZE_SIZE","PLACEHOLDER","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","WRAP_BIND_FLAG","WRAP_BIND_KEY_FLAG","WRAP_CURRY_BOUND_FLAG","WRAP_CURRY_FLAG","WRAP_CURRY_RIGHT_FLAG","WRAP_PARTIAL_FLAG","WRAP_PARTIAL_RIGHT_FLAG","WRAP_ARY_FLAG","WRAP_REARG_FLAG","WRAP_FLIP_FLAG","DEFAULT_TRUNC_LENGTH","DEFAULT_TRUNC_OMISSION","HOT_COUNT","HOT_SPAN","LAZY_FILTER_FLAG","LAZY_MAP_FLAG","MAX_ARRAY_LENGTH","MAX_ARRAY_INDEX","HALF_MAX_ARRAY_LENGTH","wrapFlags","argsTag","arrayTag","asyncTag","boolTag","dateTag","domExcTag","errorTag","funcTag","genTag","mapTag","numberTag","objectTag","proxyTag","regexpTag","setTag","stringTag","weakMapTag","weakSetTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reEmptyStringLeading","reEmptyStringMiddle","reEmptyStringTrailing","reEscapedHtml","reUnescapedHtml","reHasEscapedHtml","reHasUnescapedHtml","reEscape","reEvaluate","reInterpolate","reIsDeepProp","reIsPlainProp","rePropName","reRegExpChar","reHasRegExpChar","reTrimStart","reTrimEnd","reWrapComment","reWrapDetails","reSplitDetails","reAsciiWord","reEscapeChar","reEsTemplate","reFlags","reIsHostCtor","reIsUint","reLatin","reNoMatch","reUnescapedString","rsComboRange","rsComboMarksRange","rsBreakRange","rsMathOpRange","rsAstral","rsBreak","rsCombo","rsDigits","rsDingbat","rsLower","rsMisc","rsFitz","rsNonAstral","rsRegional","rsSurrPair","rsUpper","rsMiscLower","rsMiscUpper","reOptMod","rsSeq","rsEmoji","rsSymbol","reApos","reComboMark","reUnicode","reUnicodeWord","reHasUnicode","reHasUnicodeWord","contextProps","templateCounter","typedArrayTags","cloneableTags","stringEscapes","freeParseFloat","freeGlobal","freeExports","nodeType","freeModule","moduleExports","freeProcess","nodeUtil","nodeIsArrayBuffer","isArrayBuffer","nodeIsDate","isDate","nodeIsMap","isMap","nodeIsRegExp","isRegExp","nodeIsSet","isSet","nodeIsTypedArray","isTypedArray","arrayAggregator","array","setter","iteratee","arrayEach","arrayEachRight","arrayEvery","arrayFilter","resIndex","arrayIncludes","baseIndexOf","arrayIncludesWith","comparator","arrayMap","arrayPush","arrayReduce","initAccum","arrayReduceRight","arraySome","asciiSize","baseProperty","baseFindKey","collection","eachFunc","baseFindIndex","fromIndex","fromRight","strictIndexOf","baseIsNaN","baseIndexOfWith","baseMean","baseSum","basePropertyOf","baseReduce","baseTimes","baseUnary","baseValues","props","cacheHas","charsStartIndex","strSymbols","chrSymbols","charsEndIndex","deburrLetter","escapeHtmlChar","escapeStringChar","chr","hasUnicode","string","mapToArray","overArg","replaceHolders","setToArray","setToPairs","stringSize","unicodeSize","stringToArray","unicodeToArray","asciiToArray","unescapeHtmlChar","runInContext","defaults","arrayProto","funcProto","coreJsData","funcToString","idCounter","maskSrcKey","IE_PROTO","objectCtorString","oldDash","reIsNative","allocUnsafe","getPrototype","getPrototypeOf","objectCreate","propertyIsEnumerable","spreadableSymbol","isConcatSpreadable","symIterator","getNative","ctxClearTimeout","ctxNow","ctxSetTimeout","nativeCeil","nativeFloor","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","nativeIsFinite","isFinite","nativeJoin","nativeKeys","nativeNow","nativeParseInt","nativeRandom","random","nativeReverse","DataView","WeakMap","nativeCreate","metaMap","realNames","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","symbolToString","lodash","isObjectLike","LazyWrapper","LodashWrapper","wrapperClone","baseCreate","proto","isObject","baseLodash","chainAll","__wrapped__","__actions__","__chain__","__index__","__values__","__dir__","__filtered__","__iteratees__","__takeCount__","__views__","Hash","ListCache","MapCache","SetCache","__data__","Stack","arrayLikeKeys","inherited","isArr","isArg","isArguments","isBuff","isType","skipIndexes","isIndex","arraySample","baseRandom","arraySampleSize","shuffleSelf","copyArray","baseClamp","arrayShuffle","assignMergeValue","eq","baseAssignValue","assignValue","objValue","assocIndexOf","baseAggregator","baseEach","baseAssign","copyObject","baseAt","lower","upper","baseClone","bitmask","customizer","isDeep","isFlat","isFull","input","initCloneArray","getTag","isFunc","cloneBuffer","initCloneObject","getSymbolsIn","copySymbolsIn","keysIn","baseAssignIn","getSymbols","copySymbols","Ctor","cloneArrayBuffer","dataView","byteOffset","byteLength","cloneDataView","cloneTypedArray","regexp","cloneRegExp","initCloneByTag","stacked","subValue","getAllKeysIn","getAllKeys","baseConformsTo","baseDelay","baseDifference","isCommon","valuesLength","outer","valuesIndex","templateSettings","getMapData","pairs","createBaseEach","baseForOwn","baseEachRight","baseForOwnRight","baseEvery","baseExtremum","isSymbol","baseFilter","baseFlatten","isStrict","isFlattenable","baseFor","createBaseFor","baseForRight","baseFunctions","isFunction","baseGet","castPath","baseGetAllKeys","keysFunc","symbolsFunc","baseGetTag","getRawTag","objectToString","baseGt","baseHas","baseHasIn","baseIntersection","arrays","othLength","othIndex","caches","maxLength","Infinity","seen","baseInvoke","baseIsArguments","baseIsEqual","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","convert","isPartial","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","objLength","skipCtor","othValue","compared","objCtor","othCtor","equalObjects","baseIsEqualDeep","baseIsMatch","matchData","noCustomizer","srcValue","baseIsNative","baseIteratee","identity","baseMatchesProperty","baseMatches","baseKeys","isPrototype","baseKeysIn","nativeKeysIn","isProto","baseLt","baseMap","isArrayLike","getMatchData","matchesStrictComparable","isKey","isStrictComparable","hasIn","baseMerge","srcIndex","mergeFunc","safeGet","newValue","isTyped","isArrayLikeObject","isPlainObject","toPlainObject","baseMergeDeep","baseNth","baseOrderBy","iteratees","orders","getIteratee","comparer","baseSortBy","objCriteria","criteria","othCriteria","ordersLength","compareAscending","order","compareMultiple","basePickBy","baseSet","basePullAll","basePullAt","indexes","baseUnset","baseRepeat","baseRest","setToString","overRest","baseSample","baseSampleSize","nested","baseSetData","baseSetToString","constant","baseShuffle","baseSlice","baseSome","baseSortedIndex","retHighest","low","high","baseSortedIndexBy","valIsNaN","valIsNull","valIsSymbol","valIsUndefined","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","setLow","baseSortedUniq","baseToNumber","baseToString","baseUniq","createSet","seenIndex","baseUpdate","updater","baseWhile","isDrop","baseWrapperValue","action","baseXor","baseZipObject","assignFunc","valsLength","castArrayLikeObject","castFunction","stringToPath","castRest","castSlice","arrayBuffer","typedArray","valIsDefined","valIsReflexive","composeArgs","partials","holders","isCurried","argsIndex","argsLength","holdersLength","leftIndex","leftLength","rangeLength","isUncurried","composeArgsRight","holdersIndex","rightIndex","rightLength","isNew","createAggregator","initializer","createAssigner","assigner","guard","isIterateeCall","createCaseFirst","methodName","charAt","createCompounder","words","deburr","createCtor","thisBinding","createFind","findIndexFunc","createFlow","flatRest","funcs","prereq","thru","wrapper","getFuncName","funcName","getData","isLaziable","plant","createHybrid","partialsRight","holdersRight","argPos","ary","arity","isAry","isBind","isBindKey","isFlip","getHolder","holdersCount","countHolders","newHolders","createRecurry","arrLength","oldArray","reorder","createInverter","toIteratee","baseInverter","createMathOperation","operator","createOver","arrayFunc","createPadding","charsLength","createRange","toFinite","baseRange","createRelationalOperation","toNumber","wrapFunc","isCurry","newData","setData","setWrapToString","createRound","precision","toInteger","pair","noop","createToPairs","baseToPairs","createWrap","srcBitmask","newBitmask","isCombo","mergeData","createCurry","createPartial","createBind","customDefaultsAssignIn","customDefaultsMerge","customOmitClone","arrValue","otherFunc","getValue","stubArray","hasPath","hasFunc","isLength","ArrayBuffer","ctorString","isMaskable","stubFalse","otherArgs","shortOut","insertWrapDetails","updateWrapDetails","getWrapDetails","lastCalled","stamp","remaining","rand","memoizeCapped","quote","subString","difference","differenceBy","differenceWith","findLastIndex","intersection","intersectionBy","intersectionWith","pullAt","unionBy","unionWith","unzip","unzipWith","without","xor","xorBy","xorWith","zip","zipWith","chain","interceptor","wrapperAt","countBy","findLast","forEachRight","invokeMap","keyBy","partition","sortBy","bindKey","defer","delay","memoized","Cache","negate","overArgs","transforms","funcsLength","partial","partialRight","rearg","gt","gte","isError","isInteger","isNumber","isString","lt","lte","toArray","iteratorToArray","toLength","assignIn","assignInWith","assignWith","at","propsIndex","propsLength","defaultsDeep","mergeWith","invert","invertBy","invoke","merge","omit","basePick","pickBy","toPairs","toPairsIn","camelCase","word","capitalize","upperFirst","kebabCase","lowerCase","lowerFirst","snakeCase","startCase","upperCase","toUpperCase","hasUnicodeWord","unicodeWords","asciiWords","attempt","bindAll","methodNames","flow","flowRight","methodOf","mixin","overEvery","overSome","basePropertyDeep","rangeRight","augend","addend","divide","dividend","divisor","multiply","multiplier","multiplicand","minuend","subtrahend","castArray","chunk","cond","conforms","baseConforms","properties","curry","curryRight","drop","dropRight","dropRightWhile","dropWhile","baseFill","flatMapDeep","flatMapDepth","flattenDeep","flattenDepth","flip","fromPairs","functions","functionsIn","initial","mapKeys","mapValues","matches","matchesProperty","nthArg","omitBy","orderBy","propertyOf","pullAllBy","pullAllWith","remove","sampleSize","setWith","shuffle","sortedUniq","sortedUniqBy","spread","tail","takeRight","takeRightWhile","takeWhile","tap","throttle","toPath","isArrLike","unary","uniq","uniqBy","uniqWith","unset","updateWith","valuesIn","wrap","zipObject","zipObjectDeep","entriesIn","extendWith","clamp","cloneDeep","cloneDeepWith","cloneWith","conformsTo","defaultTo","escapeRegExp","findKey","findLastKey","forIn","forInRight","forOwn","forOwnRight","inRange","baseInRange","isBoolean","isElement","isEqualWith","isMatchWith","isNaN","isNative","isNil","isNull","isSafeInteger","isUndefined","isWeakMap","isWeakSet","strictLastIndexOf","maxBy","mean","meanBy","minBy","stubObject","stubString","stubTrue","nth","noConflict","strLength","padEnd","padStart","radix","floating","temp","reduceRight","sample","sortedIndex","sortedIndexBy","sortedIndexOf","sortedLastIndex","sortedLastIndexBy","sortedLastIndexOf","sum","sumBy","settings","isEscaping","isEvaluating","imports","importsKeys","importsValues","reDelimiters","evaluate","sourceURL","escapeValue","interpolateValue","esTemplateValue","evaluateValue","variable","times","toLower","toSafeInteger","toUpper","trimEnd","trimStart","omission","newEnd","unescape","uniqueId","each","eachRight","VERSION","isFilter","takeName","dropName","checkIteratee","isTaker","lodashFunc","retUnwrapped","isLazy","useLazy","isHybrid","isUnwrapped","onlyLazy","chainName","isRight","getView","iterLength","takeCount","iterIndex","wrapped","GitBlameCommit","GitContributor","GitDiffHunk","previousPosition","parseHunk","GitRemoteType","GitRemote","defaultRemote","DefaultRemote","RepositoryChange","RepositoryChangeEvent","solely","_onDidChangeFileSystem","_fireChangeDebounced","_fireFileSystemChangeDebounced","_fsWatchCounter","_pendingChanges","_closed","onDidDelete","_providers","_remotes","fireChange","fireFileSystemChange","_branch","checkoutCore","fetchCore","stat","remotesCfg","pullCore","pushCore","StarredRepositories","_fsWatcherDisposable","reasons","fireChangeCore","fireFileSystemChangeCore","GitStashCommit","GitTag","ordinal","weekYear","week","future","past","yy","toNow","findSpecificGit","foundPath","raw","findSystemGitWin32","basePath","findGitPath","findGitDarwin","configure","gitlensVersion","packageJSON","showGitDisabledErrorMessage","globalState","GitLensVersion","migrate","formatMigrationFn","migrateSettings","compareGitVersion","showGitVersionUnsupportedErrorMessage","notifyOnUnsupportedGitVersion","showWhatsNewAfterUpgrades","prevMajor","prevMinor","showWhatsNewMessage","showSetupViewLayoutMessage","showWelcomePage","deactivate","PrependBOMWrapper","StripBOMWrapper","pass","InternalCodec","InternalEncoderBase64","InternalEncoderCesu8","InternalDecoderCesu8","utf8","cesu8","unicode11utf8","ucs2","utf16le","binary","base64","_internal","InternalEncoder","InternalDecoder","StringDecoder","prevStr","acc","contBytes","accBytes","completeQuads","bufIdx","charCode","curByte","fromCharCode","Utf32Codec","isLE","Utf32Encoder","highSurrogate","Utf32Decoder","badChar","overflow","Utf32AutoCodec","Utf32AutoEncoder","defaultEncoding","Utf32AutoDecoder","initialBytes","initialBytesLen","detectEncoding","readUInt32BE","readUInt32LE","invalidLE","invalidBE","asciiCharsLE","asciiCharsBE","_len","b0","b3","_utf32","utf32le","utf32be","ucs4le","ucs4be","src","dst","write32","writeUInt32LE","writeUInt32BE","readUInt16LE","isHighSurrogate","isLowSurrogate","codepoint","goodLength","writeUInt16LE","utf32","ucs4","Utf16BECodec","Utf16BEEncoder","Utf16BEDecoder","overflowByte","Utf16Codec","Utf16Encoder","Utf16Decoder","utf16be","tmp","buf2","utf16","Utf7Codec","utf7","unicode11utf7","Utf7Encoder","Utf7Decoder","nonDirectChars","inBase64","base64Accum","base64Regex","base64Chars","plusChar","minusChar","andChar","Utf7IMAPCodec","Utf7IMAPEncoder","base64AccumIdx","Utf7IMAPDecoder","lastI","b64str","canBeDecoded","utf7imap","uChar","base64IMAPChars","SBCSCodec","asciiString","decodeBuf","encodeBuf","SBCSEncoder","SBCSDecoder","_sbcs","newBuf","idx1","idx2","_dbcs","DBCSCodec","UNASSIGNED","GB18030_CODE","NODE_START","UNASSIGNED_NODE","table","mappingTable","decodeTables","decodeTableSeq","_addDecodeChunk","encodeTable","encodeTableSeq","skipEncodeChars","encodeSkipVals","_fillEncodeTable","encodeAdd","_setEncodeChar","defCharSB","gb18030","thirdByteNodeIdx","thirdByteNode","fourthByteNodeIdx","fourthByteNode","secondByteNodeIdx","secondByteNode","DBCSEncoder","leadSurrogate","seqObj","DBCSDecoder","nodeIdx","prevBuf","findIdx","_getDecodeTrieNode","addr","bytes","curAddr","writeTable","part","codeTrail","seq","_getEncodeBucket","uCode","dbcsCode","bucket","_setEncodeSequence","oldVal","mbCode","nextChar","resCode","subtable","uChars","gbChars","prevBufOffset","seqStart","curSeq","ptr","uCodeLead","ret","Transform","IconvLiteEncoderStream","conv","decodeStrings","IconvLiteDecoderStream","encodeStream","decodeStream","supportsStreams","_collect","collect","_transform","_flush","cb","chunks","supportsNodeEncodingsExtension","extendNodeEncodings","nodeNativeEncodings","isNativeEncoding","SlowBuffer","SlowBufferToString","SlowBufferWrite","BufferIsEncoding","isEncoding","BufferByteLength","BufferToString","BufferWrite","_offset","_length","_encoding","Readable","ReadableSetEncoding","setEncoding","_readableState","undoExtendNodeEncodings","webpackPolyfill","deprecate"],"mappings":"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,e,8CAcD,GADC,e,qCAsDD,GADC,e,oDAUD,GADC,e,gDASD,GADC,e,oDAMD,GADC,e,6CA4BD,GADC,e,2CA6DD,GAJC,YAA6B,CAC1BsuC,KAAMvC,eAAuBA,IAC7BsC,YAAY,K,uCA8EhB,GADC,e,yCASD,GADC,e,0CAoBD,GADC,e,+CAeD,GADC,e,8CAyBD,GADC,e,+CAQD,GADC,e,uCAWD,GADC,e,4CAWD,GADC,e,yCAWD,GADC,e,8CASD,GADC,e,wCAMD,GADC,e,yCAMD,GADC,e,uCAtiFD,GADC,e,8BA+jFD,GADC,e,qDC1sFL,gyBAwBYK,EAxBZ,4DAwBA,SAAYA,GACR,sDACA,oDACA,8DACA,0DACA,sEACA,kDACA,wCACA,wDACA,sCAEA,kDACA,4CAEA,wDACA,4CACA,8BAEA,0CACA,oCACA,sCACA,kDACA,8CACA,0DACA,sDACA,8CACA,4CACA,wDACA,oDACA,sCACA,gDACA,gDACA,8CACA,sDACA,kDACA,kDACA,8CACA,8CACA,sDAEA,kEACA,sCACA,8CACA,4CACA,8CACA,8CACA,oCACA,4DACA,8CACA,2CACA,2DACA,4CACA,oDACA,wDACA,oDACA,gDACA,0DACA,0DACA,kEACA,+DACA,sDACA,oDACA,8DACA,kDACA,sDACA,0CACA,4CACA,8CACA,+EACA,wFACA,wFACA,yFACA,4FACA,4CACA,kCACA,oCACA,gCACA,0CACA,0CACA,kCACA,0CACA,4CACA,gDACA,4DACA,4CACA,8CACA,wCACA,2DACA,iFAxFJ,CAAYA,MAAQ,KA+FpB,MAAMC,EAA4C,GAE3C,SAASjyB,IACZ,OAAQjgB,IACJkyC,EAAoBn0C,KAAKiC,IAI1B,SAASssB,EAAiBhS,GAC7B,IAAK,MAAM9f,KAAK03C,EACZ53B,EAAQ7F,cAAc1W,KAAK,IAAIvD,GAIhC,SAAS23C,EAAczpC,EAAWL,GACrC,GAAIK,aAAe,MAAK,OAAOA,EAC/B,GAAc,MAAVL,EAAgB,OAEpB,MAAMD,EAAWC,EAAOD,SACxB,OAAgB,MAAZA,EAEGA,EAASM,SAFhB,EAKGzK,eAAem0C,EAClB1pC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","file":"extension.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 79);\n","module.exports = require(\"vscode\");","'use strict';\n\nexport namespace Arrays {\n    export function countUniques<T>(source: T[], accessor: (item: T) => string): { [key: string]: number } {\n        const uniqueCounts = Object.create(null);\n        for (const item of source) {\n            const value = accessor(item);\n            uniqueCounts[value] = (uniqueCounts[value] || 0) + 1;\n        }\n        return uniqueCounts;\n    }\n\n    export function filterMap<T, TMapped>(\n        source: T[],\n        predicateMapper: (item: T) => TMapped | null | undefined\n    ): TMapped[] {\n        return source.reduce(\n            (accumulator, current) => {\n                const mapped = predicateMapper(current);\n                if (mapped != null) {\n                    accumulator.push(mapped);\n                }\n                return accumulator;\n            },\n            [] as TMapped[]\n        );\n    }\n\n    export function filterMapAsync<T, TMapped>(\n        source: T[],\n        predicateMapper: (item: T) => Promise<TMapped | null | undefined>\n    ): Promise<TMapped[]> {\n        return source.reduce(\n            async (accumulator, current) => {\n                const mapped = await predicateMapper(current);\n                if (mapped != null) {\n                    accumulator.push(mapped);\n                }\n                return accumulator;\n            },\n            [] as any\n        );\n    }\n\n    export function groupBy<T>(source: T[], accessor: (item: T) => string): { [key: string]: T[] } {\n        return source.reduce((groupings, current) => {\n            const value = accessor(current);\n            groupings[value] = groupings[value] || [];\n            groupings[value].push(current);\n            return groupings;\n        }, Object.create(null));\n    }\n\n    export function groupByMap<TKey, TValue>(source: TValue[], accessor: (item: TValue) => TKey): Map<TKey, TValue[]> {\n        return source.reduce((groupings, current) => {\n            const value = accessor(current);\n            const group = groupings.get(value) || [];\n            groupings.set(value, group);\n            group.push(current);\n            return groupings;\n        }, new Map<TKey, TValue[]>());\n    }\n\n    export function groupByFilterMap<TKey, TValue, TMapped>(\n        source: TValue[],\n        accessor: (item: TValue) => TKey,\n        predicateMapper: (item: TValue) => TMapped | null | undefined\n    ): Map<TKey, TMapped[]> {\n        return source.reduce((groupings, current) => {\n            const mapped = predicateMapper(current);\n            if (mapped != null) {\n                const value = accessor(current);\n                const group = groupings.get(value) || [];\n                groupings.set(value, group);\n                group.push(mapped);\n            }\n            return groupings;\n        }, new Map<TKey, TMapped[]>());\n    }\n\n    export interface HierarchicalItem<T> {\n        name: string;\n        relativePath: string;\n        value?: T;\n\n        parent?: HierarchicalItem<T>;\n        children: Map<string, HierarchicalItem<T>> | undefined;\n        descendants: T[] | undefined;\n    }\n\n    export function makeHierarchical<T>(\n        values: T[],\n        splitPath: (i: T) => string[],\n        joinPath: (...paths: string[]) => string,\n        compact: boolean = false\n    ): HierarchicalItem<T> {\n        const seed = {\n            name: '',\n            relativePath: '',\n            children: new Map(),\n            descendants: []\n        };\n\n        const hierarchy = values.reduce((root: HierarchicalItem<T>, value) => {\n            let folder = root;\n\n            let relativePath = '';\n            for (const folderName of splitPath(value)) {\n                relativePath = joinPath(relativePath, folderName);\n\n                if (folder.children === undefined) {\n                    folder.children = new Map();\n                }\n\n                let f = folder.children!.get(folderName);\n                if (f === undefined) {\n                    f = {\n                        name: folderName,\n                        relativePath: relativePath,\n                        parent: folder,\n                        children: undefined,\n                        descendants: undefined\n                    };\n                    folder.children.set(folderName, f);\n                }\n\n                if (folder.descendants === undefined) {\n                    folder.descendants = [];\n                }\n                folder.descendants.push(value);\n                folder = f;\n            }\n\n            folder.value = value;\n\n            return root;\n        }, seed);\n\n        if (compact) return compactHierarchy(hierarchy, joinPath, true);\n        return hierarchy;\n    }\n\n    export function compactHierarchy<T>(\n        root: HierarchicalItem<T>,\n        joinPath: (...paths: string[]) => string,\n        isRoot: boolean = true\n    ): HierarchicalItem<T> {\n        if (root.children === undefined) return root;\n\n        const children = [...root.children.values()];\n\n        // Less nesting but duplicate roots\n        if (!isRoot && children.every(c => c.value === undefined)) {\n            const siblings = root.parent && root.parent.children;\n            if (siblings !== undefined) {\n                if (siblings.get(root.name) !== undefined) {\n                    siblings.delete(root.name);\n\n                    for (const child of children) {\n                        child.name = joinPath(root.name, child.name);\n                        siblings.set(child.name, child);\n                    }\n                }\n            }\n        }\n\n        for (const child of children) {\n            compactHierarchy(child, joinPath, false);\n        }\n\n        if (!isRoot && children.length === 1) {\n            const child = children[0];\n            if (child.value === undefined) {\n                root.name = joinPath(root.name, child.name);\n                root.relativePath = child.relativePath;\n                root.children = child.children;\n            }\n        }\n\n        return root;\n    }\n\n    export function uniqueBy<T>(source: T[], accessor: (item: T) => any, predicate?: (item: T) => boolean): T[] {\n        const uniqueValues = Object.create(null);\n        return source.filter(item => {\n            const value = accessor(item);\n            if (uniqueValues[value]) return false;\n\n            uniqueValues[value] = accessor;\n            return predicate ? predicate(item) : true;\n        });\n    }\n}\n","'use strict';\nimport * as dayjs from 'dayjs';\nimport * as advancedFormat from 'dayjs/plugin/advancedFormat';\nimport * as relativeTime from 'dayjs/plugin/relativeTime';\n\ndayjs.extend(advancedFormat);\ndayjs.extend(relativeTime);\n\nexport namespace Dates {\n    export const MillisecondsPerMinute = 60000; // 60 * 1000\n    export const MillisecondsPerHour = 3600000; // 60 * 60 * 1000\n    export const MillisecondsPerDay = 86400000; // 24 * 60 * 60 * 1000\n\n    export interface DateFormatter {\n        fromNow(): string;\n        format(format: string): string;\n    }\n\n    export function getFormatter(date: Date): DateFormatter {\n        return dayjs(date);\n    }\n}\n","'use strict';\nimport { Promises } from '../promise';\n\nconst emptyStr = '';\n\nfunction defaultResolver(...args: any[]): string {\n    if (args.length === 1) {\n        const arg0 = args[0];\n        if (arg0 == null) return emptyStr;\n        if (typeof arg0 === 'string') return arg0;\n        if (typeof arg0 === 'number' || typeof arg0 === 'boolean') {\n            return String(arg0);\n        }\n\n        return JSON.stringify(arg0);\n    }\n\n    return JSON.stringify(args);\n}\n\nexport function gate<T extends (...arg: any) => any>(resolver?: (...args: Parameters<T>) => string) {\n    return (target: any, key: string, descriptor: PropertyDescriptor) => {\n        let fn: Function | undefined;\n        if (typeof descriptor.value === 'function') {\n            fn = descriptor.value;\n        }\n        else if (typeof descriptor.get === 'function') {\n            fn = descriptor.get;\n        }\n        if (fn == null) throw new Error('Not supported');\n\n        const gateKey = `$gate$${key}`;\n\n        descriptor.value = function(this: any, ...args: any[]) {\n            const prop =\n                args.length === 0 ? gateKey : `${gateKey}$${(resolver || defaultResolver)(...(args as Parameters<T>))}`;\n\n            if (!Object.prototype.hasOwnProperty.call(this, prop)) {\n                Object.defineProperty(this, prop, {\n                    configurable: false,\n                    enumerable: false,\n                    writable: true,\n                    value: undefined\n                });\n            }\n\n            let promise = this[prop];\n            if (promise === undefined) {\n                const result = fn!.apply(this, args);\n                if (result == null || !Promises.isPromise(result)) {\n                    return result;\n                }\n\n                this[prop] = promise = result.then((r: any) => {\n                    this[prop] = undefined;\n                    return r;\n                });\n            }\n\n            return promise;\n        };\n    };\n}\n","'use strict';\n\nconst emptyStr = '';\n\nfunction defaultResolver(...args: any[]): string {\n    if (args.length === 1) {\n        const arg0 = args[0];\n        if (arg0 == null) return emptyStr;\n        if (typeof arg0 === 'string') return arg0;\n        if (typeof arg0 === 'number' || typeof arg0 === 'boolean') {\n            return String(arg0);\n        }\n\n        return JSON.stringify(arg0);\n    }\n\n    return JSON.stringify(args);\n}\n\nexport function memoize<T extends (...arg: any) => any>(resolver?: (...args: Parameters<T>) => string) {\n    return (target: any, key: string, descriptor: PropertyDescriptor & { [key: string]: any }) => {\n        let fn: Function | undefined;\n        let fnKey: string | undefined;\n\n        if (typeof descriptor.value === 'function') {\n            fn = descriptor.value;\n            fnKey = 'value';\n        }\n        else if (typeof descriptor.get === 'function') {\n            fn = descriptor.get;\n            fnKey = 'get';\n        }\n        else {\n            throw new Error('Not supported');\n        }\n\n        if (!fn || !fnKey) throw new Error('Not supported');\n\n        const memoizeKey = `$memoize$${key}`;\n\n        let result;\n        descriptor[fnKey] = function(...args: any[]) {\n            const prop =\n                fnKey === 'get' || args.length === 0\n                    ? memoizeKey\n                    : `${memoizeKey}$${(resolver || defaultResolver)(...(args as Parameters<T>))}`;\n\n            if (Object.prototype.hasOwnProperty.call(this, prop)) {\n                result = this[prop];\n\n                return result;\n            }\n\n            result = fn!.apply(this, args);\n            Object.defineProperty(this, prop, {\n                configurable: false,\n                enumerable: false,\n                writable: false,\n                value: result\n            });\n\n            return result;\n        };\n    };\n}\n","'use strict';\n\nexport namespace Iterables {\n    export function count<T>(source: Iterable<T> | IterableIterator<T>, predicate?: (item: T) => boolean): number {\n        let count = 0;\n        let next: IteratorResult<T>;\n\n        while (true) {\n            next = (source as IterableIterator<T>).next();\n            if (next.done) break;\n\n            if (predicate === undefined || predicate(next.value)) {\n                count++;\n            }\n        }\n\n        return count;\n    }\n\n    export function every<T>(source: Iterable<T> | IterableIterator<T>, predicate: (item: T) => boolean): boolean {\n        for (const item of source) {\n            if (!predicate(item)) return false;\n        }\n        return true;\n    }\n\n    export function filter<T>(\n        source: Iterable<T | undefined | null> | IterableIterator<T | undefined | null>\n    ): Iterable<T>;\n    export function filter<T>(source: Iterable<T> | IterableIterator<T>, predicate: (item: T) => boolean): Iterable<T>;\n    export function* filter<T>(\n        source: Iterable<T> | IterableIterator<T>,\n        predicate?: (item: T) => boolean\n    ): Iterable<T> {\n        if (predicate === undefined) {\n            for (const item of source) {\n                if (item != null) yield item;\n            }\n        }\n        else {\n            for (const item of source) {\n                if (predicate(item)) yield item;\n            }\n        }\n    }\n\n    export function* filterMap<T, TMapped>(\n        source: Iterable<T> | IterableIterator<T>,\n        predicateMapper: (item: T) => TMapped | undefined | null\n    ): Iterable<TMapped> {\n        for (const item of source) {\n            const mapped = predicateMapper(item);\n            if (mapped != null) yield mapped;\n        }\n    }\n\n    export function forEach<T>(source: Iterable<T> | IterableIterator<T>, fn: (item: T, index: number) => void): void {\n        let i = 0;\n        for (const item of source) {\n            fn(item, i);\n            i++;\n        }\n    }\n\n    export function find<T>(source: Iterable<T> | IterableIterator<T>, predicate: (item: T) => boolean): T | null {\n        for (const item of source) {\n            if (predicate(item)) return item;\n        }\n        return null;\n    }\n\n    export function first<T>(source: Iterable<T>): T {\n        return source[Symbol.iterator]().next().value;\n    }\n\n    export function* flatMap<T, TMapped>(\n        source: Iterable<T> | IterableIterator<T>,\n        mapper: (item: T) => Iterable<TMapped>\n    ): Iterable<TMapped> {\n        for (const item of source) {\n            yield* mapper(item);\n        }\n    }\n\n    export function has<T>(source: Iterable<T> | IterableIterator<T>, item: T): boolean {\n        return some(source, i => i === item);\n    }\n\n    export function isIterable(source: Iterable<any>): boolean {\n        return typeof source[Symbol.iterator] === 'function';\n    }\n\n    export function join(source: Iterable<any>, separator: string): string {\n        let value = '';\n\n        const iterator = source[Symbol.iterator]();\n        let next = iterator.next();\n        if (next.done) return value;\n\n        while (true) {\n            const s = next.value.toString();\n\n            next = iterator.next();\n            if (next.done) {\n                value += s;\n                break;\n            }\n\n            value += `${s}${separator}`;\n        }\n\n        return value;\n    }\n\n    export function last<T>(source: Iterable<T>): T | undefined {\n        let item: T | undefined;\n        for (item of source) {\n            /* noop */\n        }\n        return item;\n    }\n\n    export function* map<T, TMapped>(\n        source: Iterable<T> | IterableIterator<T>,\n        mapper: (item: T) => TMapped\n    ): Iterable<TMapped> {\n        for (const item of source) {\n            yield mapper(item);\n        }\n    }\n\n    export function next<T>(source: IterableIterator<T>): T {\n        return source.next().value;\n    }\n\n    export function* skip<T>(source: Iterable<T> | IterableIterator<T>, count: number): IterableIterator<T> {\n        let i = 0;\n        for (const item of source) {\n            if (i >= count) yield item;\n            i++;\n        }\n    }\n\n    export function some<T>(source: Iterable<T> | IterableIterator<T>, predicate: (item: T) => boolean): boolean {\n        for (const item of source) {\n            if (predicate(item)) return true;\n        }\n        return false;\n    }\n\n    export function* take<T>(source: Iterable<T> | IterableIterator<T>, count: number): Iterable<T> {\n        if (count > 0) {\n            let i = 0;\n            for (const item of source) {\n                yield item;\n                i++;\n                if (i >= count) break;\n            }\n        }\n    }\n\n    export function* union<T>(...sources: (Iterable<T> | IterableIterator<T>)[]): Iterable<T> {\n        for (const source of sources) {\n            for (const item of source) {\n                yield item;\n            }\n        }\n    }\n}\n","'use strict';\n\nexport namespace Objects {\n    export function entries<T>(o: { [key: string]: T }): IterableIterator<[string, T]>;\n    export function entries<T>(o: { [key: number]: T }): IterableIterator<[string, T]>;\n    export function* entries<T>(o: any): IterableIterator<[string, T]> {\n        for (const key in o) {\n            yield [key, o[key]];\n        }\n    }\n\n    export function flatten(o: any, prefix: string = '', stringify: boolean = false): { [key: string]: any } {\n        const flattened = Object.create(null);\n        _flatten(flattened, prefix, o, stringify);\n        return flattened;\n    }\n\n    function _flatten(flattened: { [key: string]: any }, key: string, value: any, stringify: boolean = false) {\n        if (Object(value) !== value) {\n            if (stringify) {\n                if (value == null) {\n                    flattened[key] = null;\n                }\n                else if (typeof value === 'string') {\n                    flattened[key] = value;\n                }\n                else {\n                    flattened[key] = JSON.stringify(value);\n                }\n            }\n            else {\n                flattened[key] = value;\n            }\n        }\n        else if (Array.isArray(value)) {\n            const len = value.length;\n            for (let i = 0; i < len; i++) {\n                _flatten(flattened, `${key}[${i}]`, value[i], stringify);\n            }\n            if (len === 0) {\n                flattened[key] = null;\n            }\n        }\n        else {\n            let isEmpty = true;\n            for (const p in value) {\n                isEmpty = false;\n                _flatten(flattened, key ? `${key}.${p}` : p, value[p], stringify);\n            }\n            if (isEmpty && key) {\n                flattened[key] = null;\n            }\n        }\n    }\n\n    export function paths(o: { [key: string]: any }, path?: string): string[] {\n        const results = [];\n\n        for (const key in o) {\n            const child = o[key];\n            if (typeof child === 'object') {\n                results.push(...paths(child, path === undefined ? key : `${path}.${key}`));\n            }\n            else {\n                results.push(path === undefined ? key : `${path}.${key}`);\n            }\n        }\n\n        return results;\n    }\n\n    export function values<T>(o: { [key: string]: T }): IterableIterator<T>;\n    export function values<T>(o: { [key: number]: T }): IterableIterator<T>;\n    export function* values<T>(o: any): IterableIterator<T> {\n        for (const key in o) {\n            yield o[key];\n        }\n    }\n}\n","'use strict';\nimport { Iterables } from './iterable';\nimport { Strings } from './string';\n\n// Code stolen from https://github.com/Microsoft/vscode/blob/b3e6d5bb039a4a9362b52a2c8726267ca68cf64e/src/vs/base/common/map.ts#L352\n\nconst FIN = { done: true, value: undefined };\n\n// eslint-disable-next-line @typescript-eslint/interface-name-prefix\nexport interface IKeyIterator {\n    reset(key: string): this;\n    next(): this;\n\n    hasNext(): boolean;\n    cmp(a: string): number;\n    value(): string;\n}\n\nexport class StringIterator implements IKeyIterator {\n    private _value: string = '';\n    private _pos: number = 0;\n\n    reset(key: string): this {\n        this._value = key;\n        this._pos = 0;\n        return this;\n    }\n\n    next(): this {\n        this._pos += 1;\n        return this;\n    }\n\n    hasNext(): boolean {\n        return this._pos < this._value.length - 1;\n    }\n\n    cmp(a: string): number {\n        const aCode = a.charCodeAt(0);\n        const thisCode = this._value.charCodeAt(this._pos);\n        return aCode - thisCode;\n    }\n\n    value(): string {\n        return this._value[this._pos];\n    }\n}\n\nexport class PathIterator implements IKeyIterator {\n    private _value!: string;\n    private _from!: number;\n    private _to!: number;\n\n    reset(key: string): this {\n        this._value = key.replace(/\\\\$|\\/$/, '');\n        this._from = 0;\n        this._to = 0;\n        return this.next();\n    }\n\n    hasNext(): boolean {\n        return this._to < this._value.length;\n    }\n\n    next(): this {\n        // this._data = key.split(/[\\\\/]/).filter(s => !!s);\n        this._from = this._to;\n        let justSeps = true;\n        for (; this._to < this._value.length; this._to++) {\n            const ch = this._value.charCodeAt(this._to);\n            if (ch === Strings.CharCode.Slash || ch === Strings.CharCode.Backslash) {\n                if (justSeps) {\n                    this._from++;\n                }\n                else {\n                    break;\n                }\n            }\n            else {\n                justSeps = false;\n            }\n        }\n        return this;\n    }\n\n    cmp(a: string): number {\n        let aPos = 0;\n        const aLen = a.length;\n        let thisPos = this._from;\n\n        while (aPos < aLen && thisPos < this._to) {\n            const cmp = a.charCodeAt(aPos) - this._value.charCodeAt(thisPos);\n            if (cmp !== 0) {\n                return cmp;\n            }\n\n            aPos += 1;\n            thisPos += 1;\n        }\n\n        if (aLen === this._to - this._from) {\n            return 0;\n        }\n\n        if (aPos < aLen) {\n            return -1;\n        }\n\n        return 1;\n    }\n\n    value(): string {\n        return this._value.substring(this._from, this._to);\n    }\n}\n\nclass TernarySearchTreeNode<E> {\n    segment!: string;\n    value: E | undefined;\n    key!: string;\n    left: TernarySearchTreeNode<E> | undefined;\n    mid: TernarySearchTreeNode<E> | undefined;\n    right: TernarySearchTreeNode<E> | undefined;\n\n    isEmpty(): boolean {\n        return !this.left && !this.mid && !this.right && !this.value;\n    }\n}\n\nexport class TernarySearchTree<E> {\n    static forPaths<E>(): TernarySearchTree<E> {\n        return new TernarySearchTree<E>(new PathIterator());\n    }\n\n    static forStrings<E>(): TernarySearchTree<E> {\n        return new TernarySearchTree<E>(new StringIterator());\n    }\n\n    private _iter: IKeyIterator;\n    private _root: TernarySearchTreeNode<E> | undefined;\n\n    constructor(segments: IKeyIterator) {\n        this._iter = segments;\n    }\n\n    clear(): void {\n        this._root = undefined;\n    }\n\n    set(key: string, element: E): E | undefined {\n        const iter = this._iter.reset(key);\n        let node: TernarySearchTreeNode<E>;\n\n        if (!this._root) {\n            this._root = new TernarySearchTreeNode<E>();\n            this._root.segment = iter.value();\n        }\n\n        node = this._root;\n        while (true) {\n            const val = iter.cmp(node.segment);\n            if (val > 0) {\n                // left\n                if (!node.left) {\n                    node.left = new TernarySearchTreeNode<E>();\n                    node.left.segment = iter.value();\n                }\n                node = node.left;\n            }\n            else if (val < 0) {\n                // right\n                if (!node.right) {\n                    node.right = new TernarySearchTreeNode<E>();\n                    node.right.segment = iter.value();\n                }\n                node = node.right;\n            }\n            else if (iter.hasNext()) {\n                // mid\n                iter.next();\n                if (!node.mid) {\n                    node.mid = new TernarySearchTreeNode<E>();\n                    node.mid.segment = iter.value();\n                }\n                node = node.mid;\n            }\n            else {\n                break;\n            }\n        }\n        const oldElement = node.value;\n        node.value = element;\n        node.key = key;\n        return oldElement;\n    }\n\n    get(key: string): E | undefined {\n        const iter = this._iter.reset(key);\n        let node = this._root;\n        while (node) {\n            const val = iter.cmp(node.segment);\n            if (val > 0) {\n                // left\n                node = node.left;\n            }\n            else if (val < 0) {\n                // right\n                node = node.right;\n            }\n            else if (iter.hasNext()) {\n                // mid\n                iter.next();\n                node = node.mid;\n            }\n            else {\n                break;\n            }\n        }\n        return node ? node.value : undefined;\n    }\n\n    delete(key: string): void {\n        const iter = this._iter.reset(key);\n        const stack: [-1 | 0 | 1, TernarySearchTreeNode<E>][] = [];\n        let node = this._root;\n\n        // find and unset node\n        while (node) {\n            const val = iter.cmp(node.segment);\n            if (val > 0) {\n                // left\n                stack.push([1, node]);\n                node = node.left;\n            }\n            else if (val < 0) {\n                // right\n                stack.push([-1, node]);\n                node = node.right;\n            }\n            else if (iter.hasNext()) {\n                // mid\n                iter.next();\n                stack.push([0, node]);\n                node = node.mid;\n            }\n            else {\n                // remove element\n                node.value = undefined;\n\n                // clean up empty nodes\n                while (stack.length > 0 && node.isEmpty()) {\n                    const [dir, parent] = stack.pop()!;\n                    switch (dir) {\n                        case 1:\n                            parent.left = undefined;\n                            break;\n                        case 0:\n                            parent.mid = undefined;\n                            break;\n                        case -1:\n                            parent.right = undefined;\n                            break;\n                    }\n                    node = parent;\n                }\n                break;\n            }\n        }\n    }\n\n    findSubstr(key: string): E | undefined {\n        const iter = this._iter.reset(key);\n        let node = this._root;\n        let candidate: E | undefined;\n        while (node) {\n            const val = iter.cmp(node.segment);\n            if (val > 0) {\n                // left\n                node = node.left;\n            }\n            else if (val < 0) {\n                // right\n                node = node.right;\n            }\n            else if (iter.hasNext()) {\n                // mid\n                iter.next();\n                candidate = node.value || candidate;\n                node = node.mid;\n            }\n            else {\n                break;\n            }\n        }\n        return (node && node.value) || candidate;\n    }\n\n    findSuperstr(key: string, limit: boolean = false): Iterable<E> | undefined {\n        const iter = this._iter.reset(key);\n        let node = this._root;\n        while (node) {\n            const val = iter.cmp(node.segment);\n            if (val > 0) {\n                // left\n                node = node.left;\n            }\n            else if (val < 0) {\n                // right\n                node = node.right;\n            }\n            else if (iter.hasNext()) {\n                // mid\n                iter.next();\n                node = node.mid;\n            }\n            else {\n                // collect\n                if (!node.mid) {\n                    return undefined;\n                }\n\n                node = node.mid;\n                return {\n                    // eslint-disable-next-line no-loop-func\n                    [Symbol.iterator]: () => this._nodeIterator(node!, limit)\n                };\n            }\n        }\n        return undefined;\n    }\n\n    private _nodeIterator(node: TernarySearchTreeNode<E>, limit: boolean = false): Iterator<E> {\n        let res: { done: false; value: E };\n        let idx: number;\n        let data: E[];\n        const next = (): IteratorResult<E> => {\n            if (!data) {\n                // lazy till first invocation\n                data = [];\n                idx = 0;\n                this._forEach(node, value => data.push(value), limit);\n            }\n            if (idx >= data.length) {\n                return (FIN as unknown) as IteratorResult<E>;\n            }\n\n            if (!res) {\n                res = { done: false, value: data[idx++] };\n            }\n            else {\n                res.value = data[idx++];\n            }\n            return res;\n        };\n        return { next: next };\n    }\n\n    forEach(callback: (value: E, index: string) => any) {\n        this._forEach(this._root, callback);\n    }\n\n    private _forEach(\n        node: TernarySearchTreeNode<E> | undefined,\n        callback: (value: E, index: string) => any,\n        limit: boolean = false\n    ) {\n        if (node === undefined) return;\n\n        // left\n        this._forEach(node.left, callback, limit);\n\n        // node\n        if (node.value) {\n            callback(node.value, node.key);\n        }\n\n        if (!limit) {\n            // mid\n            this._forEach(node.mid, callback, limit);\n        }\n\n        // right\n        this._forEach(node.right, callback, limit);\n    }\n\n    any(): boolean {\n        return this._root !== undefined && !this._root.isEmpty();\n    }\n\n    count(predicate?: (entry: E) => boolean): number {\n        if (this._root === undefined || this._root.isEmpty()) return 0;\n\n        return Iterables.count(this.entries(), predicate === undefined ? undefined : ([e]) => predicate(e));\n    }\n\n    entries(): Iterable<[E, string]> {\n        return this._iterator(this._root);\n    }\n\n    values(): Iterable<E> {\n        return Iterables.map(this.entries(), ([e]) => e);\n    }\n\n    highlander(): [E, string] | undefined {\n        if (this._root === undefined || this._root.isEmpty()) return undefined;\n\n        const entries = this.entries() as IterableIterator<[E, string]>;\n\n        let count = 0;\n        let next: IteratorResult<[E, string]>;\n        let value: [E, string] | undefined;\n\n        while (true) {\n            next = entries.next();\n            if (next.done) break;\n\n            value = next.value;\n\n            count++;\n            if (count > 1) return undefined;\n        }\n\n        return value;\n    }\n\n    some(predicate: (entry: E) => boolean): boolean {\n        if (this._root === undefined || this._root.isEmpty()) return false;\n\n        return Iterables.some(this.entries(), ([e]) => predicate(e));\n    }\n\n    private *_iterator(node: TernarySearchTreeNode<E> | undefined): IterableIterator<[E, string]> {\n        if (node !== undefined) {\n            // left\n            yield* this._iterator(node.left);\n\n            // node\n            if (node.value) {\n                yield [node.value, node.key];\n            }\n\n            // mid\n            yield* this._iterator(node.mid);\n\n            // right\n            yield* this._iterator(node.right);\n        }\n    }\n}\n","'use strict';\n\nexport namespace Versions {\n    declare type VersionComparisonResult = -1 | 0 | 1;\n\n    export interface Version {\n        major: number;\n        minor: number;\n        patch: number;\n        pre?: string;\n    }\n\n    export function compare(v1: Version, v2: Version): VersionComparisonResult {\n        if (v1.major > v2.major) return 1;\n        if (v1.major < v2.major) return -1;\n\n        if (v1.minor > v2.minor) return 1;\n        if (v1.minor < v2.minor) return -1;\n\n        if (v1.patch > v2.patch) return 1;\n        if (v1.patch < v2.patch) return -1;\n\n        if (v1.pre === undefined && v2.pre !== undefined) return 1;\n        if (v1.pre !== undefined && v2.pre === undefined) return -1;\n\n        if (v1.pre !== undefined && v2.pre !== undefined) {\n            return v1.pre.localeCompare(v2.pre) as VersionComparisonResult;\n        }\n\n        return 0;\n    }\n\n    export function from(\n        major: string | number,\n        minor: string | number,\n        patch?: string | number,\n        pre?: string\n    ): Version {\n        return {\n            major: typeof major === 'string' ? parseInt(major, 10) : major,\n            minor: typeof minor === 'string' ? parseInt(minor, 10) : minor,\n            patch: patch == null ? 0 : typeof patch === 'string' ? parseInt(patch, 10) : patch,\n            pre: pre\n        };\n    }\n\n    export function fromString(version: string): Version {\n        const [ver, pre] = version.split('-');\n        const [major, minor, patch] = ver.split('.');\n        return from(major, minor, patch, pre);\n    }\n}\n","'use strict';\n\nexport * from './system/array';\nexport * from './system/date';\nexport * from './system/decorators/gate';\nexport * from './system/decorators/log';\nexport * from './system/decorators/memoize';\nexport * from './system/function';\nexport * from './system/iterable';\nexport * from './system/object';\nexport * from './system/promise';\nexport * from './system/searchTree';\nexport * from './system/string';\nexport * from './system/version';\n","'use strict';\nimport { commands, TextDocument, TextEditor, window } from 'vscode';\nimport { ViewShowBranchComparison } from './config';\n\nexport const applicationInsightsKey = 'a9c302f8-6483-4d01-b92c-c159c799c679';\nexport const extensionId = 'gitlens';\nexport const extensionOutputChannelName = 'GitLens';\nexport const extensionQualifiedId = `eamodio.${extensionId}`;\nexport const extensionTerminalName = 'GitLens';\n\nexport enum BuiltInCommands {\n    CloseActiveEditor = 'workbench.action.closeActiveEditor',\n    CloseAllEditors = 'workbench.action.closeAllEditors',\n    CursorMove = 'cursorMove',\n    Diff = 'vscode.diff',\n    EditorScroll = 'editorScroll',\n    ExecuteDocumentSymbolProvider = 'vscode.executeDocumentSymbolProvider',\n    ExecuteCodeLensProvider = 'vscode.executeCodeLensProvider',\n    FocusFilesExplorer = 'workbench.files.action.focusFilesExplorer',\n    Open = 'vscode.open',\n    OpenFolder = 'vscode.openFolder',\n    OpenInTerminal = 'openInTerminal',\n    NextEditor = 'workbench.action.nextEditor',\n    PreviewHtml = 'vscode.previewHtml',\n    RevealLine = 'revealLine',\n    SetContext = 'setContext',\n    ShowExplorerActivity = 'workbench.view.explorer',\n    ShowReferences = 'editor.action.showReferences'\n}\n\nexport enum CommandContext {\n    ActiveFileStatus = 'gitlens:activeFileStatus',\n    AnnotationStatus = 'gitlens:annotationStatus',\n    CanToggleCodeLens = 'gitlens:canToggleCodeLens',\n    Enabled = 'gitlens:enabled',\n    HasRemotes = 'gitlens:hasRemotes',\n    Key = 'gitlens:key',\n    Readonly = 'gitlens:readonly',\n    ViewsCanCompare = 'gitlens:views:canCompare',\n    ViewsCanCompareFile = 'gitlens:views:canCompare:file',\n    ViewsCompareKeepResults = 'gitlens:views:compare:keepResults',\n    ViewsHideSupportGitLens = 'gitlens:views:supportGitLens:hide',\n    ViewsFileHistoryEditorFollowing = 'gitlens:views:fileHistory:editorFollowing',\n    ViewsLineHistoryEditorFollowing = 'gitlens:views:lineHistory:editorFollowing',\n    ViewsRepositoriesAutoRefresh = 'gitlens:views:repositories:autoRefresh',\n    ViewsSearchKeepResults = 'gitlens:views:search:keepResults',\n    Vsls = 'gitlens:vsls'\n}\n\nexport function setCommandContext(key: CommandContext | string, value: any) {\n    return commands.executeCommand(BuiltInCommands.SetContext, key, value);\n}\n\nexport enum DocumentSchemes {\n    DebugConsole = 'debug',\n    File = 'file',\n    Git = 'git',\n    GitLens = 'gitlens',\n    Output = 'output',\n    Vsls = 'vsls'\n}\n\nexport function getEditorIfActive(document: TextDocument): TextEditor | undefined {\n    const editor = window.activeTextEditor;\n    return editor != null && editor.document === document ? editor : undefined;\n}\n\nexport function isActiveDocument(document: TextDocument): boolean {\n    const editor = window.activeTextEditor;\n    return editor != null && editor.document === document;\n}\n\nexport function isTextEditor(editor: TextEditor): boolean {\n    const scheme = editor.document.uri.scheme;\n    return scheme !== DocumentSchemes.Output && scheme !== DocumentSchemes.DebugConsole;\n}\n\nexport function hasVisibleTextEditor(): boolean {\n    if (window.visibleTextEditors.length === 0) return false;\n\n    return window.visibleTextEditors.some(e => isTextEditor(e));\n}\n\nexport enum GlyphChars {\n    AngleBracketLeftHeavy = '\\u2770',\n    AngleBracketRightHeavy = '\\u2771',\n    ArrowBack = '\\u21a9',\n    ArrowDown = '\\u2193',\n    ArrowDropRight = '\\u2937',\n    ArrowHeadRight = '\\u27A4',\n    ArrowLeft = '\\u2190',\n    ArrowLeftDouble = '\\u21d0',\n    ArrowLeftRight = '\\u2194',\n    ArrowLeftRightDouble = '\\u21d4',\n    ArrowLeftRightDoubleStrike = '\\u21ce',\n    ArrowLeftRightLong = '\\u27f7',\n    ArrowRight = '\\u2192',\n    ArrowRightDouble = '\\u21d2',\n    ArrowRightHollow = '\\u21e8',\n    ArrowUp = '\\u2191',\n    ArrowUpRight = '\\u2197',\n    ArrowsHalfLeftRight = '\\u21cb',\n    ArrowsHalfRightLeft = '\\u21cc',\n    ArrowsLeftRight = '\\u21c6',\n    ArrowsRightLeft = '\\u21c4',\n    Asterisk = '\\u2217',\n    Check = '\\u2713',\n    Dash = '\\u2014',\n    Dot = '\\u2022',\n    Ellipsis = '\\u2026',\n    EnDash = '\\u2013',\n    Envelope = '\\u2709',\n    EqualsTriple = '\\u2261',\n    Flag = '\\u2691',\n    FlagHollow = '\\u2690',\n    MiddleEllipsis = '\\u22EF',\n    MuchLessThan = '\\u226A',\n    MuchGreaterThan = '\\u226B',\n    Pencil = '\\u270E',\n    Space = '\\u00a0',\n    SpaceThin = '\\u2009',\n    SpaceThinnest = '\\u200A',\n    SquareWithBottomShadow = '\\u274F',\n    SquareWithTopShadow = '\\u2750',\n    ZeroWidthSpace = '\\u200b'\n}\n\nexport enum GlobalState {\n    GitLensVersion = 'gitlensVersion'\n}\n\nexport const ImageMimetypes: { [key: string]: string } = {\n    '.png': 'image/png',\n    '.gif': 'image/gif',\n    '.jpg': 'image/jpeg',\n    '.jpeg': 'image/jpeg',\n    '.jpe': 'image/jpeg',\n    '.webp': 'image/webp',\n    '.tif': 'image/tiff',\n    '.tiff': 'image/tiff',\n    '.bmp': 'image/bmp'\n};\n\nexport interface BranchComparison {\n    ref: string;\n    notation: '...' | '..' | undefined;\n    type: Exclude<ViewShowBranchComparison, false> | undefined;\n}\n\nexport interface BranchComparisons {\n    [id: string]: string | BranchComparison;\n}\n\nexport interface NamedRef {\n    label?: string;\n    ref: string;\n}\n\nexport interface PinnedComparison {\n    path: string;\n    ref1: NamedRef;\n    ref2: NamedRef;\n    notation: '...' | '..' | undefined;\n}\n\nexport interface PinnedComparisons {\n    [id: string]: PinnedComparison;\n}\n\nexport interface StarredBranches {\n    [id: string]: boolean;\n}\n\nexport interface StarredRepositories {\n    [id: string]: boolean;\n}\n\nexport enum WorkspaceState {\n    BranchComparisons = 'gitlens:branch:comparisons',\n    DefaultRemote = 'gitlens:remote:default',\n    PinnedComparisons = 'gitlens:pinned:comparisons',\n    StarredBranches = 'gitlens:starred:branches',\n    StarredRepositories = 'gitlens:starred:repositories',\n    ViewsCompareKeepResults = 'gitlens:views:compare:keepResults',\n    ViewsRepositoriesAutoRefresh = 'gitlens:views:repositories:autoRefresh',\n    ViewsSearchKeepResults = 'gitlens:views:search:keepResults'\n}\n","'use strict';\nimport {\n    DecorationOptions,\n    Disposable,\n    Range,\n    TextDocument,\n    TextEditor,\n    TextEditorDecorationType,\n    TextEditorSelectionChangeEvent,\n    Uri,\n    window\n} from 'vscode';\nimport { TextDocumentComparer } from '../comparers';\nimport { FileAnnotationType } from '../configuration';\nimport { CommandContext, setCommandContext } from '../constants';\nimport { Functions } from '../system';\nimport { GitDocumentState, TrackedDocument } from '../trackers/gitDocumentTracker';\n\nexport enum AnnotationStatus {\n    Computing = 'computing',\n    Computed = 'computed'\n}\n\nexport type TextEditorCorrelationKey = string;\n\nexport abstract class AnnotationProviderBase implements Disposable {\n    static getCorrelationKey(editor: TextEditor | undefined): TextEditorCorrelationKey {\n        return editor !== undefined ? (editor as any).id : '';\n    }\n\n    annotationType: FileAnnotationType | undefined;\n    correlationKey: TextEditorCorrelationKey;\n    document: TextDocument;\n    status: AnnotationStatus | undefined;\n\n    protected decorations: DecorationOptions[] | undefined;\n    protected disposable: Disposable;\n\n    constructor(\n        public editor: TextEditor,\n        protected readonly trackedDocument: TrackedDocument<GitDocumentState>,\n        protected decoration: TextEditorDecorationType,\n        protected highlightDecoration: TextEditorDecorationType | undefined\n    ) {\n        this.correlationKey = AnnotationProviderBase.getCorrelationKey(this.editor);\n        this.document = this.editor.document;\n\n        this.disposable = Disposable.from(\n            window.onDidChangeTextEditorSelection(this.onTextEditorSelectionChanged, this)\n        );\n    }\n\n    dispose() {\n        this.clear();\n\n        this.disposable && this.disposable.dispose();\n    }\n\n    private onTextEditorSelectionChanged(e: TextEditorSelectionChangeEvent) {\n        if (!TextDocumentComparer.equals(this.document, e.textEditor && e.textEditor.document)) return;\n\n        this.selection(e.selections[0].active.line);\n    }\n\n    get editorId(): string {\n        if (this.editor === undefined || this.editor.document === undefined) return '';\n        return (this.editor as any).id;\n    }\n\n    get editorUri(): Uri | undefined {\n        if (this.editor === undefined || this.editor.document === undefined) return undefined;\n        return this.editor.document.uri;\n    }\n\n    protected additionalDecorations: { decoration: TextEditorDecorationType; ranges: Range[] }[] | undefined;\n\n    clear() {\n        this.status = undefined;\n        if (this.editor === undefined) return;\n\n        if (this.decoration !== undefined) {\n            try {\n                this.editor.setDecorations(this.decoration, []);\n            }\n            catch {}\n        }\n\n        if (this.additionalDecorations !== undefined && this.additionalDecorations.length > 0) {\n            for (const d of this.additionalDecorations) {\n                try {\n                    this.editor.setDecorations(d.decoration, []);\n                }\n                catch {}\n            }\n\n            this.additionalDecorations = undefined;\n        }\n\n        if (this.highlightDecoration !== undefined) {\n            try {\n                this.editor.setDecorations(this.highlightDecoration, []);\n            }\n            catch {}\n        }\n    }\n\n    private _resetDebounced:\n        | ((changes?: {\n              decoration: TextEditorDecorationType;\n              highlightDecoration: TextEditorDecorationType | undefined;\n          }) => void)\n        | undefined;\n\n    reset(changes?: {\n        decoration: TextEditorDecorationType;\n        highlightDecoration: TextEditorDecorationType | undefined;\n    }) {\n        if (this._resetDebounced === undefined) {\n            this._resetDebounced = Functions.debounce(this.onReset, 250);\n        }\n\n        this._resetDebounced(changes);\n    }\n\n    async onReset(changes?: {\n        decoration: TextEditorDecorationType;\n        highlightDecoration: TextEditorDecorationType | undefined;\n    }) {\n        if (changes !== undefined) {\n            this.clear();\n\n            this.decoration = changes.decoration;\n            this.highlightDecoration = changes.highlightDecoration;\n        }\n\n        await this.provideAnnotation(this.editor === undefined ? undefined : this.editor.selection.active.line);\n    }\n\n    async restore(editor: TextEditor) {\n        // If the editor isn't disposed then we don't need to do anything\n        // Explicitly check for `false`\n        if ((this.editor as any)._disposed === false) return;\n\n        this.status = AnnotationStatus.Computing;\n        if (editor === window.activeTextEditor) {\n            await setCommandContext(CommandContext.AnnotationStatus, this.status);\n        }\n\n        this.editor = editor;\n        this.correlationKey = AnnotationProviderBase.getCorrelationKey(editor);\n        this.document = editor.document;\n\n        if (this.decorations !== undefined && this.decorations.length) {\n            this.editor.setDecorations(this.decoration, this.decorations);\n\n            if (this.additionalDecorations !== undefined && this.additionalDecorations.length) {\n                for (const d of this.additionalDecorations) {\n                    this.editor.setDecorations(d.decoration, d.ranges);\n                }\n            }\n        }\n\n        this.status = AnnotationStatus.Computed;\n        if (editor === window.activeTextEditor) {\n            await setCommandContext(CommandContext.AnnotationStatus, this.status);\n        }\n    }\n\n    async provideAnnotation(shaOrLine?: string | number): Promise<boolean> {\n        this.status = AnnotationStatus.Computing;\n        if (await this.onProvideAnnotation(shaOrLine)) {\n            this.status = AnnotationStatus.Computed;\n            return true;\n        }\n\n        this.status = undefined;\n        return false;\n    }\n\n    abstract onProvideAnnotation(shaOrLine?: string | number): Promise<boolean>;\n    abstract selection(shaOrLine?: string | number): Promise<void>;\n    abstract validate(): Promise<boolean>;\n}\n","'use strict';\n\nconst cssColorRegex = /^(?:(#?)([0-9a-f]{3}|[0-9a-f]{6})|((?:rgb|hsl)a?)\\((-?\\d+%?)[,\\s]+(-?\\d+%?)[,\\s]+(-?\\d+%?)[,\\s]*(-?[\\d.]+%?)?\\))$/i;\n\nfunction adjustLight(color: number, amount: number) {\n    const cc = color + amount;\n    const c = amount < 0 ? (cc < 0 ? 0 : cc) : cc > 255 ? 255 : cc;\n\n    return Math.round(c);\n}\n\nexport function darken(color: string, percentage: number) {\n    return lighten(color, -percentage);\n}\n\nexport function lighten(color: string, percentage: number) {\n    const rgba = toRgba(color);\n    if (rgba == null) return color;\n\n    const [r, g, b, a] = rgba;\n    const amount = (255 * percentage) / 100;\n    return `rgba(${adjustLight(r, amount)}, ${adjustLight(g, amount)}, ${adjustLight(b, amount)}, ${a})`;\n}\n\nexport function opacity(color: string, percentage: number) {\n    const rgba = toRgba(color);\n    if (rgba == null) return color;\n\n    const [r, g, b, a] = rgba;\n    return `rgba(${r}, ${g}, ${b}, ${a * (percentage / 100)})`;\n}\n\nexport function toRgba(color: string) {\n    color = color.trim();\n\n    const result = cssColorRegex.exec(color);\n    if (result == null) return null;\n\n    if (result[1] === '#') {\n        const hex = result[2];\n        switch (hex.length) {\n            case 3:\n                return [parseInt(hex[0] + hex[0], 16), parseInt(hex[1] + hex[1], 16), parseInt(hex[2] + hex[2], 16), 1];\n            case 6:\n                return [\n                    parseInt(hex.substring(0, 2), 16),\n                    parseInt(hex.substring(2, 4), 16),\n                    parseInt(hex.substring(4, 6), 16),\n                    1\n                ];\n        }\n\n        return null;\n    }\n\n    switch (result[3]) {\n        case 'rgb':\n            return [parseInt(result[4], 10), parseInt(result[5], 10), parseInt(result[6], 10), 1];\n        case 'rgba':\n            return [parseInt(result[4], 10), parseInt(result[5], 10), parseInt(result[6], 10), parseFloat(result[7])];\n        default:\n            return null;\n    }\n}\n","import {\n    DecorationInstanceRenderOptions,\n    DecorationOptions,\n    MarkdownString,\n    ThemableDecorationAttachmentRenderOptions,\n    ThemableDecorationRenderOptions,\n    ThemeColor\n} from 'vscode';\nimport { DiffWithCommand, ShowQuickCommitDetailsCommand } from '../commands';\nimport { configuration, FileAnnotationType } from '../configuration';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport {\n    CommitFormatOptions,\n    CommitFormatter,\n    GitBlameCommit,\n    GitCommit,\n    GitDiffHunkLine,\n    GitLogCommit,\n    GitService,\n    GitUri\n} from '../git/gitService';\nimport { Objects, Strings } from '../system';\nimport { toRgba } from '../webviews/apps/shared/colors';\n\nexport interface ComputedHeatmap {\n    cold: boolean;\n    colors: { hot: string; cold: string };\n    median: number;\n    newest: number;\n    oldest: number;\n    computeAge(date: Date): number;\n}\n\ninterface HeatmapConfig {\n    enabled: boolean;\n    location?: 'left' | 'right';\n}\n\ninterface RenderOptions\n    extends DecorationInstanceRenderOptions,\n        ThemableDecorationRenderOptions,\n        ThemableDecorationAttachmentRenderOptions {\n    height?: string;\n    uncommittedColor?: string | ThemeColor;\n}\n\nconst defaultHeatmapHotColor = '#f66a0a';\nconst defaultHeatmapColdColor = '#0a60f6';\n\nlet computedHeatmapColor: {\n    color: string;\n    rgb: string;\n};\n\nexport class Annotations {\n    static applyHeatmap(decoration: Partial<DecorationOptions>, date: Date, heatmap: ComputedHeatmap) {\n        const color = this.getHeatmapColor(date, heatmap);\n        decoration.renderOptions!.before!.borderColor = color;\n    }\n\n    static async changesHoverMessage(\n        commit: GitBlameCommit,\n        uri: GitUri,\n        editorLine: number\n    ): Promise<MarkdownString | undefined>;\n    static async changesHoverMessage(\n        commit: GitLogCommit,\n        uri: GitUri,\n        editorLine: number,\n        hunkLine: GitDiffHunkLine\n    ): Promise<MarkdownString | undefined>;\n    static async changesHoverMessage(\n        commit: GitBlameCommit | GitLogCommit,\n        uri: GitUri,\n        editorLine: number,\n        hunkLine?: GitDiffHunkLine\n    ): Promise<MarkdownString | undefined> {\n        const documentRef = uri.sha;\n        if (GitBlameCommit.is(commit)) {\n            // TODO: Figure out how to optimize this\n            let ref;\n            if (commit.isUncommitted) {\n                if (GitService.isUncommittedStaged(documentRef)) {\n                    ref = documentRef;\n                }\n            }\n            else {\n                ref = commit.sha;\n            }\n\n            const line = editorLine + 1;\n            const commitLine = commit.lines.find(l => l.line === line) || commit.lines[0];\n\n            let originalFileName = commit.originalFileName;\n            if (originalFileName === undefined) {\n                if (uri.fsPath !== commit.uri.fsPath) {\n                    originalFileName = commit.fileName;\n                }\n            }\n\n            editorLine = commitLine.originalLine - 1;\n            hunkLine = await Container.git.getDiffForLine(uri, editorLine, ref, undefined, originalFileName);\n\n            // If we didn't find a diff & ref is undefined (meaning uncommitted), check for a staged diff\n            if (hunkLine === undefined && ref === undefined) {\n                hunkLine = await Container.git.getDiffForLine(\n                    uri,\n                    editorLine,\n                    undefined,\n                    GitService.uncommittedStagedSha,\n                    originalFileName\n                );\n            }\n        }\n\n        if (hunkLine === undefined || commit.previousSha === undefined) return undefined;\n\n        const diff = this.getDiffFromHunkLine(hunkLine);\n\n        let message;\n        let previous;\n        let current;\n        if (commit.isUncommitted) {\n            const diffUris = await commit.getPreviousLineDiffUris(uri, editorLine, documentRef);\n            if (diffUris === undefined || diffUris.previous === undefined) {\n                return undefined;\n            }\n\n            message = `[\\`Changes\\`](${DiffWithCommand.getMarkdownCommandArgs({\n                lhs: {\n                    sha: diffUris.previous.sha || '',\n                    uri: diffUris.previous.documentUri()\n                },\n                rhs: {\n                    sha: diffUris.current.sha || '',\n                    uri: diffUris.current.documentUri()\n                },\n                repoPath: commit.repoPath,\n                line: editorLine\n            })} \"Open Changes\")`;\n\n            previous =\n                diffUris.previous.sha === undefined || diffUris.previous.isUncommitted\n                    ? `_${GitService.shortenSha(diffUris.previous.sha, {\n                          working: 'Working Tree'\n                      })}_`\n                    : `[\\`${GitService.shortenSha(\n                          diffUris.previous.sha || ''\n                      )}\\`](${ShowQuickCommitDetailsCommand.getMarkdownCommandArgs(\n                          diffUris.previous.sha || ''\n                      )} \"Show Commit Details\")`;\n\n            current =\n                diffUris.current.sha === undefined || diffUris.current.isUncommitted\n                    ? `_${GitService.shortenSha(diffUris.current.sha, {\n                          working: 'Working Tree'\n                      })}_`\n                    : `[\\`${GitService.shortenSha(\n                          diffUris.current.sha || ''\n                      )}\\`](${ShowQuickCommitDetailsCommand.getMarkdownCommandArgs(\n                          diffUris.current.sha || ''\n                      )} \"Show Commit Details\")`;\n        }\n        else {\n            message = `[\\`Changes\\`](${DiffWithCommand.getMarkdownCommandArgs(commit, editorLine)} \"Open Changes\")`;\n\n            previous = `[\\`${commit.previousShortSha}\\`](${ShowQuickCommitDetailsCommand.getMarkdownCommandArgs(\n                commit.previousSha!\n            )} \"Show Commit Details\")`;\n\n            current = `[\\`${commit.shortSha}\\`](${ShowQuickCommitDetailsCommand.getMarkdownCommandArgs(\n                commit.sha\n            )} \"Show Commit Details\")`;\n        }\n\n        message += ` &nbsp; ${GlyphChars.Dash} &nbsp; ${previous} &nbsp;${GlyphChars.ArrowLeftRightLong}&nbsp; ${current}\\n${diff}`;\n\n        const markdown = new MarkdownString(message);\n        markdown.isTrusted = true;\n        return markdown;\n    }\n\n    static async detailsHoverMessage(\n        commit: GitCommit,\n        uri: GitUri,\n        editorLine: number,\n        dateFormat: string | null,\n        annotationType: FileAnnotationType | undefined\n    ): Promise<MarkdownString> {\n        if (dateFormat === null) {\n            dateFormat = 'MMMM Do, YYYY h:mma';\n        }\n\n        const [presence, previousLineDiffUris, remotes] = await Promise.all([\n            Container.vsls.getContactPresence(commit.email),\n            commit.isUncommitted ? commit.getPreviousLineDiffUris(uri, editorLine, uri.sha) : undefined,\n            Container.git.getRemotes(commit.repoPath, { sort: true })\n        ]);\n\n        const markdown = new MarkdownString(\n            CommitFormatter.fromTemplate(Container.config.hovers.detailsMarkdownFormat, commit, {\n                annotationType: annotationType,\n                dateFormat: dateFormat,\n                line: editorLine,\n                markdown: true,\n                presence: presence,\n                previousLineDiffUris: previousLineDiffUris,\n                remotes: remotes\n            })\n        );\n        markdown.isTrusted = true;\n        return markdown;\n    }\n\n    static gutter(\n        commit: GitCommit,\n        format: string,\n        dateFormatOrFormatOptions: string | null | CommitFormatOptions,\n        renderOptions: RenderOptions\n    ): Partial<DecorationOptions> {\n        const decoration: Partial<DecorationOptions> = {\n            renderOptions: {\n                before: { ...renderOptions }\n            }\n        };\n\n        if (commit.isUncommitted) {\n            decoration.renderOptions!.before!.color = renderOptions.uncommittedColor;\n        }\n\n        const message = CommitFormatter.fromTemplate(format, commit, dateFormatOrFormatOptions);\n        decoration.renderOptions!.before!.contentText = Strings.pad(message.replace(/ /g, GlyphChars.Space), 1, 1);\n\n        return decoration;\n    }\n\n    static gutterRenderOptions(\n        separateLines: boolean,\n        heatmap: HeatmapConfig,\n        format: string,\n        options: CommitFormatOptions\n    ): RenderOptions {\n        // Get the character count of all the tokens, assuming there there is a cap (bail if not)\n        let chars = 0;\n        for (const token of Objects.values(options.tokenOptions!)) {\n            if (token === undefined) continue;\n\n            // If any token is uncapped, kick out and set no max\n            if (token.truncateTo == null) {\n                chars = -1;\n                break;\n            }\n\n            chars += token.truncateTo;\n        }\n\n        if (chars >= 0) {\n            // Add the chars of the template string (without tokens)\n            chars += Strings.getWidth(Strings.interpolate(format, undefined));\n            // If we have chars, add a bit of padding\n            if (chars > 0) {\n                chars += 3;\n            }\n        }\n\n        let borderStyle = undefined;\n        let borderWidth = undefined;\n        if (heatmap.enabled) {\n            borderStyle = 'solid';\n            borderWidth = heatmap.location === 'left' ? '0 0 0 2px' : '0 2px 0 0';\n        }\n\n        let width;\n        if (chars >= 0) {\n            const spacing = configuration.getAny<number>('editor.letterSpacing');\n            if (spacing != null && spacing !== 0) {\n                width = `calc(${chars}ch + ${Math.round(chars * spacing)}px)`;\n            }\n            else {\n                width = `${chars}ch`;\n            }\n        }\n\n        return {\n            backgroundColor: new ThemeColor('gitlens.gutterBackgroundColor'),\n            borderStyle: borderStyle,\n            borderWidth: borderWidth,\n            color: new ThemeColor('gitlens.gutterForegroundColor'),\n            fontWeight: 'normal',\n            fontStyle: 'normal',\n            height: '100%',\n            margin: '0 26px -1px 0',\n            textDecoration: separateLines ? 'overline solid rgba(0, 0, 0, .2)' : 'none',\n            width: width,\n            uncommittedColor: new ThemeColor('gitlens.gutterUncommittedForegroundColor')\n        };\n    }\n\n    static heatmap(\n        commit: GitCommit,\n        heatmap: ComputedHeatmap,\n        renderOptions: RenderOptions\n    ): Partial<DecorationOptions> {\n        const decoration: Partial<DecorationOptions> = {\n            renderOptions: {\n                before: { ...renderOptions }\n            }\n        };\n\n        Annotations.applyHeatmap(decoration, commit.date, heatmap);\n\n        return decoration;\n    }\n\n    static heatmapRenderOptions(): RenderOptions {\n        return {\n            borderStyle: 'solid',\n            borderWidth: '0 0 0 2px'\n        };\n    }\n\n    static trailing(\n        commit: GitCommit,\n        // uri: GitUri,\n        // editorLine: number,\n        format: string,\n        dateFormat: string | null,\n        scrollable: boolean = true,\n        getBranchAndTagTips?: (sha: string) => string | undefined\n    ): Partial<DecorationOptions> {\n        // TODO: Enable this once there is better caching\n        // let diffUris;\n        // if (commit.isUncommitted) {\n        //     diffUris = await commit.getPreviousLineDiffUris(uri, editorLine, uri.sha);\n        // }\n\n        const message = CommitFormatter.fromTemplate(format, commit, {\n            dateFormat: dateFormat,\n            getBranchAndTagTips: getBranchAndTagTips,\n            // previousLineDiffUris: diffUris,\n            truncateMessageAtNewLine: true\n        });\n\n        return {\n            renderOptions: {\n                after: {\n                    backgroundColor: new ThemeColor('gitlens.trailingLineBackgroundColor'),\n                    color: new ThemeColor('gitlens.trailingLineForegroundColor'),\n                    contentText: Strings.pad(message.replace(/ /g, GlyphChars.Space), 1, 1),\n                    fontWeight: 'normal',\n                    fontStyle: 'normal',\n                    // Pull the decoration out of the document flow if we want to be scrollable\n                    textDecoration: `none;${scrollable ? '' : ' position: absolute;'}`\n                }\n            }\n        };\n    }\n\n    private static getDiffFromHunkLine(hunkLine: GitDiffHunkLine): string {\n        if (Container.config.hovers.changesDiff === 'hunk') {\n            return `\\`\\`\\`diff\\n${hunkLine.hunk.diff}\\n\\`\\`\\``;\n        }\n\n        return `\\`\\`\\`diff${hunkLine.previous === undefined ? '' : `\\n-${hunkLine.previous.line}`}${\n            hunkLine.current === undefined ? '' : `\\n+${hunkLine.current.line}`\n        }\\n\\`\\`\\``;\n    }\n\n    private static getHeatmapColor(date: Date, heatmap: ComputedHeatmap) {\n        const baseColor = heatmap.cold ? heatmap.colors.cold : heatmap.colors.hot;\n\n        const age = heatmap.computeAge(date);\n        if (age === 0) return baseColor;\n\n        if (computedHeatmapColor === undefined || computedHeatmapColor.color !== baseColor) {\n            let rgba = toRgba(baseColor);\n            if (rgba == null) {\n                rgba = toRgba(heatmap.cold ? defaultHeatmapColdColor : defaultHeatmapHotColor)!;\n            }\n\n            const [r, g, b] = rgba;\n            computedHeatmapColor = {\n                color: baseColor,\n                rgb: `${r}, ${g}, ${b}`\n            };\n        }\n\n        return `rgba(${computedHeatmapColor.rgb}, ${(1 - age / 10).toFixed(2)})`;\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport {\n    ConfigurationChangeEvent,\n    DecorationRangeBehavior,\n    Disposable,\n    Event,\n    EventEmitter,\n    OverviewRulerLane,\n    Progress,\n    ProgressLocation,\n    TextDocument,\n    TextEditor,\n    TextEditorDecorationType,\n    TextEditorViewColumnChangeEvent,\n    ThemeColor,\n    window,\n    workspace\n} from 'vscode';\nimport { AnnotationsToggleMode, configuration, FileAnnotationType, HighlightLocations } from '../configuration';\nimport { CommandContext, GlyphChars, isTextEditor, setCommandContext } from '../constants';\nimport { Container } from '../container';\nimport { KeyboardScope } from '../keyboard';\nimport { Logger } from '../logger';\nimport { Functions, Iterables } from '../system';\nimport {\n    DocumentBlameStateChangeEvent,\n    DocumentDirtyStateChangeEvent,\n    GitDocumentState\n} from '../trackers/gitDocumentTracker';\nimport { AnnotationProviderBase, AnnotationStatus, TextEditorCorrelationKey } from './annotationProvider';\nimport { GutterBlameAnnotationProvider } from './gutterBlameAnnotationProvider';\nimport { HeatmapBlameAnnotationProvider } from './heatmapBlameAnnotationProvider';\nimport { RecentChangesAnnotationProvider } from './recentChangesAnnotationProvider';\n\nexport enum AnnotationClearReason {\n    User = 'User',\n    BlameabilityChanged = 'BlameabilityChanged',\n    ColumnChanged = 'ColumnChanged',\n    Disposing = 'Disposing',\n    DocumentChanged = 'DocumentChanged',\n    DocumentClosed = 'DocumentClosed'\n}\n\nexport const Decorations = {\n    blameAnnotation: window.createTextEditorDecorationType({\n        rangeBehavior: DecorationRangeBehavior.ClosedOpen,\n        textDecoration: 'none'\n    }),\n    blameHighlight: undefined as TextEditorDecorationType | undefined,\n    heatmapAnnotation: window.createTextEditorDecorationType({\n        before: {\n            contentText: GlyphChars.ZeroWidthSpace,\n            height: '100%',\n            margin: '0 26px -1px 0'\n        }\n    }),\n    heatmapHighlight: undefined as TextEditorDecorationType | undefined,\n    recentChangesAnnotation: undefined as TextEditorDecorationType | undefined,\n    recentChangesHighlight: undefined as TextEditorDecorationType | undefined\n};\n\nexport class FileAnnotationController implements Disposable {\n    private _onDidToggleAnnotations = new EventEmitter<void>();\n    get onDidToggleAnnotations(): Event<void> {\n        return this._onDidToggleAnnotations.event;\n    }\n\n    private _annotationsDisposable: Disposable | undefined;\n    private _annotationProviders: Map<TextEditorCorrelationKey, AnnotationProviderBase> = new Map();\n    private _disposable: Disposable;\n    private _editor: TextEditor | undefined;\n    private _keyboardScope: KeyboardScope | undefined = undefined;\n    private readonly _toggleModes: Map<FileAnnotationType, AnnotationsToggleMode>;\n    private _annotationType: FileAnnotationType | undefined = undefined;\n\n    constructor() {\n        this._disposable = Disposable.from(configuration.onDidChange(this.onConfigurationChanged, this));\n\n        this._toggleModes = new Map();\n        this.onConfigurationChanged(configuration.initializingChangeEvent);\n    }\n\n    dispose() {\n        void this.clearAll();\n\n        Decorations.blameAnnotation && Decorations.blameAnnotation.dispose();\n        Decorations.blameHighlight && Decorations.blameHighlight.dispose();\n\n        this._annotationsDisposable && this._annotationsDisposable.dispose();\n        this._disposable && this._disposable.dispose();\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        const cfg = Container.config;\n\n        if (configuration.changed(e, configuration.name('blame')('highlight').value)) {\n            Decorations.blameHighlight && Decorations.blameHighlight.dispose();\n\n            const cfgHighlight = cfg.blame.highlight;\n\n            if (cfgHighlight.enabled) {\n                Decorations.blameHighlight = window.createTextEditorDecorationType({\n                    gutterIconSize: 'contain',\n                    isWholeLine: true,\n                    overviewRulerLane: OverviewRulerLane.Right,\n                    backgroundColor: cfgHighlight.locations.includes(HighlightLocations.Line)\n                        ? new ThemeColor('gitlens.lineHighlightBackgroundColor')\n                        : undefined,\n                    overviewRulerColor: cfgHighlight.locations.includes(HighlightLocations.Overview)\n                        ? new ThemeColor('gitlens.lineHighlightOverviewRulerColor')\n                        : undefined,\n                    dark: {\n                        gutterIconPath: cfgHighlight.locations.includes(HighlightLocations.Gutter)\n                            ? Container.context.asAbsolutePath('images/dark/highlight-gutter.svg')\n                            : undefined\n                    },\n                    light: {\n                        gutterIconPath: cfgHighlight.locations.includes(HighlightLocations.Gutter)\n                            ? Container.context.asAbsolutePath('images/light/highlight-gutter.svg')\n                            : undefined\n                    }\n                });\n            }\n            else {\n                Decorations.blameHighlight = undefined;\n            }\n        }\n\n        if (configuration.changed(e, configuration.name('recentChanges')('highlight').value)) {\n            Decorations.recentChangesAnnotation && Decorations.recentChangesAnnotation.dispose();\n\n            const cfgHighlight = cfg.recentChanges.highlight;\n\n            Decorations.recentChangesAnnotation = window.createTextEditorDecorationType({\n                gutterIconSize: 'contain',\n                isWholeLine: true,\n                overviewRulerLane: OverviewRulerLane.Right,\n                backgroundColor: cfgHighlight.locations.includes(HighlightLocations.Line)\n                    ? new ThemeColor('gitlens.lineHighlightBackgroundColor')\n                    : undefined,\n                overviewRulerColor: cfgHighlight.locations.includes(HighlightLocations.Overview)\n                    ? new ThemeColor('gitlens.lineHighlightOverviewRulerColor')\n                    : undefined,\n                dark: {\n                    gutterIconPath: cfgHighlight.locations.includes(HighlightLocations.Gutter)\n                        ? Container.context.asAbsolutePath('images/dark/highlight-gutter.svg')\n                        : undefined\n                },\n                light: {\n                    gutterIconPath: cfgHighlight.locations.includes(HighlightLocations.Gutter)\n                        ? Container.context.asAbsolutePath('images/light/highlight-gutter.svg')\n                        : undefined\n                }\n            });\n        }\n\n        const initializing = configuration.initializing(e);\n\n        if (configuration.changed(e, configuration.name('blame')('toggleMode').value)) {\n            this._toggleModes.set(FileAnnotationType.Blame, cfg.blame.toggleMode);\n            if (!initializing && cfg.blame.toggleMode === AnnotationsToggleMode.File) {\n                void this.clearAll();\n            }\n        }\n\n        if (configuration.changed(e, configuration.name('heatmap')('toggleMode').value)) {\n            this._toggleModes.set(FileAnnotationType.Heatmap, cfg.heatmap.toggleMode);\n            if (!initializing && cfg.heatmap.toggleMode === AnnotationsToggleMode.File) {\n                void this.clearAll();\n            }\n        }\n\n        if (configuration.changed(e, configuration.name('recentChanges')('toggleMode').value)) {\n            this._toggleModes.set(FileAnnotationType.RecentChanges, cfg.recentChanges.toggleMode);\n            if (!initializing && cfg.recentChanges.toggleMode === AnnotationsToggleMode.File) {\n                void this.clearAll();\n            }\n        }\n\n        if (initializing) return;\n\n        if (\n            configuration.changed(e, configuration.name('blame').value) ||\n            configuration.changed(e, configuration.name('recentChanges').value) ||\n            configuration.changed(e, configuration.name('heatmap').value) ||\n            configuration.changed(e, configuration.name('hovers').value)\n        ) {\n            // Since the configuration has changed -- reset any visible annotations\n            for (const provider of this._annotationProviders.values()) {\n                if (provider === undefined) continue;\n\n                if (provider.annotationType === FileAnnotationType.RecentChanges) {\n                    provider.reset({\n                        decoration: Decorations.recentChangesAnnotation!,\n                        highlightDecoration: Decorations.recentChangesHighlight\n                    });\n                }\n                else if (provider.annotationType === FileAnnotationType.Blame) {\n                    provider.reset({\n                        decoration: Decorations.blameAnnotation,\n                        highlightDecoration: Decorations.blameHighlight\n                    });\n                }\n                else {\n                    void this.show(provider.editor, FileAnnotationType.Heatmap);\n                }\n            }\n        }\n    }\n\n    private async onActiveTextEditorChanged(editor: TextEditor | undefined) {\n        if (editor !== undefined && !isTextEditor(editor)) return;\n\n        this._editor = editor;\n        // Logger.log('AnnotationController.onActiveTextEditorChanged', editor && editor.document.uri.fsPath);\n\n        if (this.isInWindowToggle()) {\n            await this.show(editor, this._annotationType!);\n\n            return;\n        }\n\n        const provider = this.getProvider(editor);\n        if (provider === undefined) {\n            setCommandContext(CommandContext.AnnotationStatus, undefined);\n            void this.detachKeyboardHook();\n        }\n        else {\n            setCommandContext(CommandContext.AnnotationStatus, provider.status);\n            void this.attachKeyboardHook();\n        }\n    }\n\n    private onBlameStateChanged(e: DocumentBlameStateChangeEvent<GitDocumentState>) {\n        // Only care if we are becoming un-blameable\n        if (e.blameable) return;\n\n        const editor = window.activeTextEditor;\n        if (editor === undefined) return;\n\n        void this.clear(editor, AnnotationClearReason.BlameabilityChanged);\n    }\n\n    private onDirtyStateChanged(e: DocumentDirtyStateChangeEvent<GitDocumentState>) {\n        for (const [key, p] of this._annotationProviders) {\n            if (!e.document.is(p.document)) continue;\n\n            void this.clearCore(key, AnnotationClearReason.DocumentChanged);\n        }\n    }\n\n    private onTextDocumentClosed(document: TextDocument) {\n        if (!Container.git.isTrackable(document.uri)) return;\n\n        for (const [key, p] of this._annotationProviders) {\n            if (p.document !== document) continue;\n\n            void this.clearCore(key, AnnotationClearReason.DocumentClosed);\n        }\n    }\n\n    private onTextEditorViewColumnChanged(e: TextEditorViewColumnChangeEvent) {\n        // FYI https://github.com/Microsoft/vscode/issues/35602\n        const provider = this.getProvider(e.textEditor);\n        if (provider === undefined) {\n            // If we don't find an exact match, do a fuzzy match (since we can't properly track editors)\n            const fuzzyProvider = Iterables.find(\n                this._annotationProviders.values(),\n                p => p.editor.document === e.textEditor.document\n            );\n            if (fuzzyProvider == null) return;\n\n            void this.clearCore(fuzzyProvider.correlationKey, AnnotationClearReason.ColumnChanged);\n\n            return;\n        }\n\n        void provider.restore(e.textEditor);\n    }\n\n    private onVisibleTextEditorsChanged(editors: TextEditor[]) {\n        let provider: AnnotationProviderBase | undefined;\n        for (const e of editors) {\n            provider = this.getProvider(e);\n            if (provider === undefined) continue;\n\n            void provider.restore(e);\n        }\n    }\n\n    isInWindowToggle(): boolean {\n        return this.getToggleMode(this._annotationType) === AnnotationsToggleMode.Window;\n    }\n\n    private getToggleMode(annotationType: FileAnnotationType | undefined): AnnotationsToggleMode {\n        if (annotationType === undefined) return AnnotationsToggleMode.File;\n\n        return this._toggleModes.get(annotationType) || AnnotationsToggleMode.File;\n    }\n\n    clear(editor: TextEditor, reason: AnnotationClearReason = AnnotationClearReason.User) {\n        if (this.isInWindowToggle()) {\n            return this.clearAll();\n        }\n\n        return this.clearCore(AnnotationProviderBase.getCorrelationKey(editor), reason);\n    }\n\n    async clearAll() {\n        this._annotationType = undefined;\n        for (const [key] of this._annotationProviders) {\n            await this.clearCore(key, AnnotationClearReason.Disposing);\n        }\n    }\n\n    async getAnnotationType(editor: TextEditor | undefined): Promise<FileAnnotationType | undefined> {\n        const provider = this.getProvider(editor);\n        if (provider === undefined) return undefined;\n\n        const trackedDocument = await Container.tracker.get(editor!.document);\n        if (trackedDocument === undefined || !trackedDocument.isBlameable) return undefined;\n\n        return provider.annotationType;\n    }\n\n    getProvider(editor: TextEditor | undefined): AnnotationProviderBase | undefined {\n        if (editor === undefined || editor.document === undefined) return undefined;\n        return this._annotationProviders.get(AnnotationProviderBase.getCorrelationKey(editor));\n    }\n\n    async show(\n        editor: TextEditor | undefined,\n        type: FileAnnotationType,\n        shaOrLine?: string | number\n    ): Promise<boolean> {\n        if (this.getToggleMode(type) === AnnotationsToggleMode.Window) {\n            let first = this._annotationType === undefined;\n            const reset = !first && this._annotationType !== type;\n\n            this._annotationType = type;\n\n            if (reset) {\n                await this.clearAll();\n                first = true;\n            }\n\n            if (first) {\n                for (const e of window.visibleTextEditors) {\n                    if (e === editor) continue;\n\n                    void this.show(e, type);\n                }\n            }\n        }\n\n        if (editor === undefined) return false; // || editor.viewColumn === undefined) return false;\n        this._editor = editor;\n\n        const trackedDocument = await Container.tracker.getOrAdd(editor.document);\n        if (!trackedDocument.isBlameable) return false;\n\n        const currentProvider = this.getProvider(editor);\n        if (currentProvider !== undefined && currentProvider.annotationType === type) {\n            await currentProvider.selection(shaOrLine);\n            return true;\n        }\n\n        const provider = await window.withProgress(\n            { location: ProgressLocation.Window },\n            async (progress: Progress<{ message: string }>) => {\n                await setCommandContext(CommandContext.AnnotationStatus, AnnotationStatus.Computing);\n\n                const computingAnnotations = this.showAnnotationsCore(\n                    currentProvider,\n                    editor,\n                    type,\n                    shaOrLine,\n                    progress\n                );\n                const provider = await computingAnnotations;\n\n                if (editor === this._editor) {\n                    await setCommandContext(CommandContext.AnnotationStatus, provider && provider.status);\n                }\n\n                return computingAnnotations;\n            }\n        );\n\n        return provider !== undefined;\n    }\n\n    async toggle(\n        editor: TextEditor | undefined,\n        type: FileAnnotationType,\n        shaOrLine?: string | number,\n        on?: boolean\n    ): Promise<boolean> {\n        if (editor !== undefined) {\n            const trackedDocument = await Container.tracker.getOrAdd(editor.document);\n            if (\n                (type === FileAnnotationType.RecentChanges && !trackedDocument.isTracked) ||\n                !trackedDocument.isBlameable\n            ) {\n                return false;\n            }\n        }\n\n        const provider = this.getProvider(editor);\n        if (provider === undefined) return this.show(editor!, type, shaOrLine);\n\n        const reopen = provider.annotationType !== type;\n        if (on === true && !reopen) return true;\n\n        if (this.isInWindowToggle()) {\n            await this.clearAll();\n        }\n        else {\n            await this.clearCore(provider.correlationKey, AnnotationClearReason.User);\n        }\n\n        if (!reopen) return false;\n\n        return this.show(editor, type, shaOrLine);\n    }\n\n    private async attachKeyboardHook() {\n        // Allows pressing escape to exit the annotations\n        if (this._keyboardScope === undefined) {\n            this._keyboardScope = await Container.keyboard.beginScope({\n                escape: {\n                    onDidPressKey: async () => {\n                        const e = this._editor;\n                        if (e === undefined) return undefined;\n\n                        await this.clear(e, AnnotationClearReason.User);\n                        return undefined;\n                    }\n                }\n            });\n        }\n    }\n\n    private async clearCore(key: TextEditorCorrelationKey, reason: AnnotationClearReason) {\n        const provider = this._annotationProviders.get(key);\n        if (provider === undefined) return;\n\n        Logger.log(`${reason}:`, `Clear annotations for ${key}`);\n\n        this._annotationProviders.delete(key);\n        provider.dispose();\n\n        if (this._annotationProviders.size === 0 || key === AnnotationProviderBase.getCorrelationKey(this._editor)) {\n            await setCommandContext(CommandContext.AnnotationStatus, undefined);\n            await this.detachKeyboardHook();\n        }\n\n        if (this._annotationProviders.size === 0) {\n            Logger.log('Remove all listener registrations for annotations');\n\n            this._annotationsDisposable && this._annotationsDisposable.dispose();\n            this._annotationsDisposable = undefined;\n        }\n\n        this._onDidToggleAnnotations.fire();\n    }\n\n    private async detachKeyboardHook() {\n        if (this._keyboardScope === undefined) return;\n\n        await this._keyboardScope.dispose();\n        this._keyboardScope = undefined;\n    }\n\n    private async showAnnotationsCore(\n        currentProvider: AnnotationProviderBase | undefined,\n        editor: TextEditor,\n        type: FileAnnotationType,\n        shaOrLine?: string | number,\n        progress?: Progress<{ message: string }>\n    ): Promise<AnnotationProviderBase | undefined> {\n        if (progress !== undefined) {\n            let annotationsLabel = 'annotations';\n            switch (type) {\n                case FileAnnotationType.Blame:\n                    annotationsLabel = 'blame annotations';\n                    break;\n\n                case FileAnnotationType.Heatmap:\n                    annotationsLabel = 'heatmap annotations';\n                    break;\n\n                case FileAnnotationType.RecentChanges:\n                    annotationsLabel = 'recent changes annotations';\n                    break;\n            }\n\n            progress!.report({\n                message: `Computing ${annotationsLabel} for ${paths.basename(editor.document.fileName)}`\n            });\n        }\n\n        // Allows pressing escape to exit the annotations\n        await this.attachKeyboardHook();\n\n        const trackedDocument = await Container.tracker.getOrAdd(editor.document);\n\n        let provider: AnnotationProviderBase | undefined = undefined;\n        switch (type) {\n            case FileAnnotationType.Blame:\n                provider = new GutterBlameAnnotationProvider(\n                    editor,\n                    trackedDocument,\n                    Decorations.blameAnnotation,\n                    Decorations.blameHighlight\n                );\n                break;\n\n            case FileAnnotationType.Heatmap:\n                provider = new HeatmapBlameAnnotationProvider(\n                    editor,\n                    trackedDocument,\n                    Decorations.heatmapAnnotation,\n                    Decorations.heatmapHighlight\n                );\n                break;\n\n            case FileAnnotationType.RecentChanges:\n                provider = new RecentChangesAnnotationProvider(\n                    editor,\n                    trackedDocument,\n                    Decorations.recentChangesAnnotation!,\n                    Decorations.recentChangesHighlight\n                );\n                break;\n        }\n        if (provider === undefined || !(await provider.validate())) return undefined;\n\n        if (currentProvider !== undefined) {\n            await this.clearCore(currentProvider.correlationKey, AnnotationClearReason.User);\n        }\n\n        if (!this._annotationsDisposable && this._annotationProviders.size === 0) {\n            Logger.log('Add listener registrations for annotations');\n\n            this._annotationsDisposable = Disposable.from(\n                window.onDidChangeActiveTextEditor(Functions.debounce(this.onActiveTextEditorChanged, 50), this),\n                window.onDidChangeTextEditorViewColumn(this.onTextEditorViewColumnChanged, this),\n                window.onDidChangeVisibleTextEditors(Functions.debounce(this.onVisibleTextEditorsChanged, 50), this),\n                workspace.onDidCloseTextDocument(this.onTextDocumentClosed, this),\n                Container.tracker.onDidChangeBlameState(this.onBlameStateChanged, this),\n                Container.tracker.onDidChangeDirtyState(this.onDirtyStateChanged, this)\n            );\n        }\n\n        this._annotationProviders.set(provider.correlationKey, provider);\n        if (await provider.provideAnnotation(shaOrLine)) {\n            this._onDidToggleAnnotations.fire();\n            return provider;\n        }\n\n        return undefined;\n    }\n}\n","'use strict';\nimport {\n    CancellationToken,\n    Disposable,\n    Hover,\n    languages,\n    Position,\n    Range,\n    TextDocument,\n    TextEditor,\n    TextEditorDecorationType\n} from 'vscode';\nimport { Container } from '../container';\nimport { GitBlame, GitBlameCommit, GitCommit, GitUri } from '../git/gitService';\nimport { Arrays, Iterables, log } from '../system';\nimport { GitDocumentState, TrackedDocument } from '../trackers/gitDocumentTracker';\nimport { AnnotationProviderBase } from './annotationProvider';\nimport { Annotations, ComputedHeatmap } from './annotations';\n\nexport abstract class BlameAnnotationProviderBase extends AnnotationProviderBase {\n    protected _blame: Promise<GitBlame | undefined>;\n    protected _hoverProviderDisposable: Disposable | undefined;\n    protected readonly _uri: GitUri;\n\n    constructor(\n        editor: TextEditor,\n        trackedDocument: TrackedDocument<GitDocumentState>,\n        decoration: TextEditorDecorationType,\n        highlightDecoration: TextEditorDecorationType | undefined\n    ) {\n        super(editor, trackedDocument, decoration, highlightDecoration);\n\n        this._uri = trackedDocument.uri;\n        this._blame = editor.document.isDirty\n            ? Container.git.getBlameForFileContents(this._uri, editor.document.getText())\n            : Container.git.getBlameForFile(this._uri);\n\n        if (editor.document.isDirty) {\n            trackedDocument.setForceDirtyStateChangeOnNextDocumentChange();\n        }\n    }\n\n    clear() {\n        if (this._hoverProviderDisposable !== undefined) {\n            this._hoverProviderDisposable.dispose();\n            this._hoverProviderDisposable = undefined;\n        }\n        super.clear();\n    }\n\n    onReset(changes?: {\n        decoration: TextEditorDecorationType;\n        highlightDecoration: TextEditorDecorationType | undefined;\n    }) {\n        if (this.editor !== undefined) {\n            this._blame = this.editor.document.isDirty\n                ? Container.git.getBlameForFileContents(this._uri, this.editor.document.getText())\n                : Container.git.getBlameForFile(this._uri);\n        }\n\n        return super.onReset(changes);\n    }\n\n    @log({ args: false })\n    async selection(shaOrLine?: string | number, blame?: GitBlame) {\n        if (!this.highlightDecoration) return;\n\n        if (blame === undefined) {\n            blame = await this._blame;\n            if (!blame || !blame.lines.length) return;\n        }\n\n        let sha: string | undefined = undefined;\n        if (typeof shaOrLine === 'string') {\n            sha = shaOrLine;\n        }\n        else if (typeof shaOrLine === 'number') {\n            if (shaOrLine >= 0) {\n                const commitLine = blame.lines[shaOrLine];\n                sha = commitLine && commitLine.sha;\n            }\n        }\n        else {\n            sha = Iterables.first(blame.commits.values()).sha;\n        }\n\n        if (!sha) {\n            this.editor.setDecorations(this.highlightDecoration, []);\n            return;\n        }\n\n        const highlightDecorationRanges = Arrays.filterMap(blame.lines, l =>\n            l.sha === sha\n                ? // editor lines are 0-based\n                  this.editor.document.validateRange(new Range(l.line - 1, 0, l.line - 1, Number.MAX_SAFE_INTEGER))\n                : undefined\n        );\n\n        this.editor.setDecorations(this.highlightDecoration, highlightDecorationRanges);\n    }\n\n    async validate(): Promise<boolean> {\n        const blame = await this._blame;\n        return blame !== undefined && blame.lines.length !== 0;\n    }\n\n    protected async getBlame(): Promise<GitBlame | undefined> {\n        const blame = await this._blame;\n        if (blame === undefined || blame.lines.length === 0) return undefined;\n\n        return blame;\n    }\n\n    @log({ args: false })\n    protected getComputedHeatmap(blame: GitBlame): ComputedHeatmap {\n        const dates = [];\n\n        let commit;\n        let previousSha;\n        for (const l of blame.lines) {\n            if (previousSha === l.sha) continue;\n            previousSha = l.sha;\n\n            commit = blame.commits.get(l.sha);\n            if (commit === undefined) continue;\n\n            dates.push(commit.date);\n        }\n\n        dates.sort((a, b) => a.getTime() - b.getTime());\n\n        const half = Math.floor(dates.length / 2);\n        const median =\n            dates.length % 2 ? dates[half].getTime() : (dates[half - 1].getTime() + dates[half].getTime()) / 2.0;\n\n        const lookup: number[] = [];\n\n        const newest = dates[dates.length - 1].getTime();\n        let step = (newest - median) / 5;\n        for (let i = 5; i > 0; i--) {\n            lookup.push(median + step * i);\n        }\n\n        lookup.push(median);\n\n        const oldest = dates[0].getTime();\n        step = (median - oldest) / 4;\n        for (let i = 1; i <= 4; i++) {\n            lookup.push(median - step * i);\n        }\n\n        const d = new Date();\n        d.setDate(d.getDate() - (Container.config.heatmap.ageThreshold || 90));\n\n        return {\n            cold: newest < d.getTime(),\n            colors: {\n                cold: Container.config.heatmap.coldColor,\n                hot: Container.config.heatmap.hotColor\n            },\n            median: median,\n            newest: newest,\n            oldest: oldest,\n            computeAge: (date: Date) => {\n                const time = date.getTime();\n                let index = 0;\n                for (let i = 0; i < lookup.length; i++) {\n                    index = i;\n                    if (time >= lookup[i]) break;\n                }\n\n                return index;\n            }\n        };\n    }\n\n    registerHoverProviders(providers: { details: boolean; changes: boolean }) {\n        if (\n            !Container.config.hovers.enabled ||\n            !Container.config.hovers.annotations.enabled ||\n            (!providers.details && !providers.changes)\n        ) {\n            return;\n        }\n\n        const subscriptions: Disposable[] = [];\n        if (providers.changes) {\n            subscriptions.push(\n                languages.registerHoverProvider(\n                    { pattern: this.document.uri.fsPath },\n                    {\n                        provideHover: this.provideChangesHover.bind(this)\n                    }\n                )\n            );\n        }\n        if (providers.details) {\n            subscriptions.push(\n                languages.registerHoverProvider(\n                    { pattern: this.document.uri.fsPath },\n                    {\n                        provideHover: this.provideDetailsHover.bind(this)\n                    }\n                )\n            );\n        }\n\n        this._hoverProviderDisposable = Disposable.from(...subscriptions);\n    }\n\n    async provideDetailsHover(\n        document: TextDocument,\n        position: Position,\n        token: CancellationToken\n    ): Promise<Hover | undefined> {\n        const commit = await this.getCommitForHover(position);\n        if (commit === undefined) return undefined;\n\n        // Get the full commit message -- since blame only returns the summary\n        let logCommit: GitCommit | undefined = undefined;\n        if (!commit.isUncommitted) {\n            logCommit = await Container.git.getCommitForFile(commit.repoPath, commit.uri.fsPath, {\n                ref: commit.sha\n            });\n            if (logCommit !== undefined) {\n                // Preserve the previous commit from the blame commit\n                logCommit.previousFileName = commit.previousFileName;\n                logCommit.previousSha = commit.previousSha;\n            }\n        }\n\n        let editorLine = this.editor.selection.active.line;\n        const line = editorLine + 1;\n        const commitLine = commit.lines.find(l => l.line === line) || commit.lines[0];\n        editorLine = commitLine.originalLine - 1;\n\n        const message = await Annotations.detailsHoverMessage(\n            logCommit || commit,\n            await GitUri.fromUri(document.uri),\n            editorLine,\n            Container.config.defaultDateFormat,\n            this.annotationType\n        );\n        return new Hover(\n            message,\n            document.validateRange(new Range(position.line, 0, position.line, Number.MAX_SAFE_INTEGER))\n        );\n    }\n\n    async provideChangesHover(\n        document: TextDocument,\n        position: Position,\n        token: CancellationToken\n    ): Promise<Hover | undefined> {\n        const commit = await this.getCommitForHover(position);\n        if (commit === undefined) return undefined;\n\n        const message = await Annotations.changesHoverMessage(\n            commit,\n            await GitUri.fromUri(document.uri),\n            position.line\n        );\n        if (message === undefined) return undefined;\n\n        return new Hover(\n            message,\n            document.validateRange(new Range(position.line, 0, position.line, Number.MAX_SAFE_INTEGER))\n        );\n    }\n\n    private async getCommitForHover(position: Position): Promise<GitBlameCommit | undefined> {\n        if (Container.config.hovers.annotations.over !== 'line' && position.character !== 0) return undefined;\n\n        const blame = await this.getBlame();\n        if (blame === undefined) return undefined;\n\n        const line = blame.lines[position.line];\n\n        return blame.commits.get(line.sha);\n    }\n}\n","'use strict';\nimport { DecorationOptions, Range, TextEditorDecorationType, window } from 'vscode';\nimport { FileAnnotationType, GravatarDefaultStyle } from '../configuration';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { CommitFormatOptions, CommitFormatter, GitBlameCommit } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { log, Objects, Strings } from '../system';\nimport { Annotations } from './annotations';\nimport { BlameAnnotationProviderBase } from './blameAnnotationProvider';\n\nexport class GutterBlameAnnotationProvider extends BlameAnnotationProviderBase {\n    @log()\n    async onProvideAnnotation(shaOrLine?: string | number, type?: FileAnnotationType): Promise<boolean> {\n        const cc = Logger.getCorrelationContext();\n\n        this.annotationType = FileAnnotationType.Blame;\n\n        const blame = await this.getBlame();\n        if (blame === undefined) return false;\n\n        let start = process.hrtime();\n\n        const cfg = Container.config.blame;\n\n        // Precalculate the formatting options so we don't need to do it on each iteration\n        const tokenOptions = Strings.getTokensFromTemplate(cfg.format).reduce<{\n            [token: string]: Strings.TokenOptions | undefined;\n        }>((map, token) => {\n            map[token.key] = token.options;\n            return map;\n        }, Object.create(null));\n\n        let getBranchAndTagTips;\n        if (CommitFormatter.has(cfg.format, 'tips')) {\n            getBranchAndTagTips = await Container.git.getBranchesAndTagsTipsFn(blame.repoPath);\n        }\n\n        const options: CommitFormatOptions = {\n            dateFormat: cfg.dateFormat === null ? Container.config.defaultDateFormat : cfg.dateFormat,\n            getBranchAndTagTips: getBranchAndTagTips,\n            tokenOptions: tokenOptions\n        };\n\n        const avatars = cfg.avatars;\n        const gravatarDefault = Container.config.defaultGravatarsStyle;\n        const separateLines = cfg.separateLines;\n        const renderOptions = Annotations.gutterRenderOptions(separateLines, cfg.heatmap, cfg.format, options);\n\n        this.decorations = [];\n        const decorationsMap: { [sha: string]: DecorationOptions | undefined } = Object.create(null);\n        const avatarDecorationsMap:\n            | { [email: string]: { decoration: TextEditorDecorationType; ranges: Range[] } }\n            | undefined = avatars ? Object.create(null) : undefined;\n\n        let commit: GitBlameCommit | undefined;\n        let compacted = false;\n        let gutter: DecorationOptions | undefined;\n        let previousSha: string | undefined;\n\n        let computedHeatmap;\n        if (cfg.heatmap.enabled) {\n            computedHeatmap = this.getComputedHeatmap(blame);\n        }\n\n        for (const l of blame.lines) {\n            // editor lines are 0-based\n            const editorLine = l.line - 1;\n\n            if (previousSha === l.sha) {\n                if (gutter === undefined) continue;\n\n                // Use a shallow copy of the previous decoration options\n                gutter = { ...gutter };\n\n                if (cfg.compact && !compacted) {\n                    // Since we are wiping out the contextText make sure to copy the objects\n                    gutter.renderOptions = {\n                        before: {\n                            ...gutter.renderOptions!.before,\n                            contentText: GlyphChars.Space.repeat(\n                                Strings.getWidth(gutter.renderOptions!.before!.contentText!)\n                            )\n                        }\n                    };\n\n                    if (separateLines) {\n                        gutter.renderOptions!.before!.textDecoration = 'none';\n                    }\n\n                    compacted = true;\n                }\n\n                gutter.range = new Range(editorLine, 0, editorLine, 0);\n\n                this.decorations.push(gutter);\n\n                if (avatars && !cfg.compact && commit !== undefined && commit.email !== undefined) {\n                    this.addOrUpdateGravatarDecoration(commit, gutter.range, gravatarDefault, avatarDecorationsMap!);\n                }\n\n                continue;\n            }\n\n            compacted = false;\n            previousSha = l.sha;\n\n            commit = blame.commits.get(l.sha);\n            if (commit === undefined) continue;\n\n            gutter = decorationsMap[l.sha];\n            if (gutter !== undefined) {\n                gutter = {\n                    ...gutter,\n                    range: new Range(editorLine, 0, editorLine, 0)\n                };\n\n                this.decorations.push(gutter);\n\n                if (avatars && commit.email !== undefined) {\n                    this.addOrUpdateGravatarDecoration(commit, gutter.range, gravatarDefault, avatarDecorationsMap!);\n                }\n\n                continue;\n            }\n\n            gutter = Annotations.gutter(commit, cfg.format, options, renderOptions) as DecorationOptions;\n\n            if (computedHeatmap !== undefined) {\n                Annotations.applyHeatmap(gutter, commit.date, computedHeatmap);\n            }\n\n            gutter.range = new Range(editorLine, 0, editorLine, 0);\n\n            this.decorations.push(gutter);\n\n            if (avatars && commit.email !== undefined) {\n                this.addOrUpdateGravatarDecoration(commit, gutter.range, gravatarDefault, avatarDecorationsMap!);\n            }\n\n            decorationsMap[l.sha] = gutter;\n        }\n\n        Logger.log(cc, `${Strings.getDurationMilliseconds(start)} ms to compute gutter blame annotations`);\n\n        if (this.decorations.length) {\n            start = process.hrtime();\n\n            this.editor.setDecorations(this.decoration!, this.decorations);\n\n            if (avatars) {\n                this.additionalDecorations = [];\n                for (const d of Objects.values(avatarDecorationsMap!)) {\n                    this.additionalDecorations.push(d);\n                    this.editor.setDecorations(d.decoration, d.ranges);\n                }\n            }\n\n            Logger.log(cc, `${Strings.getDurationMilliseconds(start)} ms to apply all gutter blame annotations`);\n        }\n\n        this.registerHoverProviders(Container.config.hovers.annotations);\n        return true;\n    }\n\n    addOrUpdateGravatarDecoration(\n        commit: GitBlameCommit,\n        range: Range,\n        gravatarDefault: GravatarDefaultStyle,\n        map: { [email: string]: { decoration: TextEditorDecorationType; ranges: Range[] } }\n    ) {\n        const avatarDecoration = map[commit.email!];\n        if (avatarDecoration !== undefined) {\n            avatarDecoration.ranges.push(range);\n\n            return;\n        }\n\n        map[commit.email!] = {\n            decoration: window.createTextEditorDecorationType({\n                gutterIconPath: commit.getGravatarUri(gravatarDefault),\n                gutterIconSize: '16px 16px'\n            }),\n            ranges: [range]\n        };\n    }\n}\n","'use strict';\nimport { DecorationOptions, Range } from 'vscode';\nimport { FileAnnotationType } from '../configuration';\nimport { Container } from '../container';\nimport { GitBlameCommit } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { log, Strings } from '../system';\nimport { Annotations } from './annotations';\nimport { BlameAnnotationProviderBase } from './blameAnnotationProvider';\n\nexport class HeatmapBlameAnnotationProvider extends BlameAnnotationProviderBase {\n    @log()\n    async onProvideAnnotation(shaOrLine?: string | number, type?: FileAnnotationType): Promise<boolean> {\n        const cc = Logger.getCorrelationContext();\n\n        this.annotationType = FileAnnotationType.Heatmap;\n\n        const blame = await this.getBlame();\n        if (blame === undefined) return false;\n\n        let start = process.hrtime();\n\n        const renderOptions = Annotations.heatmapRenderOptions();\n\n        this.decorations = [];\n        const decorationsMap: { [sha: string]: DecorationOptions | undefined } = Object.create(null);\n\n        let commit: GitBlameCommit | undefined;\n        let heatmap: DecorationOptions | undefined;\n\n        const computedHeatmap = this.getComputedHeatmap(blame);\n\n        for (const l of blame.lines) {\n            // editor lines are 0-based\n            const editorLine = l.line - 1;\n\n            heatmap = decorationsMap[l.sha];\n            if (heatmap !== undefined) {\n                heatmap = {\n                    ...heatmap,\n                    range: new Range(editorLine, 0, editorLine, 0)\n                };\n\n                this.decorations.push(heatmap);\n\n                continue;\n            }\n\n            commit = blame.commits.get(l.sha);\n            if (commit === undefined) continue;\n\n            heatmap = Annotations.heatmap(commit, computedHeatmap, renderOptions) as DecorationOptions;\n            heatmap.range = new Range(editorLine, 0, editorLine, 0);\n\n            this.decorations.push(heatmap);\n            decorationsMap[l.sha] = heatmap;\n        }\n\n        Logger.log(cc, `${Strings.getDurationMilliseconds(start)} ms to compute heatmap annotations`);\n\n        if (this.decorations.length) {\n            start = process.hrtime();\n\n            this.editor.setDecorations(this.decoration!, this.decorations);\n\n            Logger.log(cc, `${Strings.getDurationMilliseconds(start)} ms to apply recent changes annotations`);\n        }\n\n        this.registerHoverProviders(Container.config.hovers.annotations);\n        return true;\n    }\n}\n","'use strict';\nimport { MarkdownString, Position, Range, TextEditor, TextEditorDecorationType } from 'vscode';\nimport { FileAnnotationType } from '../configuration';\nimport { Container } from '../container';\nimport { GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { log, Strings } from '../system';\nimport { GitDocumentState, TrackedDocument } from '../trackers/gitDocumentTracker';\nimport { AnnotationProviderBase } from './annotationProvider';\nimport { Annotations } from './annotations';\n\nexport class RecentChangesAnnotationProvider extends AnnotationProviderBase {\n    private readonly _uri: GitUri;\n\n    constructor(\n        editor: TextEditor,\n        trackedDocument: TrackedDocument<GitDocumentState>,\n        decoration: TextEditorDecorationType,\n        highlightDecoration: TextEditorDecorationType | undefined\n    ) {\n        super(editor, trackedDocument, decoration, highlightDecoration);\n\n        this._uri = trackedDocument.uri;\n    }\n\n    @log()\n    async onProvideAnnotation(shaOrLine?: string | number): Promise<boolean> {\n        const cc = Logger.getCorrelationContext();\n\n        this.annotationType = FileAnnotationType.RecentChanges;\n\n        const commit = await Container.git.getCommitForFile(this._uri.repoPath, this._uri.fsPath);\n        if (commit === undefined) return false;\n\n        const diff = await Container.git.getDiffForFile(this._uri, commit.sha);\n        if (diff === undefined) return false;\n\n        let start = process.hrtime();\n\n        const cfg = Container.config;\n        const dateFormat = cfg.defaultDateFormat;\n\n        this.decorations = [];\n\n        for (const hunk of diff.hunks) {\n            // Subtract 2 because editor lines are 0-based and we will be adding 1 in the first iteration of the loop\n            let count = hunk.currentPosition.start - 2;\n            for (const hunkLine of hunk.lines) {\n                if (hunkLine.current === undefined) continue;\n\n                count++;\n\n                if (hunkLine.current.state === 'unchanged') continue;\n\n                const range = this.editor.document.validateRange(\n                    new Range(new Position(count, 0), new Position(count, Number.MAX_SAFE_INTEGER))\n                );\n\n                let message: MarkdownString | undefined = undefined;\n\n                if (cfg.hovers.enabled && cfg.hovers.annotations.enabled) {\n                    if (cfg.hovers.annotations.details) {\n                        this.decorations.push({\n                            hoverMessage: await Annotations.detailsHoverMessage(\n                                commit,\n                                await GitUri.fromUri(this.editor.document.uri),\n                                count,\n                                dateFormat,\n                                this.annotationType\n                            ),\n                            range: range\n                        });\n                    }\n\n                    if (cfg.hovers.annotations.changes) {\n                        message = await Annotations.changesHoverMessage(commit, this._uri, count, hunkLine);\n                        if (message === undefined) continue;\n                    }\n                }\n\n                this.decorations.push({\n                    hoverMessage: message,\n                    range: range\n                });\n            }\n        }\n\n        Logger.log(cc, `${Strings.getDurationMilliseconds(start)} ms to compute recent changes annotations`);\n\n        if (this.decorations.length) {\n            start = process.hrtime();\n\n            this.editor.setDecorations(this.decoration, this.decorations);\n\n            Logger.log(cc, `${Strings.getDurationMilliseconds(start)} ms to apply recent changes annotations`);\n        }\n\n        return true;\n    }\n\n    selection(shaOrLine?: string | number): Promise<void> {\n        return Promise.resolve(undefined);\n    }\n\n    validate(): Promise<boolean> {\n        return Promise.resolve(true);\n    }\n}\n","'use strict';\nimport {\n    ConfigurationChangeEvent,\n    DecorationOptions,\n    DecorationRangeBehavior,\n    Disposable,\n    Range,\n    TextEditor,\n    TextEditorDecorationType,\n    window\n} from 'vscode';\nimport { configuration } from '../configuration';\nimport { GlyphChars, isTextEditor } from '../constants';\nimport { Container } from '../container';\nimport { LinesChangeEvent } from '../trackers/gitLineTracker';\nimport { Annotations } from './annotations';\nimport { debug, log } from '../system';\nimport { Logger } from '../logger';\nimport { CommitFormatter } from '../git/gitService';\n\nconst annotationDecoration: TextEditorDecorationType = window.createTextEditorDecorationType({\n    after: {\n        margin: '0 0 0 3em',\n        textDecoration: 'none'\n    },\n    rangeBehavior: DecorationRangeBehavior.ClosedOpen\n});\n\nexport class LineAnnotationController implements Disposable {\n    private _disposable: Disposable;\n    private _editor: TextEditor | undefined;\n    private _enabled: boolean = false;\n\n    constructor() {\n        this._disposable = Disposable.from(\n            configuration.onDidChange(this.onConfigurationChanged, this),\n            Container.fileAnnotations.onDidToggleAnnotations(this.onFileAnnotationsToggled, this)\n        );\n        this.onConfigurationChanged(configuration.initializingChangeEvent);\n    }\n\n    dispose() {\n        this.clearAnnotations(this._editor);\n\n        Container.lineTracker.stop(this);\n        this._disposable && this._disposable.dispose();\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (!configuration.changed(e, configuration.name('currentLine').value)) return;\n\n        if (configuration.changed(e, configuration.name('currentLine')('enabled').value)) {\n            if (Container.config.currentLine.enabled) {\n                this._enabled = true;\n                this.resume();\n            }\n            else {\n                this._enabled = false;\n                this.setLineTracker(false);\n            }\n        }\n\n        void this.refresh(window.activeTextEditor);\n    }\n\n    private _suspended: boolean = false;\n    get suspended() {\n        return !this._enabled || this._suspended;\n    }\n\n    @log()\n    resume() {\n        this.setLineTracker(true);\n\n        if (this._suspended) {\n            this._suspended = false;\n            return true;\n        }\n\n        return false;\n    }\n\n    @log()\n    suspend() {\n        this.setLineTracker(false);\n\n        if (!this._suspended) {\n            this._suspended = true;\n            return true;\n        }\n\n        return false;\n    }\n\n    private onActiveLinesChanged(e: LinesChangeEvent) {\n        if (!e.pending && e.lines !== undefined) {\n            void this.refresh(e.editor);\n\n            return;\n        }\n\n        this.clear(e.editor);\n    }\n\n    private onFileAnnotationsToggled() {\n        void this.refresh(window.activeTextEditor);\n    }\n\n    @debug({ args: false })\n    clear(editor: TextEditor | undefined) {\n        if (this._editor !== editor && this._editor !== undefined) {\n            this.clearAnnotations(this._editor);\n        }\n        this.clearAnnotations(editor);\n    }\n\n    @log({ args: false })\n    async toggle(editor: TextEditor | undefined) {\n        this._enabled = !(this._enabled && !this.suspended);\n\n        if (this._enabled) {\n            if (this.resume()) {\n                await this.refresh(editor);\n            }\n        }\n        else if (this.suspend()) {\n            await this.refresh(editor);\n        }\n    }\n\n    private clearAnnotations(editor: TextEditor | undefined) {\n        if (editor === undefined || (editor as any)._disposed === true) return;\n\n        editor.setDecorations(annotationDecoration, []);\n    }\n\n    @debug({ args: false })\n    private async refresh(editor: TextEditor | undefined) {\n        if (editor === undefined && this._editor === undefined) return;\n\n        const cc = Logger.getCorrelationContext();\n\n        const lines = Container.lineTracker.lines;\n        if (editor === undefined || lines === undefined || !isTextEditor(editor)) {\n            this.clear(this._editor);\n            return;\n        }\n\n        if (this._editor !== editor) {\n            // Clear any annotations on the previously active editor\n            this.clear(this._editor);\n\n            this._editor = editor;\n        }\n\n        const cfg = Container.config.currentLine;\n        if (this.suspended) {\n            this.clear(editor);\n            return;\n        }\n\n        const trackedDocument = await Container.tracker.getOrAdd(editor.document);\n        if (!trackedDocument.isBlameable && this.suspended) {\n            this.clear(editor);\n            return;\n        }\n\n        // Make sure the editor hasn't died since the await above and that we are still on the same line(s)\n        if (editor.document === undefined || !Container.lineTracker.includesAll(lines)) {\n            if (cc) {\n                cc.exitDetails = ` ${GlyphChars.Dot} Skipped because ${\n                    editor.document === undefined ? 'editor is gone' : `line(s)=${lines.join()} are no longer current`\n                }`;\n            }\n            return;\n        }\n\n        if (cc) {\n            cc.exitDetails = ` ${GlyphChars.Dot} line(s)=${lines.join()}`;\n        }\n\n        let getBranchAndTagTips;\n        if (CommitFormatter.has(cfg.format, 'tips')) {\n            getBranchAndTagTips = await Container.git.getBranchesAndTagsTipsFn(trackedDocument.uri.repoPath);\n        }\n\n        const decorations = [];\n        for (const l of lines) {\n            const state = Container.lineTracker.getState(l);\n            if (state === undefined || state.commit === undefined) continue;\n\n            const decoration = Annotations.trailing(\n                state.commit,\n                // await GitUri.fromUri(editor.document.uri),\n                // l,\n                cfg.format,\n                cfg.dateFormat === null ? Container.config.defaultDateFormat : cfg.dateFormat,\n                cfg.scrollable,\n                getBranchAndTagTips\n            ) as DecorationOptions;\n            decoration.range = editor.document.validateRange(\n                new Range(l, Number.MAX_SAFE_INTEGER, l, Number.MAX_SAFE_INTEGER)\n            );\n\n            decorations.push(decoration);\n        }\n\n        editor.setDecorations(annotationDecoration, decorations);\n    }\n\n    private setLineTracker(enabled: boolean) {\n        if (enabled) {\n            if (!Container.lineTracker.isSubscribed(this)) {\n                Container.lineTracker.start(\n                    this,\n                    Disposable.from(Container.lineTracker.onDidChangeActiveLines(this.onActiveLinesChanged, this))\n                );\n            }\n\n            return;\n        }\n\n        Container.lineTracker.stop(this);\n    }\n}\n","'use strict';\nimport {\n    CancellationToken,\n    CodeLens,\n    CodeLensProvider,\n    Command,\n    commands,\n    DocumentSelector,\n    DocumentSymbol,\n    Event,\n    EventEmitter,\n    ExtensionContext,\n    Location,\n    Position,\n    Range,\n    SymbolInformation,\n    SymbolKind,\n    TextDocument\n} from 'vscode';\nimport {\n    Commands,\n    DiffWithPreviousCommandArgs,\n    ShowQuickCommitDetailsCommandArgs,\n    ShowQuickCommitFileDetailsCommandArgs,\n    ShowQuickFileHistoryCommandArgs\n} from '../commands';\nimport {\n    CodeLensCommand,\n    CodeLensConfig,\n    CodeLensLanguageScope,\n    CodeLensScopes,\n    configuration\n} from '../configuration';\nimport { BuiltInCommands, DocumentSchemes } from '../constants';\nimport { Container } from '../container';\nimport { GitBlame, GitBlameCommit, GitBlameLines, GitService, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Functions, Iterables } from '../system';\nimport { DocumentTracker, GitDocumentState } from '../trackers/gitDocumentTracker';\n\nexport class GitRecentChangeCodeLens extends CodeLens {\n    constructor(\n        public readonly languageId: string,\n        public readonly symbol: DocumentSymbol | SymbolInformation,\n        public readonly uri: GitUri | undefined,\n        private readonly blame: (() => GitBlameLines | undefined) | undefined,\n        public readonly blameRange: Range,\n        public readonly isFullRange: boolean,\n        range: Range,\n        public readonly desiredCommand: CodeLensCommand,\n        command?: Command | undefined\n    ) {\n        super(range, command);\n    }\n\n    getBlame(): GitBlameLines | undefined {\n        return this.blame && this.blame();\n    }\n}\n\nexport class GitAuthorsCodeLens extends CodeLens {\n    constructor(\n        public readonly languageId: string,\n        public readonly symbol: DocumentSymbol | SymbolInformation,\n        public readonly uri: GitUri | undefined,\n        private readonly blame: () => GitBlameLines | undefined,\n        public readonly blameRange: Range,\n        public readonly isFullRange: boolean,\n        range: Range,\n        public readonly desiredCommand: CodeLensCommand\n    ) {\n        super(range);\n    }\n\n    getBlame(): GitBlameLines | undefined {\n        return this.blame();\n    }\n}\n\nexport class GitCodeLensProvider implements CodeLensProvider {\n    private _onDidChangeCodeLenses = new EventEmitter<void>();\n    get onDidChangeCodeLenses(): Event<void> {\n        return this._onDidChangeCodeLenses.event;\n    }\n\n    static selector: DocumentSelector = [\n        { scheme: DocumentSchemes.File },\n        { scheme: DocumentSchemes.Vsls },\n        { scheme: DocumentSchemes.Git },\n        { scheme: DocumentSchemes.GitLens }\n    ];\n\n    constructor(\n        context: ExtensionContext,\n        private readonly _git: GitService,\n        private readonly _tracker: DocumentTracker<GitDocumentState>\n    ) {}\n\n    reset(reason?: 'idle' | 'saved') {\n        this._onDidChangeCodeLenses.fire();\n    }\n\n    async provideCodeLenses(document: TextDocument, token: CancellationToken): Promise<CodeLens[]> {\n        const trackedDocument = await this._tracker.getOrAdd(document);\n        if (!trackedDocument.isBlameable) return [];\n\n        let dirty = false;\n        if (document.isDirty) {\n            // Only allow dirty blames if we are idle\n            if (trackedDocument.isDirtyIdle) {\n                const maxLines = Container.config.advanced.blame.sizeThresholdAfterEdit;\n                if (maxLines > 0 && document.lineCount > maxLines) {\n                    dirty = true;\n                }\n            }\n            else {\n                dirty = true;\n            }\n        }\n\n        const cfg = configuration.get<CodeLensConfig>(configuration.name('codeLens').value, document.uri);\n\n        let languageScope =\n            cfg.scopesByLanguage &&\n            cfg.scopesByLanguage.find(\n                ll => ll.language !== undefined && ll.language.toLowerCase() === document.languageId\n            );\n        if (languageScope == null) {\n            languageScope = {\n                language: undefined\n            };\n        }\n        if (languageScope.scopes == null) {\n            languageScope.scopes = cfg.scopes;\n        }\n        if (languageScope.symbolScopes == null) {\n            languageScope.symbolScopes = cfg.symbolScopes;\n        }\n\n        languageScope.symbolScopes =\n            languageScope.symbolScopes != null\n                ? (languageScope.symbolScopes = languageScope.symbolScopes.map(s => s.toLowerCase()))\n                : [];\n\n        const lenses: CodeLens[] = [];\n\n        const gitUri = trackedDocument.uri;\n        let blame: GitBlame | undefined;\n        let symbols;\n\n        if (!dirty) {\n            if (token.isCancellationRequested) return lenses;\n\n            if (languageScope.scopes.length === 1 && languageScope.scopes.includes(CodeLensScopes.Document)) {\n                blame = document.isDirty\n                    ? await this._git.getBlameForFileContents(gitUri, document.getText())\n                    : await this._git.getBlameForFile(gitUri);\n            }\n            else {\n                [blame, symbols] = await Promise.all([\n                    document.isDirty\n                        ? this._git.getBlameForFileContents(gitUri, document.getText())\n                        : this._git.getBlameForFile(gitUri),\n                    commands.executeCommand(BuiltInCommands.ExecuteDocumentSymbolProvider, document.uri) as Promise<\n                        SymbolInformation[]\n                    >\n                ]);\n            }\n\n            if (blame === undefined || blame.lines.length === 0) return lenses;\n        }\n        else if (languageScope.scopes.length !== 1 || !languageScope.scopes.includes(CodeLensScopes.Document)) {\n            symbols = (await commands.executeCommand(\n                BuiltInCommands.ExecuteDocumentSymbolProvider,\n                document.uri\n            )) as SymbolInformation[];\n        }\n\n        if (token.isCancellationRequested) return lenses;\n\n        const documentRangeFn = Functions.once(() => document.validateRange(new Range(0, 1000000, 1000000, 1000000)));\n\n        // Since blame information isn't valid when there are unsaved changes -- update the lenses appropriately\n        const dirtyCommand: Command | undefined = dirty\n            ? { command: undefined!, title: this.getDirtyTitle(cfg) }\n            : undefined;\n\n        if (symbols !== undefined) {\n            Logger.log('GitCodeLensProvider.provideCodeLenses:', `${symbols.length} symbol(s) found`);\n            for (const sym of symbols) {\n                this.provideCodeLens(\n                    lenses,\n                    document,\n                    sym,\n                    languageScope as Required<CodeLensLanguageScope>,\n                    documentRangeFn,\n                    blame,\n                    gitUri,\n                    cfg,\n                    dirty,\n                    dirtyCommand\n                );\n            }\n        }\n\n        if (\n            (languageScope.scopes.includes(CodeLensScopes.Document) || languageScope.symbolScopes.includes('file')) &&\n            !languageScope.symbolScopes.includes('!file')\n        ) {\n            // Check if we have a lens for the whole document -- if not add one\n            if (!lenses.find(l => l.range.start.line === 0 && l.range.end.line === 0)) {\n                const blameRange = documentRangeFn();\n\n                let blameForRangeFn: (() => GitBlameLines | undefined) | undefined = undefined;\n                if (dirty || cfg.recentChange.enabled) {\n                    if (!dirty) {\n                        blameForRangeFn = Functions.once(() =>\n                            this._git.getBlameForRangeSync(blame!, gitUri, blameRange)\n                        );\n                    }\n\n                    const fileSymbol = new SymbolInformation(\n                        gitUri.fileName,\n                        SymbolKind.File,\n                        '',\n                        new Location(gitUri.documentUri(), new Range(0, 0, 0, blameRange.start.character))\n                    );\n                    lenses.push(\n                        new GitRecentChangeCodeLens(\n                            document.languageId,\n                            fileSymbol,\n                            gitUri,\n                            blameForRangeFn,\n                            blameRange,\n                            true,\n                            getRangeFromSymbol(fileSymbol),\n                            cfg.recentChange.command,\n                            dirtyCommand\n                        )\n                    );\n                }\n                if (!dirty && cfg.authors.enabled) {\n                    if (blameForRangeFn === undefined) {\n                        blameForRangeFn = Functions.once(() =>\n                            this._git.getBlameForRangeSync(blame!, gitUri, blameRange)\n                        );\n                    }\n\n                    const fileSymbol = new SymbolInformation(\n                        gitUri.fileName,\n                        SymbolKind.File,\n                        '',\n                        new Location(gitUri.documentUri(), new Range(0, 1, 0, blameRange.start.character))\n                    );\n                    lenses.push(\n                        new GitAuthorsCodeLens(\n                            document.languageId,\n                            fileSymbol,\n                            gitUri,\n                            blameForRangeFn,\n                            blameRange,\n                            true,\n                            getRangeFromSymbol(fileSymbol),\n                            cfg.authors.command\n                        )\n                    );\n                }\n            }\n        }\n\n        return lenses;\n    }\n\n    private getValidateSymbolRange(\n        symbol: SymbolInformation | DocumentSymbol,\n        languageScope: Required<CodeLensLanguageScope>,\n        documentRangeFn: () => Range,\n        includeSingleLineSymbols: boolean\n    ): Range | undefined {\n        let valid = false;\n        let range: Range | undefined;\n\n        const symbolName = SymbolKind[symbol.kind].toLowerCase();\n        switch (symbol.kind) {\n            case SymbolKind.File:\n                if (\n                    languageScope.scopes.includes(CodeLensScopes.Containers) ||\n                    languageScope.symbolScopes.includes(symbolName)\n                ) {\n                    valid = !languageScope.symbolScopes.includes(`!${symbolName}`);\n                }\n\n                if (valid) {\n                    // Adjust the range to be for the whole file\n                    range = documentRangeFn();\n                }\n                break;\n\n            case SymbolKind.Package:\n                if (\n                    languageScope.scopes.includes(CodeLensScopes.Containers) ||\n                    languageScope.symbolScopes.includes(symbolName)\n                ) {\n                    valid = !languageScope.symbolScopes.includes(`!${symbolName}`);\n                }\n\n                if (valid) {\n                    // Adjust the range to be for the whole file\n                    range = getRangeFromSymbol(symbol);\n                    if (range.start.line === 0 && range.end.line === 0) {\n                        range = documentRangeFn();\n                    }\n                }\n                break;\n\n            case SymbolKind.Class:\n            case SymbolKind.Interface:\n            case SymbolKind.Module:\n            case SymbolKind.Namespace:\n            case SymbolKind.Struct:\n                if (\n                    languageScope.scopes.includes(CodeLensScopes.Containers) ||\n                    languageScope.symbolScopes.includes(symbolName)\n                ) {\n                    range = getRangeFromSymbol(symbol);\n                    valid =\n                        !languageScope.symbolScopes.includes(`!${symbolName}`) &&\n                        (includeSingleLineSymbols || !range.isSingleLine);\n                }\n                break;\n\n            case SymbolKind.Constructor:\n            case SymbolKind.Enum:\n            case SymbolKind.Function:\n            case SymbolKind.Method:\n            case SymbolKind.Property:\n                if (\n                    languageScope.scopes.includes(CodeLensScopes.Blocks) ||\n                    languageScope.symbolScopes.includes(symbolName)\n                ) {\n                    range = getRangeFromSymbol(symbol);\n                    valid =\n                        !languageScope.symbolScopes.includes(`!${symbolName}`) &&\n                        (includeSingleLineSymbols || !range.isSingleLine);\n                }\n                break;\n\n            default:\n                if (languageScope.symbolScopes.includes(symbolName)) {\n                    range = getRangeFromSymbol(symbol);\n                    valid =\n                        !languageScope.symbolScopes.includes(`!${symbolName}`) &&\n                        (includeSingleLineSymbols || !range.isSingleLine);\n                }\n                break;\n        }\n\n        return valid ? range || getRangeFromSymbol(symbol) : undefined;\n    }\n\n    private provideCodeLens(\n        lenses: CodeLens[],\n        document: TextDocument,\n        symbol: SymbolInformation | DocumentSymbol,\n        languageScope: Required<CodeLensLanguageScope>,\n        documentRangeFn: () => Range,\n        blame: GitBlame | undefined,\n        gitUri: GitUri | undefined,\n        cfg: CodeLensConfig,\n        dirty: boolean,\n        dirtyCommand: Command | undefined\n    ): void {\n        try {\n            const blameRange = this.getValidateSymbolRange(\n                symbol,\n                languageScope,\n                documentRangeFn,\n                cfg.includeSingleLineSymbols\n            );\n            if (blameRange === undefined) return;\n\n            const line = document.lineAt(getRangeFromSymbol(symbol).start);\n            // Make sure there is only 1 lens per line\n            if (lenses.length && lenses[lenses.length - 1].range.start.line === line.lineNumber) return;\n\n            // Anchor the code lens to the start of the line -- so that the range won't change with edits (otherwise the code lens will be removed and re-added)\n            let startChar = 0;\n\n            let blameForRangeFn: (() => GitBlameLines | undefined) | undefined;\n            if (dirty || cfg.recentChange.enabled) {\n                if (!dirty) {\n                    blameForRangeFn = Functions.once(() => this._git.getBlameForRangeSync(blame!, gitUri!, blameRange));\n                }\n                lenses.push(\n                    new GitRecentChangeCodeLens(\n                        document.languageId,\n                        symbol,\n                        gitUri,\n                        blameForRangeFn,\n                        blameRange,\n                        false,\n                        line.range.with(new Position(line.range.start.line, startChar)),\n                        cfg.recentChange.command,\n                        dirtyCommand\n                    )\n                );\n                startChar++;\n            }\n\n            if (cfg.authors.enabled) {\n                let multiline = !blameRange.isSingleLine;\n                // HACK for Omnisharp, since it doesn't return full ranges\n                if (!multiline && document.languageId === 'csharp') {\n                    switch (symbol.kind) {\n                        case SymbolKind.File:\n                            break;\n                        case SymbolKind.Package:\n                        case SymbolKind.Module:\n                        case SymbolKind.Namespace:\n                        case SymbolKind.Class:\n                        case SymbolKind.Interface:\n                        case SymbolKind.Constructor:\n                        case SymbolKind.Method:\n                        case SymbolKind.Function:\n                        case SymbolKind.Enum:\n                            multiline = true;\n                            break;\n                    }\n                }\n\n                if (multiline && !dirty) {\n                    if (blameForRangeFn === undefined) {\n                        blameForRangeFn = Functions.once(() =>\n                            this._git.getBlameForRangeSync(blame!, gitUri!, blameRange)\n                        );\n                    }\n                    lenses.push(\n                        new GitAuthorsCodeLens(\n                            document.languageId,\n                            symbol,\n                            gitUri,\n                            blameForRangeFn,\n                            blameRange,\n                            false,\n                            line.range.with(new Position(line.range.start.line, startChar)),\n                            cfg.authors.command\n                        )\n                    );\n                }\n            }\n        }\n        finally {\n            if (isDocumentSymbol(symbol)) {\n                for (const child of symbol.children) {\n                    this.provideCodeLens(\n                        lenses,\n                        document,\n                        child,\n                        languageScope,\n                        documentRangeFn,\n                        blame,\n                        gitUri,\n                        cfg,\n                        dirty,\n                        dirtyCommand\n                    );\n                }\n            }\n        }\n    }\n\n    resolveCodeLens(lens: CodeLens, token: CancellationToken): CodeLens | Thenable<CodeLens> {\n        if (lens instanceof GitRecentChangeCodeLens) return this.resolveGitRecentChangeCodeLens(lens, token);\n        if (lens instanceof GitAuthorsCodeLens) return this.resolveGitAuthorsCodeLens(lens, token);\n        return Promise.reject<CodeLens>(undefined);\n    }\n\n    private resolveGitRecentChangeCodeLens(lens: GitRecentChangeCodeLens, token: CancellationToken): CodeLens {\n        const blame = lens.getBlame();\n        if (blame === undefined) return lens;\n\n        const recentCommit = Iterables.first(blame.commits.values());\n        let title = `${recentCommit.author}, ${recentCommit.formattedDate}`;\n        if (Container.config.debug) {\n            title += ` [${lens.languageId}: ${SymbolKind[lens.symbol.kind]}(${lens.range.start.character}-${\n                lens.range.end.character\n            }${\n                (lens.symbol as SymbolInformation).containerName\n                    ? `|${(lens.symbol as SymbolInformation).containerName}`\n                    : ''\n            }), Lines (${lens.blameRange.start.line + 1}-${lens.blameRange.end.line + 1}), Commit (${\n                recentCommit.shortSha\n            })]`;\n        }\n\n        switch (lens.desiredCommand) {\n            case CodeLensCommand.DiffWithPrevious:\n                return this.applyDiffWithPreviousCommand<GitRecentChangeCodeLens>(title, lens, blame, recentCommit);\n            case CodeLensCommand.ShowQuickCommitDetails:\n                return this.applyShowQuickCommitDetailsCommand<GitRecentChangeCodeLens>(\n                    title,\n                    lens,\n                    blame,\n                    recentCommit\n                );\n            case CodeLensCommand.ShowQuickCommitFileDetails:\n                return this.applyShowQuickCommitFileDetailsCommand<GitRecentChangeCodeLens>(\n                    title,\n                    lens,\n                    blame,\n                    recentCommit\n                );\n            case CodeLensCommand.ShowQuickCurrentBranchHistory:\n                return this.applyShowQuickCurrentBranchHistoryCommand<GitRecentChangeCodeLens>(\n                    title,\n                    lens,\n                    blame,\n                    recentCommit\n                );\n            case CodeLensCommand.ShowQuickFileHistory:\n                return this.applyShowQuickFileHistoryCommand<GitRecentChangeCodeLens>(title, lens, blame, recentCommit);\n            case CodeLensCommand.ToggleFileBlame:\n                return this.applyToggleFileBlameCommand<GitRecentChangeCodeLens>(title, lens, blame);\n            default:\n                return lens;\n        }\n    }\n\n    private resolveGitAuthorsCodeLens(lens: GitAuthorsCodeLens, token: CancellationToken): CodeLens {\n        const blame = lens.getBlame();\n        if (blame === undefined) return lens;\n\n        const count = blame.authors.size;\n        let title = `${count} ${count > 1 ? 'authors' : 'author'} (${Iterables.first(blame.authors.values()).name}${\n            count > 1 ? ' and others' : ''\n        })`;\n        if (Container.config.debug) {\n            title += ` [${lens.languageId}: ${SymbolKind[lens.symbol.kind]}(${lens.range.start.character}-${\n                lens.range.end.character\n            }${\n                (lens.symbol as SymbolInformation).containerName\n                    ? `|${(lens.symbol as SymbolInformation).containerName}`\n                    : ''\n            }), Lines (${lens.blameRange.start.line + 1}-${lens.blameRange.end.line + 1}), Authors (${Iterables.join(\n                Iterables.map(blame.authors.values(), a => a.name),\n                ', '\n            )})]`;\n        }\n\n        switch (lens.desiredCommand) {\n            case CodeLensCommand.DiffWithPrevious:\n                return this.applyDiffWithPreviousCommand<GitAuthorsCodeLens>(title, lens, blame);\n            case CodeLensCommand.ShowQuickCommitDetails:\n                return this.applyShowQuickCommitDetailsCommand<GitAuthorsCodeLens>(title, lens, blame);\n            case CodeLensCommand.ShowQuickCommitFileDetails:\n                return this.applyShowQuickCommitFileDetailsCommand<GitAuthorsCodeLens>(title, lens, blame);\n            case CodeLensCommand.ShowQuickCurrentBranchHistory:\n                return this.applyShowQuickCurrentBranchHistoryCommand<GitAuthorsCodeLens>(title, lens, blame);\n            case CodeLensCommand.ShowQuickFileHistory:\n                return this.applyShowQuickFileHistoryCommand<GitAuthorsCodeLens>(title, lens, blame);\n            case CodeLensCommand.ToggleFileBlame:\n                return this.applyToggleFileBlameCommand<GitAuthorsCodeLens>(title, lens, blame);\n            default:\n                return lens;\n        }\n    }\n\n    private applyDiffWithPreviousCommand<T extends GitRecentChangeCodeLens | GitAuthorsCodeLens>(\n        title: string,\n        lens: T,\n        blame: GitBlameLines,\n        commit?: GitBlameCommit\n    ): T {\n        if (commit === undefined) {\n            const blameLine = blame.allLines[lens.range.start.line];\n            commit = blame.commits.get(blameLine.sha);\n        }\n\n        const commandArgs: DiffWithPreviousCommandArgs = {\n            commit: commit\n        };\n        lens.command = {\n            title: title,\n            command: Commands.DiffWithPrevious,\n            arguments: [lens.uri!.toFileUri(), commandArgs]\n        };\n        return lens;\n    }\n\n    private applyShowQuickCommitDetailsCommand<T extends GitRecentChangeCodeLens | GitAuthorsCodeLens>(\n        title: string,\n        lens: T,\n        blame: GitBlameLines,\n        commit?: GitBlameCommit\n    ): T {\n        const commandArgs: ShowQuickCommitDetailsCommandArgs = {\n            commit: commit,\n            sha: commit === undefined ? undefined : commit.sha\n        };\n        lens.command = {\n            title: title,\n            command: commit !== undefined && commit.isUncommitted ? '' : CodeLensCommand.ShowQuickCommitDetails,\n            arguments: [lens.uri!.toFileUri(), commandArgs]\n        };\n        return lens;\n    }\n\n    private applyShowQuickCommitFileDetailsCommand<T extends GitRecentChangeCodeLens | GitAuthorsCodeLens>(\n        title: string,\n        lens: T,\n        blame: GitBlameLines,\n        commit?: GitBlameCommit\n    ): T {\n        const commandArgs: ShowQuickCommitFileDetailsCommandArgs = {\n            commit: commit,\n            sha: commit === undefined ? undefined : commit.sha\n        };\n        lens.command = {\n            title: title,\n            command: commit !== undefined && commit.isUncommitted ? '' : CodeLensCommand.ShowQuickCommitFileDetails,\n            arguments: [lens.uri!.toFileUri(), commandArgs]\n        };\n        return lens;\n    }\n\n    private applyShowQuickCurrentBranchHistoryCommand<T extends GitRecentChangeCodeLens | GitAuthorsCodeLens>(\n        title: string,\n        lens: T,\n        blame: GitBlameLines,\n        commit?: GitBlameCommit\n    ): T {\n        lens.command = {\n            title: title,\n            command: CodeLensCommand.ShowQuickCurrentBranchHistory,\n            arguments: [lens.uri!.toFileUri()]\n        };\n        return lens;\n    }\n\n    private applyShowQuickFileHistoryCommand<T extends GitRecentChangeCodeLens | GitAuthorsCodeLens>(\n        title: string,\n        lens: T,\n        blame: GitBlameLines,\n        commit?: GitBlameCommit\n    ): T {\n        const commandArgs: ShowQuickFileHistoryCommandArgs = {\n            range: lens.isFullRange ? undefined : lens.blameRange\n        };\n        lens.command = {\n            title: title,\n            command: CodeLensCommand.ShowQuickFileHistory,\n            arguments: [lens.uri!.toFileUri(), commandArgs]\n        };\n        return lens;\n    }\n\n    private applyToggleFileBlameCommand<T extends GitRecentChangeCodeLens | GitAuthorsCodeLens>(\n        title: string,\n        lens: T,\n        blame: GitBlameLines\n    ): T {\n        lens.command = {\n            title: title,\n            command: Commands.ToggleFileBlame,\n            arguments: [lens.uri!.toFileUri()]\n        };\n        return lens;\n    }\n\n    private getDirtyTitle(cfg: CodeLensConfig) {\n        if (cfg.recentChange.enabled && cfg.authors.enabled) {\n            return Container.config.strings.codeLens.unsavedChanges.recentChangeAndAuthors;\n        }\n        if (cfg.recentChange.enabled) return Container.config.strings.codeLens.unsavedChanges.recentChangeOnly;\n        return Container.config.strings.codeLens.unsavedChanges.authorsOnly;\n    }\n}\n\nfunction getRangeFromSymbol(symbol: DocumentSymbol | SymbolInformation) {\n    return isDocumentSymbol(symbol) ? symbol.range : symbol.location.range;\n}\n\nfunction isDocumentSymbol(symbol: DocumentSymbol | SymbolInformation): symbol is DocumentSymbol {\n    return Functions.is<DocumentSymbol>(symbol, 'children');\n}\n","'use strict';\nimport { ConfigurationChangeEvent, Disposable, languages } from 'vscode';\nimport { configuration } from '../configuration';\nimport { CommandContext, setCommandContext } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport {\n    DocumentBlameStateChangeEvent,\n    DocumentDirtyIdleTriggerEvent,\n    GitDocumentState\n} from '../trackers/gitDocumentTracker';\nimport { GitCodeLensProvider } from './codeLensProvider';\n\nexport class GitCodeLensController implements Disposable {\n    private _canToggle: boolean = false;\n    private _disposable: Disposable | undefined;\n    private _provider: GitCodeLensProvider | undefined;\n    private _providerDisposable: Disposable | undefined;\n\n    constructor() {\n        this._disposable = Disposable.from(configuration.onDidChange(this.onConfigurationChanged, this));\n        this.onConfigurationChanged(configuration.initializingChangeEvent);\n    }\n\n    dispose() {\n        this._providerDisposable && this._providerDisposable.dispose();\n        this._disposable && this._disposable.dispose();\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        const section = configuration.name('codeLens').value;\n        if (\n            configuration.changed(e, section, null) ||\n            configuration.changed(e, configuration.name('defaultDateFormat').value) ||\n            configuration.changed(e, configuration.name('defaultDateSource').value) ||\n            configuration.changed(e, configuration.name('defaultDateStyle').value)\n        ) {\n            if (!configuration.initializing(e)) {\n                Logger.log('CodeLens config changed; resetting CodeLens provider');\n            }\n\n            const cfg = Container.config.codeLens;\n            if (cfg.enabled && (cfg.recentChange.enabled || cfg.authors.enabled)) {\n                if (this._provider !== undefined) {\n                    this._provider.reset();\n                }\n                else {\n                    this.createProvider();\n                }\n            }\n            else {\n                if (this._providerDisposable !== undefined) {\n                    this._providerDisposable.dispose();\n                    this._providerDisposable = undefined;\n                }\n                this._provider = undefined;\n            }\n\n            this._canToggle = cfg.recentChange.enabled || cfg.authors.enabled;\n            setCommandContext(CommandContext.CanToggleCodeLens, this._canToggle);\n        }\n    }\n\n    private onBlameStateChanged(e: DocumentBlameStateChangeEvent<GitDocumentState>) {\n        // Only reset if we have saved, since the code lens won't naturally be re-rendered\n        if (this._provider === undefined || !e.blameable) return;\n\n        Logger.log('Blame state changed; resetting CodeLens provider');\n        this._provider.reset('saved');\n    }\n\n    private onDirtyIdleTriggered(e: DocumentDirtyIdleTriggerEvent<GitDocumentState>) {\n        if (this._provider === undefined || !e.document.isBlameable) return;\n\n        const maxLines = Container.config.advanced.blame.sizeThresholdAfterEdit;\n        if (maxLines > 0 && e.document.lineCount > maxLines) return;\n\n        Logger.log('Dirty idle triggered; resetting CodeLens provider');\n        this._provider.reset('idle');\n    }\n\n    toggleCodeLens() {\n        if (!this._canToggle) return;\n\n        Logger.log('toggleCodeLens()');\n        if (this._provider !== undefined) {\n            if (this._providerDisposable !== undefined) {\n                this._providerDisposable.dispose();\n                this._providerDisposable = undefined;\n            }\n\n            this._provider = undefined;\n\n            return;\n        }\n\n        this.createProvider();\n    }\n\n    private createProvider() {\n        this._provider = new GitCodeLensProvider(Container.context, Container.git, Container.tracker);\n        this._providerDisposable = Disposable.from(\n            languages.registerCodeLensProvider(GitCodeLensProvider.selector, this._provider),\n            Container.tracker.onDidChangeBlameState(this.onBlameStateChanged, this),\n            Container.tracker.onDidTriggerDirtyIdle(this.onDirtyIdleTriggered, this)\n        );\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport {\n    Disposable,\n    Event,\n    EventEmitter,\n    FileChangeEvent,\n    FileStat,\n    FileSystemError,\n    FileSystemProvider,\n    FileType,\n    Uri,\n    workspace\n} from 'vscode';\nimport { DocumentSchemes } from '../constants';\nimport { Container } from '../container';\nimport { GitService, GitTree, GitUri } from '../git/gitService';\nimport { Iterables, Strings, TernarySearchTree } from '../system';\n\nconst emptyArray = new Uint8Array(0);\n\nexport function fromGitLensFSUri(uri: Uri): { path: string; ref: string; repoPath: string } {\n    const gitUri = GitUri.is(uri) ? uri : GitUri.fromRevisionUri(uri);\n    return { path: gitUri.relativePath, ref: gitUri.sha!, repoPath: gitUri.repoPath! };\n}\n\nexport function toGitLensFSUri(ref: string, repoPath: string): Uri {\n    return GitUri.toRevisionUri(ref, repoPath, repoPath);\n}\n\nexport class GitFileSystemProvider implements FileSystemProvider, Disposable {\n    private readonly _disposable: Disposable;\n    private readonly _searchTreeMap = new Map<string, Promise<TernarySearchTree<GitTree>>>();\n\n    constructor() {\n        this._disposable = Disposable.from(\n            workspace.registerFileSystemProvider(DocumentSchemes.GitLens, this, {\n                isCaseSensitive: true,\n                isReadonly: true\n            })\n        );\n    }\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n    }\n\n    private _onDidChangeFile = new EventEmitter<FileChangeEvent[]>();\n    get onDidChangeFile(): Event<FileChangeEvent[]> {\n        return this._onDidChangeFile.event;\n    }\n\n    copy?(): void | Thenable<void> {\n        throw FileSystemError.NoPermissions;\n    }\n    createDirectory(): void | Thenable<void> {\n        throw FileSystemError.NoPermissions;\n    }\n    delete(): void | Thenable<void> {\n        throw FileSystemError.NoPermissions;\n    }\n\n    async readDirectory(uri: Uri): Promise<[string, FileType][]> {\n        const { path, ref, repoPath } = fromGitLensFSUri(uri);\n\n        const tree = await this.getTree(path, ref, repoPath);\n        if (tree === undefined) throw FileSystemError.FileNotFound(uri);\n\n        const items = [\n            ...Iterables.map<GitTree, [string, FileType]>(tree, t => [\n                path != null && path.length !== 0 ? Strings.normalizePath(paths.relative(path, t.path)) : t.path,\n                typeToFileType(t.type)\n            ])\n        ];\n        return items;\n    }\n\n    async readFile(uri: Uri): Promise<Uint8Array> {\n        const { path, ref, repoPath } = fromGitLensFSUri(uri);\n\n        if (ref === GitService.deletedOrMissingSha) return emptyArray;\n\n        const buffer = await Container.git.getVersionedFileBuffer(repoPath, path, ref);\n        if (buffer === undefined) return emptyArray;\n\n        return buffer;\n    }\n\n    rename(): void | Thenable<void> {\n        throw FileSystemError.NoPermissions;\n    }\n\n    async stat(uri: Uri): Promise<FileStat> {\n        const { path, ref, repoPath } = fromGitLensFSUri(uri);\n\n        if (ref === GitService.deletedOrMissingSha) {\n            return {\n                type: FileType.File,\n                size: 0,\n                ctime: 0,\n                mtime: 0\n            };\n        }\n\n        let treeItem;\n\n        const searchTree = this._searchTreeMap.get(ref);\n        if (searchTree !== undefined) {\n            // Add the fake root folder to the path\n            treeItem = (await searchTree).get(`/~/${path}`);\n        }\n        else {\n            if (path == null || path.length === 0) {\n                const tree = await this.getTree(path, ref, repoPath);\n                if (tree === undefined) throw FileSystemError.FileNotFound(uri);\n\n                return {\n                    type: FileType.Directory,\n                    size: 0,\n                    ctime: 0,\n                    mtime: 0\n                };\n            }\n\n            treeItem = await Container.git.getTreeFileForRevision(repoPath, path, ref);\n        }\n\n        if (treeItem === undefined) {\n            throw FileSystemError.FileNotFound(uri);\n        }\n\n        return {\n            type: typeToFileType(treeItem.type),\n            size: treeItem.size,\n            ctime: 0,\n            mtime: 0\n        };\n    }\n\n    watch(): Disposable {\n        return {\n            dispose: () => {\n                // nothing to dispose\n            }\n        };\n    }\n\n    writeFile(): void | Thenable<void> {\n        throw FileSystemError.NoPermissions;\n    }\n\n    private async createSearchTree(ref: string, repoPath: string) {\n        const searchTree = TernarySearchTree.forPaths() as TernarySearchTree<GitTree>;\n        const trees = await Container.git.getTreeForRevision(repoPath, ref);\n\n        // Add a fake root folder so that searches will work\n        searchTree.set('~', { commitSha: '', path: '~', size: 0, type: 'tree' });\n        for (const item of trees) {\n            searchTree.set(`~/${item.path}`, item);\n        }\n\n        return searchTree;\n    }\n\n    private getOrCreateSearchTree(ref: string, repoPath: string) {\n        let searchTree = this._searchTreeMap.get(ref);\n        if (searchTree === undefined) {\n            searchTree = this.createSearchTree(ref, repoPath);\n            this._searchTreeMap.set(ref, searchTree);\n        }\n\n        return searchTree;\n    }\n\n    private async getTree(path: string, ref: string, repoPath: string) {\n        const searchTree = await this.getOrCreateSearchTree(ref, repoPath);\n        // Add the fake root folder to the path\n        return searchTree!.findSuperstr(`/~/${path}`, true);\n    }\n}\n\nfunction typeToFileType(type: 'blob' | 'tree' | undefined | null) {\n    switch (type) {\n        case 'blob':\n            return FileType.File;\n        case 'tree':\n            return FileType.Directory;\n        default:\n            return FileType.Unknown;\n    }\n}\n","'use strict';\nimport {\n    CancellationToken,\n    ConfigurationChangeEvent,\n    Disposable,\n    Hover,\n    languages,\n    Position,\n    Range,\n    TextDocument,\n    TextEditor,\n    window\n} from 'vscode';\nimport { Annotations } from '../annotations/annotations';\nimport { configuration } from '../configuration';\nimport { Container } from '../container';\nimport { LinesChangeEvent } from '../trackers/gitLineTracker';\n\nexport class LineHoverController implements Disposable {\n    private _disposable: Disposable;\n    private _hoverProviderDisposable: Disposable | undefined;\n\n    constructor() {\n        this._disposable = Disposable.from(configuration.onDidChange(this.onConfigurationChanged, this));\n        this.onConfigurationChanged(configuration.initializingChangeEvent);\n    }\n\n    dispose() {\n        this.unregister();\n\n        Container.lineTracker.stop(this);\n        this._disposable && this._disposable.dispose();\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (\n            !configuration.changed(e, configuration.name('hovers')('enabled').value) &&\n            !configuration.changed(e, configuration.name('hovers')('currentLine')('enabled').value)\n        ) {\n            return;\n        }\n\n        if (Container.config.hovers.enabled && Container.config.hovers.currentLine.enabled) {\n            Container.lineTracker.start(\n                this,\n                Disposable.from(Container.lineTracker.onDidChangeActiveLines(this.onActiveLinesChanged, this))\n            );\n\n            this.register(window.activeTextEditor);\n        }\n        else {\n            Container.lineTracker.stop(this);\n            this.unregister();\n        }\n    }\n\n    private onActiveLinesChanged(e: LinesChangeEvent) {\n        if (e.pending) return;\n\n        if (e.editor === undefined || e.lines === undefined) {\n            this.unregister();\n\n            return;\n        }\n\n        if (e.reason !== 'editor' && this.registered) return;\n\n        this.register(e.editor);\n    }\n\n    get registered() {\n        return this._hoverProviderDisposable !== undefined;\n    }\n\n    async provideDetailsHover(\n        document: TextDocument,\n        position: Position,\n        token: CancellationToken\n    ): Promise<Hover | undefined> {\n        if (!Container.lineTracker.includes(position.line)) return undefined;\n\n        const lineState = Container.lineTracker.getState(position.line);\n        const commit = lineState !== undefined ? lineState.commit : undefined;\n        if (commit === undefined) return undefined;\n\n        // Avoid double annotations if we are showing the whole-file hover blame annotations\n        const fileAnnotations = await Container.fileAnnotations.getAnnotationType(window.activeTextEditor);\n        if (fileAnnotations !== undefined && Container.config.hovers.annotations.details) return undefined;\n\n        const wholeLine = Container.config.hovers.currentLine.over === 'line';\n        // If we aren't showing the hover over the whole line, make sure the annotation is on\n        if (!wholeLine && Container.lineAnnotations.suspended) return undefined;\n\n        const range = document.validateRange(\n            new Range(position.line, wholeLine ? 0 : Number.MAX_SAFE_INTEGER, position.line, Number.MAX_SAFE_INTEGER)\n        );\n        if (!wholeLine && range.start.character !== position.character) return undefined;\n\n        // Get the full commit message -- since blame only returns the summary\n        let logCommit = lineState !== undefined ? lineState.logCommit : undefined;\n        if (logCommit === undefined && !commit.isUncommitted) {\n            logCommit = await Container.git.getCommitForFile(commit.repoPath, commit.uri.fsPath, {\n                ref: commit.sha\n            });\n            if (logCommit !== undefined) {\n                // Preserve the previous commit from the blame commit\n                logCommit.previousSha = commit.previousSha;\n                logCommit.previousFileName = commit.previousFileName;\n\n                if (lineState !== undefined) {\n                    lineState.logCommit = logCommit;\n                }\n            }\n        }\n\n        let editorLine = position.line;\n        const line = editorLine + 1;\n        const commitLine = commit.lines.find(l => l.line === line) || commit.lines[0];\n        editorLine = commitLine.originalLine - 1;\n\n        const trackedDocument = await Container.tracker.get(document);\n        if (trackedDocument === undefined) return undefined;\n\n        const message = await Annotations.detailsHoverMessage(\n            logCommit || commit,\n            trackedDocument.uri,\n            editorLine,\n            Container.config.defaultDateFormat,\n            fileAnnotations\n        );\n        return new Hover(message, range);\n    }\n\n    async provideChangesHover(\n        document: TextDocument,\n        position: Position,\n        token: CancellationToken\n    ): Promise<Hover | undefined> {\n        if (!Container.lineTracker.includes(position.line)) return undefined;\n\n        const lineState = Container.lineTracker.getState(position.line);\n        const commit = lineState !== undefined ? lineState.commit : undefined;\n        if (commit === undefined) return undefined;\n\n        // Avoid double annotations if we are showing the whole-file hover blame annotations\n        if (Container.config.hovers.annotations.changes) {\n            const fileAnnotations = await Container.fileAnnotations.getAnnotationType(window.activeTextEditor);\n            if (fileAnnotations !== undefined) return undefined;\n        }\n\n        const wholeLine = Container.config.hovers.currentLine.over === 'line';\n        // If we aren't showing the hover over the whole line, make sure the annotation is on\n        if (!wholeLine && Container.lineAnnotations.suspended) return undefined;\n\n        const range = document.validateRange(\n            new Range(position.line, wholeLine ? 0 : Number.MAX_SAFE_INTEGER, position.line, Number.MAX_SAFE_INTEGER)\n        );\n        if (!wholeLine && range.start.character !== position.character) return undefined;\n\n        const trackedDocument = await Container.tracker.get(document);\n        if (trackedDocument === undefined) return undefined;\n\n        const message = await Annotations.changesHoverMessage(commit, trackedDocument.uri, position.line);\n        if (message === undefined) return undefined;\n\n        return new Hover(message, range);\n    }\n\n    private register(editor: TextEditor | undefined) {\n        this.unregister();\n\n        if (editor === undefined) return;\n\n        const cfg = Container.config.hovers;\n        if (!cfg.enabled || !cfg.currentLine.enabled || (!cfg.currentLine.details && !cfg.currentLine.changes)) return;\n\n        const subscriptions = [];\n        if (cfg.currentLine.changes) {\n            subscriptions.push(\n                languages.registerHoverProvider(\n                    { pattern: editor.document.uri.fsPath },\n                    {\n                        provideHover: this.provideChangesHover.bind(this)\n                    }\n                )\n            );\n        }\n        if (cfg.currentLine.details) {\n            subscriptions.push(\n                languages.registerHoverProvider(\n                    { pattern: editor.document.uri.fsPath },\n                    {\n                        provideHover: this.provideDetailsHover.bind(this)\n                    }\n                )\n            );\n        }\n\n        this._hoverProviderDisposable = Disposable.from(...subscriptions);\n    }\n\n    private unregister() {\n        if (this._hoverProviderDisposable !== undefined) {\n            this._hoverProviderDisposable.dispose();\n            this._hoverProviderDisposable = undefined;\n        }\n    }\n}\n","'use strict';\nimport { ConfigurationChangeEvent, Disposable, StatusBarAlignment, StatusBarItem, TextEditor, window } from 'vscode';\nimport { Commands } from '../commands';\nimport { configuration, StatusBarCommand } from '../configuration';\nimport { isTextEditor } from '../constants';\nimport { Container } from '../container';\nimport { CommitFormatter, GitCommit } from '../git/gitService';\nimport { LinesChangeEvent } from '../trackers/gitLineTracker';\n\nexport class StatusBarController implements Disposable {\n    private _blameStatusBarItem: StatusBarItem | undefined;\n    private _disposable: Disposable;\n    private _modeStatusBarItem: StatusBarItem | undefined;\n\n    constructor() {\n        this._disposable = Disposable.from(configuration.onDidChange(this.onConfigurationChanged, this));\n        this.onConfigurationChanged(configuration.initializingChangeEvent);\n    }\n\n    dispose() {\n        this.clearBlame();\n\n        this._blameStatusBarItem && this._blameStatusBarItem.dispose();\n        this._modeStatusBarItem && this._modeStatusBarItem.dispose();\n\n        Container.lineTracker.stop(this);\n        this._disposable && this._disposable.dispose();\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (configuration.changed(e, configuration.name('mode').value)) {\n            const mode =\n                Container.config.mode.active && Container.config.mode.statusBar.enabled\n                    ? Container.config.modes[Container.config.mode.active]\n                    : undefined;\n            if (mode && mode.statusBarItemName) {\n                const alignment =\n                    Container.config.mode.statusBar.alignment !== 'left'\n                        ? StatusBarAlignment.Right\n                        : StatusBarAlignment.Left;\n\n                if (configuration.changed(e, configuration.name('mode')('statusBar')('alignment').value)) {\n                    if (this._modeStatusBarItem !== undefined && this._modeStatusBarItem.alignment !== alignment) {\n                        this._modeStatusBarItem.dispose();\n                        this._modeStatusBarItem = undefined;\n                    }\n                }\n\n                this._modeStatusBarItem =\n                    this._modeStatusBarItem ||\n                    window.createStatusBarItem(alignment, alignment === StatusBarAlignment.Right ? 999 : 1);\n                this._modeStatusBarItem.command = Commands.SwitchMode;\n                this._modeStatusBarItem.text = mode.statusBarItemName;\n                this._modeStatusBarItem.tooltip = 'Switch GitLens Mode';\n                this._modeStatusBarItem.show();\n            }\n            else if (this._modeStatusBarItem !== undefined) {\n                this._modeStatusBarItem.dispose();\n                this._modeStatusBarItem = undefined;\n            }\n        }\n\n        if (!configuration.changed(e, configuration.name('statusBar').value)) return;\n\n        if (Container.config.statusBar.enabled) {\n            const alignment =\n                Container.config.statusBar.alignment !== 'left' ? StatusBarAlignment.Right : StatusBarAlignment.Left;\n\n            if (configuration.changed(e, configuration.name('statusBar')('alignment').value)) {\n                if (this._blameStatusBarItem !== undefined && this._blameStatusBarItem.alignment !== alignment) {\n                    this._blameStatusBarItem.dispose();\n                    this._blameStatusBarItem = undefined;\n                }\n            }\n\n            this._blameStatusBarItem =\n                this._blameStatusBarItem ||\n                window.createStatusBarItem(alignment, alignment === StatusBarAlignment.Right ? 1000 : 0);\n            this._blameStatusBarItem.command = Container.config.statusBar.command;\n\n            if (configuration.changed(e, configuration.name('statusBar')('enabled').value)) {\n                Container.lineTracker.start(\n                    this,\n                    Disposable.from(Container.lineTracker.onDidChangeActiveLines(this.onActiveLinesChanged, this))\n                );\n            }\n        }\n        else if (configuration.changed(e, configuration.name('statusBar')('enabled').value)) {\n            Container.lineTracker.stop(this);\n\n            if (this._blameStatusBarItem !== undefined) {\n                this._blameStatusBarItem.dispose();\n                this._blameStatusBarItem = undefined;\n            }\n        }\n    }\n\n    private onActiveLinesChanged(e: LinesChangeEvent) {\n        // If we need to reduceFlicker, don't clear if only the selected lines changed\n        let clear = !(\n            Container.config.statusBar.reduceFlicker &&\n            e.reason === 'selection' &&\n            (e.pending || e.lines !== undefined)\n        );\n        if (!e.pending && e.lines !== undefined) {\n            const state = Container.lineTracker.getState(e.lines[0]);\n            if (state !== undefined && state.commit !== undefined) {\n                this.updateBlame(state.commit, e.editor!);\n\n                return;\n            }\n\n            clear = true;\n        }\n\n        if (clear) {\n            this.clearBlame();\n        }\n    }\n\n    clearBlame() {\n        if (this._blameStatusBarItem !== undefined) {\n            this._blameStatusBarItem.hide();\n        }\n    }\n\n    private updateBlame(commit: GitCommit, editor: TextEditor) {\n        const cfg = Container.config.statusBar;\n        if (!cfg.enabled || this._blameStatusBarItem === undefined || !isTextEditor(editor)) return;\n\n        this._blameStatusBarItem.text = `$(git-commit) ${CommitFormatter.fromTemplate(cfg.format, commit, {\n            truncateMessageAtNewLine: true,\n            dateFormat: cfg.dateFormat === null ? Container.config.defaultDateFormat : cfg.dateFormat\n        })}`;\n\n        switch (cfg.command) {\n            case StatusBarCommand.ToggleFileBlame:\n                this._blameStatusBarItem.tooltip = 'Toggle Blame Annotations';\n                break;\n            case StatusBarCommand.DiffWithPrevious:\n                this._blameStatusBarItem.command = Commands.DiffLineWithPrevious;\n                this._blameStatusBarItem.tooltip = 'Compare Line Revision with Previous';\n                break;\n            case StatusBarCommand.DiffWithWorking:\n                this._blameStatusBarItem.command = Commands.DiffLineWithWorking;\n                this._blameStatusBarItem.tooltip = 'Compare Line Revision with Working';\n                break;\n            case StatusBarCommand.ToggleCodeLens:\n                this._blameStatusBarItem.tooltip = 'Toggle Git CodeLens';\n                break;\n            case StatusBarCommand.ShowQuickCommitDetails:\n                this._blameStatusBarItem.tooltip = 'Show Commit Details';\n                break;\n            case StatusBarCommand.ShowQuickCommitFileDetails:\n                this._blameStatusBarItem.tooltip = 'Show Line Commit Details';\n                break;\n            case StatusBarCommand.ShowQuickFileHistory:\n                this._blameStatusBarItem.tooltip = 'Show File History';\n                break;\n            case StatusBarCommand.ShowQuickCurrentBranchHistory:\n                this._blameStatusBarItem.tooltip = 'Show Branch History';\n                break;\n        }\n\n        this._blameStatusBarItem.show();\n    }\n}\n","'use strict';\nimport { Disposable, Event, EventEmitter, TextEditor, TextEditorSelectionChangeEvent, window } from 'vscode';\nimport { isTextEditor } from '../constants';\nimport { Deferrable, Functions } from '../system';\n\nexport interface LinesChangeEvent {\n    readonly editor: TextEditor | undefined;\n    readonly lines: number[] | undefined;\n\n    readonly reason: 'editor' | 'selection';\n    readonly pending?: boolean;\n}\n\nexport class LineTracker<T> implements Disposable {\n    private _onDidChangeActiveLines = new EventEmitter<LinesChangeEvent>();\n    get onDidChangeActiveLines(): Event<LinesChangeEvent> {\n        return this._onDidChangeActiveLines.event;\n    }\n\n    protected _disposable: Disposable | undefined;\n    private _editor: TextEditor | undefined;\n\n    private readonly _state: Map<number, T | undefined> = new Map();\n\n    dispose() {\n        this.stop();\n    }\n\n    private onActiveTextEditorChanged(editor: TextEditor | undefined) {\n        if (this._editor === editor) return;\n        if (editor !== undefined && !isTextEditor(editor)) return;\n\n        this.reset();\n        this._editor = editor;\n        this._lines = editor !== undefined ? editor.selections.map(s => s.active.line) : undefined;\n\n        this.trigger('editor');\n    }\n\n    private onTextEditorSelectionChanged(e: TextEditorSelectionChangeEvent) {\n        // If this isn't for our cached editor and its not a real editor -- kick out\n        if (this._editor !== e.textEditor && !isTextEditor(e.textEditor)) return;\n\n        const reason = this._editor === e.textEditor ? 'selection' : 'editor';\n\n        const lines = e.selections.map(s => s.active.line);\n        if (this._editor === e.textEditor && this.includesAll(lines)) return;\n\n        this.reset();\n        this._editor = e.textEditor;\n        this._lines = lines;\n        this.trigger(reason);\n    }\n\n    getState(line: number): T | undefined {\n        return this._state.get(line);\n    }\n\n    setState(line: number, state: T | undefined) {\n        this._state.set(line, state);\n    }\n\n    private _lines: number[] | undefined;\n    get lines(): number[] | undefined {\n        return this._lines;\n    }\n\n    includes(line: number): boolean {\n        return this._lines !== undefined && this._lines.includes(line);\n    }\n\n    includesAll(lines: number[] | undefined): boolean {\n        return LineTracker.includesAll(lines, this._lines);\n    }\n\n    refresh() {\n        this.trigger('editor');\n    }\n\n    reset() {\n        this._state.clear();\n    }\n\n    start(subscriber?: any, subscription?: Disposable): void {\n        if (this._disposable !== undefined) return;\n\n        this._disposable = Disposable.from(\n            window.onDidChangeActiveTextEditor(Functions.debounce(this.onActiveTextEditorChanged, 0), this),\n            window.onDidChangeTextEditorSelection(this.onTextEditorSelectionChanged, this)\n        );\n\n        setImmediate(() => this.onActiveTextEditorChanged(window.activeTextEditor));\n    }\n\n    stop(subscriber?: any) {\n        if (this._disposable === undefined) return;\n\n        if (this._linesChangedDebounced !== undefined) {\n            this._linesChangedDebounced.cancel();\n        }\n\n        this._disposable.dispose();\n        this._disposable = undefined;\n    }\n\n    protected fireLinesChanged(e: LinesChangeEvent) {\n        this._onDidChangeActiveLines.fire(e);\n    }\n\n    protected trigger(reason: 'editor' | 'selection') {\n        this.onLinesChanged({ editor: this._editor, lines: this._lines, reason: reason });\n    }\n\n    private _linesChangedDebounced: (((e: LinesChangeEvent) => void) & Deferrable) | undefined;\n\n    private onLinesChanged(e: LinesChangeEvent) {\n        if (e.lines === undefined) {\n            setImmediate(() => {\n                if (window.activeTextEditor !== e.editor) return;\n\n                if (this._linesChangedDebounced !== undefined) {\n                    this._linesChangedDebounced.cancel();\n                }\n\n                void this.fireLinesChanged(e);\n            });\n\n            return;\n        }\n\n        if (this._linesChangedDebounced === undefined) {\n            this._linesChangedDebounced = Functions.debounce(\n                (e: LinesChangeEvent) => {\n                    if (window.activeTextEditor !== e.editor) return;\n                    // Make sure we are still on the same lines\n                    if (!LineTracker.includesAll(e.lines, e.editor && e.editor.selections.map(s => s.active.line))) {\n                        return;\n                    }\n\n                    void this.fireLinesChanged(e);\n                },\n                250,\n                { track: true }\n            );\n        }\n\n        // If we have no pending moves, then fire an immediate pending event, and defer the real event\n        if (!this._linesChangedDebounced.pending!()) {\n            void this.fireLinesChanged({ ...e, pending: true });\n        }\n\n        this._linesChangedDebounced(e);\n    }\n\n    static includesAll(lines1: number[] | undefined, lines2: number[] | undefined): boolean {\n        if (lines1 === undefined && lines2 === undefined) return true;\n        if (lines1 === undefined || lines2 === undefined) return false;\n\n        return lines2.length === lines1.length && lines2.every((v, i) => v === lines1[i]);\n    }\n}\n","'use strict';\nimport { Disposable, TextEditor } from 'vscode';\nimport { Container } from '../container';\nimport { GitBlameCommit, GitLogCommit } from '../git/gitService';\nimport {\n    DocumentBlameStateChangeEvent,\n    DocumentDirtyIdleTriggerEvent,\n    DocumentDirtyStateChangeEvent,\n    GitDocumentState\n} from './gitDocumentTracker';\nimport { LinesChangeEvent, LineTracker } from './lineTracker';\n\nexport * from './lineTracker';\n\nexport class GitLineState {\n    constructor(public readonly commit: GitBlameCommit | undefined, public logCommit?: GitLogCommit) {}\n}\n\nexport class GitLineTracker extends LineTracker<GitLineState> {\n    private _count = 0;\n    private _subscriptions: Map<any, Disposable> = new Map();\n\n    protected async fireLinesChanged(e: LinesChangeEvent) {\n        this.reset();\n\n        let updated = false;\n        if (!this._suspended && !e.pending && e.lines !== undefined && e.editor !== undefined) {\n            updated = await this.updateState(e.lines, e.editor);\n        }\n\n        return super.fireLinesChanged(updated ? e : { ...e, lines: undefined });\n    }\n\n    private onBlameStateChanged(e: DocumentBlameStateChangeEvent<GitDocumentState>) {\n        this.trigger('editor');\n    }\n\n    private onDirtyIdleTriggered(e: DocumentDirtyIdleTriggerEvent<GitDocumentState>) {\n        const maxLines = Container.config.advanced.blame.sizeThresholdAfterEdit;\n        if (maxLines > 0 && e.document.lineCount > maxLines) return;\n\n        this.resume();\n    }\n\n    private onDirtyStateChanged(e: DocumentDirtyStateChangeEvent<GitDocumentState>) {\n        if (e.dirty) {\n            this.suspend();\n        }\n        else {\n            this.resume({ force: true });\n        }\n    }\n\n    private _suspended = false;\n\n    private resume(options: { force?: boolean } = {}) {\n        if (!options.force && !this._suspended) return;\n\n        this._suspended = false;\n        this.trigger('editor');\n    }\n\n    private suspend(options: { force?: boolean } = {}) {\n        if (!options.force && this._suspended) return;\n\n        this._suspended = true;\n        this.trigger('editor');\n    }\n\n    isSubscribed(subscriber: any) {\n        return this._subscriptions.has(subscriber);\n    }\n\n    start(subscriber: any, subscription: Disposable): Disposable {\n        const disposable = {\n            dispose: () => this.stop(subscriber)\n        };\n\n        if (this.isSubscribed(subscriber)) return disposable;\n\n        this._subscriptions.set(subscriber, subscription);\n\n        this._count++;\n        if (this._count === 1) {\n            super.start();\n\n            this._disposable = Disposable.from(\n                this._disposable!,\n                Container.tracker.onDidChangeBlameState(this.onBlameStateChanged, this),\n                Container.tracker.onDidChangeDirtyState(this.onDirtyStateChanged, this),\n                Container.tracker.onDidTriggerDirtyIdle(this.onDirtyIdleTriggered, this)\n            );\n        }\n\n        return disposable;\n    }\n\n    stop(subscriber: any) {\n        const subscription = this._subscriptions.get(subscriber);\n        if (subscription === undefined) return;\n\n        this._subscriptions.delete(subscriber);\n        subscription.dispose();\n\n        if (this._disposable === undefined) {\n            this._count = 0;\n            return;\n        }\n\n        this._count--;\n        if (this._count === 0) {\n            super.stop();\n        }\n    }\n\n    private async updateState(lines: number[], editor: TextEditor): Promise<boolean> {\n        const trackedDocument = await Container.tracker.getOrAdd(editor.document);\n        if (!trackedDocument.isBlameable || !this.includesAll(lines)) return false;\n\n        if (lines.length === 1) {\n            const blameLine = editor.document.isDirty\n                ? await Container.git.getBlameForLineContents(trackedDocument.uri, lines[0], editor.document.getText())\n                : await Container.git.getBlameForLine(trackedDocument.uri, lines[0]);\n            if (blameLine === undefined) return false;\n\n            this.setState(blameLine.line.line - 1, new GitLineState(blameLine.commit));\n        }\n        else {\n            const blame = editor.document.isDirty\n                ? await Container.git.getBlameForFileContents(trackedDocument.uri, editor.document.getText())\n                : await Container.git.getBlameForFile(trackedDocument.uri);\n            if (blame === undefined) return false;\n\n            for (const line of lines) {\n                const commitLine = blame.lines[line];\n                this.setState(line, new GitLineState(blame.commits.get(commitLine.sha)!));\n            }\n        }\n\n        if (!trackedDocument.isBlameable || !this.includesAll(lines)) return false;\n\n        if (editor.document.isDirty) {\n            trackedDocument.setForceDirtyStateChangeOnNextDocumentChange();\n        }\n\n        return true;\n    }\n}\n","'use strict';\nimport {\n    commands,\n    ConfigurationChangeEvent,\n    ConfigurationTarget,\n    Disposable,\n    Event,\n    EventEmitter,\n    MessageItem,\n    TreeDataProvider,\n    TreeItem,\n    TreeItemCollapsibleState,\n    TreeView,\n    TreeViewExpansionEvent,\n    TreeViewVisibilityChangeEvent,\n    window\n} from 'vscode';\nimport { configuration } from '../configuration';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { debug, Functions, log, Strings } from '../system';\nimport { CompareView } from './compareView';\nimport { FileHistoryView } from './fileHistoryView';\nimport { LineHistoryView } from './lineHistoryView';\nimport { ViewNode } from './nodes';\nimport { nodeSupportsPaging, PageableViewNode } from './nodes/viewNode';\nimport { RepositoriesView } from './repositoriesView';\nimport { SearchView } from './searchView';\n\nexport type View = RepositoriesView | FileHistoryView | LineHistoryView | CompareView | SearchView;\nexport type ViewWithFiles = RepositoriesView | CompareView | SearchView;\n\nexport interface TreeViewNodeStateChangeEvent<T> extends TreeViewExpansionEvent<T> {\n    state: TreeItemCollapsibleState;\n}\n\nexport abstract class ViewBase<TRoot extends ViewNode<View>> implements TreeDataProvider<ViewNode>, Disposable {\n    protected _onDidChangeTreeData = new EventEmitter<ViewNode>();\n    get onDidChangeTreeData(): Event<ViewNode> {\n        return this._onDidChangeTreeData.event;\n    }\n\n    private _onDidChangeVisibility = new EventEmitter<TreeViewVisibilityChangeEvent>();\n    get onDidChangeVisibility(): Event<TreeViewVisibilityChangeEvent> {\n        return this._onDidChangeVisibility.event;\n    }\n\n    private _onDidChangeNodeState = new EventEmitter<TreeViewNodeStateChangeEvent<ViewNode>>();\n    get onDidChangeNodeState(): Event<TreeViewNodeStateChangeEvent<ViewNode>> {\n        return this._onDidChangeNodeState.event;\n    }\n\n    protected _disposable: Disposable | undefined;\n    private readonly _lastMaxCounts = new Map<string, number | undefined>();\n    protected _root: TRoot | undefined;\n    protected _tree: TreeView<ViewNode> | undefined;\n\n    constructor(public readonly id: string, public readonly name: string) {\n        if (Logger.isDebugging) {\n            const fn = this.getTreeItem;\n            this.getTreeItem = async function(this: ViewBase<TRoot>, node: ViewNode) {\n                const item = await fn.apply(this, [node]);\n\n                item.tooltip = `${item.tooltip || item.label}\\n\\nDBG: ${node.toString()}, ${item.contextValue}`;\n                return item;\n            };\n        }\n\n        this.registerCommands();\n\n        Container.context.subscriptions.push(configuration.onDidChange(this.onConfigurationChanged, this));\n        setImmediate(() => this.onConfigurationChanged(configuration.initializingChangeEvent));\n    }\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n    }\n\n    getQualifiedCommand(command: string) {\n        return `${this.id}.${command}`;\n    }\n\n    protected abstract get location(): string;\n\n    protected abstract getRoot(): TRoot;\n    protected abstract registerCommands(): void;\n    protected abstract onConfigurationChanged(e: ConfigurationChangeEvent): void;\n\n    protected initialize(container?: string, options: { showCollapseAll?: boolean } = {}) {\n        if (this._disposable) {\n            this._disposable.dispose();\n            this._onDidChangeTreeData = new EventEmitter<ViewNode>();\n        }\n\n        this._tree = window.createTreeView(`${this.id}${container ? `:${container}` : ''}`, {\n            ...options,\n            treeDataProvider: this\n        });\n        this._disposable = Disposable.from(\n            this._tree,\n            this._tree.onDidChangeVisibility(Functions.debounce(this.onVisibilityChanged, 250), this),\n            this._tree.onDidCollapseElement(this.onElementCollapsed, this),\n            this._tree.onDidExpandElement(this.onElementExpanded, this)\n        );\n    }\n\n    protected ensureRoot() {\n        if (this._root === undefined) {\n            this._root = this.getRoot();\n        }\n\n        return this._root;\n    }\n\n    getChildren(node?: ViewNode): ViewNode[] | Promise<ViewNode[]> {\n        if (node !== undefined) return node.getChildren();\n\n        const root = this.ensureRoot();\n        return root.getChildren();\n    }\n\n    getParent(node: ViewNode): ViewNode | undefined {\n        return node.getParent();\n    }\n\n    getTreeItem(node: ViewNode): TreeItem | Promise<TreeItem> {\n        return node.getTreeItem();\n    }\n\n    protected onElementCollapsed(e: TreeViewExpansionEvent<ViewNode>) {\n        // Clear any last max count if the node was collapsed\n        if (nodeSupportsPaging(e.element)) {\n            this.resetNodeLastMaxCount(e.element);\n        }\n\n        this._onDidChangeNodeState.fire({ ...e, state: TreeItemCollapsibleState.Collapsed });\n    }\n\n    protected onElementExpanded(e: TreeViewExpansionEvent<ViewNode>) {\n        this._onDidChangeNodeState.fire({ ...e, state: TreeItemCollapsibleState.Expanded });\n    }\n\n    protected onVisibilityChanged(e: TreeViewVisibilityChangeEvent) {\n        this._onDidChangeVisibility.fire(e);\n    }\n\n    get selection(): ViewNode[] {\n        if (this._tree === undefined || this._root === undefined) return [];\n\n        return this._tree.selection;\n    }\n\n    get visible(): boolean {\n        return this._tree !== undefined ? this._tree.visible : false;\n    }\n\n    @debug()\n    async refresh(reset: boolean = false) {\n        if (this._root !== undefined && this._root.refresh !== undefined) {\n            await this._root.refresh(reset);\n        }\n\n        this.triggerNodeChange();\n    }\n\n    @debug({\n        args: { 0: (n: ViewNode) => n.toString() }\n    })\n    async refreshNode(node: ViewNode, reset: boolean = false) {\n        if (node.refresh !== undefined) {\n            const cancel = await node.refresh(reset);\n            if (cancel === true) return;\n        }\n\n        this.triggerNodeChange(node);\n    }\n\n    @log({\n        args: { 0: (n: ViewNode) => n.toString() }\n    })\n    async reveal(\n        node: ViewNode,\n        options?: {\n            select?: boolean;\n            focus?: boolean;\n            expand?: boolean | number;\n        }\n    ) {\n        if (this._tree === undefined) return;\n\n        try {\n            await this._tree.reveal(node, options);\n        }\n        catch (ex) {\n            Logger.error(ex);\n        }\n    }\n\n    @log()\n    async show() {\n        const location = this.location;\n\n        try {\n            void (await commands.executeCommand(`${this.id}${location ? `:${location}` : ''}.focus`));\n        }\n        catch (ex) {\n            Logger.error(ex);\n\n            const setting = `${Strings.splitSingle(this.id, '.')[1]}.enabled`;\n            if (!configuration.get(setting)) {\n                const actions: MessageItem[] = [{ title: 'Enable' }, { title: 'Cancel', isCloseAffordance: true }];\n\n                const result = await window.showErrorMessage(\n                    `Unable to show the ${this.name} view since it's currently disabled. Would you like to enable it?`,\n                    ...actions\n                );\n\n                if (result === actions[0]) {\n                    await configuration.update(setting, true, ConfigurationTarget.Global);\n\n                    void (await commands.executeCommand(`${this.id}${location ? `:${location}` : ''}.focus`));\n                }\n            }\n        }\n    }\n\n    @debug({\n        args: { 0: (n: ViewNode) => n.toString() }\n    })\n    getNodeLastMaxCount(node: PageableViewNode) {\n        return node.id === undefined ? undefined : this._lastMaxCounts.get(node.id);\n    }\n\n    @debug({\n        args: { 0: (n: ViewNode) => n.toString() }\n    })\n    resetNodeLastMaxCount(node: PageableViewNode) {\n        if (node.id === undefined || !node.rememberLastMaxCount) return;\n\n        this._lastMaxCounts.delete(node.id);\n    }\n\n    @debug({\n        args: {\n            0: (n: ViewNode & PageableViewNode) => n.toString(),\n            3: (n?: ViewNode) => (n === undefined ? '' : n.toString())\n        }\n    })\n    async showMoreNodeChildren(\n        node: ViewNode & PageableViewNode,\n        maxCount: number | undefined,\n        previousNode?: ViewNode\n    ) {\n        if (maxCount === undefined || maxCount === 0) {\n            node.maxCount = maxCount;\n        }\n        else {\n            node.maxCount = (node.maxCount || maxCount) + maxCount;\n        }\n\n        if (node.rememberLastMaxCount) {\n            this._lastMaxCounts.set(node.id!, node.maxCount);\n        }\n\n        if (previousNode !== undefined) {\n            void (await this.reveal(previousNode, { select: true }));\n        }\n\n        return this.refreshNode(node);\n    }\n\n    @debug({\n        args: { 0: (n: ViewNode) => (n != null ? n.toString() : '') }\n    })\n    triggerNodeChange(node?: ViewNode) {\n        // Since the root node won't actually refresh, force everything\n        this._onDidChangeTreeData.fire(node !== undefined && node !== this._root ? node : undefined);\n    }\n}\n","'use strict';\nimport { commands, ConfigurationChangeEvent } from 'vscode';\nimport { CompareViewConfig, configuration, ViewFilesLayout, ViewsConfig } from '../configuration';\nimport {\n    CommandContext,\n    NamedRef,\n    PinnedComparison,\n    PinnedComparisons,\n    setCommandContext,\n    WorkspaceState\n} from '../constants';\nimport { Container } from '../container';\nimport { CompareNode, CompareResultsNode, nodeSupportsConditionalDismissal, ViewNode } from './nodes';\nimport { ViewBase } from './viewBase';\n\nexport class CompareView extends ViewBase<CompareNode> {\n    constructor() {\n        super('gitlens.views.compare', 'Compare');\n\n        setCommandContext(CommandContext.ViewsCompareKeepResults, this.keepResults);\n    }\n\n    getRoot() {\n        return new CompareNode(this);\n    }\n\n    protected get location(): string {\n        return this.config.location;\n    }\n\n    protected registerCommands() {\n        void Container.viewCommands;\n        commands.registerCommand(this.getQualifiedCommand('clear'), () => this.clear(), this);\n        commands.registerCommand(this.getQualifiedCommand('refresh'), () => this.refresh(true), this);\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToAuto'),\n            () => this.setFilesLayout(ViewFilesLayout.Auto),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToList'),\n            () => this.setFilesLayout(ViewFilesLayout.List),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToTree'),\n            () => this.setFilesLayout(ViewFilesLayout.Tree),\n            this\n        );\n        commands.registerCommand(this.getQualifiedCommand('setKeepResultsToOn'), () => this.setKeepResults(true), this);\n        commands.registerCommand(\n            this.getQualifiedCommand('setKeepResultsToOff'),\n            () => this.setKeepResults(false),\n            this\n        );\n\n        commands.registerCommand(this.getQualifiedCommand('pinComparison'), this.pinComparison, this);\n        commands.registerCommand(this.getQualifiedCommand('unpinComparison'), this.unpinComparison, this);\n        commands.registerCommand(this.getQualifiedCommand('swapComparison'), this.swapComparison, this);\n\n        commands.registerCommand(this.getQualifiedCommand('selectForCompare'), this.selectForCompare, this);\n        commands.registerCommand(this.getQualifiedCommand('compareWithSelected'), this.compareWithSelected, this);\n    }\n\n    protected onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (\n            !configuration.changed(e, configuration.name('views')('compare').value) &&\n            !configuration.changed(e, configuration.name('views').value) &&\n            !configuration.changed(e, configuration.name('defaultGravatarsStyle').value)\n        ) {\n            return;\n        }\n\n        if (configuration.changed(e, configuration.name('views')('compare')('location').value)) {\n            this.initialize(this.config.location, { showCollapseAll: true });\n        }\n\n        if (!configuration.initializing(e) && this._root !== undefined) {\n            void this.refresh(true);\n        }\n    }\n\n    get config(): ViewsConfig & CompareViewConfig {\n        return { ...Container.config.views, ...Container.config.views.compare };\n    }\n\n    get keepResults(): boolean {\n        return Container.context.workspaceState.get<boolean>(WorkspaceState.ViewsCompareKeepResults, false);\n    }\n\n    clear() {\n        if (this._root === undefined) return;\n\n        this._root.clear();\n    }\n\n    dismissNode(node: ViewNode) {\n        if (this._root === undefined) return;\n        if (nodeSupportsConditionalDismissal(node) && node.canDismiss() === false) return;\n\n        this._root.dismiss(node);\n    }\n\n    compare(repoPath: string, ref1: string | NamedRef, ref2: string | NamedRef) {\n        return this.addResults(\n            new CompareResultsNode(\n                this,\n                repoPath,\n                typeof ref1 === 'string' ? { ref: ref1 } : ref1,\n                typeof ref2 === 'string' ? { ref: ref2 } : ref2\n            )\n        );\n    }\n\n    compareWithSelected(repoPath?: string, ref?: string | NamedRef) {\n        const root = this.ensureRoot();\n        void root.compareWithSelected(repoPath, ref);\n    }\n\n    selectForCompare(repoPath?: string, ref?: string | NamedRef) {\n        const root = this.ensureRoot();\n        void root.selectForCompare(repoPath, ref);\n    }\n\n    getPinnedComparisons() {\n        const pinned = Container.context.workspaceState.get<PinnedComparisons>(WorkspaceState.PinnedComparisons);\n        if (pinned == null) return [];\n\n        return Object.values(pinned).map(p => new CompareResultsNode(this, p.path, p.ref1, p.ref2, true, p.notation));\n    }\n\n    async updatePinnedComparison(id: string, pin?: PinnedComparison) {\n        let pinned = Container.context.workspaceState.get<PinnedComparisons>(WorkspaceState.PinnedComparisons);\n        if (pinned == null) {\n            pinned = Object.create(null);\n        }\n\n        if (pin !== undefined) {\n            pinned![id] = { ...pin };\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const { [id]: _, ...rest } = pinned!;\n            pinned = rest;\n        }\n\n        await Container.context.workspaceState.update(WorkspaceState.PinnedComparisons, pinned);\n    }\n\n    private async addResults(results: ViewNode) {\n        if (!this.visible) {\n            await this.show();\n        }\n\n        const root = this.ensureRoot();\n        root.addOrReplace(results, !this.keepResults);\n\n        setImmediate(() => this.reveal(results, { expand: true, focus: true, select: true }));\n    }\n\n    private setFilesLayout(layout: ViewFilesLayout) {\n        return configuration.updateEffective(configuration.name('views')('compare')('files')('layout').value, layout);\n    }\n\n    private setKeepResults(enabled: boolean) {\n        Container.context.workspaceState.update(WorkspaceState.ViewsCompareKeepResults, enabled);\n        setCommandContext(CommandContext.ViewsCompareKeepResults, enabled);\n    }\n\n    private pinComparison(node: ViewNode) {\n        if (!(node instanceof CompareResultsNode)) return undefined;\n\n        return node.pin();\n    }\n\n    private swapComparison(node: ViewNode) {\n        if (!(node instanceof CompareResultsNode)) return undefined;\n\n        return node.swap();\n    }\n\n    private unpinComparison(node: ViewNode) {\n        if (!(node instanceof CompareResultsNode)) return undefined;\n\n        return node.unpin();\n    }\n}\n","'use strict';\nimport { commands, ConfigurationChangeEvent } from 'vscode';\nimport { configuration, FileHistoryViewConfig, ViewsConfig } from '../configuration';\nimport { CommandContext, setCommandContext } from '../constants';\nimport { Container } from '../container';\nimport { GitUri } from '../git/gitUri';\nimport { FileHistoryTrackerNode } from './nodes';\nimport { ViewBase } from './viewBase';\n\nexport class FileHistoryView extends ViewBase<FileHistoryTrackerNode> {\n    constructor() {\n        super('gitlens.views.fileHistory', 'File History');\n    }\n\n    getRoot() {\n        return new FileHistoryTrackerNode(this);\n    }\n\n    protected get location(): string {\n        return this.config.location;\n    }\n\n    protected registerCommands() {\n        void Container.viewCommands;\n        commands.registerCommand(this.getQualifiedCommand('refresh'), () => this.refresh(true), this);\n        commands.registerCommand(this.getQualifiedCommand('changeBase'), () => this.changeBase(), this);\n        commands.registerCommand(\n            this.getQualifiedCommand('setEditorFollowingOn'),\n            () => this.setEditorFollowing(true),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setEditorFollowingOff'),\n            () => this.setEditorFollowing(false),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setRenameFollowingOn'),\n            () => this.setRenameFollowing(true),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setRenameFollowingOff'),\n            () => this.setRenameFollowing(false),\n            this\n        );\n    }\n\n    protected onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (\n            !configuration.changed(e, configuration.name('views')('fileHistory').value) &&\n            !configuration.changed(e, configuration.name('views').value) &&\n            !configuration.changed(e, configuration.name('defaultGravatarsStyle').value) &&\n            !configuration.changed(e, configuration.name('advanced')('fileHistoryFollowsRenames').value)\n        ) {\n            return;\n        }\n\n        if (configuration.changed(e, configuration.name('views')('fileHistory')('enabled').value)) {\n            setCommandContext(CommandContext.ViewsFileHistoryEditorFollowing, true);\n        }\n\n        if (configuration.changed(e, configuration.name('views')('fileHistory')('location').value)) {\n            this.initialize(this.config.location);\n        }\n\n        if (!configuration.initializing(e) && this._root !== undefined) {\n            void this.refresh(true);\n        }\n    }\n\n    get config(): ViewsConfig & FileHistoryViewConfig {\n        return { ...Container.config.views, ...Container.config.views.fileHistory };\n    }\n\n    async showHistoryForUri(uri: GitUri, baseRef?: string) {\n        const root = this.ensureRoot();\n\n        this.setEditorFollowing(false);\n        await root.showHistoryForUri(uri, baseRef);\n        return this.show();\n    }\n\n    private changeBase() {\n        if (this._root !== undefined) {\n            void this._root.changeBase();\n        }\n    }\n\n    private setEditorFollowing(enabled: boolean) {\n        setCommandContext(CommandContext.ViewsFileHistoryEditorFollowing, enabled);\n        if (this._root !== undefined) {\n            this._root.setEditorFollowing(enabled);\n        }\n    }\n\n    private setRenameFollowing(enabled: boolean) {\n        return configuration.updateEffective(\n            configuration.name('advanced')('fileHistoryFollowsRenames').value,\n            enabled\n        );\n    }\n}\n","'use strict';\nimport { commands, ConfigurationChangeEvent } from 'vscode';\nimport { configuration, LineHistoryViewConfig, ViewsConfig } from '../configuration';\nimport { CommandContext, setCommandContext } from '../constants';\nimport { Container } from '../container';\nimport { LineHistoryTrackerNode } from './nodes';\nimport { ViewBase } from './viewBase';\n\nexport class LineHistoryView extends ViewBase<LineHistoryTrackerNode> {\n    constructor() {\n        super('gitlens.views.lineHistory', 'Line History');\n    }\n\n    getRoot() {\n        return new LineHistoryTrackerNode(this);\n    }\n\n    protected get location(): string {\n        return this.config.location;\n    }\n\n    protected registerCommands() {\n        void Container.viewCommands;\n        commands.registerCommand(this.getQualifiedCommand('refresh'), () => this.refresh(true), this);\n        commands.registerCommand(this.getQualifiedCommand('changeBase'), () => this.changeBase(), this);\n        commands.registerCommand(\n            this.getQualifiedCommand('setEditorFollowingOn'),\n            () => this.setEditorFollowing(true),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setEditorFollowingOff'),\n            () => this.setEditorFollowing(false),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setRenameFollowingOn'),\n            () => this.setRenameFollowing(true),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setRenameFollowingOff'),\n            () => this.setRenameFollowing(false),\n            this\n        );\n    }\n\n    protected onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (\n            !configuration.changed(e, configuration.name('views')('lineHistory').value) &&\n            !configuration.changed(e, configuration.name('views').value) &&\n            !configuration.changed(e, configuration.name('defaultGravatarsStyle').value) &&\n            !configuration.changed(e, configuration.name('advanced')('fileHistoryFollowsRenames').value)\n        ) {\n            return;\n        }\n\n        if (configuration.changed(e, configuration.name('views')('lineHistory')('enabled').value)) {\n            setCommandContext(CommandContext.ViewsLineHistoryEditorFollowing, true);\n        }\n\n        if (configuration.changed(e, configuration.name('views')('lineHistory')('location').value)) {\n            this.initialize(this.config.location);\n        }\n\n        if (!configuration.initializing(e) && this._root !== undefined) {\n            void this.refresh(true);\n        }\n    }\n\n    get config(): ViewsConfig & LineHistoryViewConfig {\n        return { ...Container.config.views, ...Container.config.views.lineHistory };\n    }\n\n    private changeBase() {\n        if (this._root !== undefined) {\n            void this._root.changeBase();\n        }\n    }\n\n    private setEditorFollowing(enabled: boolean) {\n        setCommandContext(CommandContext.ViewsLineHistoryEditorFollowing, enabled);\n        if (this._root !== undefined) {\n            this._root.setEditorFollowing(enabled);\n        }\n    }\n\n    private setRenameFollowing(enabled: boolean) {\n        return configuration.updateEffective(\n            configuration.name('advanced')('fileHistoryFollowsRenames').value,\n            enabled\n        );\n    }\n}\n","'use strict';\nimport { commands, ConfigurationChangeEvent, Event, EventEmitter } from 'vscode';\nimport { configuration, RepositoriesViewConfig, ViewFilesLayout, ViewsConfig } from '../configuration';\nimport { CommandContext, setCommandContext, WorkspaceState } from '../constants';\nimport { Container } from '../container';\nimport { RepositoriesNode, ViewNode } from './nodes';\nimport { ViewBase } from './viewBase';\nimport { ViewShowBranchComparison } from '../config';\nimport { CompareBranchNode } from './nodes/compareBranchNode';\n\nexport class RepositoriesView extends ViewBase<RepositoriesNode> {\n    constructor() {\n        super('gitlens.views.repositories', 'Repositories');\n    }\n\n    private _onDidChangeAutoRefresh = new EventEmitter<void>();\n    get onDidChangeAutoRefresh(): Event<void> {\n        return this._onDidChangeAutoRefresh.event;\n    }\n\n    getRoot() {\n        return new RepositoriesNode(this);\n    }\n\n    protected get location(): string {\n        return this.config.location;\n    }\n\n    protected registerCommands() {\n        void Container.viewCommands;\n\n        commands.registerCommand(this.getQualifiedCommand('refresh'), () => this.refresh(true), this);\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToAuto'),\n            () => this.setFilesLayout(ViewFilesLayout.Auto),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToList'),\n            () => this.setFilesLayout(ViewFilesLayout.List),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToTree'),\n            () => this.setFilesLayout(ViewFilesLayout.Tree),\n            this\n        );\n\n        commands.registerCommand(\n            this.getQualifiedCommand('setAutoRefreshToOn'),\n            () => this.setAutoRefresh(Container.config.views.repositories.autoRefresh, true),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setAutoRefreshToOff'),\n            () => this.setAutoRefresh(Container.config.views.repositories.autoRefresh, false),\n            this\n        );\n\n        commands.registerCommand(\n            this.getQualifiedCommand('setBranchComparisonToWorking'),\n            n => this.setBranchComparison(n, ViewShowBranchComparison.Working),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setBranchComparisonToBranch'),\n            n => this.setBranchComparison(n, ViewShowBranchComparison.Branch),\n            this\n        );\n    }\n\n    protected onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (\n            !configuration.changed(e, configuration.name('views')('repositories').value) &&\n            !configuration.changed(e, configuration.name('views').value) &&\n            !configuration.changed(e, configuration.name('defaultGravatarsStyle').value)\n        ) {\n            return;\n        }\n\n        if (configuration.changed(e, configuration.name('views')('repositories')('autoRefresh').value)) {\n            void this.setAutoRefresh(Container.config.views.repositories.autoRefresh);\n        }\n\n        if (configuration.changed(e, configuration.name('views')('repositories')('location').value)) {\n            this.initialize(this.config.location, { showCollapseAll: true });\n        }\n\n        if (!configuration.initializing(e) && this._root !== undefined) {\n            void this.refresh(true);\n        }\n    }\n\n    get autoRefresh() {\n        return (\n            this.config.autoRefresh &&\n            Container.context.workspaceState.get<boolean>(WorkspaceState.ViewsRepositoriesAutoRefresh, true)\n        );\n    }\n\n    get config(): ViewsConfig & RepositoriesViewConfig {\n        return { ...Container.config.views, ...Container.config.views.repositories };\n    }\n\n    private async setAutoRefresh(enabled: boolean, workspaceEnabled?: boolean) {\n        if (enabled) {\n            if (workspaceEnabled === undefined) {\n                workspaceEnabled = Container.context.workspaceState.get<boolean>(\n                    WorkspaceState.ViewsRepositoriesAutoRefresh,\n                    true\n                );\n            }\n            else {\n                await Container.context.workspaceState.update(\n                    WorkspaceState.ViewsRepositoriesAutoRefresh,\n                    workspaceEnabled\n                );\n            }\n        }\n\n        setCommandContext(CommandContext.ViewsRepositoriesAutoRefresh, enabled && workspaceEnabled);\n\n        this._onDidChangeAutoRefresh.fire();\n    }\n\n    private setBranchComparison(node: ViewNode, comparisonType: Exclude<ViewShowBranchComparison, false>) {\n        if (!(node instanceof CompareBranchNode)) return undefined;\n\n        return node.setComparisonType(comparisonType);\n    }\n\n    private setFilesLayout(layout: ViewFilesLayout) {\n        return configuration.updateEffective(\n            configuration.name('views')('repositories')('files')('layout').value,\n            layout\n        );\n    }\n}\n","'use strict';\nimport { commands, ConfigurationChangeEvent } from 'vscode';\nimport { configuration, SearchViewConfig, ViewFilesLayout, ViewsConfig } from '../configuration';\nimport { CommandContext, setCommandContext, WorkspaceState } from '../constants';\nimport { Container } from '../container';\nimport { GitLog, GitRepoSearchBy } from '../git/gitService';\nimport { Functions, Strings } from '../system';\nimport { nodeSupportsConditionalDismissal, SearchNode, SearchResultsCommitsNode, ViewNode } from './nodes';\nimport { ViewBase } from './viewBase';\n\ninterface SearchQueryResult {\n    label: string;\n    log: GitLog | undefined;\n}\n\nexport class SearchView extends ViewBase<SearchNode> {\n    constructor() {\n        super('gitlens.views.search', 'Search Commits');\n\n        setCommandContext(CommandContext.ViewsSearchKeepResults, this.keepResults);\n    }\n\n    getRoot() {\n        return new SearchNode(this);\n    }\n\n    protected get location(): string {\n        return this.config.location;\n    }\n\n    protected registerCommands() {\n        void Container.viewCommands;\n        commands.registerCommand(this.getQualifiedCommand('clear'), () => this.clear(), this);\n        commands.registerCommand(this.getQualifiedCommand('refresh'), () => this.refresh(true), this);\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToAuto'),\n            () => this.setFilesLayout(ViewFilesLayout.Auto),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToList'),\n            () => this.setFilesLayout(ViewFilesLayout.List),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToTree'),\n            () => this.setFilesLayout(ViewFilesLayout.Tree),\n            this\n        );\n        commands.registerCommand(this.getQualifiedCommand('setKeepResultsToOn'), () => this.setKeepResults(true), this);\n        commands.registerCommand(\n            this.getQualifiedCommand('setKeepResultsToOff'),\n            () => this.setKeepResults(false),\n            this\n        );\n    }\n\n    protected onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (\n            !configuration.changed(e, configuration.name('views')('search').value) &&\n            !configuration.changed(e, configuration.name('views').value) &&\n            !configuration.changed(e, configuration.name('defaultGravatarsStyle').value)\n        ) {\n            return;\n        }\n\n        if (configuration.changed(e, configuration.name('views')('search')('location').value)) {\n            this.initialize(this.config.location, { showCollapseAll: true });\n        }\n\n        if (!configuration.initializing(e) && this._root !== undefined) {\n            void this.refresh(true);\n        }\n    }\n\n    get config(): ViewsConfig & SearchViewConfig {\n        return { ...Container.config.views, ...Container.config.views.search };\n    }\n\n    get keepResults(): boolean {\n        return Container.context.workspaceState.get<boolean>(WorkspaceState.ViewsSearchKeepResults, false);\n    }\n\n    clear() {\n        if (this._root === undefined) return;\n\n        this._root.clear();\n    }\n\n    dismissNode(node: ViewNode) {\n        if (this._root === undefined) return;\n        if (nodeSupportsConditionalDismissal(node) && node.canDismiss() === false) return;\n\n        this._root.dismiss(node);\n    }\n\n    async search(\n        repoPath: string,\n        search: string,\n        searchBy: GitRepoSearchBy,\n        options: {\n            maxCount?: number;\n            label:\n                | string\n                | {\n                      label: string;\n                      resultsType?: { singular: string; plural: string };\n                  };\n        }\n    ) {\n        await this.show();\n\n        const searchQueryFn = this.getSearchQueryFn(\n            Container.git.getLogForSearch(repoPath, search, searchBy, {\n                maxCount: options.maxCount\n            }),\n            options\n        );\n\n        return this.addResults(\n            new SearchResultsCommitsNode(\n                this,\n                this._root!,\n                repoPath,\n                search,\n                searchBy,\n                `results for ${typeof options.label === 'string' ? options.label : options.label.label}`,\n                searchQueryFn\n            )\n        );\n    }\n\n    showSearchResults(\n        repoPath: string,\n        search: string,\n        searchBy: GitRepoSearchBy,\n        results: GitLog,\n        options: {\n            label:\n                | string\n                | {\n                      label: string;\n                      resultsType?: { singular: string; plural: string };\n                  };\n        }\n    ) {\n        const label = this.getSearchLabel(options.label, results);\n        const searchQueryFn = Functions.cachedOnce(this.getSearchQueryFn(results, options), {\n            label: label,\n            log: results\n        });\n\n        return this.addResults(\n            new SearchResultsCommitsNode(this, this._root!, repoPath, search, searchBy, label, searchQueryFn)\n        );\n    }\n\n    private addResults(results: ViewNode) {\n        const root = this.ensureRoot();\n        root.addOrReplace(results, !this.keepResults);\n\n        setImmediate(() => this.reveal(results, { select: true, expand: true }));\n    }\n\n    private getSearchLabel(\n        label:\n            | string\n            | {\n                  label: string;\n                  resultsType?: { singular: string; plural: string };\n              },\n        log: GitLog | undefined\n    ) {\n        if (typeof label === 'string') return label;\n\n        const count = log !== undefined ? log.count : 0;\n        const truncated = log !== undefined ? log.truncated : false;\n\n        const resultsType =\n            label.resultsType === undefined ? { singular: 'result', plural: 'results' } : label.resultsType;\n\n        return `${Strings.pluralize(resultsType.singular, count, {\n            number: truncated ? `${count}+` : undefined,\n            plural: resultsType.plural,\n            zero: 'No'\n        })} for ${label.label}`;\n    }\n\n    private getSearchQueryFn(\n        results: Promise<GitLog | undefined> | GitLog | undefined,\n        options: {\n            label:\n                | string\n                | {\n                      label: string;\n                      resultsType?: { singular: string; plural: string };\n                  };\n        }\n    ): (maxCount: number | undefined) => Promise<SearchQueryResult> {\n        return async (maxCount: number | undefined) => {\n            const res = await results;\n\n            let log;\n            if (res !== undefined) {\n                log = await (res.query === undefined\n                    ? (maxCount: number | undefined) => Promise.resolve(res)\n                    : res.query)(maxCount);\n            }\n\n            const label = this.getSearchLabel(options.label, log);\n            return {\n                label: label,\n                log: log\n            };\n        };\n    }\n\n    private setFilesLayout(layout: ViewFilesLayout) {\n        return configuration.updateEffective(configuration.name('views')('search')('files')('layout').value, layout);\n    }\n\n    private setKeepResults(enabled: boolean) {\n        Container.context.workspaceState.update(WorkspaceState.ViewsSearchKeepResults, enabled);\n        setCommandContext(CommandContext.ViewsSearchKeepResults, enabled);\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { commands, env, TextDocumentShowOptions, Uri, window } from 'vscode';\nimport {\n    Commands,\n    DiffWithCommandArgs,\n    DiffWithCommandArgsRevision,\n    DiffWithPreviousCommandArgs,\n    DiffWithWorkingCommandArgs,\n    openEditor,\n    OpenFileInRemoteCommandArgs,\n    OpenFileRevisionCommandArgs,\n    OpenWorkingFileCommandArgs,\n    openWorkspace\n} from '../commands';\nimport { BuiltInCommands, CommandContext, setCommandContext } from '../constants';\nimport { Container } from '../container';\nimport { toGitLensFSUri } from '../git/fsProvider';\nimport { GitService, GitUri } from '../git/gitService';\nimport {\n    BranchNode,\n    BranchTrackingStatusNode,\n    CommitFileNode,\n    CommitNode,\n    CompareBranchNode,\n    CompareResultsNode,\n    ContributorNode,\n    FileHistoryNode,\n    FolderNode,\n    LineHistoryNode,\n    nodeSupportsPaging,\n    PagerNode,\n    RemoteNode,\n    RepositoryNode,\n    ResultsFileNode,\n    ResultsFilesNode,\n    StashFileNode,\n    StashNode,\n    StatusFileNode,\n    TagNode,\n    ViewNode,\n    ViewRefFileNode,\n    ViewRefNode,\n    viewSupportsNodeDismissal\n} from './nodes';\nimport { Strings } from '../system/string';\nimport { runGitCommandInTerminal } from '../terminal';\nimport { ReferencesQuickPick } from '../quickpicks';\n\ninterface CompareSelectedInfo {\n    ref: string;\n    repoPath: string | undefined;\n    uri?: Uri;\n}\n\nexport class ViewCommands {\n    constructor() {\n        commands.registerCommand(\n            'gitlens.views.refreshNode',\n            (node: ViewNode, reset?: boolean) => {\n                if (reset === undefined && nodeSupportsPaging(node)) {\n                    node.maxCount = undefined;\n                    node.view.resetNodeLastMaxCount(node);\n                }\n\n                return node.view.refreshNode(node, reset === undefined ? true : reset);\n            },\n            this\n        );\n        commands.registerCommand(\n            'gitlens.views.expandNode',\n            (node: ViewNode) => node.view.reveal(node, { select: false, focus: false, expand: 3 }),\n            this\n        );\n        commands.registerCommand(\n            'gitlens.views.dismissNode',\n            (node: ViewNode) => viewSupportsNodeDismissal(node.view) && node.view.dismissNode(node),\n            this\n        );\n        commands.registerCommand('gitlens.views.executeNodeCallback', (fn: <R>() => Promise<R>) => fn(), this);\n        commands.registerCommand('gitlens.views.showMoreChildren', (node: PagerNode) => node.showMore(), this);\n        commands.registerCommand('gitlens.views.showAllChildren', (node: PagerNode) => node.showAll(), this);\n\n        commands.registerCommand('gitlens.views.fetch', this.fetch, this);\n        commands.registerCommand('gitlens.views.pull', this.pull, this);\n        commands.registerCommand('gitlens.views.push', this.push, this);\n        commands.registerCommand('gitlens.views.pushWithForce', n => this.push(n, true), this);\n        commands.registerCommand('gitlens.views.closeRepository', this.closeRepository, this);\n\n        commands.registerCommand('gitlens.views.setAsDefault', this.setAsDefault, this);\n        commands.registerCommand('gitlens.views.unsetAsDefault', this.unsetAsDefault, this);\n\n        commands.registerCommand('gitlens.views.openInTerminal', this.openInTerminal, this);\n        commands.registerCommand('gitlens.views.star', this.star, this);\n        commands.registerCommand('gitlens.views.unstar', this.unstar, this);\n\n        commands.registerCommand('gitlens.views.exploreRepoRevision', this.exploreRepoRevision, this);\n\n        commands.registerCommand('gitlens.views.contributor.addCoauthoredBy', this.contributorAddCoauthoredBy, this);\n        commands.registerCommand('gitlens.views.contributor.copyToClipboard', this.contributorCopyToClipboard, this);\n\n        commands.registerCommand('gitlens.views.openChanges', this.openChanges, this);\n        commands.registerCommand('gitlens.views.openChangesWithWorking', this.openChangesWithWorking, this);\n        commands.registerCommand('gitlens.views.openFile', this.openFile, this);\n        commands.registerCommand('gitlens.views.openFileRevision', this.openFileRevision, this);\n        commands.registerCommand('gitlens.views.openFileRevisionInRemote', this.openFileRevisionInRemote, this);\n        commands.registerCommand('gitlens.views.openChangedFiles', this.openChangedFiles, this);\n        commands.registerCommand('gitlens.views.openChangedFileChanges', this.openChangedFileChanges, this);\n        commands.registerCommand(\n            'gitlens.views.openChangedFileChangesWithWorking',\n            this.openChangedFileChangesWithWorking,\n            this\n        );\n        commands.registerCommand('gitlens.views.openChangedFileRevisions', this.openChangedFileRevisions, this);\n        commands.registerCommand('gitlens.views.applyChanges', this.applyChanges, this);\n        commands.registerCommand('gitlens.views.checkout', this.checkout, this);\n        commands.registerCommand('gitlens.views.addRemote', this.addRemote, this);\n\n        commands.registerCommand('gitlens.views.stageDirectory', this.stageDirectory, this);\n        commands.registerCommand('gitlens.views.stageFile', this.stageFile, this);\n        commands.registerCommand('gitlens.views.unstageDirectory', this.unstageDirectory, this);\n        commands.registerCommand('gitlens.views.unstageFile', this.unstageFile, this);\n\n        commands.registerCommand('gitlens.views.compareAncestryWithWorking', this.compareAncestryWithWorking, this);\n        commands.registerCommand('gitlens.views.compareWithHead', this.compareWithHead, this);\n        commands.registerCommand('gitlens.views.compareWithRemote', this.compareWithRemote, this);\n        commands.registerCommand('gitlens.views.compareWithSelected', this.compareWithSelected, this);\n        commands.registerCommand('gitlens.views.selectForCompare', this.selectForCompare, this);\n        commands.registerCommand('gitlens.views.compareFileWithSelected', this.compareFileWithSelected, this);\n        commands.registerCommand('gitlens.views.selectFileForCompare', this.selectFileForCompare, this);\n        commands.registerCommand('gitlens.views.compareWithWorking', this.compareWithWorking, this);\n\n        commands.registerCommand('gitlens.views.setComparisonToTwoDot', n => this.setComparisonNotation(n, '..'), this);\n        commands.registerCommand(\n            'gitlens.views.setComparisonToThreeDot',\n            n => this.setComparisonNotation(n, '...'),\n            this\n        );\n\n        commands.registerCommand('gitlens.views.terminalCheckoutBranch', this.terminalCheckoutBranch, this);\n        commands.registerCommand('gitlens.views.terminalCreateBranch', this.terminalCreateBranch, this);\n        commands.registerCommand('gitlens.views.terminalDeleteBranch', this.terminalDeleteBranch, this);\n        commands.registerCommand('gitlens.views.terminalMergeBranch', this.terminalMergeBranch, this);\n        commands.registerCommand('gitlens.views.terminalRebaseBranch', this.terminalRebaseBranch, this);\n        commands.registerCommand('gitlens.views.terminalRebaseBranchToRemote', this.terminalRebaseBranchToRemote, this);\n        commands.registerCommand(\n            'gitlens.views.terminalSquashBranchIntoCommit',\n            this.terminalSquashBranchIntoCommit,\n            this\n        );\n        commands.registerCommand('gitlens.views.terminalCheckoutCommit', this.terminalCheckoutCommit, this);\n        commands.registerCommand('gitlens.views.terminalCherryPickCommit', this.terminalCherryPickCommit, this);\n        commands.registerCommand('gitlens.views.terminalPushCommit', this.terminalPushCommit, this);\n        commands.registerCommand('gitlens.views.terminalRebaseCommit', this.terminalRebaseCommit, this);\n        commands.registerCommand('gitlens.views.terminalResetCommit', this.terminalResetCommit, this);\n        commands.registerCommand('gitlens.views.terminalRevertCommit', this.terminalRevertCommit, this);\n        commands.registerCommand('gitlens.views.terminalRemoveRemote', this.terminalRemoveRemote, this);\n        commands.registerCommand('gitlens.views.terminalCreateTag', this.terminalCreateTag, this);\n        commands.registerCommand('gitlens.views.terminalDeleteTag', this.terminalDeleteTag, this);\n    }\n\n    private async contributorAddCoauthoredBy(node: ContributorNode) {\n        if (!(node instanceof ContributorNode)) return;\n\n        const gitApi = await GitService.getBuiltInGitApi();\n        if (gitApi === undefined) return;\n\n        const repo = gitApi.repositories.find(\n            r => Strings.normalizePath(r.rootUri.fsPath) === node.contributor.repoPath\n        );\n        if (repo === undefined) return;\n\n        const coauthor = `${node.contributor.name}${node.contributor.email ? ` <${node.contributor.email}>` : ''}`;\n\n        const message = repo.inputBox.value;\n        if (message.includes(coauthor)) return;\n\n        let newlines;\n        if (message.includes('Co-authored-by: ')) {\n            newlines = '\\n';\n        }\n        else if (message.length !== 0 && message[message.length - 1] === '\\n') {\n            newlines = '\\n\\n';\n        }\n        else {\n            newlines = '\\n\\n\\n';\n        }\n\n        repo.inputBox.value = `${message}${newlines}Co-authored-by: ${coauthor}`;\n    }\n\n    private async contributorCopyToClipboard(node: ContributorNode) {\n        if (!(node instanceof ContributorNode)) return;\n\n        await env.clipboard.writeText(\n            `${node.contributor.name}${node.contributor.email ? ` <${node.contributor.email}>` : ''}`\n        );\n    }\n\n    private fetch(node: RemoteNode | RepositoryNode) {\n        if (node instanceof RemoteNode) return node.fetch();\n        if (node instanceof RepositoryNode) return node.fetch();\n\n        return undefined;\n    }\n\n    private pull(node: RepositoryNode | BranchTrackingStatusNode) {\n        if (node instanceof BranchTrackingStatusNode) {\n            node = node.getParent() as RepositoryNode;\n        }\n        if (!(node instanceof RepositoryNode)) return undefined;\n\n        return node.pull();\n    }\n\n    private push(node: RepositoryNode | BranchTrackingStatusNode, force?: boolean) {\n        if (node instanceof BranchTrackingStatusNode) {\n            node = node.getParent() as RepositoryNode;\n        }\n        if (!(node instanceof RepositoryNode)) return undefined;\n\n        return node.push({ force: force });\n    }\n\n    private async applyChanges(node: ViewRefFileNode) {\n        if (!(node instanceof ViewRefFileNode)) return;\n\n        void (await this.openFile(node));\n\n        if (node instanceof ResultsFileNode) {\n            void (await Container.git.applyChangesToWorkingFile(node.uri, node.ref1, node.ref2));\n\n            return;\n        }\n\n        if (node.uri.sha !== undefined && node.uri.sha !== 'HEAD') {\n            void (await Container.git.applyChangesToWorkingFile(node.uri));\n        }\n    }\n\n    private async checkout(node: ViewRefNode | ViewRefFileNode) {\n        if (!(node instanceof ViewRefNode)) return undefined;\n\n        if (node instanceof ViewRefFileNode) {\n            return Container.git.checkout(node.repoPath, node.ref, { fileName: node.fileName });\n        }\n\n        if (node instanceof BranchNode) {\n            let branch = node.branch;\n            if (branch.current) {\n                const pick = await new ReferencesQuickPick(node.repoPath).show('Choose a branch to check out to', {\n                    checkmarks: false,\n                    filterBranches: b => !b.current,\n                    include: 'branches'\n                });\n                if (pick === undefined) return undefined;\n\n                branch = pick.item;\n            }\n\n            if (branch.remote) {\n                const branches = await Container.git.getBranches(node.repoPath, {\n                    filter: b => {\n                        return b.tracking === branch.name;\n                    }\n                });\n\n                if (branches.length !== 0) {\n                    return Container.git.checkout(node.repoPath, branches[0].ref);\n                }\n\n                const name = await window.showInputBox({\n                    prompt: 'Please provide a name for the local branch',\n                    placeHolder: 'Local branch name',\n                    value: branch.getName(),\n                    ignoreFocusOut: true\n                });\n                if (name === undefined || name.length === 0) return undefined;\n\n                return Container.git.checkout(node.repoPath, branch.ref, { createBranch: name });\n            }\n\n            return Container.git.checkout(branch.repoPath, branch.ref);\n        }\n\n        return Container.git.checkout(node.repoPath, node.ref);\n    }\n\n    private async addRemote(node: RemoteNode) {\n        const name = await window.showInputBox({\n            prompt: 'Please provide a name for the remote',\n            placeHolder: 'Remote name',\n            value: undefined,\n            ignoreFocusOut: true\n        });\n        if (name === undefined || name.length === 0) return undefined;\n\n        const url = await window.showInputBox({\n            prompt: 'Please provide the repository url for the remote',\n            placeHolder: 'Remote repository url',\n            value: undefined,\n            ignoreFocusOut: true\n        });\n        if (url === undefined || url.length === 0) return undefined;\n\n        void (await Container.git.addRemote(node.repo.path, name, url));\n        void (await node.repo.fetch({ remote: name }));\n\n        return name;\n    }\n\n    private closeRepository(node: RepositoryNode) {\n        if (!(node instanceof RepositoryNode)) return;\n\n        node.repo.closed = true;\n    }\n\n    private compareWithHead(node: ViewRefNode) {\n        if (!(node instanceof ViewRefNode)) return undefined;\n\n        return Container.compareView.compare(node.repoPath, node.ref, 'HEAD');\n    }\n\n    private compareWithRemote(node: BranchNode) {\n        if (!(node instanceof BranchNode)) return undefined;\n        if (!node.branch.tracking) return undefined;\n\n        return Container.compareView.compare(node.repoPath, node.branch.tracking, node.ref);\n    }\n\n    private compareWithWorking(node: ViewRefNode) {\n        if (!(node instanceof ViewRefNode)) return undefined;\n\n        return Container.compareView.compare(node.repoPath, node.ref, '');\n    }\n\n    private async compareAncestryWithWorking(node: BranchNode) {\n        if (!(node instanceof BranchNode)) return undefined;\n\n        const branch = await Container.git.getBranch(node.repoPath);\n        if (branch === undefined) return undefined;\n\n        const commonAncestor = await Container.git.getMergeBase(node.repoPath, branch.ref, node.ref);\n        if (commonAncestor === undefined) return undefined;\n\n        return Container.compareView.compare(\n            node.repoPath,\n            { ref: commonAncestor, label: `ancestry with ${node.ref} (${GitService.shortenSha(commonAncestor)})` },\n            ''\n        );\n    }\n\n    private compareWithSelected(node: ViewRefNode) {\n        if (!(node instanceof ViewRefNode)) return;\n\n        Container.compareView.compareWithSelected(node.repoPath, node.ref);\n    }\n\n    private selectForCompare(node: ViewRefNode) {\n        if (!(node instanceof ViewRefNode)) return;\n\n        Container.compareView.selectForCompare(node.repoPath, node.ref);\n    }\n\n    private compareFileWithSelected(node: ViewRefFileNode) {\n        if (this._selectedFile === undefined || !(node instanceof ViewRefFileNode) || node.ref === undefined) {\n            return undefined;\n        }\n\n        if (this._selectedFile.repoPath !== node.repoPath) {\n            this.selectFileForCompare(node);\n            return undefined;\n        }\n\n        const selected = this._selectedFile;\n\n        this._selectedFile = undefined;\n        setCommandContext(CommandContext.ViewsCanCompareFile, false);\n\n        const diffArgs: DiffWithCommandArgs = {\n            repoPath: selected.repoPath,\n            lhs: {\n                sha: selected.ref,\n                uri: selected.uri!\n            },\n            rhs: {\n                sha: node.ref,\n                uri: node.uri\n            }\n        };\n        return commands.executeCommand(Commands.DiffWith, diffArgs);\n    }\n\n    private _selectedFile: CompareSelectedInfo | undefined;\n\n    private selectFileForCompare(node: ViewRefFileNode) {\n        if (!(node instanceof ViewRefFileNode) || node.ref === undefined) return;\n\n        this._selectedFile = {\n            ref: node.ref,\n            repoPath: node.repoPath,\n            uri: node.uri\n        };\n        setCommandContext(CommandContext.ViewsCanCompareFile, true);\n    }\n\n    private exploreRepoRevision(node: ViewRefNode, options: { openInNewWindow?: boolean } = {}) {\n        if (!(node instanceof ViewRefNode)) return;\n\n        const uri = toGitLensFSUri(node.ref, node.repoPath);\n        const gitUri = GitUri.fromRevisionUri(uri);\n\n        openWorkspace(uri, `${paths.basename(gitUri.repoPath!)} @ ${gitUri.shortSha}`, options);\n\n        void commands.executeCommand(BuiltInCommands.FocusFilesExplorer);\n    }\n\n    private openChanges(node: ViewRefFileNode | StatusFileNode) {\n        if (!(node instanceof ViewRefFileNode) && !(node instanceof StatusFileNode)) return undefined;\n\n        const command = node.getCommand();\n        if (command === undefined || command.arguments === undefined) return undefined;\n\n        const [uri, args] = command.arguments as [Uri, DiffWithPreviousCommandArgs];\n        args.showOptions!.preview = false;\n        return commands.executeCommand(command.command, uri, args);\n    }\n\n    private openChangesWithWorking(node: ViewRefFileNode | StatusFileNode) {\n        if (!(node instanceof ViewRefFileNode) && !(node instanceof StatusFileNode)) return undefined;\n\n        const args: DiffWithWorkingCommandArgs = {\n            showOptions: {\n                preserveFocus: true,\n                preview: false\n            }\n        };\n        return commands.executeCommand(Commands.DiffWithWorking, node.uri, args);\n    }\n\n    private openFile(node: ViewRefFileNode | StatusFileNode | FileHistoryNode | LineHistoryNode) {\n        if (\n            !(node instanceof ViewRefFileNode) &&\n            !(node instanceof StatusFileNode) &&\n            !(node instanceof FileHistoryNode) &&\n            !(node instanceof LineHistoryNode)\n        ) {\n            return undefined;\n        }\n\n        const args: OpenWorkingFileCommandArgs = {\n            uri: node.uri,\n            showOptions: {\n                preserveFocus: true,\n                preview: false\n            }\n        };\n        return commands.executeCommand(Commands.OpenWorkingFile, undefined, args);\n    }\n\n    private openFileRevision(\n        node: CommitFileNode | ResultsFileNode | StashFileNode | StatusFileNode,\n        options: OpenFileRevisionCommandArgs = { showOptions: { preserveFocus: true, preview: false } }\n    ) {\n        if (\n            !(node instanceof CommitFileNode) &&\n            !(node instanceof StashFileNode) &&\n            !(node instanceof ResultsFileNode) &&\n            !(node instanceof StatusFileNode)\n        ) {\n            return undefined;\n        }\n\n        let uri = options.uri;\n        if (uri == null) {\n            if (node instanceof ResultsFileNode) {\n                uri = GitUri.toRevisionUri(node.uri);\n            }\n            else {\n                uri =\n                    node.commit.status === 'D'\n                        ? GitUri.toRevisionUri(\n                              node.commit.previousSha!,\n                              node.commit.previousUri.fsPath,\n                              node.commit.repoPath\n                          )\n                        : GitUri.toRevisionUri(node.uri);\n            }\n        }\n\n        return openEditor(uri, options.showOptions || { preserveFocus: true, preview: false });\n    }\n\n    private openFileRevisionInRemote(node: CommitFileNode) {\n        if (!(node instanceof CommitFileNode) || node instanceof StashFileNode) return undefined;\n\n        const args: OpenFileInRemoteCommandArgs = {\n            range: false\n        };\n        return commands.executeCommand(\n            Commands.OpenFileInRemote,\n            node.commit.toGitUri(node.commit.status === 'D'),\n            args\n        );\n    }\n\n    private async openChangedFileChanges(\n        node: CommitNode | StashNode | ResultsFilesNode,\n        options: TextDocumentShowOptions = { preserveFocus: false, preview: false }\n    ) {\n        if (!(node instanceof CommitNode) && !(node instanceof StashNode) && !(node instanceof ResultsFilesNode)) {\n            return;\n        }\n\n        let repoPath: string;\n        let files;\n        let ref1: string;\n        let ref2: string;\n\n        if (node instanceof ResultsFilesNode) {\n            const { diff } = await node.getFilesQueryResults();\n            if (diff == null || diff.length === 0) return;\n\n            repoPath = node.repoPath;\n            files = diff;\n            ref1 = node.ref1;\n            ref2 = node.ref2;\n        }\n        else {\n            repoPath = node.commit.repoPath;\n            files = node.commit.files;\n            ref1 = node.commit.previousSha !== undefined ? node.commit.previousSha : GitService.deletedOrMissingSha;\n            ref2 = node.commit.sha;\n        }\n\n        if (files.length > 20) {\n            const result = await window.showWarningMessage(\n                `Are your sure you want to open all ${files.length} files?`,\n                { title: 'Yes' },\n                { title: 'No', isCloseAffordance: true }\n            );\n            if (result === undefined || result.title === 'No') return;\n        }\n\n        for (const file of files) {\n            if (file.status === 'A') continue;\n\n            const uri1 = GitUri.fromFile(file, repoPath);\n            const uri2 = file.status === 'R' ? GitUri.fromFile(file, repoPath, ref2, true) : uri1;\n\n            await this.openDiffWith(repoPath, { uri: uri1, sha: ref1 }, { uri: uri2, sha: ref2 }, options);\n        }\n    }\n\n    private async openChangedFileChangesWithWorking(\n        node: CommitNode | StashNode | ResultsFilesNode,\n        options: TextDocumentShowOptions = { preserveFocus: false, preview: false }\n    ) {\n        if (!(node instanceof CommitNode) && !(node instanceof StashNode) && !(node instanceof ResultsFilesNode)) {\n            return;\n        }\n\n        let repoPath: string;\n        let files;\n        let ref: string;\n\n        if (node instanceof ResultsFilesNode) {\n            const { diff } = await node.getFilesQueryResults();\n            if (diff == null || diff.length === 0) return;\n\n            repoPath = node.repoPath;\n            files = diff;\n            ref = node.ref1 || node.ref2;\n        }\n        else {\n            repoPath = node.commit.repoPath;\n            files = node.commit.files;\n            ref = node.commit.sha;\n        }\n\n        if (files.length > 20) {\n            const result = await window.showWarningMessage(\n                `Are your sure you want to open all ${files.length} files?`,\n                { title: 'Yes' },\n                { title: 'No', isCloseAffordance: true }\n            );\n            if (result === undefined || result.title === 'No') return;\n        }\n\n        for (const file of files) {\n            if (file.status === 'A' || file.status === 'D') continue;\n\n            const args: DiffWithWorkingCommandArgs = {\n                showOptions: options\n            };\n\n            if (!(node instanceof ResultsFilesNode)) {\n                args.commit = node.commit.toFileCommit(file);\n            }\n\n            const uri = GitUri.fromFile(file, repoPath, ref);\n            await commands.executeCommand(Commands.DiffWithWorking, uri, args);\n        }\n    }\n\n    private async openChangedFiles(\n        node: CommitNode | StashNode | ResultsFilesNode,\n        options: TextDocumentShowOptions = { preserveFocus: false, preview: false }\n    ) {\n        if (!(node instanceof CommitNode) && !(node instanceof StashNode) && !(node instanceof ResultsFilesNode)) {\n            return;\n        }\n\n        let repoPath: string;\n        let files;\n        let ref: string;\n\n        if (node instanceof ResultsFilesNode) {\n            const { diff } = await node.getFilesQueryResults();\n            if (diff == null || diff.length === 0) return;\n\n            repoPath = node.repoPath;\n            files = diff;\n            ref = node.ref1 || node.ref2;\n        }\n        else {\n            repoPath = node.commit.repoPath;\n            files = node.commit.files;\n            ref = node.commit.sha;\n        }\n\n        if (files.length > 20) {\n            const result = await window.showWarningMessage(\n                `Are your sure you want to open all ${files.length} files?`,\n                { title: 'Yes' },\n                { title: 'No', isCloseAffordance: true }\n            );\n            if (result === undefined || result.title === 'No') return;\n        }\n\n        for (const file of files) {\n            const uri = GitUri.fromFile(file, repoPath, ref);\n\n            const args: OpenWorkingFileCommandArgs = {\n                uri: uri,\n                showOptions: options\n            };\n            await commands.executeCommand(Commands.OpenWorkingFile, undefined, args);\n        }\n    }\n\n    private async openChangedFileRevisions(\n        node: CommitNode | StashNode | ResultsFilesNode,\n        options: TextDocumentShowOptions = { preserveFocus: false, preview: false }\n    ) {\n        if (!(node instanceof CommitNode) && !(node instanceof StashNode) && !(node instanceof ResultsFilesNode)) {\n            return;\n        }\n\n        let repoPath: string;\n        let files;\n        let ref1: string;\n        let ref2: string;\n\n        if (node instanceof ResultsFilesNode) {\n            const { diff } = await node.getFilesQueryResults();\n            if (diff == null || diff.length === 0) return;\n\n            repoPath = node.repoPath;\n            files = diff;\n            ref1 = node.ref1;\n            ref2 = node.ref2;\n        }\n        else {\n            repoPath = node.commit.repoPath;\n            files = node.commit.files;\n            ref1 = node.commit.sha;\n            ref2 = node.commit.previousFileSha;\n        }\n\n        if (files.length > 20) {\n            const result = await window.showWarningMessage(\n                `Are your sure you want to open all ${files.length} files?`,\n                { title: 'Yes' },\n                { title: 'No', isCloseAffordance: true }\n            );\n            if (result === undefined || result.title === 'No') return;\n        }\n\n        for (const file of files) {\n            const uri = GitUri.toRevisionUri(file.status === 'D' ? ref2 : ref1, file, repoPath);\n\n            await openEditor(uri, options);\n        }\n    }\n\n    private openDiffWith(\n        repoPath: string,\n        lhs: DiffWithCommandArgsRevision,\n        rhs: DiffWithCommandArgsRevision,\n        options: TextDocumentShowOptions = { preserveFocus: false, preview: false }\n    ) {\n        const diffArgs: DiffWithCommandArgs = {\n            repoPath: repoPath,\n            lhs: lhs,\n            rhs: rhs,\n            showOptions: options\n        };\n        return commands.executeCommand(Commands.DiffWith, diffArgs);\n    }\n\n    private openInTerminal(node: RepositoryNode) {\n        if (!(node instanceof RepositoryNode)) return undefined;\n\n        return commands.executeCommand(BuiltInCommands.OpenInTerminal, Uri.file(node.repo.path));\n    }\n\n    private setAsDefault(node: RemoteNode) {\n        if (node instanceof RemoteNode) return node.setAsDefault();\n        return undefined;\n    }\n\n    private unsetAsDefault(node: RemoteNode) {\n        if (node instanceof RemoteNode) return node.setAsDefault(false);\n        return undefined;\n    }\n\n    private async stageDirectory(node: FolderNode) {\n        if (!(node instanceof FolderNode) || !node.relativePath) return;\n\n        void (await Container.git.stageDirectory(node.repoPath, node.relativePath));\n        void node.triggerChange();\n    }\n\n    private async stageFile(node: CommitFileNode | StatusFileNode) {\n        if (!(node instanceof CommitFileNode) && !(node instanceof StatusFileNode)) return;\n\n        void (await Container.git.stageFile(node.repoPath, node.file.fileName));\n        void node.triggerChange();\n    }\n\n    private async unstageDirectory(node: FolderNode) {\n        if (!(node instanceof FolderNode) || !node.relativePath) return;\n\n        void (await Container.git.unStageDirectory(node.repoPath, node.relativePath));\n        void node.triggerChange();\n    }\n\n    private async unstageFile(node: CommitFileNode | StatusFileNode) {\n        if (!(node instanceof CommitFileNode) && !(node instanceof StatusFileNode)) return;\n\n        void (await Container.git.unStageFile(node.repoPath, node.file.fileName));\n        void node.triggerChange();\n    }\n\n    private star(node: BranchNode | RepositoryNode) {\n        if (node instanceof BranchNode || node instanceof RepositoryNode) return node.star();\n        return undefined;\n    }\n\n    private unstar(node: BranchNode | RepositoryNode) {\n        if (node instanceof BranchNode || node instanceof RepositoryNode) return node.unstar();\n        return undefined;\n    }\n\n    private setComparisonNotation(node: ViewNode, comparisonNotation: '...' | '..') {\n        if (!(node instanceof CompareResultsNode) && !(node instanceof CompareBranchNode)) return undefined;\n\n        return node.setComparisonNotation(comparisonNotation);\n    }\n\n    terminalCheckoutBranch(node: BranchNode) {\n        if (!(node instanceof BranchNode)) return;\n\n        runGitCommandInTerminal('checkout', `${node.ref}`, node.repoPath);\n    }\n\n    async terminalCreateBranch(node: ViewRefNode) {\n        if (!(node instanceof ViewRefNode)) return;\n\n        let remoteBranch = false;\n        let value = undefined;\n        if (node instanceof BranchNode && node.branch.remote) {\n            remoteBranch = true;\n            value = node.branch.getName();\n        }\n\n        const name = await window.showInputBox({\n            prompt: 'Please provide a branch name',\n            placeHolder: 'Branch name',\n            value: value,\n            ignoreFocusOut: true\n        });\n        if (name === undefined || name.length === 0) return;\n\n        runGitCommandInTerminal('branch', `${remoteBranch ? '-t ' : ''}${name} ${node.ref}`, node.repoPath);\n    }\n\n    terminalDeleteBranch(node: BranchNode) {\n        if (!(node instanceof BranchNode)) return;\n\n        if (node.branch.remote) {\n            runGitCommandInTerminal('push', `${node.branch.getRemoteName()} :${node.branch.getName()}`, node.repoPath);\n        }\n        else {\n            runGitCommandInTerminal('branch', `-d ${node.ref}`, node.repoPath);\n        }\n    }\n\n    terminalMergeBranch(node: BranchNode) {\n        if (!(node instanceof BranchNode)) return;\n\n        runGitCommandInTerminal('merge', `${node.ref}`, node.repoPath);\n    }\n\n    terminalRebaseBranch(node: BranchNode) {\n        if (!(node instanceof BranchNode)) return;\n\n        runGitCommandInTerminal('rebase', `-i ${node.ref}`, node.repoPath);\n    }\n\n    terminalRebaseBranchToRemote(node: BranchNode | BranchTrackingStatusNode) {\n        if (node instanceof BranchNode) {\n            if (!node.branch.current || !node.branch.tracking) return;\n\n            runGitCommandInTerminal('rebase', `-i ${node.branch.tracking}`, node.repoPath);\n        }\n        else if (node instanceof BranchTrackingStatusNode) {\n            runGitCommandInTerminal('rebase', `-i ${node.status.upstream}`, node.status.repoPath);\n        }\n    }\n\n    terminalSquashBranchIntoCommit(node: BranchNode) {\n        if (!(node instanceof BranchNode)) return;\n\n        runGitCommandInTerminal('merge', `--squash ${node.ref}`, node.repoPath);\n    }\n\n    terminalCheckoutCommit(node: CommitNode) {\n        if (!(node instanceof CommitNode)) return;\n\n        runGitCommandInTerminal('checkout', `${node.ref}`, node.repoPath);\n    }\n\n    terminalCherryPickCommit(node: CommitNode) {\n        if (!(node instanceof CommitNode)) return;\n\n        runGitCommandInTerminal('cherry-pick', `-e ${node.ref}`, node.repoPath);\n    }\n\n    async terminalPushCommit(node: CommitNode) {\n        if (!(node instanceof CommitNode)) return;\n\n        const branch = node.branch || (await Container.git.getBranch(node.repoPath));\n        if (branch === undefined) return;\n\n        runGitCommandInTerminal('push', `${branch.getRemoteName()} ${node.ref}:${branch.getName()}`, node.repoPath);\n    }\n\n    terminalRebaseCommit(node: CommitNode) {\n        if (!(node instanceof CommitNode)) return;\n\n        runGitCommandInTerminal('rebase', `-i ${node.ref}^`, node.repoPath);\n    }\n\n    terminalResetCommit(node: CommitNode) {\n        if (!(node instanceof CommitNode)) return;\n\n        runGitCommandInTerminal('reset', `--soft ${node.ref}`, node.repoPath);\n    }\n\n    terminalRevertCommit(node: CommitNode) {\n        if (!(node instanceof CommitNode)) return;\n\n        runGitCommandInTerminal('revert', `-e ${node.ref}`, node.repoPath);\n    }\n\n    terminalRemoveRemote(node: RemoteNode) {\n        if (!(node instanceof RemoteNode)) return;\n\n        runGitCommandInTerminal('remote', `remove ${node.remote.name}`, node.remote.repoPath);\n    }\n\n    async terminalCreateTag(node: ViewRefNode) {\n        if (!(node instanceof ViewRefNode)) return;\n\n        const name = await window.showInputBox({\n            prompt: 'Please provide a tag name',\n            placeHolder: 'Tag name',\n            ignoreFocusOut: true\n        });\n        if (name === undefined || name.length === 0) return;\n\n        const message = await window.showInputBox({\n            prompt: 'Please provide an optional message to annotate the tag',\n            placeHolder: 'Tag message',\n            ignoreFocusOut: true\n        });\n        if (message === undefined) return;\n\n        const args = `${message.length !== 0 ? `-a -m \"${message}\" ` : ''}${name} ${node.ref}`;\n        runGitCommandInTerminal('tag', args, node.repoPath);\n    }\n\n    terminalDeleteTag(node: TagNode) {\n        if (!(node instanceof TagNode)) return;\n\n        runGitCommandInTerminal('tag', `-d ${node.ref}`, node.repoPath);\n    }\n}\n","'use strict';\nimport { Config } from '../config';\n\nexport interface IpcMessage {\n    id: string;\n    method: string;\n    params?: any;\n}\n\nexport type IpcNotificationParamsOf<NT> = NT extends IpcNotificationType<infer P> ? P : never;\nexport class IpcNotificationType<P = any> {\n    constructor(public readonly method: string) {}\n}\n\nexport type IpcCommandParamsOf<CT> = CT extends IpcCommandType<infer P> ? P : never;\nexport class IpcCommandType<P = any> {\n    constructor(public readonly method: string) {}\n}\n\nexport function onIpcCommand<CT extends IpcCommandType>(\n    type: CT,\n    command: IpcMessage,\n    fn: (params: IpcCommandParamsOf<CT>) => void\n) {\n    fn(command.params);\n}\n\nexport function onIpcNotification<NT extends IpcNotificationType>(\n    type: NT,\n    notification: IpcMessage,\n    fn: (params: IpcNotificationParamsOf<NT>) => void\n) {\n    fn(notification.params);\n}\n\nexport interface DidChangeConfigurationNotificationParams {\n    config: Config;\n}\nexport const DidChangeConfigurationNotificationType = new IpcNotificationType<DidChangeConfigurationNotificationParams>(\n    'configuration/didChange'\n);\n\nexport const ReadyCommandType = new IpcCommandType<{}>('webview/ready');\n\nexport interface UpdateConfigurationCommandParams {\n    changes: {\n        [key: string]: any;\n    };\n    removes: string[];\n    scope: 'user' | 'workspace';\n    uri?: string;\n}\nexport const UpdateConfigurationCommandType = new IpcCommandType<UpdateConfigurationCommandParams>(\n    'configuration/update'\n);\n\nexport interface SettingsDidRequestJumpToNotificationParams {\n    anchor: string;\n}\nexport const SettingsDidRequestJumpToNotificationType = new IpcNotificationType<\n    SettingsDidRequestJumpToNotificationParams\n>('settings/jumpTo');\n\nexport interface AppStateWithConfig {\n    config: Config;\n}\n\nexport interface SettingsState extends AppStateWithConfig {\n    scope: 'user' | 'workspace';\n    scopes: ['user' | 'workspace', string][];\n}\n\nexport interface WelcomeState extends AppStateWithConfig {}\n","'use strict';\nimport * as paths from 'path';\nimport * as fs from 'fs';\nimport {\n    commands,\n    ConfigurationChangeEvent,\n    ConfigurationTarget,\n    Disposable,\n    Uri,\n    ViewColumn,\n    WebviewPanel,\n    WebviewPanelOnDidChangeViewStateEvent,\n    window,\n    workspace\n} from 'vscode';\nimport { Config, configuration } from '../configuration';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport {\n    DidChangeConfigurationNotificationType,\n    IpcMessage,\n    IpcNotificationParamsOf,\n    IpcNotificationType,\n    onIpcCommand,\n    UpdateConfigurationCommandType\n} from './protocol';\nimport { Commands } from '../commands';\n\nlet ipcSequence = 0;\n\nconst emptyCommands: Disposable[] = [\n    {\n        dispose: function() {\n            /* noop */\n        }\n    }\n];\n\nexport abstract class WebviewBase implements Disposable {\n    protected _disposable: Disposable;\n    private _disposablePanel: Disposable | undefined;\n    private _panel: WebviewPanel | undefined;\n\n    constructor(showCommand: Commands, column?: ViewColumn) {\n        this._disposable = Disposable.from(\n            configuration.onDidChange(this.onConfigurationChanged, this),\n            commands.registerCommand(showCommand, () => this.show(column), this)\n        );\n    }\n\n    abstract get filename(): string;\n    abstract get id(): string;\n    abstract get title(): string;\n\n    registerCommands(): Disposable[] {\n        return emptyCommands;\n    }\n\n    renderHead?(): string | Promise<string>;\n    renderBody?(): string | Promise<string>;\n    renderEndOfBody?(): string | Promise<string>;\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n        this._disposablePanel && this._disposablePanel.dispose();\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        this.notifyDidChangeConfiguration();\n    }\n\n    private onPanelDisposed() {\n        this._disposablePanel && this._disposablePanel.dispose();\n        this._panel = undefined;\n    }\n\n    private onViewStateChanged(e: WebviewPanelOnDidChangeViewStateEvent) {\n        Logger.log(\n            `Webview(${this.id}).onViewStateChanged`,\n            `active=${e.webviewPanel.active}, visible=${e.webviewPanel.visible}`\n        );\n\n        // Anytime the webview becomes active, make sure it has the most up-to-date config\n        if (e.webviewPanel.active) {\n            this.notifyDidChangeConfiguration();\n        }\n    }\n\n    protected onMessageReceived(e: IpcMessage) {\n        switch (e.method) {\n            case UpdateConfigurationCommandType.method:\n                onIpcCommand(UpdateConfigurationCommandType, e, async params => {\n                    const target =\n                        params.scope === 'workspace' ? ConfigurationTarget.Workspace : ConfigurationTarget.Global;\n\n                    for (const key in params.changes) {\n                        const inspect = await configuration.inspect(key)!;\n\n                        const value = params.changes[key];\n                        await configuration.update(key, value === inspect.defaultValue ? undefined : value, target);\n                    }\n\n                    for (const key of params.removes) {\n                        await configuration.update(key, undefined, target);\n                    }\n                });\n\n                break;\n            default:\n                break;\n        }\n    }\n\n    private onMessageReceivedCore(e: IpcMessage) {\n        if (e == null) return;\n\n        Logger.log(`Webview(${this.id}).onMessageReceived: method=${e.method}, data=${JSON.stringify(e)}`);\n\n        this.onMessageReceived(e);\n    }\n\n    get visible() {\n        return this._panel === undefined ? false : this._panel.visible;\n    }\n\n    hide() {\n        if (this._panel === undefined) return;\n\n        this._panel.dispose();\n    }\n\n    setTitle(title: string) {\n        if (this._panel === undefined) return;\n\n        this._panel.title = title;\n    }\n\n    async show(column: ViewColumn = ViewColumn.Active): Promise<void> {\n        const html = await this.getHtml();\n\n        if (this._panel === undefined) {\n            this._panel = window.createWebviewPanel(\n                this.id,\n                this.title,\n                { viewColumn: column, preserveFocus: false },\n                {\n                    retainContextWhenHidden: true,\n                    enableFindWidget: true,\n                    enableCommandUris: true,\n                    enableScripts: true\n                }\n            );\n\n            this._panel.iconPath = Uri.file(Container.context.asAbsolutePath('images/gitlens-icon.png'));\n            this._disposablePanel = Disposable.from(\n                this._panel,\n                this._panel.onDidDispose(this.onPanelDisposed, this),\n                this._panel.onDidChangeViewState(this.onViewStateChanged, this),\n                this._panel.webview.onDidReceiveMessage(this.onMessageReceivedCore, this),\n                ...this.registerCommands()\n            );\n\n            this._panel.webview.html = html;\n        }\n        else {\n            // Reset the html to get the webview to reload\n            this._panel.webview.html = '';\n            this._panel.webview.html = html;\n            this._panel.reveal(this._panel.viewColumn || ViewColumn.Active, false);\n        }\n    }\n\n    private _html: string | undefined;\n    private async getHtml(): Promise<string> {\n        const filename = Container.context.asAbsolutePath(paths.join('dist/webviews/', this.filename));\n\n        let content;\n        // When we are debugging avoid any caching so that we can change the html and have it update without reloading\n        if (Logger.isDebugging) {\n            content = await new Promise<string>((resolve, reject) => {\n                fs.readFile(filename, 'utf8', (err, data) => {\n                    if (err) {\n                        reject(err);\n                    }\n                    else {\n                        resolve(data);\n                    }\n                });\n            });\n        }\n        else {\n            if (this._html !== undefined) return this._html;\n\n            const doc = await workspace.openTextDocument(filename);\n            content = doc.getText();\n        }\n\n        let html = content.replace(\n            /{{root}}/g,\n            Uri.file(Container.context.asAbsolutePath('.'))\n                .with({ scheme: 'vscode-resource' })\n                .toString()\n        );\n\n        if (this.renderHead) {\n            html = html.replace(/{{\\s*?head\\s*?}}/i, await this.renderHead());\n        }\n\n        if (this.renderBody) {\n            html = html.replace(/{{\\s*?body\\s*?}}/i, await this.renderBody());\n        }\n\n        if (this.renderEndOfBody) {\n            html = html.replace(/{{\\s*?endOfBody\\s*?}}/i, await this.renderEndOfBody());\n        }\n\n        this._html = html;\n        return html;\n    }\n\n    protected notify<NT extends IpcNotificationType>(type: NT, params: IpcNotificationParamsOf<NT>): Thenable<boolean> {\n        return this.postMessage({ id: this.nextIpcId(), method: type.method, params: params });\n    }\n\n    private nextIpcId() {\n        if (ipcSequence === Number.MAX_SAFE_INTEGER) {\n            ipcSequence = 1;\n        }\n        else {\n            ipcSequence++;\n        }\n\n        return `host:${ipcSequence}`;\n    }\n\n    private notifyDidChangeConfiguration() {\n        // Make sure to get the raw config, not from the container which has the modes mixed in\n        return this.notify(DidChangeConfigurationNotificationType, { config: configuration.get<Config>() });\n    }\n\n    private postMessage(message: IpcMessage) {\n        if (this._panel === undefined) return Promise.resolve(false);\n\n        return this._panel.webview.postMessage(message);\n    }\n}\n","'use strict';\nimport { commands, ConfigurationTarget, Disposable, workspace } from 'vscode';\nimport { Commands } from '../commands';\nimport { Config, configuration, ViewLocation } from '../configuration';\nimport {\n    IpcMessage,\n    onIpcCommand,\n    ReadyCommandType,\n    SettingsDidRequestJumpToNotificationType,\n    SettingsState\n} from './protocol';\nimport { WebviewBase } from './webviewBase';\n\nconst anchorRegex = /.*?#(.*)/;\n\nexport class SettingsWebview extends WebviewBase {\n    private _pendingJumpToAnchor: string | undefined;\n\n    constructor() {\n        super(Commands.ShowSettingsPage);\n\n        this._disposable = Disposable.from(\n            this._disposable,\n            ...[\n                Commands.ShowSettingsPageAndJumpToCompareView,\n                Commands.ShowSettingsPageAndJumpToFileHistoryView,\n                Commands.ShowSettingsPageAndJumpToLineHistoryView,\n                Commands.ShowSettingsPageAndJumpToRepositoriesView,\n                Commands.ShowSettingsPageAndJumpToSearchCommitsView\n            ].map(c => {\n                // The show and jump commands are structured to have a # separating the base command from the anchor\n                let anchor: string | undefined;\n                const match = anchorRegex.exec(c);\n                if (match != null) {\n                    [, anchor] = match;\n                }\n\n                return commands.registerCommand(\n                    c,\n                    () => {\n                        this._pendingJumpToAnchor = anchor;\n                        return this.show();\n                    },\n                    this\n                );\n            })\n        );\n    }\n\n    protected onMessageReceived(e: IpcMessage) {\n        switch (e.method) {\n            case ReadyCommandType.method:\n                onIpcCommand(ReadyCommandType, e, params => {\n                    if (this._pendingJumpToAnchor !== undefined) {\n                        this.notify(SettingsDidRequestJumpToNotificationType, { anchor: this._pendingJumpToAnchor });\n                        this._pendingJumpToAnchor = undefined;\n                    }\n                });\n\n                break;\n\n            default:\n                super.onMessageReceived(e);\n\n                break;\n        }\n    }\n\n    get filename(): string {\n        return 'settings.html';\n    }\n\n    get id(): string {\n        return 'gitlens.settings';\n    }\n\n    get title(): string {\n        return 'GitLens Settings';\n    }\n\n    renderEndOfBody() {\n        const scopes: ['user' | 'workspace', string][] = [['user', 'User']];\n        if (workspace.workspaceFolders !== undefined && workspace.workspaceFolders.length) {\n            scopes.push(['workspace', 'Workspace']);\n        }\n\n        const bootstrap: SettingsState = {\n            // Make sure to get the raw config, not from the container which has the modes mixed in\n            config: configuration.get<Config>(),\n            scope: 'user',\n            scopes: scopes\n        };\n        return `    <script type=\"text/javascript\">\n        window.bootstrap = ${JSON.stringify(bootstrap)};\n    </script>`;\n    }\n\n    registerCommands() {\n        return [commands.registerCommand(`${this.id}.applyViewLayoutPreset`, this.applyViewLayoutPreset, this)];\n    }\n\n    private applyViewLayoutPreset(preset: 'contextual' | 'default' | 'scm') {\n        let repositories;\n        let histories;\n        let compareAndSearch;\n        switch (preset) {\n            case 'contextual':\n                repositories = ViewLocation.SourceControl;\n                histories = ViewLocation.Explorer;\n                compareAndSearch = ViewLocation.GitLens;\n                break;\n            case 'default':\n                repositories = ViewLocation.GitLens;\n                histories = ViewLocation.GitLens;\n                compareAndSearch = ViewLocation.GitLens;\n                break;\n            case 'scm':\n                repositories = ViewLocation.SourceControl;\n                histories = ViewLocation.SourceControl;\n                compareAndSearch = ViewLocation.SourceControl;\n                break;\n            default:\n                return;\n        }\n\n        configuration.update(\n            configuration.name('views')('repositories')('location').value,\n            repositories,\n            ConfigurationTarget.Global\n        );\n        configuration.update(\n            configuration.name('views')('fileHistory')('location').value,\n            histories,\n            ConfigurationTarget.Global\n        );\n        configuration.update(\n            configuration.name('views')('lineHistory')('location').value,\n            histories,\n            ConfigurationTarget.Global\n        );\n        configuration.update(\n            configuration.name('views')('compare')('location').value,\n            compareAndSearch,\n            ConfigurationTarget.Global\n        );\n        configuration.update(\n            configuration.name('views')('search')('location').value,\n            compareAndSearch,\n            ConfigurationTarget.Global\n        );\n    }\n}\n","'use strict';\nimport { Commands } from '../commands';\nimport { Container } from '../container';\nimport { WelcomeState } from './protocol';\nimport { WebviewBase } from './webviewBase';\n\nexport class WelcomeWebview extends WebviewBase {\n    constructor() {\n        super(Commands.ShowWelcomePage);\n    }\n\n    get filename(): string {\n        return 'welcome.html';\n    }\n\n    get id(): string {\n        return 'gitlens.welcome';\n    }\n\n    get title(): string {\n        return 'Welcome to GitLens';\n    }\n\n    renderEndOfBody() {\n        const bootstrap: WelcomeState = {\n            config: Container.config\n        };\n        return `    <script type=\"text/javascript\">\n        window.bootstrap = ${JSON.stringify(bootstrap)};\n    </script>`;\n    }\n}\n","'use strict';\nimport { commands, ConfigurationChangeEvent, Disposable, ExtensionContext, Uri } from 'vscode';\nimport { FileAnnotationController } from './annotations/fileAnnotationController';\nimport { LineAnnotationController } from './annotations/lineAnnotationController';\nimport { GitCodeLensController } from './codelens/codeLensController';\nimport { Commands, ToggleFileBlameCommandArgs } from './commands';\nimport { AnnotationsToggleMode, Config, configuration, ConfigurationWillChangeEvent } from './configuration';\nimport { GitFileSystemProvider } from './git/fsProvider';\nimport { GitService } from './git/gitService';\nimport { clearGravatarCache } from './avatars';\nimport { LineHoverController } from './hovers/lineHoverController';\nimport { Keyboard } from './keyboard';\nimport { Logger, TraceLevel } from './logger';\nimport { StatusBarController } from './statusbar/statusBarController';\nimport { GitDocumentTracker } from './trackers/gitDocumentTracker';\nimport { GitLineTracker } from './trackers/gitLineTracker';\nimport { CompareView } from './views/compareView';\nimport { FileHistoryView } from './views/fileHistoryView';\nimport { LineHistoryView } from './views/lineHistoryView';\nimport { RepositoriesView } from './views/repositoriesView';\nimport { SearchView } from './views/searchView';\nimport { ViewCommands } from './views/viewCommands';\nimport { VslsController } from './vsls/vsls';\nimport { SettingsWebview } from './webviews/settingsWebview';\nimport { WelcomeWebview } from './webviews/welcomeWebview';\n\nexport class Container {\n    private static _configsAffectedByMode: string[] | undefined;\n    private static _applyModeConfigurationTransformBound:\n        | ((e: ConfigurationChangeEvent) => ConfigurationChangeEvent)\n        | undefined;\n\n    static initialize(context: ExtensionContext, config: Config) {\n        this._context = context;\n        this._config = Container.applyMode(config);\n\n        context.subscriptions.push((this._lineTracker = new GitLineTracker()));\n        context.subscriptions.push((this._tracker = new GitDocumentTracker()));\n        context.subscriptions.push((this._vsls = new VslsController()));\n\n        context.subscriptions.push((this._git = new GitService()));\n\n        // Since there is a bit of a chicken & egg problem with the DocumentTracker and the GitService, initialize the tracker once the GitService is loaded\n        this._tracker.initialize();\n\n        context.subscriptions.push((this._fileAnnotationController = new FileAnnotationController()));\n        context.subscriptions.push((this._lineAnnotationController = new LineAnnotationController()));\n        context.subscriptions.push((this._lineHoverController = new LineHoverController()));\n        context.subscriptions.push((this._statusBarController = new StatusBarController()));\n        context.subscriptions.push((this._codeLensController = new GitCodeLensController()));\n        context.subscriptions.push((this._keyboard = new Keyboard()));\n        context.subscriptions.push((this._settingsWebview = new SettingsWebview()));\n        context.subscriptions.push((this._welcomeWebview = new WelcomeWebview()));\n\n        if (config.views.compare.enabled) {\n            context.subscriptions.push((this._compareView = new CompareView()));\n        }\n        else {\n            let disposable: Disposable;\n            // eslint-disable-next-line prefer-const\n            disposable = configuration.onDidChange(e => {\n                if (configuration.changed(e, configuration.name('views')('compare')('enabled').value)) {\n                    disposable.dispose();\n                    context.subscriptions.push((this._compareView = new CompareView()));\n                }\n            });\n        }\n\n        if (config.views.fileHistory.enabled) {\n            context.subscriptions.push((this._fileHistoryView = new FileHistoryView()));\n        }\n        else {\n            let disposable: Disposable;\n            // eslint-disable-next-line prefer-const\n            disposable = configuration.onDidChange(e => {\n                if (configuration.changed(e, configuration.name('views')('fileHistory')('enabled').value)) {\n                    disposable.dispose();\n                    context.subscriptions.push((this._fileHistoryView = new FileHistoryView()));\n                }\n            });\n        }\n\n        if (config.views.lineHistory.enabled) {\n            context.subscriptions.push((this._lineHistoryView = new LineHistoryView()));\n        }\n        else {\n            let disposable: Disposable;\n            // eslint-disable-next-line prefer-const\n            disposable = configuration.onDidChange(e => {\n                if (configuration.changed(e, configuration.name('views')('lineHistory')('enabled').value)) {\n                    disposable.dispose();\n                    context.subscriptions.push((this._lineHistoryView = new LineHistoryView()));\n                }\n            });\n        }\n\n        if (config.views.repositories.enabled) {\n            context.subscriptions.push((this._repositoriesView = new RepositoriesView()));\n        }\n        else {\n            let disposable: Disposable;\n            // eslint-disable-next-line prefer-const\n            disposable = configuration.onDidChange(e => {\n                if (configuration.changed(e, configuration.name('views')('repositories')('enabled').value)) {\n                    disposable.dispose();\n                    context.subscriptions.push((this._repositoriesView = new RepositoriesView()));\n                }\n            });\n        }\n\n        if (config.views.search.enabled) {\n            context.subscriptions.push((this._searchView = new SearchView()));\n        }\n        else {\n            let disposable: Disposable;\n            // eslint-disable-next-line prefer-const\n            disposable = configuration.onDidChange(e => {\n                if (configuration.changed(e, configuration.name('views')('search')('enabled').value)) {\n                    disposable.dispose();\n                    context.subscriptions.push((this._searchView = new SearchView()));\n                }\n            });\n        }\n\n        context.subscriptions.push(new GitFileSystemProvider());\n\n        context.subscriptions.push(configuration.onWillChange(this.onConfigurationChanging, this));\n    }\n\n    private static onConfigurationChanging(e: ConfigurationWillChangeEvent) {\n        this._config = undefined;\n\n        if (configuration.changed(e.change, configuration.name('outputLevel').value)) {\n            Logger.level = configuration.get<TraceLevel>(configuration.name('outputLevel').value);\n        }\n\n        if (configuration.changed(e.change, configuration.name('defaultGravatarsStyle').value)) {\n            clearGravatarCache();\n        }\n\n        if (\n            configuration.changed(e.change, configuration.name('mode').value) ||\n            configuration.changed(e.change, configuration.name('modes').value)\n        ) {\n            if (this._applyModeConfigurationTransformBound === undefined) {\n                this._applyModeConfigurationTransformBound = this.applyModeConfigurationTransform.bind(this);\n            }\n            e.transform = this._applyModeConfigurationTransformBound;\n        }\n    }\n\n    private static _codeLensController: GitCodeLensController;\n    static get codeLens() {\n        return this._codeLensController;\n    }\n\n    private static _compareView: CompareView | undefined;\n    static get compareView() {\n        if (this._compareView === undefined) {\n            this._context.subscriptions.push((this._compareView = new CompareView()));\n        }\n\n        return this._compareView;\n    }\n\n    private static _config: Config | undefined;\n    static get config() {\n        if (this._config === undefined) {\n            this._config = Container.applyMode(configuration.get<Config>());\n        }\n        return this._config;\n    }\n\n    private static _context: ExtensionContext;\n    static get context() {\n        return this._context;\n    }\n\n    private static _fileAnnotationController: FileAnnotationController;\n    static get fileAnnotations() {\n        return this._fileAnnotationController;\n    }\n\n    private static _fileHistoryView: FileHistoryView | undefined;\n    static get fileHistoryView() {\n        if (this._fileHistoryView === undefined) {\n            this._context.subscriptions.push((this._fileHistoryView = new FileHistoryView()));\n        }\n\n        return this._fileHistoryView;\n    }\n\n    private static _git: GitService;\n    static get git() {\n        return this._git;\n    }\n\n    private static _keyboard: Keyboard;\n    static get keyboard() {\n        return this._keyboard;\n    }\n\n    private static _lineAnnotationController: LineAnnotationController;\n    static get lineAnnotations() {\n        return this._lineAnnotationController;\n    }\n\n    private static _lineHistoryView: LineHistoryView | undefined;\n    static get lineHistoryView() {\n        if (this._lineHistoryView === undefined) {\n            this._context.subscriptions.push((this._lineHistoryView = new LineHistoryView()));\n        }\n\n        return this._lineHistoryView;\n    }\n\n    private static _lineHoverController: LineHoverController;\n    static get lineHovers() {\n        return this._lineHoverController;\n    }\n\n    private static _lineTracker: GitLineTracker;\n    static get lineTracker() {\n        return this._lineTracker;\n    }\n\n    private static _repositoriesView: RepositoriesView | undefined;\n    static get repositoriesView(): RepositoriesView {\n        if (this._repositoriesView === undefined) {\n            this._context.subscriptions.push((this._repositoriesView = new RepositoriesView()));\n        }\n\n        return this._repositoriesView;\n    }\n\n    private static _searchView: SearchView | undefined;\n    static get searchView() {\n        if (this._searchView === undefined) {\n            this._context.subscriptions.push((this._searchView = new SearchView()));\n        }\n\n        return this._searchView;\n    }\n\n    private static _settingsWebview: SettingsWebview;\n    static get settingsWebview() {\n        return this._settingsWebview;\n    }\n\n    private static _statusBarController: StatusBarController;\n    static get statusBar() {\n        return this._statusBarController;\n    }\n\n    private static _tracker: GitDocumentTracker;\n    static get tracker() {\n        return this._tracker;\n    }\n\n    private static _viewCommands: ViewCommands | undefined;\n    static get viewCommands() {\n        if (this._viewCommands === undefined) {\n            this._viewCommands = new ViewCommands();\n        }\n        return this._viewCommands;\n    }\n\n    private static _vsls: VslsController;\n    static get vsls() {\n        return this._vsls;\n    }\n\n    private static _welcomeWebview: WelcomeWebview;\n    static get welcomeWebview() {\n        return this._welcomeWebview;\n    }\n\n    private static applyMode(config: Config) {\n        if (!config.mode.active) return config;\n\n        const mode = config.modes[config.mode.active];\n        if (mode == null) return config;\n\n        if (mode.annotations != null) {\n            let command: string | undefined;\n            switch (mode.annotations) {\n                case 'blame':\n                    config.blame.toggleMode = AnnotationsToggleMode.Window;\n                    command = Commands.ToggleFileBlame;\n                    break;\n                case 'heatmap':\n                    config.heatmap.toggleMode = AnnotationsToggleMode.Window;\n                    command = Commands.ToggleFileHeatmap;\n                    break;\n                case 'recentChanges':\n                    config.recentChanges.toggleMode = AnnotationsToggleMode.Window;\n                    command = Commands.ToggleFileRecentChanges;\n                    break;\n            }\n\n            if (command !== undefined) {\n                const commandArgs: ToggleFileBlameCommandArgs = {\n                    on: true\n                };\n                // Make sure to delay the execution by a bit so that the configuration changes get propegated first\n                setTimeout(() => commands.executeCommand(command!, commandArgs), 50);\n            }\n        }\n\n        if (mode.codeLens != null) {\n            config.codeLens.enabled = mode.codeLens;\n        }\n\n        if (mode.currentLine != null) {\n            config.currentLine.enabled = mode.currentLine;\n        }\n\n        if (mode.hovers != null) {\n            config.hovers.enabled = mode.hovers;\n        }\n\n        if (mode.statusBar != null) {\n            config.statusBar.enabled = mode.statusBar;\n        }\n\n        if (mode.views != null) {\n            config.views.compare.enabled = mode.views;\n        }\n        if (mode.views != null) {\n            config.views.fileHistory.enabled = mode.views;\n        }\n        if (mode.views != null) {\n            config.views.lineHistory.enabled = mode.views;\n        }\n        if (mode.views != null) {\n            config.views.repositories.enabled = mode.views;\n        }\n        if (mode.views != null) {\n            config.views.search.enabled = mode.views;\n        }\n\n        return config;\n    }\n\n    private static applyModeConfigurationTransform(e: ConfigurationChangeEvent): ConfigurationChangeEvent {\n        if (this._configsAffectedByMode === undefined) {\n            this._configsAffectedByMode = [\n                `gitlens.${configuration.name('mode').value}`,\n                `gitlens.${configuration.name('modes').value}`,\n                `gitlens.${configuration.name('blame')('toggleMode').value}`,\n                `gitlens.${configuration.name('codeLens').value}`,\n                `gitlens.${configuration.name('currentLine').value}`,\n                `gitlens.${configuration.name('heatmap')('toggleMode').value}`,\n                `gitlens.${configuration.name('hovers').value}`,\n                `gitlens.${configuration.name('recentChanges')('toggleMode').value}`,\n                `gitlens.${configuration.name('statusBar').value}`,\n                `gitlens.${configuration.name('views')('compare').value}`,\n                `gitlens.${configuration.name('views')('fileHistory').value}`,\n                `gitlens.${configuration.name('views')('lineHistory').value}`,\n                `gitlens.${configuration.name('views')('repositories').value}`,\n                `gitlens.${configuration.name('views')('search').value}`\n            ];\n        }\n\n        const original = e.affectsConfiguration;\n        return {\n            ...e,\n            affectsConfiguration: (section: string, resource?: Uri) => {\n                if (this._configsAffectedByMode && this._configsAffectedByMode.some(n => section.startsWith(n))) {\n                    return true;\n                }\n\n                return original(section, resource);\n            }\n        };\n    }\n}\n","'use strict';\nexport * from './config';\n\nimport {\n    ConfigurationChangeEvent,\n    ConfigurationTarget,\n    Event,\n    EventEmitter,\n    ExtensionContext,\n    Uri,\n    workspace\n} from 'vscode';\nimport { Config } from './config';\nimport { extensionId } from './constants';\nimport { Functions } from './system';\n\n// eslint-disable-next-line @typescript-eslint/no-object-literal-type-assertion\nconst emptyConfig: Config = new Proxy<Config>({} as Config, {\n    get: function() {\n        return emptyConfig;\n    }\n});\n\nexport interface ConfigurationWillChangeEvent {\n    change: ConfigurationChangeEvent;\n    transform?(e: ConfigurationChangeEvent): ConfigurationChangeEvent;\n}\n\nexport class Configuration {\n    static configure(context: ExtensionContext) {\n        context.subscriptions.push(\n            workspace.onDidChangeConfiguration(configuration.onConfigurationChanged, configuration)\n        );\n    }\n\n    private _onDidChange = new EventEmitter<ConfigurationChangeEvent>();\n    get onDidChange(): Event<ConfigurationChangeEvent> {\n        return this._onDidChange.event;\n    }\n\n    private _onDidChangeAny = new EventEmitter<ConfigurationChangeEvent>();\n    get onDidChangeAny(): Event<ConfigurationChangeEvent> {\n        return this._onDidChange.event;\n    }\n\n    private _onWillChange = new EventEmitter<ConfigurationWillChangeEvent>();\n    get onWillChange(): Event<ConfigurationWillChangeEvent> {\n        return this._onWillChange.event;\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (!e.affectsConfiguration(extensionId, null!)) {\n            this._onDidChangeAny.fire(e);\n\n            return;\n        }\n\n        const evt: ConfigurationWillChangeEvent = {\n            change: e\n        };\n        this._onWillChange.fire(evt);\n\n        if (evt.transform !== undefined) {\n            e = evt.transform(e);\n        }\n\n        this._onDidChange.fire(e);\n    }\n\n    readonly initializingChangeEvent: ConfigurationChangeEvent = {\n        affectsConfiguration: (section: string, resource?: Uri) => true\n    };\n\n    get<T>(section?: string, resource?: Uri | null, defaultValue?: T): T {\n        return defaultValue === undefined\n            ? workspace\n                  .getConfiguration(section === undefined ? undefined : extensionId, resource!)\n                  .get<T>(section === undefined ? extensionId : section)!\n            : workspace\n                  .getConfiguration(section === undefined ? undefined : extensionId, resource!)\n                  .get<T>(section === undefined ? extensionId : section, defaultValue)!;\n    }\n\n    getAny<T>(section: string, resource?: Uri | null, defaultValue?: T) {\n        return defaultValue === undefined\n            ? workspace.getConfiguration(undefined, resource!).get<T>(section)!\n            : workspace.getConfiguration(undefined, resource!).get<T>(section, defaultValue)!;\n    }\n\n    changed(e: ConfigurationChangeEvent, section: string, resource?: Uri | null) {\n        return e.affectsConfiguration(`${extensionId}.${section}`, resource!);\n    }\n\n    initializing(e: ConfigurationChangeEvent) {\n        return e === this.initializingChangeEvent;\n    }\n\n    inspect(section?: string, resource?: Uri | null) {\n        return workspace\n            .getConfiguration(section === undefined ? undefined : extensionId, resource!)\n            .inspect(section === undefined ? extensionId : section);\n    }\n\n    inspectAny(section: string, resource?: Uri | null) {\n        return workspace.getConfiguration(undefined, resource!).inspect(section);\n    }\n\n    async migrate<TFrom, TTo>(\n        from: string,\n        to: string,\n        options: { fallbackValue?: TTo; migrationFn?(value: TFrom): TTo } = {}\n    ): Promise<boolean> {\n        const inspection = configuration.inspect(from);\n        if (inspection === undefined) return false;\n\n        let migrated = false;\n        if (inspection.globalValue !== undefined) {\n            await this.update(\n                to,\n                options.migrationFn ? options.migrationFn(inspection.globalValue as TFrom) : inspection.globalValue,\n                ConfigurationTarget.Global\n            );\n            migrated = true;\n            // Can't delete the old setting currently because it errors with `Unable to write to User Settings because <setting name> is not a registered configuration`\n            // if (from !== to) {\n            //     try {\n            //         await this.update(from, undefined, ConfigurationTarget.Global);\n            //     }\n            //     catch { }\n            // }\n        }\n\n        if (inspection.workspaceValue !== undefined) {\n            await this.update(\n                to,\n                options.migrationFn\n                    ? options.migrationFn(inspection.workspaceValue as TFrom)\n                    : inspection.workspaceValue,\n                ConfigurationTarget.Workspace\n            );\n            migrated = true;\n            // Can't delete the old setting currently because it errors with `Unable to write to User Settings because <setting name> is not a registered configuration`\n            // if (from !== to) {\n            //     try {\n            //         await this.update(from, undefined, ConfigurationTarget.Workspace);\n            //     }\n            //     catch { }\n            // }\n        }\n\n        if (inspection.workspaceFolderValue !== undefined) {\n            await this.update(\n                to,\n                options.migrationFn\n                    ? options.migrationFn(inspection.workspaceFolderValue as TFrom)\n                    : inspection.workspaceFolderValue,\n                ConfigurationTarget.WorkspaceFolder\n            );\n            migrated = true;\n            // Can't delete the old setting currently because it errors with `Unable to write to User Settings because <setting name> is not a registered configuration`\n            // if (from !== to) {\n            //     try {\n            //         await this.update(from, undefined, ConfigurationTarget.WorkspaceFolder);\n            //     }\n            //     catch { }\n            // }\n        }\n\n        if (!migrated && options.fallbackValue !== undefined) {\n            await this.update(to, options.fallbackValue, ConfigurationTarget.Global);\n            migrated = true;\n        }\n\n        return migrated;\n    }\n\n    async migrateIfMissing<TFrom, TTo>(from: string, to: string, options: { migrationFn?(value: TFrom): TTo } = {}) {\n        const fromInspection = configuration.inspect(from);\n        if (fromInspection === undefined) return;\n\n        const toInspection = configuration.inspect(to);\n        if (fromInspection.globalValue !== undefined) {\n            if (toInspection === undefined || toInspection.globalValue === undefined) {\n                await this.update(\n                    to,\n                    options.migrationFn\n                        ? options.migrationFn(fromInspection.globalValue as TFrom)\n                        : fromInspection.globalValue,\n                    ConfigurationTarget.Global\n                );\n                // Can't delete the old setting currently because it errors with `Unable to write to User Settings because <setting name> is not a registered configuration`\n                // if (from !== to) {\n                //     try {\n                //         await this.update(from, undefined, ConfigurationTarget.Global);\n                //     }\n                //     catch { }\n                // }\n            }\n        }\n\n        if (fromInspection.workspaceValue !== undefined) {\n            if (toInspection === undefined || toInspection.workspaceValue === undefined) {\n                await this.update(\n                    to,\n                    options.migrationFn\n                        ? options.migrationFn(fromInspection.workspaceValue as TFrom)\n                        : fromInspection.workspaceValue,\n                    ConfigurationTarget.Workspace\n                );\n                // Can't delete the old setting currently because it errors with `Unable to write to User Settings because <setting name> is not a registered configuration`\n                // if (from !== to) {\n                //     try {\n                //         await this.update(from, undefined, ConfigurationTarget.Workspace);\n                //     }\n                //     catch { }\n                // }\n            }\n        }\n\n        if (fromInspection.workspaceFolderValue !== undefined) {\n            if (toInspection === undefined || toInspection.workspaceFolderValue === undefined) {\n                await this.update(\n                    to,\n                    options.migrationFn\n                        ? options.migrationFn(fromInspection.workspaceFolderValue as TFrom)\n                        : fromInspection.workspaceFolderValue,\n                    ConfigurationTarget.WorkspaceFolder\n                );\n                // Can't delete the old setting currently because it errors with `Unable to write to User Settings because <setting name> is not a registered configuration`\n                // if (from !== to) {\n                //     try {\n                //         await this.update(from, undefined, ConfigurationTarget.WorkspaceFolder);\n                //     }\n                //     catch { }\n                // }\n            }\n        }\n    }\n\n    name<K extends keyof Config>(name: K) {\n        return Functions.propOf(emptyConfig as Config, name);\n    }\n\n    update(section: string, value: any, target: ConfigurationTarget, resource?: Uri | null) {\n        return workspace\n            .getConfiguration(extensionId, target === ConfigurationTarget.Global ? undefined : resource!)\n            .update(section, value, target);\n    }\n\n    updateAny(section: string, value: any, target: ConfigurationTarget, resource?: Uri | null) {\n        return workspace\n            .getConfiguration(undefined, target === ConfigurationTarget.Global ? undefined : resource!)\n            .update(section, value, target);\n    }\n\n    async updateEffective(section: string, value: any, resource: Uri | null = null) {\n        const inspect = await configuration.inspect(section, resource)!;\n        if (inspect.workspaceFolderValue !== undefined) {\n            if (value === inspect.workspaceFolderValue) return undefined;\n\n            return void configuration.update(section, value, ConfigurationTarget.WorkspaceFolder, resource);\n        }\n\n        if (inspect.workspaceValue !== undefined) {\n            if (value === inspect.workspaceValue) return undefined;\n\n            return void configuration.update(section, value, ConfigurationTarget.Workspace);\n        }\n\n        if (inspect.globalValue === value || (inspect.globalValue === undefined && value === inspect.defaultValue)) {\n            return undefined;\n        }\n\n        return void configuration.update(\n            section,\n            value === inspect.defaultValue ? undefined : value,\n            ConfigurationTarget.Global\n        );\n    }\n}\n\nexport const configuration = new Configuration();\n","'use strict';\nimport * as fs from 'fs';\nimport * as paths from 'path';\nimport {\n    ConfigurationChangeEvent,\n    Disposable,\n    Event,\n    EventEmitter,\n    Extension,\n    extensions,\n    ProgressLocation,\n    Range,\n    TextEditor,\n    Uri,\n    window,\n    WindowState,\n    workspace,\n    WorkspaceFolder,\n    WorkspaceFoldersChangeEvent\n} from 'vscode';\n// eslint-disable-next-line import/no-unresolved\nimport { API as BuiltInGitApi, GitExtension } from '../@types/git';\nimport { configuration, RemotesConfig } from '../configuration';\nimport { CommandContext, DocumentSchemes, setCommandContext } from '../constants';\nimport { Container } from '../container';\nimport { LogCorrelationContext, Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { Arrays, debug, gate, Iterables, log, Objects, Strings, TernarySearchTree, Versions } from '../system';\nimport { CachedBlame, CachedDiff, CachedLog, GitDocumentState, TrackedDocument } from '../trackers/gitDocumentTracker';\nimport { vslsUriPrefixRegex } from '../vsls/vsls';\nimport {\n    CommitFormatting,\n    Git,\n    GitAuthor,\n    GitBlame,\n    GitBlameCommit,\n    GitBlameLine,\n    GitBlameLines,\n    GitBlameParser,\n    GitBranch,\n    GitBranchParser,\n    GitCommitType,\n    GitContributor,\n    GitDiff,\n    GitDiffHunkLine,\n    GitDiffParser,\n    GitDiffShortStat,\n    GitErrors,\n    GitFile,\n    GitLog,\n    GitLogCommit,\n    GitLogDiffFilter,\n    GitLogParser,\n    GitReflog,\n    GitRemote,\n    GitRemoteParser,\n    GitStash,\n    GitStashParser,\n    GitStatus,\n    GitStatusFile,\n    GitStatusParser,\n    GitTag,\n    GitTagParser,\n    GitTree,\n    GitTreeParser,\n    Repository,\n    RepositoryChange\n} from './git';\nimport { GitUri } from './gitUri';\nimport { RemoteProviderFactory, RemoteProviders } from './remotes/factory';\nimport { GitReflogParser, GitShortLogParser } from './parsers/parsers';\n\nexport * from './gitUri';\nexport * from './models/models';\nexport * from './formatters/formatters';\nexport * from './remotes/provider';\nexport { RemoteProviderFactory } from './remotes/factory';\n\nconst emptyStr = '';\nconst slash = '/';\n\nconst RepoSearchWarnings = {\n    doesNotExist: /no such file or directory/i\n};\n\nconst userConfigRegex = /^user\\.(name|email) (.*)$/gm;\nconst mappedAuthorRegex = /(.+)\\s<(.+)>/;\n\nexport enum GitRepoSearchBy {\n    Author = 'author',\n    Changes = 'changes',\n    Files = 'files',\n    Message = 'message',\n    Sha = 'sha'\n}\n\nconst emptyPromise: Promise<GitBlame | GitDiff | GitLog | undefined> = Promise.resolve(undefined);\nconst reflogCommands = ['merge', 'pull'];\n\nexport class GitService implements Disposable {\n    private _onDidChangeRepositories = new EventEmitter<void>();\n    get onDidChangeRepositories(): Event<void> {\n        return this._onDidChangeRepositories.event;\n    }\n\n    private readonly _disposable: Disposable;\n    private readonly _repositoryTree: TernarySearchTree<Repository>;\n    private _repositoriesLoadingPromise: Promise<void> | undefined;\n    private _suspended: boolean = false;\n\n    private readonly _branchesCache = new Map<string, GitBranch[]>();\n    private readonly _tagsCache = new Map<string, GitTag[]>();\n    private readonly _tagsWithRefsCache = new Map<string, GitTag[]>();\n    private readonly _trackedCache = new Map<string, boolean | Promise<boolean>>();\n    private readonly _userMapCache = new Map<string, { name?: string; email?: string } | null>();\n\n    constructor() {\n        this._repositoryTree = TernarySearchTree.forPaths();\n\n        this._disposable = Disposable.from(\n            window.onDidChangeWindowState(this.onWindowStateChanged, this),\n            workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged, this),\n            configuration.onDidChange(this.onConfigurationChanged, this)\n        );\n        this.onConfigurationChanged(configuration.initializingChangeEvent);\n\n        this._repositoriesLoadingPromise = this.onWorkspaceFoldersChanged();\n    }\n\n    dispose() {\n        this._repositoryTree.forEach(r => r.dispose());\n        this._branchesCache.clear();\n        this._tagsCache.clear();\n        this._tagsWithRefsCache.clear();\n        this._trackedCache.clear();\n        this._userMapCache.clear();\n\n        this._disposable && this._disposable.dispose();\n    }\n\n    @log()\n    static async initialize(): Promise<void> {\n        // Try to use the same git as the built-in vscode git extension\n        let gitPath;\n        const gitApi = await GitService.getBuiltInGitApi();\n        if (gitApi !== undefined) {\n            gitPath = gitApi.git.path;\n        }\n\n        await Git.setOrFindGitPath(gitPath || configuration.getAny<string>('git.path'));\n    }\n\n    get useCaching() {\n        return Container.config.advanced.caching.enabled;\n    }\n\n    private onAnyRepositoryChanged(repo: Repository, reason: RepositoryChange) {\n        this._trackedCache.clear();\n\n        this._branchesCache.delete(repo.path);\n        this._tagsCache.delete(repo.path);\n        this._tagsWithRefsCache.clear();\n\n        if (reason === RepositoryChange.Config) {\n            this._userMapCache.delete(repo.path);\n        }\n\n        if (reason === RepositoryChange.Closed) {\n            // Send a notification that the repositories changed\n            setImmediate(async () => {\n                await this.updateContext(this._repositoryTree);\n\n                this.fireRepositoriesChanged();\n            });\n        }\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (\n            configuration.changed(e, configuration.name('defaultDateFormat').value) ||\n            configuration.changed(e, configuration.name('defaultDateSource').value) ||\n            configuration.changed(e, configuration.name('defaultDateStyle').value)\n        ) {\n            CommitFormatting.reset();\n        }\n    }\n\n    private onWindowStateChanged(e: WindowState) {\n        if (e.focused) {\n            this._repositoryTree.forEach(r => r.resume());\n        }\n        else {\n            this._repositoryTree.forEach(r => r.suspend());\n        }\n\n        this._suspended = !e.focused;\n    }\n\n    private async onWorkspaceFoldersChanged(e?: WorkspaceFoldersChangeEvent) {\n        let initializing = false;\n        if (e === undefined) {\n            initializing = true;\n            e = {\n                added: workspace.workspaceFolders || [],\n                removed: []\n            };\n\n            Logger.log(`Starting repository search in ${e.added.length} folders`);\n        }\n\n        for (const f of e.added) {\n            const { scheme } = f.uri;\n            if (scheme !== DocumentSchemes.File && scheme !== DocumentSchemes.Vsls) continue;\n\n            if (scheme === DocumentSchemes.Vsls) {\n                if (Container.vsls.isMaybeGuest) {\n                    const guest = await Container.vsls.guest();\n                    if (guest !== undefined) {\n                        const repositories = await guest.getRepositoriesInFolder(\n                            f,\n                            this.onAnyRepositoryChanged.bind(this)\n                        );\n                        for (const r of repositories) {\n                            this._repositoryTree.set(r.path, r);\n                        }\n                    }\n                }\n            }\n            else {\n                // Search for and add all repositories (nested and/or submodules)\n                const repositories = await this.repositorySearch(f);\n                for (const r of repositories) {\n                    this._repositoryTree.set(r.path, r);\n                }\n            }\n        }\n\n        for (const f of e.removed) {\n            const { fsPath, scheme } = f.uri;\n            if (scheme !== DocumentSchemes.File && scheme !== DocumentSchemes.Vsls) continue;\n\n            const repos = this._repositoryTree.findSuperstr(fsPath);\n            const reposToDelete =\n                repos !== undefined\n                    ? // Since the filtered tree will have keys that are relative to the fsPath, normalize to the full path\n                      [...Iterables.map<Repository, [Repository, string]>(repos, r => [r, r.path])]\n                    : [];\n\n            // const filteredTree = this._repositoryTree.findSuperstr(fsPath);\n            // const reposToDelete =\n            //     filteredTree !== undefined\n            //         ? // Since the filtered tree will have keys that are relative to the fsPath, normalize to the full path\n            //           [\n            //               ...Iterables.map<[Repository, string], [Repository, string]>(\n            //                   filteredTree.entries(),\n            //                   ([r, k]) => [r, path.join(fsPath, k)]\n            //               )\n            //           ]\n            //         : [];\n\n            const repo = this._repositoryTree.get(fsPath);\n            if (repo !== undefined) {\n                reposToDelete.push([repo, fsPath]);\n            }\n\n            for (const [r, k] of reposToDelete) {\n                this._repositoryTree.delete(k);\n                r.dispose();\n            }\n        }\n\n        await this.updateContext(this._repositoryTree);\n\n        if (!initializing) {\n            // Defer the event trigger enough to let everything unwind\n            setImmediate(() => this.fireRepositoriesChanged());\n        }\n    }\n\n    @log<GitService['repositorySearch']>({\n        args: false,\n        singleLine: true,\n        prefix: (context, folder) => `${context.prefix}(${folder.uri.fsPath})`,\n        exit: result =>\n            `returned ${result.length} repositories${\n                result.length !== 0 ? ` (${result.map(r => r.path).join(', ')})` : emptyStr\n            }`\n    })\n    private async repositorySearch(folder: WorkspaceFolder): Promise<Repository[]> {\n        const cc = Logger.getCorrelationContext();\n        const { uri } = folder;\n        const depth = configuration.get<number>(configuration.name('advanced')('repositorySearchDepth').value, uri);\n\n        Logger.log(cc, `searching (depth=${depth})...`);\n\n        const repositories: Repository[] = [];\n        const anyRepoChangedFn = this.onAnyRepositoryChanged.bind(this);\n\n        const rootPath = await this.getRepoPathCore(uri.fsPath, true);\n        if (rootPath !== undefined) {\n            Logger.log(cc, `found root repository in '${rootPath}'`);\n            repositories.push(new Repository(folder, rootPath, true, anyRepoChangedFn, this._suspended));\n        }\n\n        if (depth <= 0) return repositories;\n\n        // Get any specified excludes -- this is a total hack, but works for some simple cases and something is better than nothing :)\n        let excludes = {\n            ...configuration.getAny<{ [key: string]: boolean }>('files.exclude', uri, {}),\n            ...configuration.getAny<{ [key: string]: boolean }>('search.exclude', uri, {})\n        };\n\n        const excludedPaths = [\n            ...Iterables.filterMap(Objects.entries(excludes), ([key, value]) => {\n                if (!value) return undefined;\n                if (key.startsWith('**/')) return key.substring(3);\n                return key;\n            })\n        ];\n\n        excludes = excludedPaths.reduce((accumulator, current) => {\n            accumulator[current] = true;\n            return accumulator;\n        }, Object.create(null));\n\n        let repoPaths;\n        try {\n            repoPaths = await this.repositorySearchCore(uri.fsPath, depth, excludes);\n        }\n        catch (ex) {\n            if (RepoSearchWarnings.doesNotExist.test(ex.message || emptyStr)) {\n                Logger.log(cc, `FAILED${ex.message ? ` Error: ${ex.message}` : emptyStr}`);\n            }\n            else {\n                Logger.error(ex, cc, 'FAILED');\n            }\n\n            return repositories;\n        }\n\n        for (let p of repoPaths) {\n            p = paths.dirname(p);\n            // If we are the same as the root, skip it\n            if (Strings.normalizePath(p) === rootPath) continue;\n\n            Logger.log(cc, `searching in '${p}'...`);\n\n            const rp = await this.getRepoPathCore(p, true);\n            if (rp === undefined) continue;\n\n            Logger.log(cc, `found repository in '${rp}'`);\n            repositories.push(new Repository(folder, rp, false, anyRepoChangedFn, this._suspended));\n        }\n\n        return repositories;\n    }\n\n    @debug({\n        args: {\n            0: (root: string) => root,\n            1: (depth: number) => `${depth}`,\n            2: () => false,\n            3: () => false\n        }\n    })\n    private repositorySearchCore(\n        root: string,\n        depth: number,\n        excludes: { [key: string]: boolean },\n        repositories: string[] = []\n    ): Promise<string[]> {\n        const cc = Logger.getCorrelationContext();\n\n        return new Promise<string[]>((resolve, reject) => {\n            fs.readdir(root, { withFileTypes: true }, async (err, files) => {\n                if (err != null) {\n                    reject(err);\n                    return;\n                }\n\n                if (files.length === 0) {\n                    resolve(repositories);\n                    return;\n                }\n\n                depth--;\n\n                let f;\n                for (f of files) {\n                    if (!f.isDirectory()) continue;\n\n                    if (f.name === '.git') {\n                        repositories.push(paths.resolve(root, f.name));\n                    }\n                    else if (depth >= 0 && excludes[f.name] !== true) {\n                        try {\n                            await this.repositorySearchCore(paths.resolve(root, f.name), depth, excludes, repositories);\n                        }\n                        catch (ex) {\n                            Logger.error(ex, cc, 'FAILED');\n                        }\n                    }\n                }\n\n                resolve(repositories);\n            });\n        });\n    }\n\n    private async updateContext(repositoryTree: TernarySearchTree<Repository>) {\n        const hasRepository = repositoryTree.any();\n        await setCommandContext(CommandContext.Enabled, hasRepository);\n\n        let hasRemotes = false;\n        if (hasRepository) {\n            for (const repo of repositoryTree.values()) {\n                hasRemotes = await repo.hasRemotes();\n                if (hasRemotes) break;\n            }\n        }\n\n        await setCommandContext(CommandContext.HasRemotes, hasRemotes);\n\n        // If we have no repositories setup a watcher in case one is initialized\n        if (!hasRepository) {\n            const watcher = workspace.createFileSystemWatcher('**/.git', false, true, true);\n            const disposable = Disposable.from(\n                watcher,\n                watcher.onDidCreate(async uri => {\n                    const f = workspace.getWorkspaceFolder(uri);\n                    if (f === undefined) return;\n\n                    // Search for and add all repositories (nested and/or submodules)\n                    const repositories = await this.repositorySearch(f);\n                    if (repositories.length === 0) return;\n\n                    disposable.dispose();\n\n                    for (const r of repositories) {\n                        this._repositoryTree.set(r.path, r);\n                    }\n\n                    await this.updateContext(this._repositoryTree);\n\n                    // Defer the event trigger enough to let everything unwind\n                    setImmediate(() => this.fireRepositoriesChanged());\n                }, this)\n            );\n        }\n    }\n\n    private fireRepositoriesChanged() {\n        this._onDidChangeRepositories.fire();\n    }\n\n    @log()\n    addRemote(repoPath: string, name: string, url: string) {\n        return Git.remote__add(repoPath, name, url);\n    }\n\n    @log()\n    async applyChangesToWorkingFile(uri: GitUri, ref1?: string, ref2?: string) {\n        const cc = Logger.getCorrelationContext();\n\n        ref1 = ref1 || uri.sha;\n        if (ref1 === undefined || uri.repoPath === undefined) return;\n\n        if (ref2 === undefined) {\n            ref2 = ref1;\n            ref1 = `${ref1}^`;\n        }\n\n        let patch;\n        try {\n            patch = await Git.diff(uri.repoPath, uri.fsPath, ref1, ref2, {\n                similarityThreshold: Container.config.advanced.similarityThreshold\n            });\n            void (await Git.apply(uri.repoPath!, patch));\n        }\n        catch (ex) {\n            if (patch && /patch does not apply/i.test(ex.message)) {\n                const result = await window.showWarningMessage(\n                    'Unable to apply changes cleanly. Retry and allow conflicts?',\n                    { title: 'Yes' },\n                    { title: 'No', isCloseAffordance: true }\n                );\n\n                if (result === undefined || result.title !== 'Yes') return;\n\n                if (result.title === 'Yes') {\n                    try {\n                        void (await Git.apply(uri.repoPath!, patch, { allowConflicts: true }));\n                        return;\n                    }\n                    catch (e) {\n                        // eslint-disable-next-line no-ex-assign\n                        ex = e;\n                    }\n                }\n            }\n\n            Logger.error(ex, cc);\n            void Messages.showGenericErrorMessage('Unable to apply changes');\n        }\n    }\n\n    @log()\n    async checkout(repoPath: string, ref: string, options: { createBranch?: string } | { fileName?: string } = {}) {\n        const cc = Logger.getCorrelationContext();\n\n        try {\n            return await Git.checkout(repoPath, ref, options);\n        }\n        catch (ex) {\n            if (/overwritten by checkout/i.test(ex.message)) {\n                void Messages.showGenericErrorMessage(\n                    `Unable to checkout '${ref}'. Please commit or stash your changes before switching branches`\n                );\n                return undefined;\n            }\n\n            Logger.error(ex, cc);\n            void void Messages.showGenericErrorMessage(`Unable to checkout '${ref}'`);\n            return undefined;\n        }\n    }\n\n    @gate()\n    @log()\n    fetch(repoPath: string, options: { all?: boolean; prune?: boolean; remote?: string } = {}) {\n        return Git.fetch(repoPath, options);\n    }\n\n    @gate<GitService['fetchAll']>(\n        (repos, opts) => `${repos === undefined ? '' : repos.map(r => r.id).join(',')}|${JSON.stringify(opts)}`\n    )\n    @log({\n        args: {\n            0: (repos?: Repository[]) => (repos === undefined ? false : repos.map(r => r.name).join(', '))\n        }\n    })\n    async fetchAll(repositories?: Repository[], options: { all?: boolean; prune?: boolean } = {}) {\n        if (repositories === undefined) {\n            repositories = await this.getOrderedRepositories();\n        }\n        if (repositories.length === 0) return;\n\n        if (repositories.length === 1) {\n            repositories[0].fetch(options);\n\n            return;\n        }\n\n        await window.withProgress(\n            {\n                location: ProgressLocation.Notification,\n                title: `Fetching ${repositories.length} repositories`\n            },\n            () => Promise.all(repositories!.map(r => r.fetch({ progress: false, ...options })))\n        );\n    }\n\n    @gate<GitService['pullAll']>(\n        (repos, opts) => `${repos === undefined ? '' : repos.map(r => r.id).join(',')}|${JSON.stringify(opts)}`\n    )\n    @log({\n        args: {\n            0: (repos?: Repository[]) => (repos === undefined ? false : repos.map(r => r.name).join(', '))\n        }\n    })\n    async pullAll(repositories?: Repository[], options: { rebase?: boolean } = {}) {\n        if (repositories === undefined) {\n            repositories = await this.getOrderedRepositories();\n        }\n        if (repositories.length === 0) return;\n\n        if (repositories.length === 1) {\n            repositories[0].pull(options);\n\n            return;\n        }\n\n        await window.withProgress(\n            {\n                location: ProgressLocation.Notification,\n                title: `Pulling ${repositories.length} repositories`\n            },\n            () => Promise.all(repositories!.map(r => r.pull({ progress: false, ...options })))\n        );\n    }\n\n    @gate<GitService['pushAll']>(repos => `${repos === undefined ? '' : repos.map(r => r.id).join(',')}`)\n    @log({\n        args: {\n            0: (repos?: Repository[]) => (repos === undefined ? false : repos.map(r => r.name).join(', '))\n        }\n    })\n    async pushAll(repositories?: Repository[]) {\n        if (repositories === undefined) {\n            repositories = await this.getOrderedRepositories();\n        }\n        if (repositories.length === 0) return;\n\n        if (repositories.length === 1) {\n            repositories[0].push();\n\n            return;\n        }\n\n        await window.withProgress(\n            {\n                location: ProgressLocation.Notification,\n                title: `Pushing ${repositories.length} repositories`\n            },\n            () => Promise.all(repositories!.map(r => r.push({ progress: false })))\n        );\n    }\n\n    @log({\n        args: {\n            0: (editor: TextEditor) =>\n                editor !== undefined ? `TextEditor(${Logger.toLoggable(editor.document.uri)})` : 'undefined'\n        }\n    })\n    async getActiveRepository(editor?: TextEditor): Promise<Repository | undefined> {\n        const repoPath = await this.getActiveRepoPath(editor);\n        if (repoPath === undefined) return undefined;\n\n        return this.getRepository(repoPath);\n    }\n\n    @log({\n        args: {\n            0: (editor: TextEditor) =>\n                editor !== undefined ? `TextEditor(${Logger.toLoggable(editor.document.uri)})` : 'undefined'\n        }\n    })\n    async getActiveRepoPath(editor?: TextEditor): Promise<string | undefined> {\n        editor = editor || window.activeTextEditor;\n\n        let repoPath;\n        if (editor != null) {\n            const doc = await Container.tracker.getOrAdd(editor.document.uri);\n            if (doc !== undefined) {\n                repoPath = doc.uri.repoPath;\n            }\n        }\n\n        if (repoPath != null) return repoPath;\n\n        return this.getHighlanderRepoPath();\n    }\n\n    @log()\n    getHighlanderRepoPath(): string | undefined {\n        const entry = this._repositoryTree.highlander();\n        if (entry === undefined) return undefined;\n\n        const [repo] = entry;\n        return repo.path;\n    }\n\n    @log()\n    async getBlameForFile(uri: GitUri): Promise<GitBlame | undefined> {\n        const cc = Logger.getCorrelationContext();\n\n        let key = 'blame';\n        if (uri.sha !== undefined) {\n            key += `:${uri.sha}`;\n        }\n\n        const doc = await Container.tracker.getOrAdd(uri);\n        if (this.useCaching) {\n            if (doc.state !== undefined) {\n                const cachedBlame = doc.state.get<CachedBlame>(key);\n                if (cachedBlame !== undefined) {\n                    Logger.debug(cc, `Cache hit: '${key}'`);\n                    return cachedBlame.item;\n                }\n            }\n\n            Logger.debug(cc, `Cache miss: '${key}'`);\n\n            if (doc.state === undefined) {\n                doc.state = new GitDocumentState(doc.key);\n            }\n        }\n\n        const promise = this.getBlameForFileCore(uri, doc, key, cc);\n\n        if (doc.state !== undefined) {\n            Logger.debug(cc, `Cache add: '${key}'`);\n\n            const value: CachedBlame = {\n                item: promise as Promise<GitBlame>\n            };\n            doc.state.set<CachedBlame>(key, value);\n        }\n\n        return promise;\n    }\n\n    private async getBlameForFileCore(\n        uri: GitUri,\n        document: TrackedDocument<GitDocumentState>,\n        key: string,\n        cc: LogCorrelationContext | undefined\n    ): Promise<GitBlame | undefined> {\n        if (!(await this.isTracked(uri))) {\n            Logger.log(cc, `Skipping blame; '${uri.fsPath}' is not tracked`);\n            return emptyPromise as Promise<GitBlame>;\n        }\n\n        const [file, root] = Git.splitPath(uri.fsPath, uri.repoPath, false);\n\n        try {\n            const data = await Git.blame(root, file, uri.sha, {\n                args: Container.config.advanced.blame.customArguments,\n                ignoreWhitespace: Container.config.blame.ignoreWhitespace\n            });\n            const blame = GitBlameParser.parse(data, root, file, await this.getCurrentUser(root));\n            return blame;\n        }\n        catch (ex) {\n            // Trap and cache expected blame errors\n            if (document.state !== undefined) {\n                const msg = ex && ex.toString();\n                Logger.debug(cc, `Cache replace (with empty promise): '${key}'`);\n\n                const value: CachedBlame = {\n                    item: emptyPromise as Promise<GitBlame>,\n                    errorMessage: msg\n                };\n                document.state.set<CachedBlame>(key, value);\n\n                document.setBlameFailure();\n\n                return emptyPromise as Promise<GitBlame>;\n            }\n\n            return undefined;\n        }\n    }\n\n    @log({\n        args: {\n            1: contents => '<contents>'\n        }\n    })\n    async getBlameForFileContents(uri: GitUri, contents: string): Promise<GitBlame | undefined> {\n        const cc = Logger.getCorrelationContext();\n\n        const key = `blame:${Strings.sha1(contents)}`;\n\n        const doc = await Container.tracker.getOrAdd(uri);\n        if (this.useCaching) {\n            if (doc.state !== undefined) {\n                const cachedBlame = doc.state.get<CachedBlame>(key);\n                if (cachedBlame !== undefined) {\n                    Logger.debug(cc, `Cache hit: ${key}`);\n                    return cachedBlame.item;\n                }\n            }\n\n            Logger.debug(cc, `Cache miss: ${key}`);\n\n            if (doc.state === undefined) {\n                doc.state = new GitDocumentState(doc.key);\n            }\n        }\n\n        const promise = this.getBlameForFileContentsCore(uri, contents, doc, key, cc);\n\n        if (doc.state !== undefined) {\n            Logger.debug(cc, `Cache add: '${key}'`);\n\n            const value: CachedBlame = {\n                item: promise as Promise<GitBlame>\n            };\n            doc.state.set<CachedBlame>(key, value);\n        }\n\n        return promise;\n    }\n\n    async getBlameForFileContentsCore(\n        uri: GitUri,\n        contents: string,\n        document: TrackedDocument<GitDocumentState>,\n        key: string,\n        cc: LogCorrelationContext | undefined\n    ): Promise<GitBlame | undefined> {\n        if (!(await this.isTracked(uri))) {\n            Logger.log(cc, `Skipping blame; '${uri.fsPath}' is not tracked`);\n            return emptyPromise as Promise<GitBlame>;\n        }\n\n        const [file, root] = Git.splitPath(uri.fsPath, uri.repoPath, false);\n\n        try {\n            const data = await Git.blame__contents(root, file, contents, {\n                args: Container.config.advanced.blame.customArguments,\n                correlationKey: `:${key}`,\n                ignoreWhitespace: Container.config.blame.ignoreWhitespace\n            });\n            const blame = GitBlameParser.parse(data, root, file, await this.getCurrentUser(root));\n            return blame;\n        }\n        catch (ex) {\n            // Trap and cache expected blame errors\n            if (document.state !== undefined) {\n                const msg = ex && ex.toString();\n                Logger.debug(cc, `Cache replace (with empty promise): '${key}'`);\n\n                const value: CachedBlame = {\n                    item: emptyPromise as Promise<GitBlame>,\n                    errorMessage: msg\n                };\n                document.state.set<CachedBlame>(key, value);\n\n                document.setBlameFailure();\n                return emptyPromise as Promise<GitBlame>;\n            }\n\n            return undefined;\n        }\n    }\n\n    @log()\n    async getBlameForLine(\n        uri: GitUri,\n        editorLine: number, // editor lines are 0-based\n        options: { skipCache?: boolean } = {}\n    ): Promise<GitBlameLine | undefined> {\n        if (!options.skipCache && this.useCaching) {\n            const blame = await this.getBlameForFile(uri);\n            if (blame === undefined) return undefined;\n\n            let blameLine = blame.lines[editorLine];\n            if (blameLine === undefined) {\n                if (blame.lines.length !== editorLine) return undefined;\n                blameLine = blame.lines[editorLine - 1];\n            }\n\n            const commit = blame.commits.get(blameLine.sha);\n            if (commit === undefined) return undefined;\n\n            const author = blame.authors.get(commit.author)!;\n            return {\n                author: { ...author, lineCount: commit.lines.length },\n                commit: commit,\n                line: blameLine\n            };\n        }\n\n        const lineToBlame = editorLine + 1;\n        const fileName = uri.fsPath;\n\n        try {\n            const data = await Git.blame(uri.repoPath, fileName, uri.sha, {\n                args: Container.config.advanced.blame.customArguments,\n                ignoreWhitespace: Container.config.blame.ignoreWhitespace,\n                startLine: lineToBlame,\n                endLine: lineToBlame\n            });\n            const blame = GitBlameParser.parse(data, uri.repoPath, fileName, await this.getCurrentUser(uri.repoPath!));\n            if (blame === undefined) return undefined;\n\n            return {\n                author: Iterables.first(blame.authors.values()),\n                commit: Iterables.first(blame.commits.values()),\n                line: blame.lines[editorLine]\n            };\n        }\n        catch {\n            return undefined;\n        }\n    }\n\n    @log({\n        args: {\n            2: contents => '<contents>'\n        }\n    })\n    async getBlameForLineContents(\n        uri: GitUri,\n        editorLine: number, // editor lines are 0-based\n        contents: string,\n        options: { skipCache?: boolean } = {}\n    ): Promise<GitBlameLine | undefined> {\n        if (!options.skipCache && this.useCaching) {\n            const blame = await this.getBlameForFileContents(uri, contents);\n            if (blame === undefined) return undefined;\n\n            let blameLine = blame.lines[editorLine];\n            if (blameLine === undefined) {\n                if (blame.lines.length !== editorLine) return undefined;\n                blameLine = blame.lines[editorLine - 1];\n            }\n\n            const commit = blame.commits.get(blameLine.sha);\n            if (commit === undefined) return undefined;\n\n            const author = blame.authors.get(commit.author)!;\n            return {\n                author: { ...author, lineCount: commit.lines.length },\n                commit: commit,\n                line: blameLine\n            };\n        }\n\n        const lineToBlame = editorLine + 1;\n        const fileName = uri.fsPath;\n\n        try {\n            const data = await Git.blame__contents(uri.repoPath, fileName, contents, {\n                args: Container.config.advanced.blame.customArguments,\n                ignoreWhitespace: Container.config.blame.ignoreWhitespace,\n                startLine: lineToBlame,\n                endLine: lineToBlame\n            });\n            const currentUser = await this.getCurrentUser(uri.repoPath!);\n            const blame = GitBlameParser.parse(data, uri.repoPath, fileName, currentUser);\n            if (blame === undefined) return undefined;\n\n            return {\n                author: Iterables.first(blame.authors.values()),\n                commit: Iterables.first(blame.commits.values()),\n                line: blame.lines[editorLine]\n            };\n        }\n        catch {\n            return undefined;\n        }\n    }\n\n    @log()\n    async getBlameForRange(uri: GitUri, range: Range): Promise<GitBlameLines | undefined> {\n        const blame = await this.getBlameForFile(uri);\n        if (blame === undefined) return undefined;\n\n        return this.getBlameForRangeSync(blame, uri, range);\n    }\n\n    @log()\n    async getBlameForRangeContents(uri: GitUri, range: Range, contents: string): Promise<GitBlameLines | undefined> {\n        const blame = await this.getBlameForFileContents(uri, contents);\n        if (blame === undefined) return undefined;\n\n        return this.getBlameForRangeSync(blame, uri, range);\n    }\n\n    @log({\n        args: { 0: blame => '<blame>' }\n    })\n    getBlameForRangeSync(blame: GitBlame, uri: GitUri, range: Range): GitBlameLines | undefined {\n        if (blame.lines.length === 0) return { allLines: blame.lines, ...blame };\n\n        if (range.start.line === 0 && range.end.line === blame.lines.length - 1) {\n            return { allLines: blame.lines, ...blame };\n        }\n\n        const lines = blame.lines.slice(range.start.line, range.end.line + 1);\n        const shas = new Set(lines.map(l => l.sha));\n\n        // ranges are 0-based\n        const startLine = range.start.line + 1;\n        const endLine = range.end.line + 1;\n\n        const authors: Map<string, GitAuthor> = new Map();\n        const commits: Map<string, GitBlameCommit> = new Map();\n        for (const c of blame.commits.values()) {\n            if (!shas.has(c.sha)) continue;\n\n            const commit = c.with({\n                lines: c.lines.filter(l => l.line >= startLine && l.line <= endLine)\n            });\n            commits.set(c.sha, commit);\n\n            let author = authors.get(commit.author);\n            if (author === undefined) {\n                author = {\n                    name: commit.author,\n                    lineCount: 0\n                };\n                authors.set(author.name, author);\n            }\n\n            author.lineCount += commit.lines.length;\n        }\n\n        const sortedAuthors = new Map([...authors.entries()].sort((a, b) => b[1].lineCount - a[1].lineCount));\n\n        return {\n            repoPath: uri.repoPath!,\n            authors: sortedAuthors,\n            commits: commits,\n            lines: lines,\n            allLines: blame.lines\n        };\n    }\n\n    @log()\n    async getBranch(repoPath: string | undefined): Promise<GitBranch | undefined> {\n        if (repoPath === undefined) return undefined;\n\n        const data = await Git.rev_parse__currentBranch(repoPath);\n        if (data === undefined) return undefined;\n\n        const branch = data[0].split('\\n');\n        return new GitBranch(repoPath, branch[0], false, true, data[1], branch[1]);\n    }\n\n    @log()\n    async getBranches(\n        repoPath: string | undefined,\n        options: { filter?: (b: GitBranch) => boolean; sort?: boolean } = {}\n    ): Promise<GitBranch[]> {\n        if (repoPath === undefined) return [];\n\n        let branches: GitBranch[] | undefined;\n        try {\n            if (this.useCaching) {\n                branches = this._branchesCache.get(repoPath);\n                if (branches !== undefined) return branches;\n            }\n\n            const data = await Git.for_each_ref__branch(repoPath, { all: true });\n            // If we don't get any data, assume the repo doesn't have any commits yet so check if we have a current branch\n            if (data == null || data.length === 0) {\n                const current = await this.getBranch(repoPath);\n                branches = current !== undefined ? [current] : [];\n            }\n            else {\n                branches = GitBranchParser.parse(data, repoPath);\n            }\n\n            if (this.useCaching) {\n                const repo = await this.getRepository(repoPath);\n                if (repo !== undefined && repo.supportsChangeEvents) {\n                    this._branchesCache.set(repoPath, branches);\n                }\n            }\n\n            return branches;\n        }\n        finally {\n            if (options.filter !== undefined) {\n                branches = branches!.filter(options.filter);\n            }\n\n            if (options.sort) {\n                GitBranch.sort(branches!);\n            }\n\n            if (options.filter !== undefined) {\n                // eslint-disable-next-line no-unsafe-finally\n                return branches!;\n            }\n        }\n    }\n\n    @log()\n    async getBranchesAndOrTags(\n        repoPath: string | undefined,\n        {\n            filterBranches,\n            filterTags,\n            include,\n            ...options\n        }: {\n            filterBranches?: (b: GitBranch) => boolean;\n            filterTags?: (t: GitTag) => boolean;\n            include?: 'all' | 'branches' | 'tags';\n            sort?: boolean;\n        } = {}\n    ) {\n        const [branches, tags] = await Promise.all<GitBranch[] | undefined, GitTag[] | undefined>([\n            include === 'all' || include === 'branches'\n                ? this.getBranches(repoPath, {\n                      ...options,\n                      filter: filterBranches && filterBranches\n                  })\n                : undefined,\n            include === 'all' || include === 'tags'\n                ? this.getTags(repoPath, {\n                      ...options,\n                      filter: filterTags && filterTags\n                  })\n                : undefined\n        ]);\n\n        if (branches !== undefined && tags !== undefined) {\n            return [...branches.filter(b => !b.remote), ...tags, ...branches.filter(b => b.remote)];\n        }\n\n        if (branches !== undefined) {\n            return branches;\n        }\n\n        return tags;\n    }\n\n    @log()\n    async getBranchesAndTagsTipsFn(repoPath: string | undefined, currentName?: string) {\n        const [branches, tags] = await Promise.all([\n            this.getBranches(repoPath),\n            this.getTags(repoPath, { includeRefs: true })\n        ]);\n\n        const branchesAndTagsBySha = Arrays.groupByFilterMap(\n            (branches as { name: string; sha: string }[]).concat(tags as { name: string; sha: string }[]),\n            bt => bt.sha!,\n            bt => (bt.name === currentName ? undefined : bt.name)\n        );\n\n        return (sha: string) => {\n            const branchesAndTags = branchesAndTagsBySha.get(sha);\n            if (branchesAndTags === undefined || branchesAndTags.length === 0) return undefined;\n            return branchesAndTags.join(', ');\n        };\n    }\n\n    @log()\n    async getChangedFilesCount(repoPath: string, ref?: string): Promise<GitDiffShortStat | undefined> {\n        const data = await Git.diff__shortstat(repoPath, ref);\n        return GitDiffParser.parseShortStat(data);\n    }\n\n    @log()\n    async getCommit(repoPath: string, ref: string): Promise<GitLogCommit | undefined> {\n        const log = await this.getLog(repoPath, { maxCount: 2, ref: ref });\n        if (log === undefined) return undefined;\n\n        return log.commits.get(ref);\n    }\n\n    @log()\n    getCommitCount(repoPath: string, refs: string[]) {\n        return Git.rev_list(repoPath, refs, { count: true });\n    }\n\n    @log()\n    async getCommitForFile(\n        repoPath: string | undefined,\n        fileName: string,\n        options: { ref?: string; firstIfNotFound?: boolean; reverse?: boolean } = {}\n    ): Promise<GitLogCommit | undefined> {\n        const log = await this.getLogForFile(repoPath, fileName, {\n            maxCount: 2,\n            ref: options.ref,\n            reverse: options.reverse\n        });\n        if (log === undefined) return undefined;\n\n        const commit = options.ref && log.commits.get(options.ref);\n        if (commit === undefined && !options.firstIfNotFound && options.ref) {\n            // If the ref isn't a valid sha we will never find it, so let it fall through so we return the first\n            if (!Git.isSha(options.ref) || Git.isUncommitted(options.ref)) return undefined;\n        }\n\n        return commit || Iterables.first(log.commits.values());\n    }\n\n    @log()\n    getConfig(key: string, repoPath?: string): Promise<string | undefined> {\n        return Git.config__get(key, repoPath);\n    }\n\n    @log()\n    async getContributors(repoPath: string): Promise<GitContributor[]> {\n        if (repoPath === undefined) return [];\n\n        const data = await Git.shortlog(repoPath);\n        const shortlog = GitShortLogParser.parse(data, repoPath);\n        return shortlog === undefined ? [] : shortlog.contributors;\n    }\n\n    @log()\n    async getCurrentUser(repoPath: string) {\n        let user = this._userMapCache.get(repoPath);\n        if (user != null) return user;\n        // If we found the repo, but no user data was found just return\n        if (user === null) return undefined;\n\n        const data = await Git.config__get_regex('user.(name|email)', repoPath, { local: true });\n        if (!data) {\n            // If we found no user data, mark it so we won't bother trying again\n            this._userMapCache.set(repoPath, null);\n            return undefined;\n        }\n\n        user = { name: undefined, email: undefined };\n\n        let key: string;\n        let value: string;\n\n        let match: RegExpExecArray | null;\n        do {\n            match = userConfigRegex.exec(data);\n            if (match == null) break;\n\n            [, key, value] = match;\n            // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n            user[key as 'name' | 'email'] = ` ${value}`.substr(1);\n        } while (match != null);\n\n        const author = `${user.name} <${user.email}>`;\n        // Check if there is a mailmap for the current user\n        const mappedAuthor = await Git.check_mailmap(repoPath, author);\n        if (mappedAuthor != null && mappedAuthor.length !== 0 && author !== mappedAuthor) {\n            match = mappedAuthorRegex.exec(mappedAuthor);\n            if (match != null) {\n                [, user.name, user.email] = match;\n            }\n        }\n\n        this._userMapCache.set(repoPath, user);\n        return user;\n    }\n\n    @log()\n    async getDiffForFile(\n        uri: GitUri,\n        ref1: string | undefined,\n        ref2?: string,\n        originalFileName?: string\n    ): Promise<GitDiff | undefined> {\n        const cc = Logger.getCorrelationContext();\n\n        let key = 'diff';\n        if (ref1 !== undefined) {\n            key += `:${ref1}`;\n        }\n        if (ref2 !== undefined) {\n            key += `:${ref2}`;\n        }\n\n        const doc = await Container.tracker.getOrAdd(uri);\n        if (this.useCaching) {\n            if (doc.state !== undefined) {\n                const cachedDiff = doc.state.get<CachedDiff>(key);\n                if (cachedDiff !== undefined) {\n                    Logger.debug(cc, `Cache hit: '${key}'`);\n                    return cachedDiff.item;\n                }\n            }\n\n            Logger.debug(cc, `Cache miss: '${key}'`);\n\n            if (doc.state === undefined) {\n                doc.state = new GitDocumentState(doc.key);\n            }\n        }\n\n        const promise = this.getDiffForFileCore(\n            uri.repoPath,\n            uri.fsPath,\n            ref1,\n            ref2,\n            originalFileName,\n            { encoding: GitService.getEncoding(uri) },\n            doc,\n            key,\n            cc\n        );\n\n        if (doc.state !== undefined) {\n            Logger.debug(cc, `Cache add: '${key}'`);\n\n            const value: CachedDiff = {\n                item: promise as Promise<GitDiff>\n            };\n            doc.state.set<CachedDiff>(key, value);\n        }\n\n        return promise;\n    }\n\n    private async getDiffForFileCore(\n        repoPath: string | undefined,\n        fileName: string,\n        ref1: string | undefined,\n        ref2: string | undefined,\n        originalFileName: string | undefined,\n        options: { encoding?: string },\n        document: TrackedDocument<GitDocumentState>,\n        key: string,\n        cc: LogCorrelationContext | undefined\n    ): Promise<GitDiff | undefined> {\n        const [file, root] = Git.splitPath(fileName, repoPath, false);\n\n        try {\n            let data;\n            if (ref1 !== undefined && ref2 === undefined && !Git.isUncommittedStaged(ref1)) {\n                data = await Git.show__diff(root, file, ref1, originalFileName, {\n                    similarityThreshold: Container.config.advanced.similarityThreshold\n                });\n            }\n            else {\n                data = await Git.diff(root, file, ref1, ref2, {\n                    ...options,\n                    filter: 'M',\n                    similarityThreshold: Container.config.advanced.similarityThreshold\n                });\n            }\n\n            const diff = GitDiffParser.parse(data);\n            return diff;\n        }\n        catch (ex) {\n            // Trap and cache expected diff errors\n            if (document.state !== undefined) {\n                const msg = ex && ex.toString();\n                Logger.debug(cc, `Cache replace (with empty promise): '${key}'`);\n\n                const value: CachedDiff = {\n                    item: emptyPromise as Promise<GitDiff>,\n                    errorMessage: msg\n                };\n                document.state.set<CachedDiff>(key, value);\n\n                return emptyPromise as Promise<GitDiff>;\n            }\n\n            return undefined;\n        }\n    }\n\n    @log()\n    async getDiffForLine(\n        uri: GitUri,\n        editorLine: number, // editor lines are 0-based\n        ref1: string | undefined,\n        ref2?: string,\n        originalFileName?: string\n    ): Promise<GitDiffHunkLine | undefined> {\n        try {\n            const diff = await this.getDiffForFile(uri, ref1, ref2, originalFileName);\n            if (diff === undefined) return undefined;\n\n            const line = editorLine + 1;\n            const hunk = diff.hunks.find(c => c.currentPosition.start <= line && c.currentPosition.end >= line);\n            if (hunk === undefined) return undefined;\n\n            return hunk.lines[line - hunk.currentPosition.start];\n        }\n        catch (ex) {\n            return undefined;\n        }\n    }\n\n    @log()\n    async getDiffStatus(\n        repoPath: string,\n        ref1?: string,\n        ref2?: string,\n        options: { filter?: string; similarityThreshold?: number } = {}\n    ): Promise<GitFile[] | undefined> {\n        try {\n            const data = await Git.diff__name_status(repoPath, ref1, ref2, {\n                similarityThreshold: Container.config.advanced.similarityThreshold,\n                ...options\n            });\n            const files = GitDiffParser.parseNameStatus(data, repoPath);\n            return files === undefined || files.length === 0 ? undefined : files;\n        }\n        catch (ex) {\n            return undefined;\n        }\n    }\n\n    @log()\n    async getFileStatusForCommit(repoPath: string, fileName: string, ref: string): Promise<GitFile | undefined> {\n        if (ref === GitService.deletedOrMissingSha || Git.isUncommitted(ref)) return undefined;\n\n        const data = await Git.show__name_status(repoPath, fileName, ref);\n        if (!data) return undefined;\n\n        const files = GitDiffParser.parseNameStatus(data, repoPath);\n        if (files === undefined || files.length === 0) return undefined;\n\n        return files[0];\n    }\n\n    @log()\n    async getLog(\n        repoPath: string,\n        {\n            ref,\n            ...options\n        }: { authors?: string[]; maxCount?: number; merges?: boolean; ref?: string; reverse?: boolean } = {}\n    ): Promise<GitLog | undefined> {\n        const maxCount = options.maxCount == null ? Container.config.advanced.maxListItems || 0 : options.maxCount;\n\n        try {\n            const data = await Git.log(repoPath, ref, {\n                authors: options.authors,\n                maxCount: maxCount,\n                merges: options.merges === undefined ? true : options.merges,\n                reverse: options.reverse,\n                similarityThreshold: Container.config.advanced.similarityThreshold\n            });\n            const log = GitLogParser.parse(\n                data,\n                GitCommitType.Log,\n                repoPath,\n                undefined,\n                ref,\n                await this.getCurrentUser(repoPath),\n                maxCount,\n                options.reverse!,\n                undefined\n            );\n\n            if (log !== undefined) {\n                const opts = { ...options, ref: ref };\n                log.query = (maxCount: number | undefined) => this.getLog(repoPath, { ...opts, maxCount: maxCount });\n            }\n\n            return log;\n        }\n        catch (ex) {\n            return undefined;\n        }\n    }\n\n    @log()\n    async getLogForSearch(\n        repoPath: string,\n        search: string,\n        searchBy: GitRepoSearchBy,\n        options: { maxCount?: number } = {}\n    ): Promise<GitLog | undefined> {\n        let maxCount = options.maxCount == null ? Container.config.advanced.maxSearchItems || 0 : options.maxCount;\n        const similarityThreshold = Container.config.advanced.similarityThreshold;\n\n        let searchArgs: string[] | undefined = undefined;\n        switch (searchBy) {\n            case GitRepoSearchBy.Author:\n                searchArgs = [\n                    '-m',\n                    `-M${similarityThreshold == null ? '' : `${similarityThreshold}%`}`,\n                    '--all',\n                    '--full-history',\n                    '-E',\n                    '-i',\n                    `--author=${search}`\n                ];\n                break;\n            case GitRepoSearchBy.Changes:\n                searchArgs = [\n                    `-M${similarityThreshold == null ? '' : `${similarityThreshold}%`}`,\n                    '--all',\n                    '--full-history',\n                    '-E',\n                    '-i',\n                    `-G${search}`\n                ];\n                break;\n            case GitRepoSearchBy.Files:\n                searchArgs = [\n                    `-M${similarityThreshold == null ? '' : `${similarityThreshold}%`}`,\n                    '--all',\n                    '--full-history',\n                    '-E',\n                    '-i',\n                    '--',\n                    `${search}`\n                ];\n                break;\n            case GitRepoSearchBy.Message:\n                searchArgs = [\n                    '-m',\n                    `-M${similarityThreshold == null ? '' : `${similarityThreshold}%`}`,\n                    '--all',\n                    '--full-history',\n                    '-E',\n                    '-i'\n                ];\n                if (search) {\n                    searchArgs.push(`--grep=${search}`);\n                }\n                break;\n            case GitRepoSearchBy.Sha:\n                searchArgs = ['-m', `-M${similarityThreshold == null ? '' : `${similarityThreshold}%`}`, search];\n                maxCount = 1;\n                break;\n        }\n\n        try {\n            const data = await Git.log__search(repoPath, searchArgs, { maxCount: maxCount });\n            const log = GitLogParser.parse(\n                data,\n                GitCommitType.Log,\n                repoPath,\n                undefined,\n                undefined,\n                await this.getCurrentUser(repoPath),\n                maxCount,\n                false,\n                undefined\n            );\n\n            if (log !== undefined) {\n                const opts = { ...options };\n                log.query = (maxCount: number | undefined) =>\n                    this.getLogForSearch(repoPath, search, searchBy, { ...opts, maxCount: maxCount });\n            }\n\n            return log;\n        }\n        catch (ex) {\n            return undefined;\n        }\n    }\n\n    @log()\n    async getLogForFile(\n        repoPath: string | undefined,\n        fileName: string,\n        options: { maxCount?: number; range?: Range; ref?: string; renames?: boolean; reverse?: boolean } = {}\n    ): Promise<GitLog | undefined> {\n        if (repoPath !== undefined && repoPath === Strings.normalizePath(fileName)) {\n            throw new Error(`File name cannot match the repository path; fileName=${fileName}`);\n        }\n\n        const cc = Logger.getCorrelationContext();\n\n        options = { reverse: false, ...options };\n\n        if (options.renames === undefined) {\n            options.renames = Container.config.advanced.fileHistoryFollowsRenames;\n        }\n\n        let key = 'log';\n        if (options.ref !== undefined) {\n            key += `:${options.ref}`;\n        }\n\n        options.maxCount = options.maxCount == null ? Container.config.advanced.maxListItems || 0 : options.maxCount;\n        if (options.maxCount) {\n            key += `:n${options.maxCount}`;\n        }\n\n        if (options.renames) {\n            key += ':follow';\n        }\n\n        if (options.reverse) {\n            key += ':reverse';\n        }\n\n        const doc = await Container.tracker.getOrAdd(GitUri.fromFile(fileName, repoPath!, options.ref));\n        if (this.useCaching && options.range === undefined) {\n            if (doc.state !== undefined) {\n                const cachedLog = doc.state.get<CachedLog>(key);\n                if (cachedLog !== undefined) {\n                    Logger.debug(cc, `Cache hit: '${key}'`);\n                    return cachedLog.item;\n                }\n\n                if (options.ref !== undefined || options.maxCount !== undefined) {\n                    // Since we are looking for partial log, see if we have the log of the whole file\n                    const cachedLog = doc.state.get<CachedLog>(\n                        `log${options.renames ? ':follow' : emptyStr}${options.reverse ? ':reverse' : emptyStr}`\n                    );\n                    if (cachedLog !== undefined) {\n                        if (options.ref === undefined) {\n                            Logger.debug(cc, `Cache hit: ~'${key}'`);\n                            return cachedLog.item;\n                        }\n\n                        Logger.debug(cc, `Cache ?: '${key}'`);\n                        let log = await cachedLog.item;\n                        if (log !== undefined && !log.truncated && log.commits.has(options.ref)) {\n                            Logger.debug(cc, `Cache hit: '${key}'`);\n\n                            // Create a copy of the log starting at the requested commit\n                            let skip = true;\n                            let i = 0;\n                            const authors = new Map<string, GitAuthor>();\n                            const commits = new Map(\n                                Iterables.filterMap<[string, GitLogCommit], [string, GitLogCommit]>(\n                                    log.commits.entries(),\n                                    ([ref, c]) => {\n                                        if (skip) {\n                                            if (ref !== options.ref) return undefined;\n                                            skip = false;\n                                        }\n\n                                        i++;\n                                        if (options.maxCount !== undefined && i > options.maxCount) {\n                                            return undefined;\n                                        }\n\n                                        authors.set(c.author, log.authors.get(c.author)!);\n                                        return [ref, c];\n                                    }\n                                )\n                            );\n\n                            const opts = { ...options };\n                            log = {\n                                ...log,\n                                maxCount: options.maxCount,\n                                count: commits.size,\n                                commits: commits,\n                                authors: authors,\n                                query: (maxCount: number | undefined) =>\n                                    this.getLogForFile(repoPath, fileName, { ...opts, maxCount: maxCount })\n                            };\n\n                            return log;\n                        }\n                    }\n                }\n            }\n\n            Logger.debug(cc, `Cache miss: '${key}'`);\n\n            if (doc.state === undefined) {\n                doc.state = new GitDocumentState(doc.key);\n            }\n        }\n\n        const promise = this.getLogForFileCore(repoPath, fileName, options, doc, key, cc);\n\n        if (doc.state !== undefined && options.range === undefined) {\n            Logger.debug(cc, `Cache add: '${key}'`);\n\n            const value: CachedLog = {\n                item: promise as Promise<GitLog>\n            };\n            doc.state.set<CachedLog>(key, value);\n        }\n\n        return promise;\n    }\n\n    private async getLogForFileCore(\n        repoPath: string | undefined,\n        fileName: string,\n        {\n            ref,\n            range,\n            ...options\n        }: { maxCount?: number; range?: Range; ref?: string; renames?: boolean; reverse?: boolean },\n        document: TrackedDocument<GitDocumentState>,\n        key: string,\n        cc: LogCorrelationContext | undefined\n    ): Promise<GitLog | undefined> {\n        if (!(await this.isTracked(fileName, repoPath, { ref: ref }))) {\n            Logger.log(cc, `Skipping log; '${fileName}' is not tracked`);\n            return emptyPromise as Promise<GitLog>;\n        }\n\n        const [file, root] = Git.splitPath(fileName, repoPath, false);\n\n        try {\n            if (range !== undefined && range.start.line > range.end.line) {\n                range = new Range(range.end, range.start);\n            }\n\n            const data = await Git.log__file(root, file, ref, {\n                ...options,\n                startLine: range === undefined ? undefined : range.start.line + 1,\n                endLine: range === undefined ? undefined : range.end.line + 1\n            });\n            const log = GitLogParser.parse(\n                data,\n                GitCommitType.LogFile,\n                root,\n                file,\n                ref,\n                await this.getCurrentUser(root),\n                options.maxCount,\n                options.reverse!,\n                range\n            );\n\n            if (log !== undefined) {\n                const opts = { ...options, ref: ref, range: range };\n                log.query = (maxCount: number | undefined) =>\n                    this.getLogForFile(repoPath, fileName, { ...opts, maxCount: maxCount });\n            }\n\n            return log;\n        }\n        catch (ex) {\n            // Trap and cache expected log errors\n            if (document.state !== undefined && range === undefined && !options.reverse) {\n                const msg = ex && ex.toString();\n                Logger.debug(cc, `Cache replace (with empty promise): '${key}'`);\n\n                const value: CachedLog = {\n                    item: emptyPromise as Promise<GitLog>,\n                    errorMessage: msg\n                };\n                document.state.set<CachedLog>(key, value);\n\n                return emptyPromise as Promise<GitLog>;\n            }\n\n            return undefined;\n        }\n    }\n\n    @log()\n    async hasRemotes(repoPath: string | undefined): Promise<boolean> {\n        if (repoPath === undefined) return false;\n\n        const repository = await this.getRepository(repoPath);\n        if (repository === undefined) return false;\n\n        return repository.hasRemotes();\n    }\n\n    @log()\n    async hasTrackingBranch(repoPath: string | undefined): Promise<boolean> {\n        if (repoPath === undefined) return false;\n\n        const repository = await this.getRepository(repoPath);\n        if (repository === undefined) return false;\n\n        return repository.hasTrackingBranch();\n    }\n\n    @log()\n    async getMergeBase(repoPath: string, ref1: string, ref2: string, options: { forkPoint?: boolean } = {}) {\n        const cc = Logger.getCorrelationContext();\n\n        try {\n            const data = await Git.merge_base(repoPath, ref1, ref2, options);\n            if (data === undefined) return undefined;\n\n            return data.split('\\n')[0];\n        }\n        catch (ex) {\n            Logger.error(ex, cc);\n            return undefined;\n        }\n    }\n\n    @log()\n    async getNextDiffUris(\n        repoPath: string,\n        uri: Uri,\n        ref: string | undefined\n    ): Promise<{ current: GitUri; next: GitUri | undefined; deleted?: boolean } | undefined> {\n        // If we have no ref (or staged ref) there is no next commit\n        if (ref === undefined || ref.length === 0) return undefined;\n\n        const fileName = GitUri.relativeTo(uri, repoPath);\n\n        if (Git.isUncommittedStaged(ref)) {\n            return {\n                current: GitUri.fromFile(fileName, repoPath, ref),\n                next: GitUri.fromFile(fileName, repoPath, undefined)\n            };\n        }\n\n        const next = await this.getNextUri(repoPath, uri, ref);\n        if (next === undefined) {\n            const status = await this.getStatusForFile(repoPath, fileName);\n            if (status !== undefined) {\n                // If the file is staged, diff with the staged version\n                if (status.indexStatus !== undefined) {\n                    return {\n                        current: GitUri.fromFile(fileName, repoPath, ref),\n                        next: GitUri.fromFile(fileName, repoPath, GitService.uncommittedStagedSha)\n                    };\n                }\n            }\n\n            return {\n                current: GitUri.fromFile(fileName, repoPath, ref),\n                next: GitUri.fromFile(fileName, repoPath, undefined)\n            };\n        }\n\n        return {\n            current: GitUri.fromFile(fileName, repoPath, ref),\n            next: next\n        };\n    }\n\n    @log()\n    async getNextUri(\n        repoPath: string,\n        uri: Uri,\n        ref?: string,\n        skip: number = 0\n        // editorLine?: number\n    ): Promise<GitUri | undefined> {\n        // If we have no ref (or staged ref) there is no next commit\n        if (ref === undefined || ref.length === 0 || Git.isUncommittedStaged(ref)) return undefined;\n\n        let filters: GitLogDiffFilter[] | undefined;\n        if (ref === GitService.deletedOrMissingSha) {\n            // If we are trying to move next from a deleted or missing ref then get the first commit\n            ref = undefined;\n            filters = ['A'];\n        }\n\n        const fileName = GitUri.relativeTo(uri, repoPath);\n        let data = await Git.log__file(repoPath, fileName, ref, {\n            filters: filters,\n            maxCount: skip + 1,\n            // startLine: editorLine !== undefined ? editorLine + 1 : undefined,\n            reverse: true,\n            simple: true\n        });\n        if (data == null || data.length === 0) return undefined;\n\n        const [nextRef, file, status] = GitLogParser.parseSimple(data, skip);\n        // If the file was deleted, check for a possible rename\n        if (status === 'D') {\n            data = await Git.log__file(repoPath, '.', nextRef, {\n                filters: ['R'],\n                maxCount: 1,\n                // startLine: editorLine !== undefined ? editorLine + 1 : undefined\n                simple: true\n            });\n            if (data == null || data.length === 0) {\n                return GitUri.fromFile(file || fileName, repoPath, nextRef);\n            }\n\n            const [nextRenamedRef, renamedFile] = GitLogParser.parseSimpleRenamed(data, file || fileName);\n            return GitUri.fromFile(\n                renamedFile || file || fileName,\n                repoPath,\n                nextRenamedRef || nextRef || GitService.deletedOrMissingSha\n            );\n        }\n\n        return GitUri.fromFile(file || fileName, repoPath, nextRef);\n    }\n\n    @log()\n    async getPreviousDiffUris(\n        repoPath: string,\n        uri: Uri,\n        ref: string | undefined,\n        skip: number = 0,\n        firstParent: boolean = false\n    ): Promise<{ current: GitUri; previous: GitUri | undefined } | undefined> {\n        if (ref === GitService.deletedOrMissingSha) return undefined;\n\n        const fileName = GitUri.relativeTo(uri, repoPath);\n\n        // If we are at the working tree (i.e. no ref), we need to dig deeper to figure out where to go\n        if (ref === undefined || ref.length === 0) {\n            // First, check the file status to see if there is anything staged\n            const status = await this.getStatusForFile(repoPath, fileName);\n            if (status !== undefined) {\n                // If the file is staged with working changes, diff working with staged (index)\n                // If the file is staged without working changes, diff staged with HEAD\n                if (status.indexStatus !== undefined) {\n                    // Backs up to get to HEAD\n                    if (status.workingTreeStatus === undefined) {\n                        skip++;\n                    }\n\n                    if (skip === 0) {\n                        // Diff working with staged\n                        return {\n                            current: GitUri.fromFile(fileName, repoPath, undefined),\n                            previous: GitUri.fromFile(fileName, repoPath, GitService.uncommittedStagedSha)\n                        };\n                    }\n\n                    return {\n                        // Diff staged with HEAD (or prior if more skips)\n                        current: GitUri.fromFile(fileName, repoPath, GitService.uncommittedStagedSha),\n                        previous: await this.getPreviousUri(repoPath, uri, ref, skip - 1, undefined, firstParent)\n                    };\n                }\n                else if (status.workingTreeStatus !== undefined) {\n                    if (skip === 0) {\n                        return {\n                            current: GitUri.fromFile(fileName, repoPath, undefined),\n                            previous: await this.getPreviousUri(repoPath, uri, undefined, skip, undefined, firstParent)\n                        };\n                    }\n                }\n            }\n            else if (skip === 0) {\n                skip++;\n            }\n        }\n        // If we are at the index (staged), diff staged with HEAD\n        else if (GitService.isUncommittedStaged(ref)) {\n            const current =\n                skip === 0\n                    ? GitUri.fromFile(fileName, repoPath, ref)\n                    : (await this.getPreviousUri(repoPath, uri, undefined, skip - 1, undefined, firstParent))!;\n            if (current === undefined || current.sha === GitService.deletedOrMissingSha) return undefined;\n\n            return {\n                current: current,\n                previous: await this.getPreviousUri(repoPath, uri, undefined, skip, undefined, firstParent)\n            };\n        }\n\n        // If we are at a commit, diff commit with previous\n        const current =\n            skip === 0\n                ? GitUri.fromFile(fileName, repoPath, ref)\n                : (await this.getPreviousUri(repoPath, uri, ref, skip - 1, undefined, firstParent))!;\n        if (current === undefined || current.sha === GitService.deletedOrMissingSha) return undefined;\n\n        return {\n            current: current,\n            previous: await this.getPreviousUri(repoPath, uri, ref, skip, undefined, firstParent)\n        };\n    }\n\n    @log()\n    async getPreviousLineDiffUris(\n        repoPath: string,\n        uri: Uri,\n        editorLine: number,\n        ref: string | undefined,\n        skip: number = 0\n    ): Promise<{ current: GitUri; previous: GitUri | undefined } | undefined> {\n        if (ref === GitService.deletedOrMissingSha) return undefined;\n\n        let fileName = GitUri.relativeTo(uri, repoPath);\n\n        // If we are at the working tree (i.e. no ref), we need to dig deeper to figure out where to go\n        if (ref === undefined || ref.length === 0) {\n            // First, check the blame on the current line to see if there are any working/staged changes\n            const gitUri = new GitUri(uri, repoPath);\n\n            const document = await workspace.openTextDocument(uri);\n            const blameLine = document.isDirty\n                ? await this.getBlameForLineContents(gitUri, editorLine, document.getText())\n                : await this.getBlameForLine(gitUri, editorLine);\n            if (blameLine === undefined) return undefined;\n\n            // If line is uncommitted, we need to dig deeper to figure out where to go (because blame can't be trusted)\n            if (blameLine.commit.isUncommitted) {\n                // If the document is dirty (unsaved), use the status to determine where to go\n                if (document.isDirty) {\n                    // Check the file status to see if there is anything staged\n                    const status = await this.getStatusForFile(repoPath, fileName);\n                    if (status !== undefined) {\n                        // If the file is staged, diff working with staged (index)\n                        // If the file is not staged, diff working with HEAD\n                        if (status.indexStatus !== undefined) {\n                            // Diff working with staged\n                            return {\n                                current: GitUri.fromFile(fileName, repoPath, undefined),\n                                previous: GitUri.fromFile(fileName, repoPath, GitService.uncommittedStagedSha)\n                            };\n                        }\n                    }\n\n                    // Diff working with HEAD (or prior if more skips)\n                    return {\n                        current: GitUri.fromFile(fileName, repoPath, undefined),\n                        previous: await this.getPreviousUri(repoPath, uri, undefined, skip, editorLine)\n                    };\n                }\n\n                // First, check if we have a diff in the working tree\n                let hunkLine = await this.getDiffForLine(gitUri!, editorLine, undefined);\n                if (hunkLine === undefined) {\n                    // Next, check if we have a diff in the index (staged)\n                    hunkLine = await this.getDiffForLine(\n                        gitUri!,\n                        editorLine,\n                        undefined,\n                        GitService.uncommittedStagedSha\n                    );\n\n                    if (hunkLine !== undefined) {\n                        ref = GitService.uncommittedStagedSha;\n                    }\n                    else {\n                        skip++;\n                    }\n                }\n            }\n            // If line is committed, diff with line ref with previous\n            else {\n                ref = blameLine.commit.sha;\n                fileName = blameLine.commit.fileName || blameLine.commit.originalFileName || fileName;\n                uri = GitUri.resolveToUri(fileName, repoPath);\n                editorLine = blameLine.line.originalLine - 1;\n            }\n\n            const current =\n                skip === 0\n                    ? GitUri.fromFile(fileName, repoPath, ref)\n                    : (await this.getPreviousUri(repoPath, uri, ref, skip - 1, editorLine))!;\n            if (current.sha === GitService.deletedOrMissingSha) return undefined;\n\n            return {\n                current: current,\n                previous: await this.getPreviousUri(repoPath, uri, ref, skip, editorLine)\n            };\n        }\n        else if (GitService.isUncommittedStaged(ref)) {\n            const current =\n                skip === 0\n                    ? GitUri.fromFile(fileName, repoPath, ref)\n                    : (await this.getPreviousUri(repoPath, uri, undefined, skip - 1, editorLine))!;\n            if (current.sha === GitService.deletedOrMissingSha) return undefined;\n\n            return {\n                current: current,\n                previous: await this.getPreviousUri(repoPath, uri, undefined, skip, editorLine)\n            };\n        }\n\n        const current =\n            skip === 0\n                ? GitUri.fromFile(fileName, repoPath, ref)\n                : (await this.getPreviousUri(repoPath, uri, ref, skip - 1, editorLine))!;\n        if (current.sha === GitService.deletedOrMissingSha) return undefined;\n\n        return {\n            current: current,\n            previous: await this.getPreviousUri(repoPath, uri, ref, skip, editorLine)\n        };\n    }\n\n    @log()\n    async getPreviousUri(\n        repoPath: string,\n        uri: Uri,\n        ref?: string,\n        skip: number = 0,\n        editorLine?: number,\n        firstParent: boolean = false\n    ): Promise<GitUri | undefined> {\n        if (ref === GitService.deletedOrMissingSha) return undefined;\n\n        const cc = Logger.getCorrelationContext();\n\n        if (ref === GitService.uncommittedSha) {\n            ref = undefined;\n        }\n\n        const fileName = GitUri.relativeTo(uri, repoPath);\n        // TODO: Add caching\n        let data;\n        try {\n            data = await Git.log__file(repoPath, fileName, ref, {\n                maxCount: skip + 2,\n                firstParent: firstParent,\n                simple: true,\n                startLine: editorLine !== undefined ? editorLine + 1 : undefined\n            });\n        }\n        catch (ex) {\n            // If the line count is invalid just fallback to the most recent commit\n            if (\n                (ref === undefined || GitService.isUncommittedStaged(ref)) &&\n                GitErrors.invalidLineCount.test(ex.message)\n            ) {\n                if (ref === undefined) {\n                    const status = await this.getStatusForFile(repoPath, fileName);\n                    if (status !== undefined && status.indexStatus !== undefined) {\n                        return GitUri.fromFile(fileName, repoPath, GitService.uncommittedStagedSha);\n                    }\n                }\n\n                ref = await Git.log__file_recent(repoPath, fileName);\n                return GitUri.fromFile(fileName, repoPath, ref || GitService.deletedOrMissingSha);\n            }\n\n            Logger.error(ex, cc);\n            throw ex;\n        }\n        if (data == null || data.length === 0) return undefined;\n\n        const [previousRef, file] = GitLogParser.parseSimple(data, skip, ref);\n        // If the previous ref matches the ref we asked for assume we are at the end of the history\n        if (ref !== undefined && ref === previousRef) return undefined;\n\n        return GitUri.fromFile(file || fileName, repoPath, previousRef || GitService.deletedOrMissingSha);\n    }\n\n    @log()\n    async getIncomingActivity(\n        repoPath: string,\n        { maxCount, ...options }: { all?: boolean; branch?: string; maxCount?: number; since?: string } = {}\n    ): Promise<GitReflog | undefined> {\n        const cc = Logger.getCorrelationContext();\n\n        try {\n            const data = await Git.reflog(repoPath, options);\n            if (data === undefined) return undefined;\n\n            const reflog = GitReflogParser.parse(\n                data,\n                repoPath,\n                reflogCommands,\n                maxCount == null ? Container.config.advanced.maxListItems || 0 : maxCount\n            );\n\n            return reflog;\n        }\n        catch (ex) {\n            Logger.error(ex, cc);\n            return undefined;\n        }\n    }\n\n    @log()\n    async getRemotes(\n        repoPath: string | undefined,\n        options: { includeAll?: boolean; sort?: boolean } = {}\n    ): Promise<GitRemote[]> {\n        if (repoPath === undefined) return [];\n\n        const repository = await this.getRepository(repoPath);\n        const remotes = await (repository !== undefined\n            ? repository.getRemotes({ sort: options.sort })\n            : this.getRemotesCore(repoPath, undefined, { sort: options.sort }));\n\n        if (options.includeAll) return remotes;\n\n        return remotes.filter(r => r.provider !== undefined);\n    }\n\n    async getRemotesCore(\n        repoPath: string | undefined,\n        providers?: RemoteProviders,\n        options: { sort?: boolean } = {}\n    ): Promise<GitRemote[]> {\n        if (repoPath === undefined) return [];\n\n        providers =\n            providers ||\n            RemoteProviderFactory.loadProviders(\n                configuration.get<RemotesConfig[] | null | undefined>(configuration.name('remotes').value, null)\n            );\n\n        try {\n            const data = await Git.remote(repoPath);\n            const remotes = GitRemoteParser.parse(data, repoPath, RemoteProviderFactory.factory(providers));\n            if (remotes === undefined) return [];\n\n            if (options.sort) {\n                GitRemote.sort(remotes);\n            }\n\n            return remotes;\n        }\n        catch (ex) {\n            Logger.error(ex);\n            return [];\n        }\n    }\n\n    async getRepoPath(filePath: string, options?: { ref?: string }): Promise<string | undefined>;\n    async getRepoPath(uri: Uri | undefined, options?: { ref?: string }): Promise<string | undefined>;\n    @log<GitService['getRepoPath']>({\n        exit: path => `returned ${path}`\n    })\n    async getRepoPath(\n        filePathOrUri: string | Uri | undefined,\n        options: { ref?: string } = {}\n    ): Promise<string | undefined> {\n        if (filePathOrUri == null) return this.getHighlanderRepoPath();\n        if (GitUri.is(filePathOrUri)) return filePathOrUri.repoPath;\n\n        const cc = Logger.getCorrelationContext();\n\n        // Don't save the tracking info to the cache, because we could be looking in the wrong place (e.g. looking in the root when the file is in a submodule)\n        let repo = await this.getRepository(filePathOrUri, { ...options, skipCacheUpdate: true });\n        if (repo !== undefined) return repo.path;\n\n        const rp = await this.getRepoPathCore(\n            typeof filePathOrUri === 'string' ? filePathOrUri : filePathOrUri.fsPath,\n            false\n        );\n        if (rp === undefined) return undefined;\n\n        // Recheck this._repositoryTree.get(rp) to make sure we haven't already tried adding this due to awaits\n        if (this._repositoryTree.get(rp) !== undefined) return rp;\n\n        const isVslsScheme =\n            typeof filePathOrUri === 'string' ? undefined : filePathOrUri.scheme === DocumentSchemes.Vsls;\n\n        // If this new repo is inside one of our known roots and we we don't already know about, add it\n        const root = this.findRepositoryForPath(this._repositoryTree, rp, isVslsScheme);\n\n        let folder;\n        if (root !== undefined) {\n            // Not sure why I added this for vsls (I can't see a reason for it anymore), but if it is added it will break submodules\n            // rp = root.path;\n            folder = root.folder;\n        }\n        else {\n            folder = workspace.getWorkspaceFolder(GitUri.file(rp, isVslsScheme));\n            if (folder === undefined) {\n                const parts = rp.split(slash);\n                folder = {\n                    uri: GitUri.file(rp, isVslsScheme),\n                    name: parts[parts.length - 1],\n                    index: this._repositoryTree.count()\n                };\n            }\n        }\n\n        Logger.log(cc, `Repository found in '${rp}'`);\n        repo = new Repository(folder, rp, false, this.onAnyRepositoryChanged.bind(this), this._suspended);\n        this._repositoryTree.set(rp, repo);\n\n        // Send a notification that the repositories changed\n        setImmediate(async () => {\n            await this.updateContext(this._repositoryTree);\n\n            this.fireRepositoriesChanged();\n        });\n\n        return rp;\n    }\n\n    private async getRepoPathCore(filePath: string, isDirectory: boolean): Promise<string | undefined> {\n        try {\n            return await Git.rev_parse__show_toplevel(isDirectory ? filePath : paths.dirname(filePath));\n        }\n        catch (ex) {\n            Logger.error(ex);\n            return undefined;\n        }\n    }\n\n    @log()\n    async getRepoPathOrActive(uri: Uri | undefined, editor: TextEditor | undefined) {\n        const repoPath = await this.getRepoPath(uri);\n        if (repoPath) return repoPath;\n\n        return this.getActiveRepoPath(editor);\n    }\n\n    @log()\n    async getRepositories(predicate?: (repo: Repository) => boolean): Promise<Iterable<Repository>> {\n        const repositoryTree = await this.getRepositoryTree();\n\n        const values = repositoryTree.values();\n        return predicate !== undefined ? Iterables.filter(values, predicate) : values;\n    }\n\n    @log()\n    async getOrderedRepositories(): Promise<Repository[]> {\n        const repositories = [...(await this.getRepositories())];\n        if (repositories.length === 0) return repositories;\n\n        return Repository.sort(repositories.filter(r => !r.closed));\n    }\n\n    private async getRepositoryTree(): Promise<TernarySearchTree<Repository>> {\n        if (this._repositoriesLoadingPromise !== undefined) {\n            await this._repositoriesLoadingPromise;\n            this._repositoriesLoadingPromise = undefined;\n        }\n\n        return this._repositoryTree;\n    }\n\n    async getRepository(\n        repoPath: string,\n        options?: { ref?: string; skipCacheUpdate?: boolean }\n    ): Promise<Repository | undefined>;\n    async getRepository(\n        uri: Uri,\n        options?: { ref?: string; skipCacheUpdate?: boolean }\n    ): Promise<Repository | undefined>;\n    async getRepository(\n        repoPathOrUri: string | Uri,\n        options?: { ref?: string; skipCacheUpdate?: boolean }\n    ): Promise<Repository | undefined>;\n    @log<GitService['getRepository']>({\n        exit: repo => `returned ${repo !== undefined ? `${repo.path}` : 'undefined'}`\n    })\n    async getRepository(\n        repoPathOrUri: string | Uri,\n        options: { ref?: string; skipCacheUpdate?: boolean } = {}\n    ): Promise<Repository | undefined> {\n        const repositoryTree = await this.getRepositoryTree();\n\n        let isVslsScheme;\n\n        let path: string;\n        if (typeof repoPathOrUri === 'string') {\n            const repo = repositoryTree.get(repoPathOrUri);\n            if (repo !== undefined) return repo;\n\n            path = repoPathOrUri;\n            isVslsScheme = undefined;\n        }\n        else {\n            if (GitUri.is(repoPathOrUri)) {\n                if (repoPathOrUri.repoPath) {\n                    const repo = repositoryTree.get(repoPathOrUri.repoPath);\n                    if (repo !== undefined) return repo;\n                }\n\n                path = repoPathOrUri.fsPath;\n            }\n            else {\n                path = repoPathOrUri.fsPath;\n            }\n\n            isVslsScheme = repoPathOrUri.scheme === DocumentSchemes.Vsls;\n        }\n\n        const repo = this.findRepositoryForPath(repositoryTree, path, isVslsScheme);\n        if (repo === undefined) return undefined;\n\n        // Make sure the file is tracked in this repo before returning -- it could be from a submodule\n        if (!(await this.isTracked(path, repo.path, options))) return undefined;\n        return repo;\n    }\n\n    private findRepositoryForPath(\n        repositoryTree: TernarySearchTree<Repository>,\n        path: string,\n        isVslsScheme: boolean | undefined\n    ): Repository | undefined {\n        let repo = repositoryTree.findSubstr(path);\n        // If we can't find the repo and we are a guest, check if we are a \"root\" workspace\n        if (repo === undefined && isVslsScheme !== false && Container.vsls.isMaybeGuest) {\n            if (!vslsUriPrefixRegex.test(path)) {\n                path = Strings.normalizePath(path);\n                const vslsPath = `/~0${path[0] === slash ? path : `/${path}`}`;\n                repo = repositoryTree.findSubstr(vslsPath);\n            }\n        }\n        return repo;\n    }\n\n    async getRepositoryCount(): Promise<number> {\n        const repositoryTree = await this.getRepositoryTree();\n        return repositoryTree.count();\n    }\n\n    @log()\n    async getStashList(repoPath: string | undefined): Promise<GitStash | undefined> {\n        if (repoPath === undefined) return undefined;\n\n        const data = await Git.stash__list(repoPath, {\n            similarityThreshold: Container.config.advanced.similarityThreshold\n        });\n        const stash = GitStashParser.parse(data, repoPath);\n        return stash;\n    }\n\n    @log()\n    async getStatusForFile(repoPath: string, fileName: string): Promise<GitStatusFile | undefined> {\n        const porcelainVersion = Git.validateVersion(2, 11) ? 2 : 1;\n\n        const data = await Git.status__file(repoPath, fileName, porcelainVersion, {\n            similarityThreshold: Container.config.advanced.similarityThreshold\n        });\n        const status = GitStatusParser.parse(data, repoPath, porcelainVersion);\n        if (status === undefined || !status.files.length) return undefined;\n\n        return status.files[0];\n    }\n\n    @log()\n    async getStatusForRepo(repoPath: string | undefined): Promise<GitStatus | undefined> {\n        if (repoPath === undefined) return undefined;\n\n        const porcelainVersion = Git.validateVersion(2, 11) ? 2 : 1;\n\n        const data = await Git.status(repoPath, porcelainVersion, {\n            similarityThreshold: Container.config.advanced.similarityThreshold\n        });\n        const status = GitStatusParser.parse(data, repoPath, porcelainVersion);\n        return status;\n    }\n\n    @log()\n    async getTags(\n        repoPath: string | undefined,\n        options: { filter?: (t: GitTag) => boolean; includeRefs?: boolean; sort?: boolean } = {}\n    ): Promise<GitTag[]> {\n        if (repoPath === undefined) return [];\n\n        let tags: GitTag[] | undefined;\n        try {\n            if (options.includeRefs) {\n                tags = this._tagsWithRefsCache.get(repoPath);\n                if (tags !== undefined) return tags;\n\n                const data = await Git.show_ref__tags(repoPath);\n                tags = GitTagParser.parseWithRef(data, repoPath) || [];\n\n                const repo = await this.getRepository(repoPath);\n                if (repo !== undefined && repo.supportsChangeEvents) {\n                    this._tagsWithRefsCache.set(repoPath, tags);\n                }\n\n                return tags;\n            }\n\n            tags = this._tagsCache.get(repoPath);\n            if (tags !== undefined) return tags;\n\n            const data = await Git.tag(repoPath);\n            tags = GitTagParser.parse(data, repoPath) || [];\n\n            const repo = await this.getRepository(repoPath);\n            if (repo !== undefined && repo.supportsChangeEvents) {\n                this._tagsCache.set(repoPath, tags);\n            }\n\n            return tags;\n        }\n        finally {\n            if (options.filter !== undefined) {\n                tags = tags!.filter(options.filter);\n            }\n\n            if (options.sort) {\n                GitTag.sort(tags!);\n            }\n\n            if (options.filter !== undefined) {\n                // eslint-disable-next-line no-unsafe-finally\n                return tags!;\n            }\n        }\n    }\n\n    @log()\n    async getTreeFileForRevision(repoPath: string, fileName: string, ref: string): Promise<GitTree | undefined> {\n        if (repoPath === undefined || fileName == null || fileName.length === 0) return undefined;\n\n        const data = await Git.ls_tree(repoPath, ref, { fileName: fileName });\n        const trees = GitTreeParser.parse(data);\n        return trees === undefined || trees.length === 0 ? undefined : trees[0];\n    }\n\n    @log()\n    async getTreeForRevision(repoPath: string, ref: string): Promise<GitTree[]> {\n        if (repoPath === undefined) return [];\n\n        const data = await Git.ls_tree(repoPath, ref);\n        return GitTreeParser.parse(data) || [];\n    }\n\n    @log()\n    getVersionedFileBuffer(repoPath: string, fileName: string, ref: string) {\n        return Git.show<Buffer>(repoPath, fileName, ref, { encoding: 'buffer' });\n    }\n\n    @log()\n    async getVersionedUri(\n        repoPath: string | undefined,\n        fileName: string,\n        ref: string | undefined\n    ): Promise<Uri | undefined> {\n        if (ref === GitService.deletedOrMissingSha) return undefined;\n\n        if (ref == null || ref.length === 0 || (Git.isUncommitted(ref) && !Git.isUncommittedStaged(ref))) {\n            // Make sure the file exists in the repo\n            let data = await Git.ls_files(repoPath!, fileName);\n            if (data !== undefined) return GitUri.file(fileName);\n\n            // Check if the file exists untracked\n            data = await Git.ls_files(repoPath!, fileName, { untracked: true });\n            if (data !== undefined) return GitUri.file(fileName);\n\n            return undefined;\n        }\n\n        if (Git.isUncommittedStaged(ref)) {\n            return GitUri.git(fileName, repoPath);\n        }\n\n        return GitUri.toRevisionUri(ref, fileName, repoPath!);\n    }\n\n    @log()\n    async getWorkingUri(repoPath: string, uri: Uri) {\n        let fileName = GitUri.relativeTo(uri, repoPath);\n\n        let data;\n        let ref;\n        do {\n            data = await Git.ls_files(repoPath, fileName);\n            if (data !== undefined) {\n                return GitUri.resolveToUri(data, repoPath);\n            }\n\n            // TODO: Add caching\n            // Get the most recent commit for this file name\n            ref = await Git.log__file_recent(repoPath, fileName, {\n                similarityThreshold: Container.config.advanced.similarityThreshold\n            });\n            if (ref === undefined) return undefined;\n\n            // Now check if that commit had any renames\n            data = await Git.log__file(repoPath, '.', ref, {\n                filters: ['R'],\n                maxCount: 1,\n                simple: true\n            });\n            if (data == null || data.length === 0) {\n                return GitUri.resolveToUri(fileName, repoPath);\n            }\n\n            const [renamedRef, renamedFile] = GitLogParser.parseSimpleRenamed(data, fileName);\n            if (renamedRef === undefined || renamedFile === undefined) {\n                return GitUri.resolveToUri(fileName, repoPath);\n            }\n\n            ref = renamedRef;\n            fileName = renamedFile;\n        } while (true);\n    }\n\n    isTrackable(scheme: string): boolean;\n    isTrackable(uri: Uri): boolean;\n    isTrackable(schemeOruri: string | Uri): boolean {\n        const scheme = typeof schemeOruri === 'string' ? schemeOruri : schemeOruri.scheme;\n        return (\n            scheme === DocumentSchemes.File ||\n            scheme === DocumentSchemes.Vsls ||\n            scheme === DocumentSchemes.Git ||\n            scheme === DocumentSchemes.GitLens\n        );\n    }\n\n    async isTracked(\n        fileName: string,\n        repoPath?: string,\n        options?: { ref?: string; skipCacheUpdate?: boolean }\n    ): Promise<boolean>;\n    async isTracked(uri: GitUri): Promise<boolean>;\n    @log<GitService['isTracked']>({\n        exit: tracked => `returned ${tracked}`,\n        singleLine: true\n    })\n    async isTracked(\n        fileNameOrUri: string | GitUri,\n        repoPath?: string,\n        options: { ref?: string; skipCacheUpdate?: boolean } = {}\n    ): Promise<boolean> {\n        if (options.ref === GitService.deletedOrMissingSha) return false;\n\n        let ref = options.ref;\n        let cacheKey: string;\n        let fileName: string;\n        if (typeof fileNameOrUri === 'string') {\n            [fileName, repoPath] = Git.splitPath(fileNameOrUri, repoPath);\n            cacheKey = GitUri.toKey(fileNameOrUri);\n        }\n        else {\n            if (!this.isTrackable(fileNameOrUri)) return false;\n\n            fileName = fileNameOrUri.fsPath;\n            repoPath = fileNameOrUri.repoPath;\n            ref = fileNameOrUri.sha;\n            cacheKey = GitUri.toKey(fileName);\n        }\n\n        if (ref !== undefined) {\n            cacheKey += `:${ref}`;\n        }\n\n        let tracked = this._trackedCache.get(cacheKey);\n        if (tracked !== undefined) {\n            tracked = await tracked;\n\n            return tracked;\n        }\n\n        tracked = this.isTrackedCore(fileName, repoPath === undefined ? emptyStr : repoPath, ref);\n        if (options.skipCacheUpdate) {\n            tracked = await tracked;\n\n            return tracked;\n        }\n\n        this._trackedCache.set(cacheKey, tracked);\n        tracked = await tracked;\n        this._trackedCache.set(cacheKey, tracked);\n\n        return tracked;\n    }\n\n    private async isTrackedCore(fileName: string, repoPath: string, ref?: string) {\n        if (ref === GitService.deletedOrMissingSha) return false;\n\n        try {\n            // Even if we have a ref, check first to see if the file exists (that way the cache will be better reused)\n            let tracked = Boolean(await Git.ls_files(repoPath === undefined ? emptyStr : repoPath, fileName));\n            if (!tracked && ref !== undefined) {\n                tracked = Boolean(\n                    await Git.ls_files(repoPath === undefined ? emptyStr : repoPath, fileName, { ref: ref })\n                );\n                // If we still haven't found this file, make sure it wasn't deleted in that ref (i.e. check the previous)\n                if (!tracked) {\n                    tracked = Boolean(\n                        await Git.ls_files(repoPath === undefined ? emptyStr : repoPath, fileName, {\n                            ref: `${ref}^`\n                        })\n                    );\n                }\n            }\n            return tracked;\n        }\n        catch (ex) {\n            Logger.error(ex);\n            return false;\n        }\n    }\n\n    @log()\n    async getDiffTool(repoPath?: string) {\n        return (\n            (await Git.config__get('diff.guitool', repoPath, { local: true })) ||\n            Git.config__get('diff.tool', repoPath, { local: true })\n        );\n    }\n\n    @log()\n    async openDiffTool(\n        repoPath: string,\n        uri: Uri,\n        options: { ref1?: string; ref2?: string; staged?: boolean; tool?: string } = {}\n    ) {\n        if (!options.tool) {\n            const cc = Logger.getCorrelationContext();\n\n            options.tool = await this.getDiffTool(repoPath);\n            if (options.tool === undefined) throw new Error('No diff tool found');\n\n            Logger.log(cc, `Using tool=${options.tool}`);\n        }\n\n        const { tool, ...opts } = options;\n        return Git.difftool(repoPath, uri.fsPath, tool, opts);\n    }\n\n    @log()\n    async openDirectoryDiff(repoPath: string, ref1: string, ref2?: string, tool?: string) {\n        if (!tool) {\n            const cc = Logger.getCorrelationContext();\n\n            tool = await this.getDiffTool(repoPath);\n            if (tool === undefined) throw new Error('No diff tool found');\n\n            Logger.log(cc, `Using tool=${tool}`);\n        }\n\n        return Git.difftool__dir_diff(repoPath, tool, ref1, ref2);\n    }\n\n    @log()\n    async resolveReference(repoPath: string, ref: string, uri?: Uri) {\n        if (ref == null || ref.length === 0 || ref === GitService.deletedOrMissingSha) return ref;\n\n        if (uri == null) {\n            if (Git.isSha(ref) || !Git.isShaLike(ref) || ref.endsWith('^3')) return ref;\n\n            return (await Git.rev_parse(repoPath, ref)) || ref;\n        }\n\n        const fileName = Strings.normalizePath(paths.relative(repoPath, uri.fsPath));\n\n        const match = Git.shaParentRegex.exec(ref);\n        if (match != null) {\n            const parentRef = await Git.log__file_recent(repoPath, fileName, { ref: ref });\n            if (parentRef !== undefined) return parentRef;\n        }\n\n        const ensuredRef = await Git.cat_file__resolve(repoPath, fileName, ref);\n        if (ensuredRef === undefined) return ref;\n\n        return ensuredRef;\n    }\n\n    @log()\n    validateReference(repoPath: string, ref: string) {\n        return Git.cat_file__validate(repoPath, ref);\n    }\n\n    stageFile(repoPath: string, fileName: string): Promise<string>;\n    stageFile(repoPath: string, uri: Uri): Promise<string>;\n    @log()\n    stageFile(repoPath: string, fileNameOrUri: string | Uri): Promise<string> {\n        return Git.add(\n            repoPath,\n            typeof fileNameOrUri === 'string' ? fileNameOrUri : Git.splitPath(fileNameOrUri.fsPath, repoPath)[0]\n        );\n    }\n\n    stageDirectory(repoPath: string, directory: string): Promise<string>;\n    stageDirectory(repoPath: string, uri: Uri): Promise<string>;\n    @log()\n    stageDirectory(repoPath: string, directoryOrUri: string | Uri): Promise<string> {\n        return Git.add(\n            repoPath,\n            typeof directoryOrUri === 'string' ? directoryOrUri : Git.splitPath(directoryOrUri.fsPath, repoPath)[0]\n        );\n    }\n\n    unStageFile(repoPath: string, fileName: string): Promise<string>;\n    unStageFile(repoPath: string, uri: Uri): Promise<string>;\n    @log()\n    unStageFile(repoPath: string, fileNameOrUri: string | Uri): Promise<string> {\n        return Git.reset(\n            repoPath,\n            typeof fileNameOrUri === 'string' ? fileNameOrUri : Git.splitPath(fileNameOrUri.fsPath, repoPath)[0]\n        );\n    }\n\n    unStageDirectory(repoPath: string, directory: string): Promise<string>;\n    unStageDirectory(repoPath: string, uri: Uri): Promise<string>;\n    @log()\n    unStageDirectory(repoPath: string, directoryOrUri: string | Uri): Promise<string> {\n        return Git.reset(\n            repoPath,\n            typeof directoryOrUri === 'string' ? directoryOrUri : Git.splitPath(directoryOrUri.fsPath, repoPath)[0]\n        );\n    }\n\n    @log()\n    stashApply(repoPath: string, stashName: string, deleteAfter: boolean = false) {\n        return Git.stash__apply(repoPath, stashName, deleteAfter);\n    }\n\n    @log()\n    stashDelete(repoPath: string, stashName: string) {\n        return Git.stash__delete(repoPath, stashName);\n    }\n\n    @log()\n    stashSave(repoPath: string, message?: string, uris?: Uri[]) {\n        if (uris === undefined) return Git.stash__save(repoPath, message);\n\n        GitService.ensureGitVersion('2.13.2', 'Stashing individual files');\n\n        const pathspecs = uris.map(u => Git.splitPath(u.fsPath, repoPath)[0]);\n        return Git.stash__push(repoPath, pathspecs, message);\n    }\n\n    static compareGitVersion(version: string) {\n        return Versions.compare(Versions.fromString(this.getGitVersion()), Versions.fromString(version));\n    }\n\n    static ensureGitVersion(version: string, feature: string): void {\n        const gitVersion = this.getGitVersion();\n        if (Versions.compare(Versions.fromString(gitVersion), Versions.fromString(version)) === -1) {\n            throw new Error(\n                `${feature} requires a newer version of Git (>= ${version}) than is currently installed (${gitVersion}). Please install a more recent version of Git to use this GitLens feature.`\n            );\n        }\n    }\n\n    @log()\n    static async getBuiltInGitApi(): Promise<BuiltInGitApi | undefined> {\n        try {\n            const extension = extensions.getExtension('vscode.git') as Extension<GitExtension>;\n            if (extension !== undefined) {\n                const gitExtension = extension.isActive ? extension.exports : await extension.activate();\n\n                return gitExtension.getAPI(1);\n            }\n        }\n        catch {}\n\n        return undefined;\n    }\n\n    static getEncoding(repoPath: string, fileName: string): string;\n    static getEncoding(uri: Uri): string;\n    static getEncoding(repoPathOrUri: string | Uri, fileName?: string): string {\n        const uri = typeof repoPathOrUri === 'string' ? GitUri.resolveToUri(fileName!, repoPathOrUri) : repoPathOrUri;\n        return Git.getEncoding(configuration.getAny<string>('files.encoding', uri));\n    }\n\n    static deletedOrMissingSha = Git.deletedOrMissingSha;\n    static getGitPath = Git.getGitPath;\n    static getGitVersion = Git.getGitVersion;\n    static isSha = Git.isSha;\n    static isShaLike = Git.isShaLike;\n    static isShaParent = Git.isShaParent;\n    static isUncommitted = Git.isUncommitted;\n    static isUncommittedStaged = Git.isUncommittedStaged;\n    static uncommittedSha = Git.uncommittedSha;\n    static uncommittedStagedSha = Git.uncommittedStagedSha;\n\n    static shortenSha(\n        ref: string | undefined,\n        {\n            deletedOrMissing = '(deleted)',\n            ...strings\n        }: { deletedOrMissing?: string; uncommitted?: string; uncommittedStaged?: string; working?: string } = {}\n    ) {\n        if (ref === GitService.deletedOrMissingSha) return deletedOrMissing;\n\n        return Git.shortenSha(ref, strings);\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport {\n    commands,\n    Disposable,\n    ExtensionContext,\n    SourceControlResourceGroup,\n    SourceControlResourceState,\n    TextDocumentShowOptions,\n    TextEditor,\n    TextEditorEdit,\n    Uri,\n    ViewColumn,\n    window,\n    workspace\n} from 'vscode';\nimport { BuiltInCommands, DocumentSchemes, ImageMimetypes } from '../constants';\nimport { Container } from '../container';\nimport { GitBranch, GitCommit, GitContributor, GitFile, GitRemote, GitUri, Repository } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { CommandQuickPickItem, RepositoriesQuickPick } from '../quickpicks';\n// import { Telemetry } from '../telemetry';\nimport { ViewNode, ViewRefNode } from '../views/nodes';\n\nexport enum Commands {\n    ClearFileAnnotations = 'gitlens.clearFileAnnotations',\n    CloseUnchangedFiles = 'gitlens.closeUnchangedFiles',\n    ComputingFileAnnotations = 'gitlens.computingFileAnnotations',\n    CopyMessageToClipboard = 'gitlens.copyMessageToClipboard',\n    CopyRemoteFileUrlToClipboard = 'gitlens.copyRemoteFileUrlToClipboard',\n    CopyShaToClipboard = 'gitlens.copyShaToClipboard',\n    DiffDirectory = 'gitlens.diffDirectory',\n    DiffDirectoryWithHead = 'gitlens.diffDirectoryWithHead',\n    DiffHeadWith = 'gitlens.diffHeadWith',\n    // DEPRECATED\n    DiffHeadWithBranch = 'gitlens.diffHeadWithBranch',\n    DiffWorkingWith = 'gitlens.diffWorkingWith',\n    // DEPRECATED\n    DiffWorkingWithBranch = 'gitlens.diffWorkingWithBranch',\n    ExternalDiffAll = 'gitlens.externalDiffAll',\n    DiffWith = 'gitlens.diffWith',\n    // DEPRECATED\n    DiffWithBranch = 'gitlens.diffWithBranch',\n    DiffWithRef = 'gitlens.diffWithRef',\n    DiffWithNext = 'gitlens.diffWithNext',\n    DiffWithNextInDiff = 'gitlens.diffWithNextInDiff',\n    DiffWithPrevious = 'gitlens.diffWithPrevious',\n    DiffWithPreviousInDiff = 'gitlens.diffWithPreviousInDiff',\n    DiffLineWithPrevious = 'gitlens.diffLineWithPrevious',\n    DiffWithRevision = 'gitlens.diffWithRevision',\n    DiffWithWorking = 'gitlens.diffWithWorking',\n    DiffWithWorkingInDiff = 'gitlens.diffWithWorkingInDiff',\n    DiffLineWithWorking = 'gitlens.diffLineWithWorking',\n    ExternalDiff = 'gitlens.externalDiff',\n    FetchRepositories = 'gitlens.fetchRepositories',\n    InviteToLiveShare = 'gitlens.inviteToLiveShare',\n    OpenChangedFiles = 'gitlens.openChangedFiles',\n    OpenBranchesInRemote = 'gitlens.openBranchesInRemote',\n    OpenBranchInRemote = 'gitlens.openBranchInRemote',\n    OpenCommitInRemote = 'gitlens.openCommitInRemote',\n    OpenFileInRemote = 'gitlens.openFileInRemote',\n    OpenFileRevision = 'gitlens.openFileRevision',\n    OpenFileRevisionFrom = 'gitlens.openFileRevisionFrom',\n    // DEPRECATED\n    OpenFileRevisionFromBranch = 'gitlens.openFileRevisionFromBranch',\n    OpenInRemote = 'gitlens.openInRemote',\n    OpenRepoInRemote = 'gitlens.openRepoInRemote',\n    OpenWorkingFile = 'gitlens.openWorkingFile',\n    PullRepositories = 'gitlens.pullRepositories',\n    PushRepositories = 'gitlens.pushRepositories',\n    GitCommands = 'gitlens.gitCommands',\n    ResetSuppressedWarnings = 'gitlens.resetSuppressedWarnings',\n    ShowCommitInView = 'gitlens.showCommitInView',\n    SearchCommits = 'gitlens.showCommitSearch',\n    SearchCommitsInView = 'gitlens.views.search.searchCommits',\n    ShowCompareView = 'gitlens.showCompareView',\n    ShowFileHistoryView = 'gitlens.showFileHistoryView',\n    ShowFileHistoryInView = 'gitlens.showFileHistoryInView',\n    ShowLineHistoryView = 'gitlens.showLineHistoryView',\n    ShowLastQuickPick = 'gitlens.showLastQuickPick',\n    ShowQuickBranchHistory = 'gitlens.showQuickBranchHistory',\n    ShowQuickCommitDetails = 'gitlens.showQuickCommitDetails',\n    ShowQuickCommitFileDetails = 'gitlens.showQuickCommitFileDetails',\n    ShowQuickCurrentBranchHistory = 'gitlens.showQuickRepoHistory',\n    ShowQuickFileHistory = 'gitlens.showQuickFileHistory',\n    ShowQuickRepoStatus = 'gitlens.showQuickRepoStatus',\n    ShowQuickRevisionDetails = 'gitlens.showQuickRevisionDetails',\n    ShowQuickStashList = 'gitlens.showQuickStashList',\n    ShowRepositoriesView = 'gitlens.showRepositoriesView',\n    ShowSearchView = 'gitlens.showSearchView',\n    ShowHistoryPage = 'gitlens.showHistoryPage',\n    ShowSettingsPage = 'gitlens.showSettingsPage',\n    ShowSettingsPageAndJumpToCompareView = 'gitlens.showSettingsPage#compare-view',\n    ShowSettingsPageAndJumpToFileHistoryView = 'gitlens.showSettingsPage#file-history-view',\n    ShowSettingsPageAndJumpToLineHistoryView = 'gitlens.showSettingsPage#line-history-view',\n    ShowSettingsPageAndJumpToRepositoriesView = 'gitlens.showSettingsPage#repositories-view',\n    ShowSettingsPageAndJumpToSearchCommitsView = 'gitlens.showSettingsPage#search-commits-view',\n    ShowWelcomePage = 'gitlens.showWelcomePage',\n    StashApply = 'gitlens.stashApply',\n    StashDelete = 'gitlens.stashDelete',\n    StashSave = 'gitlens.stashSave',\n    StashSaveFiles = 'gitlens.stashSaveFiles',\n    SupportGitLens = 'gitlens.supportGitLens',\n    SwitchMode = 'gitlens.switchMode',\n    ToggleCodeLens = 'gitlens.toggleCodeLens',\n    ToggleFileBlame = 'gitlens.toggleFileBlame',\n    ToggleFileHeatmap = 'gitlens.toggleFileHeatmap',\n    ToggleFileRecentChanges = 'gitlens.toggleFileRecentChanges',\n    ToggleLineBlame = 'gitlens.toggleLineBlame',\n    ToggleReviewMode = 'gitlens.toggleReviewMode',\n    ToggleZenMode = 'gitlens.toggleZenMode',\n    ViewsOpenDirectoryDiff = 'gitlens.views.openDirectoryDiff',\n    ViewsOpenDirectoryDiffWithWorking = 'gitlens.views.openDirectoryDiffWithWorking'\n}\n\ninterface CommandConstructor {\n    new (): Command;\n}\n\nconst registrableCommands: CommandConstructor[] = [];\n\nexport function command(): ClassDecorator {\n    return (target: any) => {\n        registrableCommands.push(target);\n    };\n}\n\nexport function registerCommands(context: ExtensionContext): void {\n    for (const c of registrableCommands) {\n        context.subscriptions.push(new c());\n    }\n}\n\nexport function getCommandUri(uri?: Uri, editor?: TextEditor): Uri | undefined {\n    if (uri instanceof Uri) return uri;\n    if (editor == null) return undefined;\n\n    const document = editor.document;\n    if (document == null) return undefined;\n\n    return document.uri;\n}\n\nexport async function getRepoPathOrActiveOrPrompt(\n    uri: Uri | undefined,\n    editor: TextEditor | undefined,\n    placeholder: string,\n    goBackCommand?: CommandQuickPickItem\n) {\n    let repoPath = await Container.git.getRepoPathOrActive(uri, editor);\n    if (!repoPath) {\n        const pick = await RepositoriesQuickPick.show(placeholder, goBackCommand);\n        if (pick instanceof CommandQuickPickItem) {\n            await pick.execute();\n            return undefined;\n        }\n\n        if (pick === undefined) {\n            if (goBackCommand !== undefined) {\n                await goBackCommand.execute();\n            }\n            return undefined;\n        }\n\n        repoPath = pick.repoPath;\n    }\n    return repoPath;\n}\n\nexport async function getRepoPathOrPrompt(placeholder: string, goBackCommand?: CommandQuickPickItem, uri?: Uri) {\n    let repoPath = await Container.git.getRepoPath(uri);\n    if (!repoPath) {\n        const pick = await RepositoriesQuickPick.show(placeholder, goBackCommand);\n        if (pick instanceof CommandQuickPickItem) {\n            await pick.execute();\n            return undefined;\n        }\n\n        if (pick === undefined) {\n            if (goBackCommand !== undefined) {\n                await goBackCommand.execute();\n            }\n            return undefined;\n        }\n\n        repoPath = pick.repoPath;\n    }\n    return repoPath;\n}\n\nexport interface CommandContextParsingOptions {\n    editor: boolean;\n    uri: boolean;\n}\n\nexport interface CommandBaseContext {\n    command: string;\n    editor?: TextEditor;\n    uri?: Uri;\n}\n\nexport interface CommandScmGroupsContext extends CommandBaseContext {\n    type: 'scm-groups';\n    scmResourceGroups: SourceControlResourceGroup[];\n}\n\nexport interface CommandScmStatesContext extends CommandBaseContext {\n    type: 'scm-states';\n    scmResourceStates: SourceControlResourceState[];\n}\n\nexport interface CommandUnknownContext extends CommandBaseContext {\n    type: 'unknown';\n}\n\nexport interface CommandUriContext extends CommandBaseContext {\n    type: 'uri';\n}\n\nexport interface CommandUrisContext extends CommandBaseContext {\n    type: 'uris';\n    uris: Uri[];\n}\n\n// export interface CommandViewContext extends CommandBaseContext {\n//     type: 'view';\n// }\n\nexport interface CommandViewItemContext extends CommandBaseContext {\n    type: 'viewItem';\n    node: ViewNode;\n}\n\nexport function isCommandViewContextWithBranch(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { branch: GitBranch } } {\n    if (context.type !== 'viewItem') return false;\n\n    return GitBranch.is((context.node as ViewNode & { branch: GitBranch }).branch);\n}\n\nexport function isCommandViewContextWithCommit<T extends GitCommit>(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { commit: T } } {\n    if (context.type !== 'viewItem') return false;\n\n    return GitCommit.is((context.node as ViewNode & { commit: GitCommit }).commit);\n}\n\nexport function isCommandViewContextWithContributor(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { contributor: GitContributor } } {\n    if (context.type !== 'viewItem') return false;\n\n    return GitContributor.is((context.node as ViewNode & { contributor: GitContributor }).contributor);\n}\n\nexport function isCommandViewContextWithFile(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { file: GitFile; repoPath: string } } {\n    if (context.type !== 'viewItem') return false;\n\n    const node = context.node as ViewNode & { file: GitFile; repoPath: string };\n    return node.file !== undefined && (node.file.repoPath !== undefined || node.repoPath !== undefined);\n}\n\nexport function isCommandViewContextWithFileCommit(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { commit: GitCommit; file: GitFile; repoPath: string } } {\n    if (context.type !== 'viewItem') return false;\n\n    const node = context.node as ViewNode & { commit: GitCommit; file: GitFile; repoPath: string };\n    return (\n        node.file !== undefined &&\n        GitCommit.is(node.commit) &&\n        (node.file.repoPath !== undefined || node.repoPath !== undefined)\n    );\n}\n\nexport function isCommandViewContextWithFileRefs(\n    context: CommandContext\n): context is CommandViewItemContext & {\n    node: ViewNode & { file: GitFile; ref1: string; ref2: string; repoPath: string };\n} {\n    if (context.type !== 'viewItem') return false;\n\n    const node = context.node as ViewNode & { file: GitFile; ref1: string; ref2: string; repoPath: string };\n    return (\n        node.file !== undefined &&\n        node.ref1 !== undefined &&\n        node.ref2 !== undefined &&\n        (node.file.repoPath !== undefined || node.repoPath !== undefined)\n    );\n}\n\nexport function isCommandViewContextWithRef(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { ref: string } } {\n    return context.type === 'viewItem' && context.node instanceof ViewRefNode;\n}\n\nexport function isCommandViewContextWithRemote(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { remote: GitRemote } } {\n    if (context.type !== 'viewItem') return false;\n\n    return GitRemote.is((context.node as ViewNode & { remote: GitRemote }).remote);\n}\n\nexport function isCommandViewContextWithRepo(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { repo: Repository } } {\n    if (context.type !== 'viewItem') return false;\n\n    return (context.node as ViewNode & { repo?: Repository }).repo instanceof Repository;\n}\n\nexport function isCommandViewContextWithRepoPath(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { repoPath: string } } {\n    if (context.type !== 'viewItem') return false;\n\n    return typeof (context.node as ViewNode & { repoPath?: string }).repoPath === 'string';\n}\n\nexport type CommandContext =\n    | CommandScmGroupsContext\n    | CommandScmStatesContext\n    | CommandUnknownContext\n    | CommandUriContext\n    | CommandUrisContext\n    // | CommandViewContext\n    | CommandViewItemContext;\n\nfunction isScmResourceGroup(group: any): group is SourceControlResourceGroup {\n    if (group == null) return false;\n\n    return (\n        (group as SourceControlResourceGroup).id !== undefined &&\n        (group.handle !== undefined ||\n            (group as SourceControlResourceGroup).label !== undefined ||\n            (group as SourceControlResourceGroup).resourceStates !== undefined)\n    );\n}\n\nfunction isScmResourceState(state: any): state is SourceControlResourceState {\n    if (state == null) return false;\n\n    return (state as SourceControlResourceState).resourceUri != null;\n}\n\nfunction isTextEditor(editor: any): editor is TextEditor {\n    if (editor == null) return false;\n\n    return (\n        editor.id !== undefined &&\n        ((editor as TextEditor).edit !== undefined || (editor as TextEditor).document !== undefined)\n    );\n}\n\nexport abstract class Command implements Disposable {\n    static getMarkdownCommandArgsCore<T>(command: Commands, args: T): string {\n        return `command:${command}?${encodeURIComponent(JSON.stringify(args))}`;\n    }\n\n    protected readonly contextParsingOptions: CommandContextParsingOptions = { editor: false, uri: false };\n\n    private _disposable: Disposable;\n\n    constructor(command: Commands | Commands[]) {\n        if (typeof command === 'string') {\n            this._disposable = commands.registerCommand(\n                command,\n                (...args: any[]) => this._execute(command, ...args),\n                this\n            );\n\n            return;\n        }\n\n        const subscriptions = command.map(cmd =>\n            commands.registerCommand(cmd, (...args: any[]) => this._execute(cmd, ...args), this)\n        );\n        this._disposable = Disposable.from(...subscriptions);\n    }\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n    }\n\n    protected preExecute(context: CommandContext, ...args: any[]): Promise<any> {\n        return this.execute(...args);\n    }\n\n    abstract execute(...args: any[]): any;\n\n    protected _execute(command: string, ...args: any[]): any {\n        // Telemetry.trackEvent(command);\n\n        const [context, rest] = Command.parseContext(command, { ...this.contextParsingOptions }, ...args);\n        return this.preExecute(context, ...rest);\n    }\n\n    private static parseContext(\n        command: string,\n        options: CommandContextParsingOptions,\n        ...args: any[]\n    ): [CommandContext, any[]] {\n        let editor: TextEditor | undefined = undefined;\n\n        let firstArg = args[0];\n        if (options.editor && (firstArg == null || isTextEditor(firstArg))) {\n            editor = firstArg;\n            args = args.slice(1);\n            firstArg = args[0];\n        }\n\n        if (options.uri && (firstArg == null || firstArg instanceof Uri)) {\n            const [uri, ...rest] = args as [Uri, any];\n            if (uri !== undefined) {\n                const uris = rest[0];\n                if (uris != null && Array.isArray(uris) && uris.length !== 0 && uris[0] instanceof Uri) {\n                    return [{ command: command, type: 'uris', editor: editor, uri: uri, uris: uris }, rest.slice(1)];\n                }\n                return [{ command: command, type: 'uri', editor: editor, uri: uri }, rest];\n            }\n\n            args = args.slice(1);\n        }\n\n        if (firstArg instanceof ViewNode) {\n            const [node, ...rest] = args as [ViewNode, any];\n            return [{ command: command, type: 'viewItem', node: node, uri: node.uri }, rest];\n        }\n\n        if (isScmResourceState(firstArg)) {\n            const states = [];\n            let count = 0;\n            for (const arg of args) {\n                if (!isScmResourceState(arg)) break;\n\n                count++;\n                states.push(arg);\n            }\n\n            return [\n                { command: command, type: 'scm-states', scmResourceStates: states, uri: states[0].resourceUri },\n                args.slice(count)\n            ];\n        }\n\n        if (isScmResourceGroup(firstArg)) {\n            const groups = [];\n            let count = 0;\n            for (const arg of args) {\n                if (!isScmResourceGroup(arg)) break;\n\n                count++;\n                groups.push(arg);\n            }\n\n            return [{ command: command, type: 'scm-groups', scmResourceGroups: groups }, args.slice(count)];\n        }\n\n        return [{ command: command, type: 'unknown', editor: editor }, args];\n    }\n}\n\nexport abstract class ActiveEditorCommand extends Command {\n    protected readonly contextParsingOptions: CommandContextParsingOptions = { editor: true, uri: true };\n\n    constructor(command: Commands | Commands[]) {\n        super(command);\n    }\n\n    protected preExecute(context: CommandContext, ...args: any[]): Promise<any> {\n        return this.execute(context.editor, context.uri, ...args);\n    }\n\n    protected _execute(command: string, ...args: any[]): any {\n        return super._execute(command, window.activeTextEditor, ...args);\n    }\n\n    abstract execute(editor?: TextEditor, ...args: any[]): any;\n}\n\nlet lastCommand: { command: string; args: any[] } | undefined = undefined;\nexport function getLastCommand() {\n    return lastCommand;\n}\n\nexport abstract class ActiveEditorCachedCommand extends ActiveEditorCommand {\n    constructor(command: Commands | Commands[]) {\n        super(command);\n    }\n\n    protected _execute(command: string, ...args: any[]): any {\n        lastCommand = {\n            command: command,\n            args: args\n        };\n        return super._execute(command, ...args);\n    }\n\n    abstract execute(editor: TextEditor, ...args: any[]): any;\n}\n\nexport abstract class EditorCommand implements Disposable {\n    private _disposable: Disposable;\n\n    constructor(command: Commands | Commands[]) {\n        if (!Array.isArray(command)) {\n            command = [command];\n        }\n\n        const subscriptions = [];\n        for (const cmd of command) {\n            subscriptions.push(\n                commands.registerTextEditorCommand(\n                    cmd,\n                    (editor: TextEditor, edit: TextEditorEdit, ...args: any[]) =>\n                        this.executeCore(cmd, editor, edit, ...args),\n                    this\n                )\n            );\n        }\n        this._disposable = Disposable.from(...subscriptions);\n    }\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n    }\n\n    private executeCore(command: string, editor: TextEditor, edit: TextEditorEdit, ...args: any[]): any {\n        // Telemetry.trackEvent(command);\n        return this.execute(editor, edit, ...args);\n    }\n\n    abstract execute(editor: TextEditor, edit: TextEditorEdit, ...args: any[]): any;\n}\n\nexport async function openEditor(\n    uri: Uri,\n    options: TextDocumentShowOptions & { rethrow?: boolean } = {}\n): Promise<TextEditor | undefined> {\n    const { rethrow, ...opts } = options;\n    try {\n        if (GitUri.is(uri)) {\n            uri = uri.documentUri();\n        }\n\n        if (uri.scheme === DocumentSchemes.GitLens && ImageMimetypes[paths.extname(uri.fsPath)]) {\n            await commands.executeCommand(BuiltInCommands.Open, uri);\n\n            return undefined;\n        }\n\n        const document = await workspace.openTextDocument(uri);\n        return window.showTextDocument(document, {\n            preserveFocus: false,\n            preview: true,\n            viewColumn: ViewColumn.Active,\n            ...opts\n        });\n    }\n    catch (ex) {\n        const msg = ex.toString();\n        if (msg.includes('File seems to be binary and cannot be opened as text')) {\n            await commands.executeCommand(BuiltInCommands.Open, uri);\n\n            return undefined;\n        }\n\n        if (rethrow) throw ex;\n\n        Logger.error(ex, 'openEditor');\n        return undefined;\n    }\n}\n\nexport function openWorkspace(uri: Uri, name: string, options: { openInNewWindow?: boolean } = {}) {\n    if (options.openInNewWindow) {\n        commands.executeCommand(BuiltInCommands.OpenFolder, uri, true);\n\n        return true;\n    }\n\n    return workspace.updateWorkspaceFolders(\n        workspace.workspaceFolders !== undefined ? workspace.workspaceFolders.length : 0,\n        null,\n        { uri: uri, name: name }\n    );\n}\n","'use strict';\nimport { ExtensionContext, OutputChannel, Uri, window } from 'vscode';\nimport { extensionOutputChannelName } from './constants';\nimport { getCorrelationContext } from './system';\n// import { Telemetry } from './telemetry';\n\nconst emptyStr = '';\n\nexport enum TraceLevel {\n    Silent = 'silent',\n    Errors = 'errors',\n    Verbose = 'verbose',\n    Debug = 'debug'\n}\n\nconst ConsolePrefix = `[${extensionOutputChannelName}]`;\n\nconst isDebuggingRegex = /\\bgitlens\\b/i;\n\nexport interface LogCorrelationContext {\n    readonly correlationId?: number;\n    readonly prefix: string;\n    exitDetails?: string;\n}\n\nexport class Logger {\n    static output: OutputChannel | undefined;\n    static customLoggableFn: ((o: object) => string | undefined) | undefined;\n\n    static configure(context: ExtensionContext, level: TraceLevel, loggableFn?: (o: any) => string | undefined) {\n        this.customLoggableFn = loggableFn;\n\n        this.level = level;\n    }\n\n    private static _level: TraceLevel = TraceLevel.Silent;\n    static get level() {\n        return this._level;\n    }\n    static set level(value: TraceLevel) {\n        this._level = value;\n        if (value === TraceLevel.Silent) {\n            if (this.output !== undefined) {\n                this.output.dispose();\n                this.output = undefined;\n            }\n        }\n        else {\n            this.output = this.output || window.createOutputChannel(extensionOutputChannelName);\n        }\n    }\n\n    static debug(message: string, ...params: any[]): void;\n    static debug(context: LogCorrelationContext | undefined, message: string, ...params: any[]): void;\n    static debug(contextOrMessage: LogCorrelationContext | string | undefined, ...params: any[]): void {\n        if (this.level !== TraceLevel.Debug && !Logger.isDebugging) return;\n\n        let message;\n        if (typeof contextOrMessage === 'string') {\n            message = contextOrMessage;\n        }\n        else {\n            message = params.shift();\n\n            if (contextOrMessage !== undefined) {\n                message = `${contextOrMessage.prefix} ${message || emptyStr}`;\n            }\n        }\n\n        if (Logger.isDebugging) {\n            console.log(this.timestamp, ConsolePrefix, message || emptyStr, ...params);\n        }\n\n        if (this.output !== undefined && this.level === TraceLevel.Debug) {\n            this.output.appendLine(`${this.timestamp} ${message || emptyStr}${this.toLoggableParams(true, params)}`);\n        }\n    }\n\n    static error(ex: Error, message?: string, ...params: any[]): void;\n    static error(ex: Error, context?: LogCorrelationContext, message?: string, ...params: any[]): void;\n    static error(ex: Error, contextOrMessage: LogCorrelationContext | string | undefined, ...params: any[]): void {\n        if (this.level === TraceLevel.Silent && !Logger.isDebugging) return;\n\n        let message;\n        if (contextOrMessage === undefined || typeof contextOrMessage === 'string') {\n            message = contextOrMessage;\n        }\n        else {\n            message = params.shift();\n\n            if (contextOrMessage !== undefined) {\n                message = `${contextOrMessage.prefix} ${message || emptyStr}`;\n            }\n        }\n\n        if (message === undefined) {\n            const stack = ex.stack;\n            if (stack) {\n                const match = /.*\\s*?at\\s(.+?)\\s/.exec(stack);\n                if (match != null) {\n                    message = match[1];\n                }\n            }\n        }\n\n        if (Logger.isDebugging) {\n            console.error(this.timestamp, ConsolePrefix, message || emptyStr, ...params, ex);\n        }\n\n        if (this.output !== undefined && this.level !== TraceLevel.Silent) {\n            this.output.appendLine(\n                `${this.timestamp} ${message || emptyStr}${this.toLoggableParams(false, params)}\\n${ex}`\n            );\n        }\n\n        // Telemetry.trackException(ex);\n    }\n\n    static getCorrelationContext() {\n        return getCorrelationContext();\n    }\n\n    static log(message: string, ...params: any[]): void;\n    static log(context: LogCorrelationContext | undefined, message: string, ...params: any[]): void;\n    static log(contextOrMessage: LogCorrelationContext | string | undefined, ...params: any[]): void {\n        if (this.level !== TraceLevel.Verbose && this.level !== TraceLevel.Debug && !Logger.isDebugging) {\n            return;\n        }\n\n        let message;\n        if (typeof contextOrMessage === 'string') {\n            message = contextOrMessage;\n        }\n        else {\n            message = params.shift();\n\n            if (contextOrMessage !== undefined) {\n                message = `${contextOrMessage.prefix} ${message || emptyStr}`;\n            }\n        }\n\n        if (Logger.isDebugging) {\n            console.log(this.timestamp, ConsolePrefix, message || emptyStr, ...params);\n        }\n\n        if (this.output !== undefined && (this.level === TraceLevel.Verbose || this.level === TraceLevel.Debug)) {\n            this.output.appendLine(`${this.timestamp} ${message || emptyStr}${this.toLoggableParams(false, params)}`);\n        }\n    }\n\n    static logWithDebugParams(message: string, ...params: any[]): void;\n    static logWithDebugParams(context: LogCorrelationContext | undefined, message: string, ...params: any[]): void;\n    static logWithDebugParams(contextOrMessage: LogCorrelationContext | string | undefined, ...params: any[]): void {\n        if (this.level !== TraceLevel.Verbose && this.level !== TraceLevel.Debug && !Logger.isDebugging) {\n            return;\n        }\n\n        let message;\n        if (typeof contextOrMessage === 'string') {\n            message = contextOrMessage;\n        }\n        else {\n            message = params.shift();\n\n            if (contextOrMessage !== undefined) {\n                message = `${contextOrMessage.prefix} ${message || emptyStr}`;\n            }\n        }\n\n        if (Logger.isDebugging) {\n            console.log(this.timestamp, ConsolePrefix, message || emptyStr, ...params);\n        }\n\n        if (this.output !== undefined && (this.level === TraceLevel.Verbose || this.level === TraceLevel.Debug)) {\n            this.output.appendLine(`${this.timestamp} ${message || emptyStr}${this.toLoggableParams(true, params)}`);\n        }\n    }\n\n    static warn(message: string, ...params: any[]): void;\n    static warn(context: LogCorrelationContext | undefined, message: string, ...params: any[]): void;\n    static warn(contextOrMessage: LogCorrelationContext | string | undefined, ...params: any[]): void {\n        if (this.level === TraceLevel.Silent && !Logger.isDebugging) return;\n\n        let message;\n        if (typeof contextOrMessage === 'string') {\n            message = contextOrMessage;\n        }\n        else {\n            message = params.shift();\n\n            if (contextOrMessage !== undefined) {\n                message = `${contextOrMessage.prefix} ${message || emptyStr}`;\n            }\n        }\n\n        if (Logger.isDebugging) {\n            console.warn(this.timestamp, ConsolePrefix, message || emptyStr, ...params);\n        }\n\n        if (this.output !== undefined && this.level !== TraceLevel.Silent) {\n            this.output.appendLine(`${this.timestamp} ${message || emptyStr}${this.toLoggableParams(false, params)}`);\n        }\n    }\n\n    static showOutputChannel() {\n        if (this.output === undefined) return;\n\n        this.output.show();\n    }\n\n    static toLoggable(p: any, sanitize?: ((key: string, value: any) => any) | undefined) {\n        if (typeof p !== 'object') return String(p);\n        if (this.customLoggableFn !== undefined) {\n            const loggable = this.customLoggableFn(p);\n            if (loggable != null) return loggable;\n        }\n        if (p instanceof Uri) return `Uri(${p.toString(true)})`;\n\n        try {\n            return JSON.stringify(p, sanitize);\n        }\n        catch {\n            return '<error>';\n        }\n    }\n\n    static toLoggableName(instance: Function | object) {\n        let name;\n        if (typeof instance === 'function') {\n            if (instance.prototype == null || instance.prototype.constructor == null) {\n                return instance.name;\n            }\n\n            name = instance.prototype.constructor.name;\n        }\n        else {\n            name = instance.constructor != null ? instance.constructor.name : emptyStr;\n        }\n\n        // Strip webpack module name (since I never name classes with an _)\n        const index = name.indexOf('_');\n        return index === -1 ? name : name.substr(index + 1);\n    }\n\n    private static get timestamp(): string {\n        const now = new Date();\n        return `[${now\n            .toISOString()\n            .replace(/T/, ' ')\n            .replace(/\\..+/, emptyStr)}:${`00${now.getUTCMilliseconds()}`.slice(-3)}]`;\n    }\n\n    private static toLoggableParams(debugOnly: boolean, params: any[]) {\n        if (params.length === 0 || (debugOnly && this.level !== TraceLevel.Debug && !Logger.isDebugging)) {\n            return emptyStr;\n        }\n\n        const loggableParams = params.map(p => this.toLoggable(p)).join(', ');\n        return loggableParams.length !== 0 ? ` \\u2014 ${loggableParams}` : emptyStr;\n    }\n\n    private static _isDebugging: boolean | undefined;\n    static get isDebugging() {\n        if (this._isDebugging === undefined) {\n            const env = process.env;\n            this._isDebugging =\n                env && env.VSCODE_DEBUGGING_EXTENSION ? isDebuggingRegex.test(env.VSCODE_DEBUGGING_EXTENSION) : false;\n        }\n\n        return this._isDebugging;\n    }\n\n    static gitOutput: OutputChannel | undefined;\n\n    static logGitCommand(command: string, ex?: Error): void {\n        if (this.level !== TraceLevel.Debug) return;\n\n        if (this.gitOutput === undefined) {\n            this.gitOutput = window.createOutputChannel(`${extensionOutputChannelName} (Git)`);\n        }\n        this.gitOutput.appendLine(`${this.timestamp} ${command}${ex != null ? `\\n\\n${ex.toString()}` : emptyStr}`);\n    }\n}\n","'use strict';\n/* eslint-disable @typescript-eslint/camelcase */\nimport * as paths from 'path';\nimport * as iconv from 'iconv-lite';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Objects, Strings } from '../system';\nimport { findGitPath, GitLocation } from './locator';\nimport { run, RunOptions } from './shell';\nimport { GitBranchParser, GitLogParser, GitReflogParser, GitStashParser } from './parsers/parsers';\nimport { GitFileStatus } from './models/file';\n\nexport type GitLocation = GitLocation;\nexport * from './models/models';\nexport * from './parsers/parsers';\nexport * from './remotes/provider';\n\nexport type GitLogDiffFilter = Exclude<GitFileStatus, '!' | '?'>;\n\nconst emptyArray = (Object.freeze([]) as any) as any[];\nconst emptyObj = Object.freeze({});\nconst emptyStr = '';\nconst slash = '/';\n\n// This is a root sha of all git repo's if using sha1\nconst rootSha = '4b825dc642cb6eb9a060e54bf8d69288fbee4904';\n\nexport const GitErrors = {\n    badRevision: /bad revision '(.*?)'/i,\n    notAValidObjectName: /Not a valid object name/i,\n    invalidLineCount: /file .+? has only \\d+ lines/i\n};\n\nconst GitWarnings = {\n    notARepository: /Not a git repository/i,\n    outsideRepository: /is outside repository/i,\n    noPath: /no such path/i,\n    noCommits: /does not have any commits/i,\n    notFound: /Path '.*?' does not exist in/i,\n    foundButNotInRevision: /Path '.*?' exists on disk, but not in/i,\n    headNotABranch: /HEAD does not point to a branch/i,\n    noUpstream: /no upstream configured for branch '(.*?)'/i,\n    unknownRevision: /ambiguous argument '.*?': unknown revision or path not in the working tree|not stored as a remote-tracking branch/i,\n    mustRunInWorkTree: /this operation must be run in a work tree/i,\n    patchWithConflicts: /Applied patch to '.*?' with conflicts/i,\n    noRemoteRepositorySpecified: /No remote repository specified\\./i,\n    remoteConnectionError: /Could not read from remote repository/i,\n    notAGitCommand: /'.+' is not a git command/i\n};\n\nexport enum GitErrorHandling {\n    Ignore = 'ignore',\n    Throw = 'throw'\n}\n\nexport interface GitCommandOptions extends RunOptions {\n    configs?: string[];\n    readonly correlationKey?: string;\n    errors?: GitErrorHandling;\n    // Specifies that this command should always be executed locally if possible\n    local?: boolean;\n}\n\n// A map of running git commands -- avoids running duplicate overlaping commands\nconst pendingCommands: Map<string, Promise<string | Buffer>> = new Map();\n\nexport async function git<TOut extends string | Buffer>(options: GitCommandOptions, ...args: any[]): Promise<TOut> {\n    if (Container.vsls.isMaybeGuest) {\n        if (options.local !== true) {\n            const guest = await Container.vsls.guest();\n            if (guest !== undefined) {\n                return guest.git<TOut>(options, ...args);\n            }\n        }\n        else {\n            // Since we will have a live share path here, just blank it out\n            options.cwd = emptyStr;\n        }\n    }\n\n    const start = process.hrtime();\n\n    const { configs, correlationKey, errors: errorHandling, ...opts } = options;\n\n    const encoding = options.encoding || 'utf8';\n    const runOpts: RunOptions = {\n        ...opts,\n        encoding: encoding === 'utf8' ? 'utf8' : encoding === 'buffer' ? 'buffer' : 'binary',\n        // Adds GCM environment variables to avoid any possible credential issues -- from https://github.com/Microsoft/vscode/issues/26573#issuecomment-338686581\n        // Shouldn't *really* be needed but better safe than sorry\n        env: {\n            ...process.env,\n            ...(options.env || emptyObj),\n            GCM_INTERACTIVE: 'NEVER',\n            GCM_PRESERVE_CREDS: 'TRUE',\n            LC_ALL: 'C'\n        }\n    };\n\n    const gitCommand = `[${runOpts.cwd}] git ${args.join(' ')}`;\n\n    const command = `${correlationKey !== undefined ? `${correlationKey}:` : emptyStr}${gitCommand}`;\n\n    let waiting;\n    let promise = pendingCommands.get(command);\n    if (promise === undefined) {\n        waiting = false;\n\n        // Fixes https://github.com/eamodio/vscode-gitlens/issues/73 & https://github.com/eamodio/vscode-gitlens/issues/161\n        // See https://stackoverflow.com/questions/4144417/how-to-handle-asian-characters-in-file-names-in-git-on-os-x\n        args.splice(\n            0,\n            0,\n            '-c',\n            'core.quotepath=false',\n            '-c',\n            'color.ui=false',\n            ...(configs !== undefined ? configs : emptyArray)\n        );\n\n        promise = run<TOut>(gitInfo.path, args, encoding, runOpts);\n\n        pendingCommands.set(command, promise);\n    }\n    else {\n        waiting = true;\n    }\n\n    let exception: Error | undefined;\n    try {\n        return (await promise) as TOut;\n    }\n    catch (ex) {\n        exception = ex;\n\n        switch (errorHandling) {\n            case GitErrorHandling.Ignore:\n                exception = undefined;\n                return emptyStr as TOut;\n\n            case GitErrorHandling.Throw:\n                throw ex;\n\n            default: {\n                const result = defaultExceptionHandler(ex, options.cwd, start);\n                exception = undefined;\n                return result as TOut;\n            }\n        }\n    }\n    finally {\n        pendingCommands.delete(command);\n\n        const duration = `${Strings.getDurationMilliseconds(start)} ms ${waiting ? '(await) ' : emptyStr}`;\n        if (exception !== undefined) {\n            Logger.warn(\n                `[${runOpts.cwd}] Git ${(exception.message || exception.toString() || emptyStr)\n                    .trim()\n                    .replace(/fatal: /g, '')\n                    .replace(/\\r?\\n|\\r/g, ` ${GlyphChars.Dot} `)} ${GlyphChars.Dot} ${duration}`\n            );\n        }\n        else {\n            Logger.log(`${gitCommand} ${GlyphChars.Dot} ${duration}`);\n        }\n        Logger.logGitCommand(\n            `${gitCommand} ${GlyphChars.Dot} ${exception !== undefined ? 'FAILED ' : emptyStr}${duration}`,\n            exception\n        );\n    }\n}\n\nfunction defaultExceptionHandler(ex: Error, cwd: string | undefined, start?: [number, number]): string {\n    const msg = ex.message || ex.toString();\n    if (msg != null && msg.length !== 0) {\n        for (const warning of Objects.values(GitWarnings)) {\n            if (warning.test(msg)) {\n                const duration = start !== undefined ? `${Strings.getDurationMilliseconds(start)} ms` : emptyStr;\n                Logger.warn(\n                    `[${cwd}] Git ${msg\n                        .trim()\n                        .replace(/fatal: /g, '')\n                        .replace(/\\r?\\n|\\r/g, ` ${GlyphChars.Dot} `)} ${GlyphChars.Dot} ${duration}`\n                );\n                return emptyStr;\n            }\n        }\n\n        const match = GitErrors.badRevision.exec(msg);\n        if (match != null && match) {\n            const [, ref] = match;\n\n            // Since looking up a ref with ^3 (e.g. looking for untracked files in a stash) can error on some versions of git just ignore it\n            if (ref != null && ref.endsWith('^3')) return emptyStr;\n        }\n    }\n\n    throw ex;\n}\n\nlet gitInfo: GitLocation;\n\nexport class Git {\n    static deletedOrMissingSha = '0000000000000000000000000000000000000000-';\n    static shaLikeRegex = /(^[0-9a-f]{40}([\\^@~:]\\S*)?$)|(^[0]{40}(:|-)$)/;\n    static shaRegex = /(^[0-9a-f]{40}$)|(^[0]{40}(:|-)$)/;\n    static shaParentRegex = /(^[0-9a-f]{40})\\^[0-3]?$/;\n    static shaShortenRegex = /^(.*?)([\\^@~:].*)?$/;\n    static uncommittedRegex = /^[0]{40}(?:[\\^@~:]\\S*)?:?$/;\n    static uncommittedSha = '0000000000000000000000000000000000000000';\n    static uncommittedStagedRegex = /^[0]{40}([\\^@~]\\S*)?:$/;\n    static uncommittedStagedSha = '0000000000000000000000000000000000000000:';\n\n    static getEncoding(encoding: string | undefined) {\n        return encoding !== undefined && iconv.encodingExists(encoding) ? encoding : 'utf8';\n    }\n\n    static getGitPath(): string {\n        return gitInfo.path;\n    }\n\n    static getGitVersion(): string {\n        return gitInfo.version;\n    }\n\n    static async setOrFindGitPath(gitPath?: string): Promise<void> {\n        const start = process.hrtime();\n\n        gitInfo = await findGitPath(gitPath);\n\n        Logger.log(\n            `Git found: ${gitInfo.version} @ ${gitInfo.path === 'git' ? 'PATH' : gitInfo.path} ${\n                GlyphChars.Dot\n            } ${Strings.getDurationMilliseconds(start)} ms`\n        );\n    }\n\n    static isSha(ref: string) {\n        return Git.isMatch(Git.shaRegex, ref);\n    }\n\n    static isShaLike(ref: string) {\n        return Git.isMatch(Git.shaLikeRegex, ref);\n    }\n\n    static isShaParent(ref: string) {\n        return Git.isMatch(Git.shaParentRegex, ref);\n    }\n\n    static isUncommitted(ref: string | undefined) {\n        return Git.isMatch(Git.uncommittedRegex, ref);\n    }\n\n    static isUncommittedStaged(ref: string | undefined): boolean {\n        return Git.isMatch(Git.uncommittedStagedRegex, ref);\n    }\n\n    static shortenSha(\n        ref: string | undefined,\n        {\n            uncommitted = 'Working Tree',\n            uncommittedStaged: uncommittedStaged = 'Index',\n            working = emptyStr\n        }: { uncommittedStaged?: string; uncommitted?: string; working?: string } = {}\n    ) {\n        if (ref == null || ref.length === 0) return working;\n        if (Git.isUncommitted(ref)) {\n            return Git.isUncommittedStaged(ref) ? uncommittedStaged : uncommitted;\n        }\n\n        if (!Git.isShaLike(ref)) return ref;\n\n        // Don't allow shas to be shortened to less than 5 characters\n        const len = Math.max(5, Container.config.advanced.abbreviatedShaLength);\n\n        // If we have a suffix, append it\n        const match = Git.shaShortenRegex.exec(ref);\n        if (match != null) {\n            const [, rev, suffix] = match;\n\n            if (suffix != null) {\n                return `${rev.substr(0, len)}${suffix}`;\n            }\n        }\n\n        return ref.substr(0, len);\n    }\n\n    static splitPath(fileName: string, repoPath: string | undefined, extract: boolean = true): [string, string] {\n        if (repoPath) {\n            fileName = Strings.normalizePath(fileName);\n            repoPath = Strings.normalizePath(repoPath);\n\n            const normalizedRepoPath = (repoPath.endsWith(slash) ? repoPath : `${repoPath}/`).toLowerCase();\n            if (fileName.toLowerCase().startsWith(normalizedRepoPath)) {\n                fileName = fileName.substring(normalizedRepoPath.length);\n            }\n        }\n        else {\n            repoPath = Strings.normalizePath(extract ? paths.dirname(fileName) : repoPath!);\n            fileName = Strings.normalizePath(extract ? paths.basename(fileName) : fileName);\n        }\n\n        return [fileName, repoPath];\n    }\n\n    static validateVersion(major: number, minor: number): boolean {\n        const [gitMajor, gitMinor] = gitInfo.version.split('.');\n        return parseInt(gitMajor, 10) >= major && parseInt(gitMinor, 10) >= minor;\n    }\n\n    private static isMatch(regex: RegExp, ref: string | undefined) {\n        return ref == null || ref.length === 0 ? false : regex.test(ref);\n    }\n\n    // Git commands\n\n    static add(repoPath: string | undefined, pathspec: string) {\n        return git<string>({ cwd: repoPath }, 'add', '-A', '--', pathspec);\n    }\n\n    static apply(repoPath: string | undefined, patch: string, options: { allowConflicts?: boolean } = {}) {\n        const params = ['apply', '--whitespace=warn'];\n        if (options.allowConflicts) {\n            params.push('-3');\n        }\n        return git<string>({ cwd: repoPath, stdin: patch }, ...params);\n    }\n\n    static async blame(\n        repoPath: string | undefined,\n        fileName: string,\n        ref?: string,\n        options: { args?: string[] | null; ignoreWhitespace?: boolean; startLine?: number; endLine?: number } = {}\n    ) {\n        const [file, root] = Git.splitPath(fileName, repoPath);\n\n        const params = ['blame', '--root', '--incremental'];\n\n        if (options.ignoreWhitespace) {\n            params.push('-w');\n        }\n        if (options.startLine != null && options.endLine != null) {\n            params.push(`-L ${options.startLine},${options.endLine}`);\n        }\n        if (options.args != null) {\n            params.push(...options.args);\n        }\n\n        let stdin;\n        if (ref) {\n            if (Git.isUncommittedStaged(ref)) {\n                // Pipe the blame contents to stdin\n                params.push('--contents', '-');\n\n                // Get the file contents for the staged version using `:`\n                stdin = await Git.show<string>(repoPath, fileName, ':');\n            }\n            else {\n                params.push(ref);\n            }\n        }\n\n        return git<string>({ cwd: root, stdin: stdin }, ...params, '--', file);\n    }\n\n    static blame__contents(\n        repoPath: string | undefined,\n        fileName: string,\n        contents: string,\n        options: {\n            args?: string[] | null;\n            correlationKey?: string;\n            ignoreWhitespace?: boolean;\n            startLine?: number;\n            endLine?: number;\n        } = {}\n    ) {\n        const [file, root] = Git.splitPath(fileName, repoPath);\n\n        const params = ['blame', '--root', '--incremental'];\n\n        if (options.ignoreWhitespace) {\n            params.push('-w');\n        }\n        if (options.startLine != null && options.endLine != null) {\n            params.push(`-L ${options.startLine},${options.endLine}`);\n        }\n        if (options.args != null) {\n            params.push(...options.args);\n        }\n\n        // Pipe the blame contents to stdin\n        params.push('--contents', '-');\n\n        return git<string>(\n            { cwd: root, stdin: contents, correlationKey: options.correlationKey },\n            ...params,\n            '--',\n            file\n        );\n    }\n\n    static branch__contains(repoPath: string, ref: string, options: { remote: boolean } = { remote: false }) {\n        const params = ['branch', '--contains'];\n        if (options.remote) {\n            params.push('-r');\n        }\n\n        return git<string>({ cwd: repoPath, configs: ['-c', 'color.branch=false'] }, ...params, ref);\n    }\n\n    static async cat_file__resolve(repoPath: string, fileName: string, ref: string) {\n        if (Git.isUncommitted(ref)) return ref;\n\n        try {\n            await git<string>(\n                { cwd: repoPath, errors: GitErrorHandling.Throw },\n                'cat-file',\n                '-e',\n                `${ref}:./${fileName}`\n            );\n            return ref;\n        }\n        catch (ex) {\n            const msg = ex && ex.toString();\n            if (GitErrors.notAValidObjectName.test(msg)) {\n                return Git.deletedOrMissingSha;\n            }\n\n            return undefined;\n        }\n    }\n\n    static async cat_file__validate(repoPath: string, ref: string) {\n        if (Git.isUncommitted(ref)) return true;\n\n        try {\n            await git<string>({ cwd: repoPath, errors: GitErrorHandling.Throw }, 'cat-file', '-t', ref);\n            return true;\n        }\n        catch (ex) {\n            return false;\n        }\n    }\n\n    static check_mailmap(repoPath: string, author: string) {\n        return git<string>({ cwd: repoPath, errors: GitErrorHandling.Ignore, local: true }, 'check-mailmap', author);\n    }\n\n    static checkout(\n        repoPath: string,\n        ref: string,\n        { createBranch, fileName }: { createBranch?: string; fileName?: string } = {}\n    ) {\n        const params = ['checkout'];\n        if (createBranch) {\n            params.push('-b', createBranch, '--track', ref, '--');\n        }\n        else {\n            params.push(ref, '--');\n\n            if (fileName) {\n                [fileName, repoPath] = Git.splitPath(fileName, repoPath);\n\n                params.push(fileName);\n            }\n        }\n\n        return git<string>({ cwd: repoPath }, ...params);\n    }\n\n    static async config__get(key: string, repoPath?: string, options: { local?: boolean } = {}) {\n        const data = await git<string>(\n            { cwd: repoPath || emptyStr, errors: GitErrorHandling.Ignore, local: options.local },\n            'config',\n            '--get',\n            key\n        );\n        return data.length === 0 ? undefined : data.trim();\n    }\n\n    static async config__get_regex(pattern: string, repoPath?: string, options: { local?: boolean } = {}) {\n        const data = await git<string>(\n            { cwd: repoPath || emptyStr, errors: GitErrorHandling.Ignore, local: options.local },\n            'config',\n            '--get-regex',\n            pattern\n        );\n        return data.length === 0 ? undefined : data.trim();\n    }\n\n    static async diff(\n        repoPath: string,\n        fileName: string,\n        ref1?: string,\n        ref2?: string,\n        options: { encoding?: string; filter?: string; similarityThreshold?: number } = {}\n    ): Promise<string> {\n        const params = [\n            'diff',\n            `-M${options.similarityThreshold == null ? '' : `${options.similarityThreshold}%`}`,\n            '--no-ext-diff',\n            '-U0',\n            '--minimal'\n        ];\n        if (options.filter) {\n            params.push(`--diff-filter=${options.filter}`);\n        }\n\n        if (ref1) {\n            // <sha>^3 signals an untracked file in a stash and if we are trying to find its parent, use the root sha\n            if (ref1.endsWith('^3^')) {\n                ref1 = rootSha;\n            }\n            params.push(Git.isUncommittedStaged(ref1) ? '--staged' : ref1);\n        }\n        if (ref2) {\n            params.push(Git.isUncommittedStaged(ref2) ? '--staged' : ref2);\n        }\n\n        const encoding: BufferEncoding = options.encoding === 'utf8' ? 'utf8' : 'binary';\n\n        try {\n            return await git<string>(\n                { cwd: repoPath, configs: ['-c', 'color.diff=false'], encoding: encoding },\n                ...params,\n                '--',\n                fileName\n            );\n        }\n        catch (ex) {\n            const match = GitErrors.badRevision.exec(ex.message);\n            if (match !== null) {\n                const [, ref] = match;\n\n                // If the bad ref is trying to find a parent ref, assume we hit to the last commit, so try again using the root sha\n                if (ref === ref1 && ref != null && ref.endsWith('^')) {\n                    return Git.diff(repoPath, fileName, rootSha, ref2, options);\n                }\n            }\n\n            throw ex;\n        }\n    }\n\n    static diff__name_status(\n        repoPath: string,\n        ref1?: string,\n        ref2?: string,\n        { filter, similarityThreshold }: { filter?: string; similarityThreshold?: number } = {}\n    ) {\n        const params = [\n            'diff',\n            '--name-status',\n            `-M${similarityThreshold == null ? '' : `${similarityThreshold}%`}`,\n            '--no-ext-diff'\n        ];\n        if (filter) {\n            params.push(`--diff-filter=${filter}`);\n        }\n        if (ref1) {\n            params.push(ref1);\n        }\n        if (ref2) {\n            params.push(ref2);\n        }\n\n        return git<string>({ cwd: repoPath, configs: ['-c', 'color.diff=false'] }, ...params);\n    }\n\n    static diff__shortstat(repoPath: string, ref?: string) {\n        const params = ['diff', '--shortstat', '--no-ext-diff'];\n        if (ref) {\n            params.push(ref);\n        }\n\n        return git<string>({ cwd: repoPath, configs: ['-c', 'color.diff=false'] }, ...params);\n    }\n\n    static difftool(\n        repoPath: string,\n        fileName: string,\n        tool: string,\n        options: { ref1?: string; ref2?: string; staged?: boolean } = {}\n    ) {\n        const params = ['difftool', '--no-prompt', `--tool=${tool}`];\n        if (options.staged) {\n            params.push('--staged');\n        }\n        if (options.ref1) {\n            params.push(options.ref1);\n        }\n        if (options.ref2) {\n            params.push(options.ref2);\n        }\n\n        return git<string>({ cwd: repoPath }, ...params, '--', fileName);\n    }\n\n    static difftool__dir_diff(repoPath: string, tool: string, ref1: string, ref2?: string) {\n        const params = ['difftool', '--dir-diff', `--tool=${tool}`, ref1];\n        if (ref2) {\n            params.push(ref2);\n        }\n\n        return git<string>({ cwd: repoPath }, ...params);\n    }\n\n    static fetch(repoPath: string, options: { all?: boolean; prune?: boolean; remote?: string } = {}) {\n        const params = ['fetch'];\n        if (options.prune) {\n            params.push('--prune');\n        }\n\n        if (options.remote) {\n            params.push(options.remote);\n        }\n        else if (options.all) {\n            params.push('--all');\n        }\n\n        return git<string>({ cwd: repoPath }, ...params);\n    }\n\n    static for_each_ref__branch(repoPath: string, options: { all: boolean } = { all: false }) {\n        const params = ['for-each-ref', `--format=${GitBranchParser.defaultFormat}`, 'refs/heads'];\n        if (options.all) {\n            params.push('refs/remotes');\n        }\n\n        return git<string>({ cwd: repoPath }, ...params);\n    }\n\n    static log(\n        repoPath: string,\n        ref: string | undefined,\n        {\n            authors,\n            maxCount,\n            merges,\n            reverse,\n            similarityThreshold\n        }: { authors?: string[]; maxCount?: number; merges?: boolean; reverse?: boolean; similarityThreshold?: number }\n    ) {\n        const params = [\n            'log',\n            '--name-status',\n            `--format=${GitLogParser.defaultFormat}`,\n            '--full-history',\n            `-M${similarityThreshold == null ? '' : `${similarityThreshold}%`}`\n        ];\n        if (maxCount && !reverse) {\n            params.push(`-n${maxCount}`);\n        }\n\n        if (merges) {\n            params.push('-m');\n        }\n\n        if (authors) {\n            params.push('--use-mailmap', ...authors.map(a => `--author=${a}`));\n        }\n\n        if (ref && !Git.isUncommittedStaged(ref)) {\n            // If we are reversing, we must add a range (with HEAD) because we are using --ancestry-path for better reverse walking\n            if (reverse) {\n                params.push('--reverse', '--ancestry-path', `${ref}..HEAD`);\n            }\n            else {\n                params.push(ref);\n            }\n        }\n\n        return git<string>(\n            { cwd: repoPath, configs: ['-c', 'diff.renameLimit=0', '-c', 'log.showSignature=false'] },\n            ...params,\n            '--'\n        );\n    }\n\n    static log__file(\n        repoPath: string,\n        fileName: string,\n        ref: string | undefined,\n        {\n            filters,\n            maxCount,\n            firstParent = false,\n            renames = true,\n            reverse = false,\n            simple = false,\n            startLine,\n            endLine\n        }: {\n            filters?: GitLogDiffFilter[];\n            maxCount?: number;\n            firstParent?: boolean;\n            renames?: boolean;\n            reverse?: boolean;\n            simple?: boolean;\n            startLine?: number;\n            endLine?: number;\n        } = {}\n    ) {\n        const [file, root] = Git.splitPath(fileName, repoPath);\n\n        const params = ['log', `--format=${simple ? GitLogParser.simpleFormat : GitLogParser.defaultFormat}`];\n\n        if (maxCount && !reverse) {\n            params.push(`-n${maxCount}`);\n        }\n        params.push(renames ? '--follow' : '-m');\n\n        if (filters != null && filters.length !== 0) {\n            params.push(`--diff-filter=${filters.join(emptyStr)}`);\n        }\n\n        if (firstParent) {\n            params.push('--first-parent');\n        }\n\n        if (startLine == null) {\n            if (simple) {\n                params.push('--name-status');\n            }\n            else {\n                params.push('--numstat', '--summary');\n            }\n        }\n        else {\n            // Don't include --name-status or -s because Git won't honor it\n            params.push(`-L ${startLine},${endLine == null ? startLine : endLine}:${file}`);\n        }\n\n        if (ref && !Git.isUncommittedStaged(ref)) {\n            // If we are reversing, we must add a range (with HEAD) because we are using --ancestry-path for better reverse walking\n            if (reverse) {\n                params.push('--reverse', '--ancestry-path', `${ref}..HEAD`);\n            }\n            else {\n                params.push(ref);\n            }\n        }\n\n        if (startLine == null || renames) {\n            // Don't specify a file spec when using a line number (so say the git docs), unless it is a follow\n            params.push('--', file);\n        }\n\n        return git<string>({ cwd: root, configs: ['-c', 'log.showSignature=false'] }, ...params);\n    }\n\n    static async log__file_recent(\n        repoPath: string,\n        fileName: string,\n        { ref, similarityThreshold }: { ref?: string; similarityThreshold?: number } = {}\n    ) {\n        const params = [\n            'log',\n            `-M${similarityThreshold == null ? '' : `${similarityThreshold}%`}`,\n            '-n1',\n            '--format=%H'\n        ];\n\n        if (ref) {\n            params.push(ref);\n        }\n\n        const data = await git<string>({ cwd: repoPath, errors: GitErrorHandling.Ignore }, ...params, '--', fileName);\n        return data.length === 0 ? undefined : data.trim();\n    }\n\n    static async log__recent(repoPath: string) {\n        const data = await git<string>(\n            { cwd: repoPath, errors: GitErrorHandling.Ignore },\n            'log',\n            '-n1',\n            '--format=%H',\n            '--'\n        );\n        return data.length === 0 ? undefined : data.trim();\n    }\n\n    static log__search(repoPath: string, search: string[] = emptyArray, { maxCount }: { maxCount?: number } = {}) {\n        const params = ['log', '--name-status', `--format=${GitLogParser.defaultFormat}`];\n        if (maxCount) {\n            params.push(`-n${maxCount}`);\n        }\n\n        return git<string>({ cwd: repoPath }, ...params, ...search);\n    }\n\n    // static log__shortstat(repoPath: string, options: { ref?: string }) {\n    //     const params = ['log', '--shortstat', '--oneline'];\n    //     if (options.ref && !Git.isUncommittedStaged(options.ref)) {\n    //         params.push(options.ref);\n    //     }\n    //     return git<string>({ cwd: repoPath }, ...params, '--');\n    // }\n\n    static async ls_files(\n        repoPath: string,\n        fileName: string,\n        { ref, untracked }: { ref?: string; untracked?: boolean } = {}\n    ): Promise<string | undefined> {\n        const params = ['ls-files'];\n        if (ref && !Git.isUncommitted(ref)) {\n            params.push(`--with-tree=${ref}`);\n        }\n\n        if (!ref && untracked) {\n            params.push('-o');\n        }\n\n        const data = await git<string>({ cwd: repoPath, errors: GitErrorHandling.Ignore }, ...params, '--', fileName);\n        return data.length === 0 ? undefined : data.trim();\n    }\n\n    static async ls_tree(repoPath: string, ref: string, { fileName }: { fileName?: string } = {}) {\n        const params = ['ls-tree'];\n        if (fileName) {\n            params.push('-l', ref, '--', fileName);\n        }\n        else {\n            params.push('-lrt', ref, '--');\n        }\n        const data = await git<string>({ cwd: repoPath, errors: GitErrorHandling.Ignore }, ...params);\n        return data.length === 0 ? undefined : data.trim();\n    }\n\n    static merge_base(repoPath: string, ref1: string, ref2: string, { forkPoint }: { forkPoint?: boolean } = {}) {\n        const params = ['merge-base'];\n        if (forkPoint) {\n            params.push('--fork-point');\n        }\n\n        return git<string>({ cwd: repoPath }, ...params, ref1, ref2);\n    }\n\n    static reflog(\n        repoPath: string,\n        { all, branch, since }: { all?: boolean; branch?: string; since?: string } = {}\n    ): Promise<string> {\n        const params = ['log', '-g', `--format=${GitReflogParser.defaultFormat}`, '--date=unix'];\n        if (all) {\n            params.push('--all');\n        }\n        if (branch) {\n            params.push(branch);\n        }\n        if (since) {\n            params.push(`--since=${since}`);\n        }\n\n        return git<string>({ cwd: repoPath }, ...params, '--');\n    }\n\n    static remote(repoPath: string): Promise<string> {\n        return git<string>({ cwd: repoPath }, 'remote', '-v');\n    }\n\n    static remote__add(repoPath: string, name: string, url: string) {\n        return git<string>({ cwd: repoPath }, 'remote', 'add', name, url);\n    }\n\n    static remote__get_url(repoPath: string, remote: string): Promise<string> {\n        return git<string>({ cwd: repoPath }, 'remote', 'get-url', remote);\n    }\n\n    static reset(repoPath: string | undefined, fileName: string) {\n        return git<string>({ cwd: repoPath }, 'reset', '-q', '--', fileName);\n    }\n\n    static async rev_list(\n        repoPath: string,\n        refs: string[],\n        options: { count?: boolean } = {}\n    ): Promise<number | undefined> {\n        const params = [];\n        if (options.count) {\n            params.push('--count');\n        }\n        params.push(...refs);\n\n        const data = await git<string>({ cwd: repoPath, errors: GitErrorHandling.Ignore }, 'rev-list', ...params);\n        return data.length === 0 ? undefined : Number(data.trim()) || undefined;\n    }\n\n    static async rev_parse(repoPath: string, ref: string): Promise<string | undefined> {\n        const data = await git<string>({ cwd: repoPath, errors: GitErrorHandling.Ignore }, 'rev-parse', ref);\n        return data.length === 0 ? undefined : data.trim();\n    }\n\n    static async rev_parse__currentBranch(repoPath: string): Promise<[string, string | undefined] | undefined> {\n        try {\n            const data = await git<string>(\n                { cwd: repoPath, errors: GitErrorHandling.Throw },\n                'rev-parse',\n                '--abbrev-ref',\n                '--symbolic-full-name',\n                '@',\n                '@{u}',\n                '--'\n            );\n            return [data, undefined];\n        }\n        catch (ex) {\n            const msg = ex && ex.toString();\n            if (GitErrors.badRevision.test(msg) || GitWarnings.noUpstream.test(msg)) {\n                return [ex.stdout, undefined];\n            }\n\n            if (GitWarnings.headNotABranch.test(msg)) {\n                const sha = await this.log__recent(repoPath);\n                if (sha === undefined) return undefined;\n\n                return [`(HEAD detached at ${this.shortenSha(sha)})`, sha];\n            }\n\n            defaultExceptionHandler(ex, repoPath);\n            return undefined;\n        }\n    }\n\n    static async rev_parse__show_toplevel(cwd: string): Promise<string | undefined> {\n        const data = await git<string>({ cwd: cwd, errors: GitErrorHandling.Ignore }, 'rev-parse', '--show-toplevel');\n        return data.length === 0 ? undefined : data.trim();\n    }\n\n    static shortlog(repoPath: string) {\n        return git<string>({ cwd: repoPath }, 'shortlog', '-sne', '--all', '--no-merges');\n    }\n\n    static async show<TOut extends string | Buffer>(\n        repoPath: string | undefined,\n        fileName: string,\n        ref: string,\n        options: {\n            encoding?: 'binary' | 'ascii' | 'utf8' | 'utf16le' | 'ucs2' | 'base64' | 'latin1' | 'hex' | 'buffer';\n        } = {}\n    ): Promise<TOut | undefined> {\n        const [file, root] = Git.splitPath(fileName, repoPath);\n\n        if (Git.isUncommittedStaged(ref)) {\n            ref = ':';\n        }\n        if (Git.isUncommitted(ref)) throw new Error(`ref=${ref} is uncommitted`);\n\n        const opts: GitCommandOptions = {\n            configs: ['-c', 'log.showSignature=false'],\n            cwd: root,\n            encoding: options.encoding || 'utf8',\n            errors: GitErrorHandling.Throw\n        };\n        const args = ref.endsWith(':') ? `${ref}./${file}` : `${ref}:./${file}`;\n\n        try {\n            const data = await git<TOut>(opts, 'show', args, '--');\n            return data;\n        }\n        catch (ex) {\n            const msg = ex && ex.toString();\n            if (ref === ':' && GitErrors.badRevision.test(msg)) {\n                return Git.show<TOut>(repoPath, fileName, 'HEAD:', options);\n            }\n\n            if (\n                GitErrors.badRevision.test(msg) ||\n                GitWarnings.notFound.test(msg) ||\n                GitWarnings.foundButNotInRevision.test(msg)\n            ) {\n                return undefined;\n            }\n\n            return defaultExceptionHandler(ex, opts.cwd) as TOut;\n        }\n    }\n\n    static show__diff(\n        repoPath: string,\n        fileName: string,\n        ref: string,\n        originalFileName?: string,\n        { similarityThreshold }: { similarityThreshold?: number } = {}\n    ) {\n        const params = [\n            'show',\n            `-M${similarityThreshold == null ? '' : `${similarityThreshold}%`}`,\n            '--format=',\n            '--minimal',\n            '-U0',\n            ref,\n            '--',\n            fileName\n        ];\n        if (originalFileName != null && originalFileName.length !== 0) {\n            params.push(originalFileName);\n        }\n\n        return git<string>({ cwd: repoPath }, ...params);\n    }\n\n    static show__name_status(repoPath: string, fileName: string, ref: string) {\n        return git<string>({ cwd: repoPath }, 'show', '--name-status', '--format=', ref, '--', fileName);\n    }\n\n    static show_ref__tags(repoPath: string) {\n        return git<string>({ cwd: repoPath, errors: GitErrorHandling.Ignore }, 'show-ref', '--tags');\n    }\n\n    static stash__apply(repoPath: string, stashName: string, deleteAfter: boolean) {\n        if (!stashName) return undefined;\n        return git<string>({ cwd: repoPath }, 'stash', deleteAfter ? 'pop' : 'apply', stashName);\n    }\n\n    static stash__delete(repoPath: string, stashName: string) {\n        if (!stashName) return undefined;\n        return git<string>({ cwd: repoPath }, 'stash', 'drop', stashName);\n    }\n\n    static stash__list(\n        repoPath: string,\n        {\n            format = GitStashParser.defaultFormat,\n            similarityThreshold\n        }: { format?: string; similarityThreshold?: number } = {}\n    ) {\n        return git<string>(\n            { cwd: repoPath },\n            'stash',\n            'list',\n            '--name-status',\n            `-M${similarityThreshold == null ? '' : `${similarityThreshold}%`}`,\n            `--format=${format}`\n        );\n    }\n\n    static stash__push(repoPath: string, pathspecs: string[], message?: string) {\n        const params = ['stash', 'push', '-u'];\n        if (message) {\n            params.push('-m', message);\n        }\n        return git<string>({ cwd: repoPath }, ...params, '--', ...pathspecs);\n    }\n\n    static stash__save(repoPath: string, message?: string) {\n        const params = ['stash', 'save', '-u'];\n        if (message) {\n            params.push(message);\n        }\n        return git<string>({ cwd: repoPath }, ...params);\n    }\n\n    static status(\n        repoPath: string,\n        porcelainVersion: number = 1,\n        { similarityThreshold }: { similarityThreshold?: number } = {}\n    ): Promise<string> {\n        const params = [\n            'status',\n            porcelainVersion >= 2 ? `--porcelain=v${porcelainVersion}` : '--porcelain',\n            '--branch',\n            '-u'\n        ];\n        if (Git.validateVersion(2, 18)) {\n            params.push(`--find-renames=${similarityThreshold == null ? '' : `${similarityThreshold}%`}`);\n        }\n\n        return git<string>(\n            { cwd: repoPath, configs: ['-c', 'color.status=false'], env: { GIT_OPTIONAL_LOCKS: '0' } },\n            ...params,\n            '--'\n        );\n    }\n\n    static status__file(\n        repoPath: string,\n        fileName: string,\n        porcelainVersion: number = 1,\n        { similarityThreshold }: { similarityThreshold?: number } = {}\n    ): Promise<string> {\n        const [file, root] = Git.splitPath(fileName, repoPath);\n\n        const params = ['status', porcelainVersion >= 2 ? `--porcelain=v${porcelainVersion}` : '--porcelain'];\n        if (Git.validateVersion(2, 18)) {\n            params.push(`--find-renames=${similarityThreshold == null ? '' : `${similarityThreshold}%`}`);\n        }\n\n        return git<string>(\n            { cwd: root, configs: ['-c', 'color.status=false'], env: { GIT_OPTIONAL_LOCKS: '0' } },\n            ...params,\n            '--',\n            file\n        );\n    }\n\n    static tag(repoPath: string) {\n        return git<string>({ cwd: repoPath }, 'tag', '-l', '-n1');\n    }\n}\n","'use strict';\nimport { Command, Disposable, Event, TreeItem, TreeItemCollapsibleState, TreeViewVisibilityChangeEvent } from 'vscode';\nimport { GitUri } from '../../git/gitService';\nimport { Logger } from '../../logger';\nimport { debug, Functions, gate, logName } from '../../system';\nimport { TreeViewNodeStateChangeEvent, View } from '../viewBase';\n\nexport enum ResourceType {\n    ActiveFileHistory = 'gitlens:history:active:file',\n    ActiveLineHistory = 'gitlens:history:active:line',\n    Branch = 'gitlens:branch',\n    Branches = 'gitlens:branches',\n    BranchStatusAheadOfUpstream = 'gitlens:status-branch:upstream:ahead',\n    BranchStatusBehindUpstream = 'gitlens:status-branch:upstream:behind',\n    Commit = 'gitlens:commit',\n    Commits = 'gitlens:commits',\n    Compare = 'gitlens:compare',\n    CompareBranch = 'gitlens:compare:branch',\n    ComparePicker = 'gitlens:compare:picker',\n    ComparePickerWithRef = 'gitlens:compare:picker:ref',\n    CompareResults = 'gitlens:compare:results',\n    Contributor = 'gitlens:contributor',\n    Contributors = 'gitlens:contributors',\n    File = 'gitlens:file',\n    FileHistory = 'gitlens:history:file',\n    Folder = 'gitlens:folder',\n    LineHistory = 'gitlens:history:line',\n    Message = 'gitlens:message',\n    Pager = 'gitlens:pager',\n    Reflog = 'gitlens:reflog',\n    ReflogRecord = 'gitlens:reflog-record',\n    Remote = 'gitlens:remote',\n    Remotes = 'gitlens:remotes',\n    Repositories = 'gitlens:repositories',\n    Repository = 'gitlens:repository',\n    ResultsCommits = 'gitlens:results:commits',\n    ResultsFile = 'gitlens:file:results',\n    ResultsFiles = 'gitlens:results:files',\n    Search = 'gitlens:search',\n    SearchResults = 'gitlens:search:results',\n    Stash = 'gitlens:stash',\n    StashFile = 'gitlens:file:stash',\n    Stashes = 'gitlens:stashes',\n    StatusFileCommits = 'gitlens:status:file:commits',\n    StatusFiles = 'gitlens:status:files',\n    StatusAheadOfUpstream = 'gitlens:status:upstream:ahead',\n    StatusBehindUpstream = 'gitlens:status:upstream:behind',\n    Tag = 'gitlens:tag',\n    Tags = 'gitlens:tags'\n}\n\nexport const unknownGitUri = new GitUri();\n\nexport interface ViewNode {\n    readonly id?: string;\n}\n\n@logName<ViewNode>((c, name) => `${name}${c.id != null ? `(${c.id})` : ''}`)\nexport abstract class ViewNode<TView extends View = View> {\n    constructor(uri: GitUri, public readonly view: TView, protected readonly parent?: ViewNode) {\n        this._uri = uri;\n    }\n\n    toString() {\n        return `${Logger.toLoggableName(this)}${this.id != null ? `(${this.id})` : ''}`;\n    }\n\n    protected _uri: GitUri;\n    get uri() {\n        return this._uri;\n    }\n\n    abstract getChildren(): ViewNode[] | Promise<ViewNode[]>;\n\n    getParent(): ViewNode | undefined {\n        return this.parent;\n    }\n\n    abstract getTreeItem(): TreeItem | Promise<TreeItem>;\n\n    getCommand(): Command | undefined {\n        return undefined;\n    }\n\n    refresh?(reset?: boolean): void | boolean | Promise<void> | Promise<boolean>;\n\n    @gate()\n    @debug()\n    triggerChange(reset: boolean = false): Promise<void> {\n        return this.view.refreshNode(this, reset);\n    }\n}\n\nexport abstract class ViewRefNode<TView extends View = View> extends ViewNode<TView> {\n    abstract get ref(): string;\n\n    get repoPath(): string {\n        return this.uri.repoPath!;\n    }\n\n    toString() {\n        return `${super.toString()}:${this.ref}`;\n    }\n}\n\nexport abstract class ViewRefFileNode<TView extends View = View> extends ViewRefNode<TView> {\n    abstract get fileName(): string;\n\n    toString() {\n        return `${super.toString()}:${this.fileName}`;\n    }\n}\n\nexport function nodeSupportsConditionalDismissal(node: ViewNode): node is ViewNode & { canDismiss(): boolean } {\n    return typeof (node as ViewNode & { canDismiss(): boolean }).canDismiss === 'function';\n}\n\nexport interface PageableViewNode {\n    readonly id?: string;\n    readonly supportsPaging: boolean;\n    readonly rememberLastMaxCount?: boolean;\n    maxCount: number | undefined;\n}\nexport function nodeSupportsPaging(node: ViewNode): node is ViewNode & PageableViewNode {\n    return Functions.is<ViewNode & PageableViewNode>(node, 'supportsPaging', true);\n}\n\nexport abstract class SubscribeableViewNode<TView extends View = View> extends ViewNode<TView> {\n    protected _disposable: Disposable;\n    protected _subscription: Promise<Disposable | undefined> | undefined;\n\n    constructor(uri: GitUri, view: TView, parent?: ViewNode) {\n        super(uri, view, parent);\n\n        const disposables = [\n            this.view.onDidChangeVisibility(this.onVisibilityChanged, this),\n            this.view.onDidChangeNodeState(this.onNodeStateChanged, this)\n        ];\n\n        if (viewSupportsAutoRefresh(this.view)) {\n            disposables.push(this.view.onDidChangeAutoRefresh(this.onAutoRefreshChanged, this));\n        }\n\n        this._disposable = Disposable.from(...disposables);\n    }\n\n    @debug()\n    dispose() {\n        void this.unsubscribe();\n\n        if (this._disposable !== undefined) {\n            this._disposable.dispose();\n        }\n    }\n\n    private _canSubscribe: boolean = true;\n    protected get canSubscribe(): boolean {\n        return this._canSubscribe;\n    }\n    protected set canSubscribe(value: boolean) {\n        if (this._canSubscribe === value) return;\n\n        this._canSubscribe = value;\n\n        void this.ensureSubscription();\n        if (value) {\n            void this.triggerChange();\n        }\n    }\n\n    protected abstract subscribe(): Disposable | undefined | Promise<Disposable | undefined>;\n\n    @debug()\n    protected async unsubscribe(): Promise<void> {\n        if (this._subscription !== undefined) {\n            const subscriptionPromise = this._subscription;\n            this._subscription = undefined;\n\n            const subscription = await subscriptionPromise;\n            if (subscription !== undefined) {\n                subscription.dispose();\n            }\n        }\n    }\n\n    @debug()\n    protected onAutoRefreshChanged() {\n        this.onVisibilityChanged({ visible: this.view.visible });\n    }\n\n    protected onParentStateChanged?(state: TreeItemCollapsibleState): void;\n    protected onStateChanged?(state: TreeItemCollapsibleState): void;\n\n    protected _state: TreeItemCollapsibleState | undefined;\n    protected onNodeStateChanged(e: TreeViewNodeStateChangeEvent<ViewNode>) {\n        if (e.element === this) {\n            this._state = e.state;\n            if (this.onStateChanged !== undefined) {\n                this.onStateChanged(e.state);\n            }\n        }\n        else if (e.element === this.parent) {\n            if (this.onParentStateChanged !== undefined) {\n                this.onParentStateChanged(e.state);\n            }\n        }\n    }\n\n    @debug()\n    protected onVisibilityChanged(e: TreeViewVisibilityChangeEvent) {\n        void this.ensureSubscription();\n\n        if (e.visible) {\n            void this.triggerChange();\n        }\n    }\n\n    @debug()\n    async ensureSubscription() {\n        // We only need to subscribe if we are visible and if auto-refresh enabled (when supported)\n        if (\n            !this.canSubscribe ||\n            !this.view.visible ||\n            (viewSupportsAutoRefresh(this.view) && !this.view.autoRefresh)\n        ) {\n            await this.unsubscribe();\n\n            return;\n        }\n\n        // If we already have a subscription, just kick out\n        if (this._subscription !== undefined) return;\n\n        this._subscription = Promise.resolve(this.subscribe());\n        await this._subscription;\n    }\n}\n\ninterface AutoRefreshableView {\n    autoRefresh: boolean;\n    onDidChangeAutoRefresh: Event<void>;\n}\nexport function viewSupportsAutoRefresh(view: View): view is View & AutoRefreshableView {\n    return Functions.is<View & AutoRefreshableView>(view, 'onDidChangeAutoRefresh');\n}\n\nexport function viewSupportsNodeDismissal(view: View): view is View & { dismissNode(node: ViewNode): void } {\n    return typeof (view as View & { dismissNode(node: ViewNode): void }).dismissNode === 'function';\n}\n","'use strict';\nimport { QuickPickItem } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Dates, Strings } from '../system';\nimport {\n    GitBranch,\n    GitLogCommit,\n    GitReference,\n    GitRemoteType,\n    GitService,\n    GitStashCommit,\n    GitTag,\n    Repository\n} from '../git/gitService';\nimport { emojify } from '../emojis';\n\nexport interface BranchQuickPickItem extends QuickPickItem {\n    readonly item: GitBranch;\n    readonly current: boolean;\n    readonly ref: string;\n    readonly remote: boolean;\n}\n\nexport namespace BranchQuickPickItem {\n    export async function create(\n        branch: GitBranch,\n        picked?: boolean,\n        options: {\n            current?: boolean | 'checkmark';\n            checked?: boolean;\n            ref?: boolean;\n            status?: boolean;\n            type?: boolean | 'remote';\n        } = {}\n    ) {\n        let description = '';\n        if (options.type === true) {\n            if (options.current === true && branch.current) {\n                description = 'current branch';\n            }\n            else {\n                description = 'branch';\n            }\n        }\n        else if (options.type === 'remote') {\n            if (branch.remote) {\n                description = 'remote branch';\n            }\n        }\n        else if (options.current === true && branch.current) {\n            description = 'current branch';\n        }\n\n        if (options.status && !branch.remote && branch.tracking !== undefined) {\n            let arrows = GlyphChars.Dash;\n\n            const remote = await branch.getRemote();\n            if (remote !== undefined) {\n                let left;\n                let right;\n                for (const { type } of remote.types) {\n                    if (type === GitRemoteType.Fetch) {\n                        left = true;\n\n                        if (right) break;\n                    }\n                    else if (type === GitRemoteType.Push) {\n                        right = true;\n\n                        if (left) break;\n                    }\n                }\n\n                if (left && right) {\n                    arrows = GlyphChars.ArrowsRightLeft;\n                }\n                else if (right) {\n                    arrows = GlyphChars.ArrowRight;\n                }\n                else if (left) {\n                    arrows = GlyphChars.ArrowLeft;\n                }\n            }\n\n            const status = `${branch.getTrackingStatus({ suffix: `${GlyphChars.Space} ` })}${arrows}${\n                GlyphChars.Space\n            } ${branch.tracking}`;\n            description = `${description ? `${description}${GlyphChars.Space.repeat(2)}${status}` : status}`;\n        }\n\n        if (options.ref && branch.sha) {\n            description = description\n                ? `${description}${Strings.pad('$(git-commit)', 2, 2)}${GitService.shortenSha(branch.sha)}`\n                : `${Strings.pad('$(git-commit)', 0, 2)}${GitService.shortenSha(branch.sha)}`;\n        }\n\n        const checked =\n            options.checked || (options.checked === undefined && options.current === 'checkmark' && branch.current);\n        const item: BranchQuickPickItem = {\n            label: `${GlyphChars.SpaceThin}${Strings.pad('$(git-branch)', 0, 2)}${GlyphChars.SpaceThinnest}${\n                branch.name\n            }${checked ? `${GlyphChars.Space.repeat(2)}$(check)${GlyphChars.Space}` : ''}`,\n            description: description,\n            picked: picked === undefined ? branch.current : picked,\n            item: branch,\n            current: branch.current,\n            ref: branch.name,\n            remote: branch.remote\n        };\n\n        return item;\n    }\n}\n\nexport interface CommitQuickPickItem<T extends GitLogCommit = GitLogCommit> extends QuickPickItem {\n    readonly item: T;\n}\n\nexport namespace CommitQuickPickItem {\n    export function create<T extends GitLogCommit = GitLogCommit>(\n        commit: T,\n        picked?: boolean,\n        options: { compact?: boolean } = {}\n    ) {\n        if (GitStashCommit.is(commit)) {\n            const item: CommitQuickPickItem<T> = {\n                label: commit.getShortMessage(),\n                description: '',\n                detail: `${GlyphChars.Space.repeat(2)}${commit.stashName || commit.shortSha}${Strings.pad(\n                    GlyphChars.Dot,\n                    2,\n                    2\n                )}${commit.formattedDate}${Strings.pad(GlyphChars.Dot, 2, 2)}${commit.getFormattedDiffStatus({\n                    compact: true\n                })}`,\n                picked: picked,\n                item: commit\n            };\n\n            return item;\n        }\n\n        if (options.compact) {\n            const item: CommitQuickPickItem<T> = {\n                label: commit.getShortMessage(),\n                description: `${commit.author}, ${commit.formattedDate}${Strings.pad('$(git-commit)', 2, 2)}${\n                    commit.shortSha\n                }${Strings.pad(GlyphChars.Dot, 2, 2)}${commit.getFormattedDiffStatus({ compact: true })}`,\n                picked: picked,\n                item: commit\n            };\n            return item;\n        }\n\n        const item: CommitQuickPickItem<T> = {\n            label: commit.getShortMessage(),\n            description: '',\n            detail: `${GlyphChars.Space.repeat(2)}${commit.author}, ${commit.formattedDate}${Strings.pad(\n                '$(git-commit)',\n                2,\n                2\n            )}${commit.shortSha}${Strings.pad(GlyphChars.Dot, 2, 2)}${commit.getFormattedDiffStatus({\n                compact: true\n            })}`,\n            picked: picked,\n            item: commit\n        };\n        return item;\n    }\n}\n\nexport namespace RefQuickPickItem {\n    export function create(ref: string, picked?: boolean, options: { checked?: boolean } = {}) {\n        const item: RefQuickPickItem = {\n            label: `${\n                options.checked ? `$(check)${GlyphChars.Space}` : GlyphChars.Space.repeat(4)\n            } ${GitService.shortenSha(ref)}`,\n            picked: picked,\n            item: { name: ref, ref: ref },\n            current: false,\n            ref: ref,\n            remote: false\n        };\n\n        return item;\n    }\n}\n\nexport interface RefQuickPickItem extends QuickPickItem {\n    readonly item: GitReference;\n    readonly current: boolean;\n    readonly ref: string;\n    readonly remote: boolean;\n}\n\nexport interface RepositoryQuickPickItem extends QuickPickItem {\n    readonly item: Repository;\n    readonly repoPath: string;\n}\n\nexport namespace RepositoryQuickPickItem {\n    export async function create(\n        repository: Repository,\n        picked?: boolean,\n        options: { branch?: boolean; fetched?: boolean; status?: boolean } = {}\n    ) {\n        let repoStatus;\n        if (options.branch || options.status) {\n            repoStatus = await repository.getStatus();\n        }\n\n        let description = '';\n        if (options.branch && repoStatus) {\n            description = repoStatus.branch;\n        }\n\n        if (options.status && repoStatus) {\n            let workingStatus = '';\n            if (repoStatus.files.length !== 0) {\n                workingStatus = repoStatus.getFormattedDiffStatus({\n                    compact: true,\n                    prefix: Strings.pad(GlyphChars.Dot, 2, 2)\n                });\n            }\n\n            const upstreamStatus = repoStatus.getUpstreamStatus({\n                prefix: description ? `${GlyphChars.Space} ` : ''\n            });\n\n            const status = `${upstreamStatus}${workingStatus}`;\n            if (status) {\n                description = `${description ? `${description}${status}` : status}`;\n            }\n        }\n\n        if (options.fetched) {\n            const lastFetched = await repository.getLastFetched();\n            if (lastFetched !== 0) {\n                const fetched = `Last fetched ${Dates.getFormatter(new Date(lastFetched)).fromNow()}`;\n                description = `${\n                    description ? `${description}${Strings.pad(GlyphChars.Dot, 2, 2)}${fetched}` : fetched\n                }`;\n            }\n        }\n\n        const item: RepositoryQuickPickItem = {\n            label: repository.formattedName,\n            description: description,\n            picked: picked,\n            item: repository,\n            repoPath: repository.path\n        };\n\n        return item;\n    }\n}\n\nexport interface TagQuickPickItem extends QuickPickItem {\n    readonly item: GitTag;\n    readonly current: boolean;\n    readonly ref: string;\n    readonly remote: boolean;\n}\n\nexport namespace TagQuickPickItem {\n    export function create(\n        tag: GitTag,\n        picked?: boolean,\n        options: {\n            annotation?: boolean;\n            checked?: boolean;\n            ref?: boolean;\n            type?: boolean;\n        } = {}\n    ) {\n        let description = '';\n        if (options.type) {\n            description = 'tag';\n        }\n\n        if (options.ref && tag.sha) {\n            description = description\n                ? `${description}${Strings.pad('$(git-commit)', 2, 2)}${GitService.shortenSha(tag.sha)}`\n                : `${Strings.pad('$(git-commit)', 0, 2)}${GitService.shortenSha(tag.sha)}`;\n        }\n\n        if (options.annotation && tag.annotation) {\n            const annotation = emojify(tag.annotation);\n            description = description ? `${description}${Strings.pad(GlyphChars.Dot, 2, 2)}${annotation}` : annotation;\n        }\n\n        const item: TagQuickPickItem = {\n            label: `${Strings.pad('$(tag)', 0, 2)}${tag.name}${\n                options.checked ? `${GlyphChars.Space.repeat(2)}$(check)${GlyphChars.Space}` : ''\n            }`,\n            description: description,\n            picked: picked,\n            item: tag,\n            current: false,\n            ref: tag.name,\n            remote: false\n        };\n\n        return item;\n    }\n}\n","'use strict';\nimport { CancellationToken, CancellationTokenSource, QuickPickItem, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitBranch, GitTag } from '../git/gitService';\nimport { Promises } from '../system';\nimport { CommandQuickPickItem, getQuickPickIgnoreFocusOut } from './commonQuickPicks';\nimport { BranchQuickPickItem, RefQuickPickItem, TagQuickPickItem } from './gitQuickPicks';\n\nexport type ReferencesQuickPickItem = BranchQuickPickItem | TagQuickPickItem | RefQuickPickItem;\n\nexport interface ReferencesQuickPickOptions {\n    allowEnteringRefs?: boolean;\n    autoPick?: boolean;\n    checked?: string;\n    checkmarks: boolean;\n    filterBranches?(branch: GitBranch): boolean;\n    filterTags?(tag: GitTag): boolean;\n    goBack?: CommandQuickPickItem;\n    include?: 'branches' | 'tags' | 'all';\n}\n\nexport class ReferencesQuickPick {\n    constructor(public readonly repoPath: string | undefined) {}\n\n    async show(\n        placeHolder: string,\n        options?: Exclude<ReferencesQuickPickOptions, CommandQuickPickItem> & { include: 'branches' }\n    ): Promise<BranchQuickPickItem | undefined>;\n    async show(\n        placeHolder: string,\n        options?: Exclude<ReferencesQuickPickOptions, CommandQuickPickItem> & { include: 'tags' }\n    ): Promise<TagQuickPickItem | undefined>;\n    async show(\n        placeHolder: string,\n        options?: Exclude<ReferencesQuickPickOptions, CommandQuickPickItem>\n    ): Promise<ReferencesQuickPickItem | undefined>;\n    async show(\n        placeHolder: string,\n        options: ReferencesQuickPickOptions = { checkmarks: true }\n    ): Promise<ReferencesQuickPickItem | CommandQuickPickItem | undefined> {\n        const cancellation = new CancellationTokenSource();\n\n        let scope;\n        if (options.goBack) {\n            scope = await Container.keyboard.beginScope({ left: options.goBack });\n        }\n\n        let autoPick;\n        try {\n            let items = this.getItems(options, cancellation.token);\n            if (options.autoPick) {\n                items = items.then(itms => {\n                    if (itms.length <= 1) {\n                        autoPick = itms[0];\n                        cancellation.cancel();\n                    }\n                    return itms;\n                });\n            }\n\n            let pick;\n            if (options.allowEnteringRefs) {\n                placeHolder += `${GlyphChars.Space.repeat(3)}(select or enter a reference)`;\n\n                const quickpick = window.createQuickPick<ReferencesQuickPickItem | CommandQuickPickItem>();\n                quickpick.busy = true;\n                quickpick.enabled = false;\n                quickpick.placeholder = placeHolder;\n                quickpick.ignoreFocusOut = getQuickPickIgnoreFocusOut();\n                quickpick.show();\n\n                quickpick.items = await items;\n                quickpick.busy = false;\n                quickpick.enabled = true;\n\n                pick = await new Promise<ReferencesQuickPickItem | CommandQuickPickItem | undefined>(resolve => {\n                    cancellation.token.onCancellationRequested(() => quickpick.hide());\n\n                    quickpick.onDidHide(() => resolve(undefined));\n                    quickpick.onDidAccept(async () => {\n                        if (quickpick.selectedItems.length === 0) {\n                            quickpick.busy = true;\n                            quickpick.enabled = false;\n\n                            const ref = quickpick.value;\n                            if (\n                                this.repoPath === undefined ||\n                                (await Container.git.validateReference(this.repoPath, ref))\n                            ) {\n                                resolve(RefQuickPickItem.create(ref));\n                            }\n                            else {\n                                quickpick.title = 'You must enter a valid reference';\n                                quickpick.busy = false;\n                                quickpick.enabled = true;\n                                return;\n                            }\n                        }\n                        else {\n                            resolve(quickpick.selectedItems[0]);\n                        }\n\n                        quickpick.hide();\n                    });\n                });\n\n                quickpick.dispose();\n            }\n            else {\n                pick = await window.showQuickPick(\n                    items,\n                    {\n                        placeHolder: placeHolder,\n                        ignoreFocusOut: getQuickPickIgnoreFocusOut()\n                    },\n                    cancellation.token\n                );\n            }\n\n            if (pick === undefined && autoPick !== undefined) {\n                pick = autoPick;\n            }\n\n            if (pick === undefined) {\n                cancellation.cancel();\n            }\n\n            return pick;\n        }\n        finally {\n            if (scope !== undefined) {\n                await scope.dispose();\n            }\n\n            cancellation.dispose();\n        }\n    }\n\n    private async getItems(\n        { checked, checkmarks, filterBranches, filterTags, goBack, include, ...options }: ReferencesQuickPickOptions,\n        token: CancellationToken\n    ): Promise<(BranchQuickPickItem | TagQuickPickItem | CommandQuickPickItem)[]> {\n        include = include || 'all';\n\n        const results = await Promises.cancellable(\n            Promise.all<GitBranch[] | undefined, GitTag[] | undefined>([\n                include === 'all' || include === 'branches'\n                    ? Container.git.getBranches(this.repoPath, {\n                          ...options,\n                          filter: filterBranches && filterBranches\n                      })\n                    : undefined,\n                include === 'all' || include === 'tags'\n                    ? Container.git.getTags(this.repoPath, {\n                          ...options,\n                          filter: filterTags && filterTags,\n                          includeRefs: true\n                      })\n                    : undefined\n            ]),\n            token\n        );\n        if (results === undefined || token.isCancellationRequested) return [];\n\n        const [branches, tags] = results;\n\n        let items: (BranchQuickPickItem | TagQuickPickItem)[];\n        if (branches !== undefined && tags !== undefined) {\n            items = await Promise.all<BranchQuickPickItem | TagQuickPickItem>([\n                ...branches\n                    .filter(b => !b.remote)\n                    .map(b =>\n                        BranchQuickPickItem.create(b, checkmarks, {\n                            current: true,\n                            checked: b.name === checked,\n                            ref: true,\n                            status: true\n                        })\n                    ),\n                ...tags.map(t =>\n                    TagQuickPickItem.create(t, checkmarks, { checked: t.name === checked, ref: true, type: true })\n                ),\n                ...branches\n                    .filter(b => b.remote)\n                    .map(b =>\n                        BranchQuickPickItem.create(b, checkmarks, { checked: b.name === checked, type: 'remote' })\n                    )\n            ]);\n        }\n        else if (branches !== undefined) {\n            items = await Promise.all(\n                branches.map(b =>\n                    BranchQuickPickItem.create(b, checkmarks, {\n                        current: true,\n                        checked: b.name === checked,\n                        ref: true,\n                        status: true,\n                        type: 'remote'\n                    })\n                )\n            );\n        }\n        else {\n            items = tags!.map(t => TagQuickPickItem.create(t, checkmarks, { checked: t.name === checked, ref: true }));\n        }\n\n        // Move the checked item to the top\n        if (checked) {\n            const index = items.findIndex(i => i.ref === checked);\n            if (index !== -1) {\n                items.splice(0, 0, ...items.splice(index, 1));\n            }\n        }\n\n        if (goBack !== undefined) {\n            (items as QuickPickItem[]).splice(0, 0, goBack);\n        }\n\n        return items;\n    }\n}\n","'use strict';\nimport { CancellationTokenSource, commands, QuickPickItem, window } from 'vscode';\nimport { Commands } from '../commands';\nimport { configuration } from '../configuration';\nimport { Container } from '../container';\nimport { GitLog, GitLogCommit, GitRepoSearchBy, GitUri } from '../git/gitService';\nimport { KeyMapping, Keys } from '../keyboard';\nimport { ReferencesQuickPick, ReferencesQuickPickItem } from './referencesQuickPick';\n\nexport function getQuickPickIgnoreFocusOut() {\n    return !configuration.get<boolean>(configuration.name('advanced')('quickPick')('closeOnFocusOut').value);\n}\n\nexport function showQuickPickProgress(message: string, mapping?: KeyMapping): CancellationTokenSource {\n    const cancellation = new CancellationTokenSource();\n    void _showQuickPickProgress(message, cancellation, mapping);\n    return cancellation;\n}\n\nasync function _showQuickPickProgress(message: string, cancellation: CancellationTokenSource, mapping?: KeyMapping) {\n    const scope = mapping && (await Container.keyboard.beginScope(mapping));\n\n    try {\n        await window.showQuickPick(\n            _getInfiniteCancellablePromise(cancellation),\n            {\n                placeHolder: message,\n                ignoreFocusOut: getQuickPickIgnoreFocusOut()\n            },\n            cancellation.token\n        );\n    }\n    catch (ex) {\n        // Not sure why this throws\n    }\n    finally {\n        cancellation.cancel();\n        scope && scope.dispose();\n    }\n}\n\nfunction _getInfiniteCancellablePromise(cancellation: CancellationTokenSource) {\n    return new Promise<QuickPickItem[]>((resolve, reject) => {\n        const disposable = cancellation.token.onCancellationRequested(() => {\n            disposable.dispose();\n            resolve([]);\n        });\n    });\n}\n\nexport interface QuickPickItem extends QuickPickItem {\n    onDidSelect?(): void;\n    onDidPressKey?(key: Keys): Promise<{} | undefined>;\n}\n\nexport class CommandQuickPickItem implements QuickPickItem {\n    label!: string;\n    description!: string;\n    detail?: string | undefined;\n    protected command: Commands | undefined;\n    protected args: any[] | undefined;\n\n    constructor(item: QuickPickItem, args?: [Commands, any[]]);\n    constructor(item: QuickPickItem, command?: Commands, args?: any[]);\n    constructor(item: QuickPickItem, commandOrArgs?: Commands | [Commands, any[]], args?: any[]) {\n        if (commandOrArgs === undefined) {\n            this.command = undefined;\n            this.args = args;\n        }\n        else if (typeof commandOrArgs === 'string') {\n            this.command = commandOrArgs;\n            this.args = args;\n        }\n        else {\n            this.command = commandOrArgs[0];\n            this.args = commandOrArgs.slice(1);\n        }\n        Object.assign(this, item);\n    }\n\n    execute(): Thenable<{} | undefined> {\n        if (this.command === undefined) return Promise.resolve(undefined);\n\n        return commands.executeCommand(this.command, ...(this.args || []));\n    }\n\n    onDidPressKey(key: Keys): Thenable<{} | undefined> {\n        return this.execute();\n    }\n}\n\nexport class KeyCommandQuickPickItem extends CommandQuickPickItem {\n    constructor(command: Commands, args?: any[]) {\n        super({ label: '', description: '' }, command, args);\n    }\n}\n\nexport class MessageQuickPickItem extends CommandQuickPickItem {\n    constructor(message: string) {\n        super({ label: message, description: '' });\n    }\n}\n\nexport class ShowCommitInViewQuickPickItem extends CommandQuickPickItem {\n    constructor(\n        public readonly commit: GitLogCommit,\n        item: QuickPickItem = {\n            label: '$(eye) Show in View',\n            description: `shows the ${commit.isStash ? 'stashed changes' : 'commit'} in the Search Commits view`\n        }\n    ) {\n        super(item, undefined, undefined);\n    }\n\n    async execute(): Promise<{} | undefined> {\n        return void (await Container.searchView.search(this.commit.repoPath, this.commit.sha, GitRepoSearchBy.Sha, {\n            label: { label: `commits with an id matching '${this.commit.shortSha}'` }\n        }));\n    }\n}\n\nexport class ShowCommitSearchResultsInViewQuickPickItem extends CommandQuickPickItem {\n    constructor(\n        public readonly search: string,\n        public readonly searchBy: GitRepoSearchBy,\n        public readonly results: GitLog,\n        public readonly resultsLabel: string | { label: string; resultsType?: { singular: string; plural: string } },\n        item: QuickPickItem = {\n            label: '$(eye) Show in View',\n            description: 'shows the search results in the Search Commits view'\n        }\n    ) {\n        super(item, undefined, undefined);\n    }\n\n    async execute(): Promise<{} | undefined> {\n        return void (await Container.searchView.showSearchResults(\n            this.results.repoPath,\n            this.search,\n            this.searchBy,\n            this.results,\n            {\n                label: this.resultsLabel\n            }\n        ));\n    }\n}\n\nexport class ShowFileHistoryFromQuickPickItem extends CommandQuickPickItem {\n    constructor(\n        private readonly repoPath: string,\n        private readonly placeHolder: string,\n        private readonly _goBack?: CommandQuickPickItem,\n        item: QuickPickItem = {\n            label: '$(history) Show File History from...',\n            description: 'shows an alternate file history'\n        }\n    ) {\n        super(item, undefined, undefined);\n    }\n\n    execute(): Promise<CommandQuickPickItem | ReferencesQuickPickItem | undefined> {\n        return new ReferencesQuickPick(this.repoPath).show(this.placeHolder, {\n            allowEnteringRefs: true,\n            checkmarks: false,\n            goBack: this._goBack\n        });\n    }\n}\n\nexport class ShowFileHistoryInViewQuickPickItem extends CommandQuickPickItem {\n    constructor(\n        public readonly uri: GitUri,\n        public readonly baseRef: string | undefined,\n        item: QuickPickItem = {\n            label: '$(eye) Show in View',\n            description: 'shows the file history in the File History view'\n        }\n    ) {\n        super(item, undefined, undefined);\n    }\n\n    async execute(): Promise<{} | undefined> {\n        return void (await Container.fileHistoryView.showHistoryForUri(this.uri, this.baseRef));\n    }\n}\n","'use strict';\nimport { window } from 'vscode';\nimport { Commands, OpenInRemoteCommandArgs } from '../commands';\nimport { GlyphChars } from '../constants';\nimport {\n    getNameFromRemoteResource,\n    GitRemote,\n    GitService,\n    GitUri,\n    RemoteResource,\n    RemoteResourceType\n} from '../git/gitService';\nimport { CommandQuickPickItem, getQuickPickIgnoreFocusOut } from './commonQuickPicks';\n\nexport class OpenRemoteCommandQuickPickItem extends CommandQuickPickItem {\n    private remote: GitRemote;\n    private resource: RemoteResource;\n\n    constructor(remote: GitRemote, resource: RemoteResource, public readonly clipboard?: boolean) {\n        super(\n            {\n                label: clipboard\n                    ? `$(link-external) Copy ${getNameFromRemoteResource(resource)} Url to Clipboard from ${\n                          remote.provider!.name\n                      }`\n                    : `$(link-external) Open ${getNameFromRemoteResource(resource)} on ${remote.provider!.name}`,\n                description: `$(repo) ${remote.provider!.path}`\n            },\n            undefined,\n            undefined\n        );\n\n        this.remote = remote;\n        this.resource = resource;\n    }\n\n    execute(): Thenable<{} | undefined> {\n        if (this.clipboard) return this.remote.provider!.copy(this.resource);\n\n        return this.remote.provider!.open(this.resource);\n    }\n}\n\nexport class OpenRemotesCommandQuickPickItem extends CommandQuickPickItem {\n    constructor(remotes: GitRemote[], resource: RemoteResource, goBackCommand?: CommandQuickPickItem) {\n        const name = getNameFromRemoteResource(resource);\n\n        let description;\n        switch (resource.type) {\n            case RemoteResourceType.Branch:\n                description = `$(git-branch) ${resource.branch}`;\n                break;\n\n            case RemoteResourceType.Branches:\n                description = '$(git-branch) Branches';\n                break;\n\n            case RemoteResourceType.Commit:\n                description = `$(git-commit) ${GitService.shortenSha(resource.sha)}`;\n                break;\n\n            case RemoteResourceType.File:\n                description = GitUri.getFormattedPath(resource.fileName);\n                break;\n\n            case RemoteResourceType.Repo:\n                description = '$(repo) Repository';\n                break;\n\n            case RemoteResourceType.Revision:\n                if (resource.commit !== undefined && resource.commit.isFile) {\n                    if (resource.commit.status === 'D') {\n                        resource.sha = resource.commit.previousSha;\n                        description = `${GitUri.getFormattedPath(resource.fileName)} from ${\n                            GlyphChars.Space\n                        }$(git-commit) ${resource.commit.previousShortSha} (deleted in ${\n                            GlyphChars.Space\n                        }$(git-commit) ${resource.commit.shortSha})`;\n                    }\n                    else {\n                        resource.sha = resource.commit.sha;\n                        description = `${GitUri.getFormattedPath(resource.fileName)} from ${\n                            GlyphChars.Space\n                        }$(git-commit) ${resource.commit.shortSha}`;\n                    }\n                }\n                else {\n                    const shortFileSha = resource.sha === undefined ? '' : GitService.shortenSha(resource.sha);\n                    description = `${GitUri.getFormattedPath(resource.fileName)}${\n                        shortFileSha ? ` from ${GlyphChars.Space}$(git-commit) ${shortFileSha}` : ''\n                    }`;\n                }\n                break;\n\n            default:\n                description = '';\n                break;\n        }\n\n        let remote: GitRemote | undefined;\n        if (remotes.length > 1) {\n            remote = remotes.find(r => r.default);\n        }\n        else if (remotes.length === 1) {\n            remote = remotes[0];\n        }\n\n        if (remote != null) {\n            const commandArgs: OpenInRemoteCommandArgs = {\n                remotes: remotes,\n                resource: resource,\n                goBackCommand: goBackCommand\n            };\n            super(\n                {\n                    label: `$(link-external) Open ${name} on ${remote.provider!.name}`,\n                    description: `${description} in ${GlyphChars.Space}$(repo) ${remote.provider!.path}`\n                },\n                Commands.OpenInRemote,\n                [undefined, commandArgs]\n            );\n\n            return;\n        }\n\n        remote = remotes[0];\n        // Use the real provider name if there is only 1 provider\n        const provider = remotes.every(r => r.provider !== undefined && r.provider.name === remote!.provider!.name)\n            ? remote.provider!.name\n            : 'Remote';\n\n        const commandArgs: OpenInRemoteCommandArgs = {\n            remotes: remotes,\n            resource: resource,\n            goBackCommand: goBackCommand\n        };\n        super(\n            {\n                label: `$(link-external) Open ${name} on ${provider}${GlyphChars.Ellipsis}`,\n                description: `${description}`\n            },\n            Commands.OpenInRemote,\n            [undefined, commandArgs]\n        );\n    }\n}\n\nexport class RemotesQuickPick {\n    static async show(\n        remotes: GitRemote[],\n        placeHolder: string,\n        resource: RemoteResource,\n        clipboard?: boolean,\n        goBackCommand?: CommandQuickPickItem\n    ): Promise<OpenRemoteCommandQuickPickItem | CommandQuickPickItem | undefined> {\n        const items = remotes.map(r => new OpenRemoteCommandQuickPickItem(r, resource, clipboard)) as (\n            | OpenRemoteCommandQuickPickItem\n            | CommandQuickPickItem)[];\n\n        if (goBackCommand) {\n            items.splice(0, 0, goBackCommand);\n        }\n\n        // const scope = await Container.keyboard.beginScope({ left: goBackCommand });\n\n        const pick = await window.showQuickPick(items, {\n            placeHolder: placeHolder,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut()\n        });\n        if (pick === undefined) return undefined;\n\n        // await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\nimport { CancellationTokenSource, window } from 'vscode';\nimport { Commands, ShowQuickBranchHistoryCommandArgs } from '../commands';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitLog, GitUri, RemoteResourceType } from '../git/gitService';\nimport { KeyNoopCommand } from '../keyboard';\nimport { Iterables } from '../system';\nimport { CommandQuickPickItem, getQuickPickIgnoreFocusOut, showQuickPickProgress } from './commonQuickPicks';\nimport { OpenRemotesCommandQuickPickItem } from './remotesQuickPick';\nimport { CommitQuickPickItem } from './gitQuickPicks';\n\nexport class BranchHistoryQuickPick {\n    static showProgress(branch: string) {\n        return showQuickPickProgress(\n            `${branch} history ${GlyphChars.Dash} search by commit message, filename, or commit id`,\n            {\n                left: KeyNoopCommand,\n                ',': KeyNoopCommand,\n                '.': KeyNoopCommand\n            }\n        );\n    }\n\n    static async show(\n        log: GitLog,\n        uri: GitUri | undefined,\n        branch: string,\n        progressCancellation: CancellationTokenSource,\n        goBackCommand?: CommandQuickPickItem,\n        nextPageCommand?: CommandQuickPickItem\n    ): Promise<CommitQuickPickItem | CommandQuickPickItem | undefined> {\n        const items = Array.from(Iterables.map(log.commits.values(), c => CommitQuickPickItem.create(c))) as (\n            | CommitQuickPickItem\n            | CommandQuickPickItem)[];\n\n        const currentCommandArgs: ShowQuickBranchHistoryCommandArgs = {\n            branch: branch,\n            log: log,\n            maxCount: log.maxCount,\n            goBackCommand: goBackCommand\n        };\n        const currentCommand = new CommandQuickPickItem(\n            {\n                label: `go back ${GlyphChars.ArrowBack}`,\n                description: `to history of ${GlyphChars.Space}$(git-branch) ${branch}`\n            },\n            Commands.ShowQuickBranchHistory,\n            [uri, currentCommandArgs]\n        );\n\n        const remotes = await Container.git.getRemotes((uri && uri.repoPath) || log.repoPath, { sort: true });\n        if (remotes.length) {\n            items.splice(\n                0,\n                0,\n                new OpenRemotesCommandQuickPickItem(\n                    remotes,\n                    {\n                        type: RemoteResourceType.Branch,\n                        branch: branch\n                    },\n                    currentCommand\n                )\n            );\n        }\n\n        let previousPageCommand: CommandQuickPickItem | undefined = undefined;\n\n        if (log.truncated || log.sha) {\n            if (log.truncated) {\n                const commandArgs: ShowQuickBranchHistoryCommandArgs = {\n                    branch: branch,\n                    maxCount: 0,\n                    goBackCommand: goBackCommand\n                };\n                items.splice(\n                    0,\n                    0,\n                    new CommandQuickPickItem(\n                        {\n                            label: '$(sync) Show All Commits',\n                            description: 'this may take a while'\n                        },\n                        Commands.ShowQuickBranchHistory,\n                        [GitUri.fromRepoPath(log.repoPath), commandArgs]\n                    )\n                );\n            }\n\n            if (nextPageCommand) {\n                items.splice(0, 0, nextPageCommand);\n            }\n\n            if (log.truncated) {\n                const commandArgs: ShowQuickBranchHistoryCommandArgs = {\n                    branch: branch,\n                    maxCount: log.maxCount,\n                    nextPageCommand: nextPageCommand\n                };\n                const npc = new CommandQuickPickItem(\n                    {\n                        label: '$(arrow-right) Show Next Commits',\n                        description: `shows ${log.maxCount} newer commits`\n                    },\n                    Commands.ShowQuickBranchHistory,\n                    [uri, commandArgs]\n                );\n\n                const last = Iterables.last(log.commits.values());\n                if (last != null) {\n                    const commandArgs: ShowQuickBranchHistoryCommandArgs = {\n                        branch: branch,\n                        maxCount: log.maxCount,\n                        goBackCommand: goBackCommand,\n                        nextPageCommand: npc\n                    };\n                    previousPageCommand = new CommandQuickPickItem(\n                        {\n                            label: '$(arrow-left) Show Previous Commits',\n                            description: `shows ${log.maxCount} older commits`\n                        },\n                        Commands.ShowQuickBranchHistory,\n                        [new GitUri(uri ? uri : last.uri, last), commandArgs]\n                    );\n\n                    items.splice(0, 0, previousPageCommand);\n                }\n            }\n        }\n\n        if (goBackCommand) {\n            items.splice(0, 0, goBackCommand);\n        }\n\n        if (progressCancellation.token.isCancellationRequested) return undefined;\n\n        const scope = await Container.keyboard.beginScope({\n            left: goBackCommand,\n            ',': previousPageCommand,\n            '.': nextPageCommand\n        });\n\n        progressCancellation.cancel();\n\n        const pick = await window.showQuickPick(items, {\n            matchOnDescription: true,\n            matchOnDetail: true,\n            placeHolder: `${branch} history ${GlyphChars.Dash} search by commit message, filename, or commit id`,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut()\n            // onDidSelectItem: (item: QuickPickItem) => {\n            //     scope.setKeyCommand('right', item);\n            // }\n        });\n\n        await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\nimport { commands, QuickPickItem, TextDocumentShowOptions, TextEditor, Uri, window } from 'vscode';\nimport {\n    Commands,\n    CopyMessageToClipboardCommandArgs,\n    CopyRemoteFileUrlToClipboardCommandArgs,\n    CopyShaToClipboardCommandArgs,\n    DiffWithPreviousCommandArgs,\n    DiffWithWorkingCommandArgs,\n    openEditor,\n    OpenWorkingFileCommandArgs,\n    ShowQuickCommitDetailsCommandArgs,\n    ShowQuickCommitFileDetailsCommandArgs,\n    ShowQuickFileHistoryCommandArgs\n} from '../commands';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitLog, GitLogCommit, GitService, GitUri, RemoteResourceType } from '../git/gitService';\nimport { KeyCommand, KeyNoopCommand, Keys } from '../keyboard';\nimport { Strings } from '../system';\nimport { CommandQuickPickItem, getQuickPickIgnoreFocusOut, KeyCommandQuickPickItem } from './commonQuickPicks';\nimport { OpenRemotesCommandQuickPickItem } from './remotesQuickPick';\n\nexport class ApplyCommitFileChangesCommandQuickPickItem extends CommandQuickPickItem {\n    constructor(private readonly commit: GitLogCommit, item?: QuickPickItem) {\n        super(\n            item || {\n                label: '$(git-pull-request) Apply Changes',\n                description: `${commit.getFormattedPath()} from ${GlyphChars.Space}$(git-commit) ${commit.shortSha}`\n            },\n            undefined,\n            undefined\n        );\n    }\n\n    async execute(): Promise<{} | undefined> {\n        const uri = this.commit.toGitUri();\n\n        // Open the working file to ensure undo will work\n        const args: OpenWorkingFileCommandArgs = {\n            uri: uri,\n            showOptions: { preserveFocus: true, preview: false }\n        };\n        void (await commands.executeCommand(Commands.OpenWorkingFile, undefined, args));\n\n        void (await Container.git.applyChangesToWorkingFile(uri));\n\n        return undefined;\n    }\n}\n\nexport class OpenCommitFileCommandQuickPickItem extends CommandQuickPickItem {\n    constructor(private readonly _commit: GitLogCommit, item?: QuickPickItem) {\n        super(\n            item || {\n                label: '$(file-symlink-file) Open File',\n                description: `${_commit.getFormattedPath()}`\n            }\n        );\n    }\n\n    execute(options?: TextDocumentShowOptions): Thenable<TextEditor | undefined> {\n        const uri = this._commit.toGitUri();\n        const args: OpenWorkingFileCommandArgs = {\n            uri: uri,\n            showOptions: options\n        };\n        return commands.executeCommand(Commands.OpenWorkingFile, undefined, args);\n    }\n\n    onDidPressKey(key: Keys): Thenable<{} | undefined> {\n        return this.execute({\n            preserveFocus: true,\n            preview: false\n        });\n    }\n}\n\nexport class OpenCommitFileRevisionCommandQuickPickItem extends CommandQuickPickItem {\n    private readonly _uri: Uri;\n\n    constructor(commit: GitLogCommit, item?: QuickPickItem) {\n        let description: string;\n        let uri: Uri;\n        if (commit.status === 'D') {\n            uri = GitUri.toRevisionUri(commit.previousFileSha, commit.previousUri.fsPath, commit.repoPath);\n            description = `${commit.getFormattedPath()} from ${GlyphChars.Space}$(git-commit) ${\n                commit.previousShortSha\n            } (deleted in ${GlyphChars.Space}$(git-commit) ${commit.shortSha})`;\n        }\n        else {\n            uri = GitUri.toRevisionUri(commit.sha, commit.uri.fsPath, commit.repoPath);\n            description = `${commit.getFormattedPath()} from ${GlyphChars.Space}$(git-commit) ${commit.shortSha}`;\n        }\n\n        super(\n            item || {\n                label: '$(file-symlink-file) Open Revision',\n                description: description\n            }\n        );\n\n        this._uri = uri;\n    }\n\n    execute(options?: TextDocumentShowOptions): Thenable<TextEditor | undefined> {\n        return openEditor(this._uri, options);\n    }\n\n    onDidPressKey(key: Keys): Thenable<{} | undefined> {\n        return this.execute({\n            preserveFocus: true,\n            preview: false\n        });\n    }\n}\n\nexport class CommitFileQuickPick {\n    static async show(\n        commit: GitLogCommit,\n        uri: Uri,\n        goBackCommand?: CommandQuickPickItem,\n        currentCommand?: CommandQuickPickItem,\n        fileLog?: GitLog\n    ): Promise<CommandQuickPickItem | undefined> {\n        const items: CommandQuickPickItem[] = [];\n\n        const stash = commit.isStash;\n\n        const isUncommitted = commit.isUncommitted;\n        if (isUncommitted) {\n            // Since we can't trust the previous sha on an uncommitted commit, find the last commit for this file\n            const c = await Container.git.getCommitForFile(undefined, commit.uri.fsPath);\n            if (c === undefined) return undefined;\n\n            commit = c;\n        }\n\n        const workingUri = await commit.getWorkingUri();\n\n        if (stash) {\n            items.push(new ApplyCommitFileChangesCommandQuickPickItem(commit));\n        }\n\n        if (commit.previousFileSha) {\n            const commandArgs: DiffWithPreviousCommandArgs = {\n                commit: commit\n            };\n\n            const previousSha = await Container.git.resolveReference(\n                commit.repoPath,\n                commit.previousFileSha,\n                commit.previousUri\n            );\n\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: '$(git-compare) Open Changes',\n                        description: `$(git-commit) ${GitService.shortenSha(previousSha)} ${\n                            GlyphChars.Space\n                        } $(git-compare) ${GlyphChars.Space} $(git-commit) ${commit.shortSha}`\n                    },\n                    Commands.DiffWithPrevious,\n                    [commit.uri, commandArgs]\n                )\n            );\n        }\n\n        if (workingUri) {\n            const commandArgs: DiffWithWorkingCommandArgs = {\n                commit: commit\n            };\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: '$(git-compare) Open Changes with Working File',\n                        description: `$(git-commit) ${commit.shortSha} ${GlyphChars.Space} $(git-compare) ${\n                            GlyphChars.Space\n                        } ${GitUri.getFormattedPath(workingUri, { relativeTo: commit.repoPath })}`\n                    },\n                    Commands.DiffWithWorking,\n                    [workingUri, commandArgs]\n                )\n            );\n        }\n\n        if (workingUri && commit.status !== 'D') {\n            items.push(new OpenCommitFileCommandQuickPickItem(commit));\n        }\n        items.push(new OpenCommitFileRevisionCommandQuickPickItem(commit));\n\n        const remotes = await Container.git.getRemotes(commit.repoPath, { sort: true });\n        if (remotes.length) {\n            if (workingUri && commit.status !== 'D') {\n                const branch = await Container.git.getBranch(commit.repoPath);\n                if (branch !== undefined) {\n                    items.push(\n                        new OpenRemotesCommandQuickPickItem(\n                            remotes,\n                            {\n                                type: RemoteResourceType.File,\n                                fileName: GitUri.relativeTo(workingUri, commit.repoPath),\n                                branch: branch.name\n                            },\n                            currentCommand\n                        )\n                    );\n                }\n            }\n\n            if (!stash) {\n                items.push(\n                    new OpenRemotesCommandQuickPickItem(\n                        remotes,\n                        {\n                            type: RemoteResourceType.Revision,\n                            fileName: commit.fileName,\n                            commit: commit\n                        },\n                        currentCommand\n                    )\n                );\n            }\n        }\n\n        if (!stash) {\n            items.push(new ApplyCommitFileChangesCommandQuickPickItem(commit));\n\n            const copyShaCommandArgs: CopyShaToClipboardCommandArgs = {\n                sha: commit.sha\n            };\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: '$(clippy) Copy Commit ID to Clipboard',\n                        description: `${commit.shortSha}`\n                    },\n                    Commands.CopyShaToClipboard,\n                    [uri, copyShaCommandArgs]\n                )\n            );\n\n            const copyMessageCommandArgs: CopyMessageToClipboardCommandArgs = {\n                message: commit.message,\n                sha: commit.sha\n            };\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: '$(clippy) Copy Commit Message to Clipboard',\n                        description: `${commit.getShortMessage()}`\n                    },\n                    Commands.CopyMessageToClipboard,\n                    [uri, copyMessageCommandArgs]\n                )\n            );\n\n            if (remotes.length) {\n                const copyRemoteUrlCommandArgs: CopyRemoteFileUrlToClipboardCommandArgs = {\n                    sha: commit.sha\n                };\n                items.push(\n                    new CommandQuickPickItem(\n                        {\n                            label: '$(clippy) Copy Remote Url to Clipboard'\n                        },\n                        Commands.CopyRemoteFileUrlToClipboard,\n                        [uri, copyRemoteUrlCommandArgs]\n                    )\n                );\n            }\n        }\n\n        if (workingUri) {\n            const commandArgs: ShowQuickFileHistoryCommandArgs = {\n                log: fileLog,\n                goBackCommand: currentCommand\n            };\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: '$(history) Show File History',\n                        description: `of ${commit.getFormattedPath()}`\n                    },\n                    Commands.ShowQuickFileHistory,\n                    [workingUri, commandArgs]\n                )\n            );\n        }\n\n        if (!stash) {\n            const fileHistoryCommandArgs: ShowQuickFileHistoryCommandArgs = {\n                goBackCommand: currentCommand\n            };\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: `$(history) Show ${\n                            GitUri.relativeTo(workingUri || commit.uri, commit.repoPath) ? 'Previous ' : ''\n                        }File History`,\n                        description: `of ${commit.getFormattedPath()} from ${GlyphChars.Space}$(git-commit) ${\n                            commit.shortSha\n                        }`\n                    },\n                    Commands.ShowQuickFileHistory,\n                    [commit.toGitUri(), fileHistoryCommandArgs]\n                )\n            );\n\n            const commitDetailsCommandArgs: ShowQuickCommitDetailsCommandArgs = {\n                commit: commit,\n                sha: commit.sha,\n                goBackCommand: currentCommand\n            };\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: '$(git-commit) Show Commit Details',\n                        description: `$(git-commit) ${commit.shortSha}`\n                    },\n                    Commands.ShowQuickCommitDetails,\n                    [commit.toGitUri(), commitDetailsCommandArgs]\n                )\n            );\n        }\n\n        if (goBackCommand) {\n            items.splice(0, 0, goBackCommand);\n        }\n\n        let previousCommand: KeyCommand | (() => Promise<KeyCommand>) | undefined = undefined;\n        let nextCommand: KeyCommand | (() => Promise<KeyCommand>) | undefined = undefined;\n        if (!stash) {\n            previousCommand = async () => {\n                const previousUri = await Container.git.getPreviousUri(commit.repoPath, uri, commit.sha);\n                if (previousUri === undefined || previousUri.sha === undefined) return KeyNoopCommand;\n\n                const previousCommandArgs: ShowQuickCommitFileDetailsCommandArgs = {\n                    // If we have the full file history, reuse it\n                    fileLog:\n                        fileLog !== undefined && !fileLog.truncated && fileLog.sha === undefined ? fileLog : undefined,\n                    sha: previousUri.sha,\n                    goBackCommand: goBackCommand\n                };\n                return new KeyCommandQuickPickItem(Commands.ShowQuickCommitFileDetails, [\n                    previousUri,\n                    previousCommandArgs\n                ]);\n            };\n\n            nextCommand = async () => {\n                const nextUri = await Container.git.getNextUri(commit.repoPath, uri, commit.sha);\n                if (nextUri === undefined || nextUri.sha === undefined) return KeyNoopCommand;\n\n                const nextCommandArgs: ShowQuickCommitFileDetailsCommandArgs = {\n                    // If we have the full file history, reuse it\n                    fileLog:\n                        fileLog !== undefined && !fileLog.truncated && fileLog.sha === undefined ? fileLog : undefined,\n                    sha: nextUri.sha,\n                    goBackCommand: goBackCommand\n                };\n                return new KeyCommandQuickPickItem(Commands.ShowQuickCommitFileDetails, [nextUri, nextCommandArgs]);\n            };\n        }\n\n        const scope = await Container.keyboard.beginScope({\n            left: goBackCommand,\n            ',': previousCommand,\n            '.': nextCommand\n        });\n\n        const pick = await window.showQuickPick(items, {\n            matchOnDescription: true,\n            placeHolder: `${commit.getFormattedPath()} ${Strings.pad(GlyphChars.Dot, 1, 1)} ${\n                isUncommitted ? `Uncommitted ${GlyphChars.ArrowRightHollow} ` : ''\n            }${commit.shortSha} ${Strings.pad(GlyphChars.Dot, 1, 1)} ${commit.author}, ${\n                commit.formattedDate\n            } ${Strings.pad(GlyphChars.Dot, 1, 1)} ${commit.getShortMessage()}`,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut(),\n            onDidSelectItem: (item: QuickPickItem) => {\n                void scope.setKeyCommand('right', item as KeyCommand);\n            }\n        });\n\n        await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { commands, TextDocumentShowOptions, TextEditor, Uri, window } from 'vscode';\nimport {\n    Commands,\n    CopyMessageToClipboardCommandArgs,\n    CopyRemoteFileUrlToClipboardCommandArgs,\n    CopyShaToClipboardCommandArgs,\n    DiffDirectoryCommandArgs,\n    DiffWithPreviousCommandArgs,\n    openEditor,\n    OpenWorkingFileCommandArgs,\n    ShowQuickCommitDetailsCommandArgs,\n    StashApplyCommandArgs,\n    StashDeleteCommandArgs\n} from '../commands';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport {\n    GitFile,\n    GitLog,\n    GitLogCommit,\n    GitService,\n    GitStashCommit,\n    GitUri,\n    RemoteResourceType\n} from '../git/gitService';\nimport { KeyNoopCommand, Keys } from '../keyboard';\nimport { Arrays, Iterables, Strings } from '../system';\nimport {\n    CommandQuickPickItem,\n    getQuickPickIgnoreFocusOut,\n    KeyCommandQuickPickItem,\n    QuickPickItem,\n    ShowCommitInViewQuickPickItem\n} from './commonQuickPicks';\nimport { OpenRemotesCommandQuickPickItem } from './remotesQuickPick';\n\nexport class CommitWithFileStatusQuickPickItem extends CommandQuickPickItem {\n    constructor(public readonly commit: GitLogCommit, private readonly _file: GitFile) {\n        super({\n            label: `${Strings.pad(GitFile.getStatusOcticon(_file.status), 4, 2)} ${paths.basename(_file.fileName)}`,\n            description: GitFile.getFormattedDirectory(_file, true)\n        });\n\n        this.commit = commit.toFileCommit(_file);\n    }\n\n    get sha(): string {\n        return this.commit.sha;\n    }\n\n    execute(options?: TextDocumentShowOptions): Thenable<TextEditor | undefined> {\n        return openEditor(GitUri.toRevisionUri(this.commit.sha, this._file, this.commit.repoPath), options);\n    }\n\n    onDidPressKey(key: Keys): Thenable<{} | undefined> {\n        if (this.commit.previousSha === undefined) return super.onDidPressKey(key);\n\n        const commandArgs: DiffWithPreviousCommandArgs = {\n            commit: this.commit,\n            showOptions: {\n                preserveFocus: true,\n                preview: false\n            }\n        };\n        return commands.executeCommand(Commands.DiffWithPrevious, this.commit.toGitUri(), commandArgs);\n    }\n}\n\nexport class OpenCommitFilesCommandQuickPickItem extends CommandQuickPickItem {\n    constructor(private readonly _commit: GitLogCommit, item?: QuickPickItem) {\n        super(\n            item || {\n                label: '$(file-symlink-file) Open Files',\n                description: ''\n                // detail: `Opens all of the changed file in the working tree`\n            }\n        );\n    }\n\n    async execute(\n        options: TextDocumentShowOptions = { preserveFocus: false, preview: false }\n    ): Promise<{} | undefined> {\n        const uris = Arrays.filterMap(this._commit.files, f =>\n            GitUri.fromFile(f, this._commit.repoPath, this._commit.sha)\n        );\n        for (const uri of uris) {\n            const args: OpenWorkingFileCommandArgs = {\n                uri: uri,\n                showOptions: options\n            };\n            await commands.executeCommand(Commands.OpenWorkingFile, undefined, args);\n        }\n\n        return undefined;\n    }\n\n    onDidPressKey(key: Keys): Thenable<{} | undefined> {\n        return this.execute({\n            preserveFocus: true,\n            preview: false\n        });\n    }\n}\n\nexport class OpenCommitFileRevisionsCommandQuickPickItem extends CommandQuickPickItem {\n    constructor(private readonly _commit: GitLogCommit, item?: QuickPickItem) {\n        super(\n            item || {\n                label: '$(file-symlink-file) Open Revisions',\n                description: `from ${GlyphChars.Space}$(git-commit) ${_commit.shortSha}`\n                // detail: `Opens all of the changed files in $(git-commit) ${commit.shortSha}`\n            }\n        );\n    }\n\n    async execute(\n        options: TextDocumentShowOptions = { preserveFocus: false, preview: false }\n    ): Promise<{} | undefined> {\n        const uris = Arrays.filterMap(this._commit.files, f =>\n            GitUri.toRevisionUri(\n                f.status === 'D' ? this._commit.previousFileSha : this._commit.sha,\n                f,\n                this._commit.repoPath\n            )\n        );\n\n        for (const uri of uris) {\n            await openEditor(uri, options);\n        }\n        return undefined;\n    }\n\n    onDidPressKey(key: Keys): Thenable<{} | undefined> {\n        return this.execute({\n            preserveFocus: true,\n            preview: false\n        });\n    }\n}\n\nexport interface CommitQuickPickOptions {\n    currentCommand?: CommandQuickPickItem;\n    goBackCommand?: CommandQuickPickItem;\n    repoLog?: GitLog;\n}\n\nexport class CommitQuickPick {\n    constructor(public readonly repoPath: string | undefined) {}\n\n    async show(\n        commit: GitLogCommit,\n        uri: Uri,\n        options: CommitQuickPickOptions = {}\n    ): Promise<CommitWithFileStatusQuickPickItem | CommandQuickPickItem | undefined> {\n        let previousCommand: (() => Promise<KeyCommandQuickPickItem | typeof KeyNoopCommand>) | undefined = undefined;\n        let nextCommand: (() => Promise<KeyCommandQuickPickItem | typeof KeyNoopCommand>) | undefined = undefined;\n        if (!commit.isStash) {\n            previousCommand = async () => {\n                const previousRef =\n                    commit.previousSha === undefined || GitService.isShaParent(commit.previousSha)\n                        ? await Container.git.resolveReference(commit.repoPath, commit.previousSha || commit.sha)\n                        : commit.previousSha;\n                if (previousRef === undefined) return KeyNoopCommand;\n\n                const previousCommandArgs: ShowQuickCommitDetailsCommandArgs = {\n                    repoLog: options.repoLog,\n                    sha: previousRef,\n                    goBackCommand: options.goBackCommand\n                };\n                return new KeyCommandQuickPickItem(Commands.ShowQuickCommitDetails, [\n                    Uri.file(commit.repoPath),\n                    previousCommandArgs\n                ]);\n            };\n\n            nextCommand = async () => {\n                let log = options.repoLog;\n                let c = log && log.commits.get(commit.sha);\n\n                // If we can't find the commit or the next commit isn't available (since it isn't trustworthy)\n                if (c === undefined || c.nextSha === undefined) {\n                    log = undefined;\n                    c = undefined;\n\n                    // Try to find the next commit\n                    const nextLog = await Container.git.getLog(commit.repoPath, {\n                        maxCount: 1,\n                        reverse: true,\n                        ref: commit.sha\n                    });\n\n                    const next = nextLog && Iterables.first(nextLog.commits.values());\n                    if (next !== undefined && next.sha !== commit.sha) {\n                        c = commit;\n                        c.nextSha = next.sha;\n                    }\n                }\n\n                if (c === undefined || c.nextSha === undefined) return KeyNoopCommand;\n\n                const nextCommandArgs: ShowQuickCommitDetailsCommandArgs = {\n                    repoLog: log,\n                    sha: c.nextSha,\n                    goBackCommand: options.goBackCommand\n                };\n                return new KeyCommandQuickPickItem(Commands.ShowQuickCommitDetails, [\n                    Uri.file(commit.repoPath),\n                    nextCommandArgs\n                ]);\n            };\n        }\n\n        const scope = await Container.keyboard.beginScope({\n            left: options.goBackCommand,\n            ',': previousCommand,\n            '.': nextCommand\n        });\n\n        const pick = await window.showQuickPick(this.getItems(commit, uri, options), {\n            matchOnDescription: true,\n            matchOnDetail: true,\n            placeHolder: `${commit.shortSha} ${Strings.pad(GlyphChars.Dot, 1, 1)} ${\n                commit.author ? `${commit.author}, ` : ''\n            }${commit.formattedDate} ${Strings.pad(GlyphChars.Dot, 1, 1)} ${commit.getShortMessage()}`,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut(),\n            onDidSelectItem: (item: QuickPickItem) => {\n                void scope.setKeyCommand('right', item);\n                if (typeof item.onDidSelect === 'function') {\n                    item.onDidSelect();\n                }\n            }\n        });\n\n        await scope.dispose();\n\n        return pick;\n    }\n\n    private async getItems(commit: GitLogCommit, uri: Uri, options: CommitQuickPickOptions = {}) {\n        const items: (CommitWithFileStatusQuickPickItem | CommandQuickPickItem)[] = commit.files.map(\n            fs => new CommitWithFileStatusQuickPickItem(commit, fs)\n        );\n\n        const stash = commit.isStash;\n\n        let index = 0;\n\n        let remotes;\n        if (stash) {\n            const stashApplyCommmandArgs: StashApplyCommandArgs = {\n                confirm: true,\n                deleteAfter: false,\n                stashItem: commit as GitStashCommit,\n                goBackCommand: options.currentCommand\n            };\n            items.splice(\n                index++,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: '$(git-pull-request) Apply Stashed Changes',\n                        description: `${commit.getShortMessage()}`\n                    },\n                    Commands.StashApply,\n                    [stashApplyCommmandArgs]\n                )\n            );\n\n            const stashDeleteCommmandArgs: StashDeleteCommandArgs = {\n                confirm: true,\n                stashItem: commit as GitStashCommit,\n                goBackCommand: options.currentCommand\n            };\n            items.splice(\n                index++,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: '$(x) Delete Stashed Changes',\n                        description: `${commit.getShortMessage()}`\n                    },\n                    Commands.StashDelete,\n                    [stashDeleteCommmandArgs]\n                )\n            );\n\n            items.splice(index++, 0, new ShowCommitInViewQuickPickItem(commit));\n        }\n        else {\n            items.splice(index++, 0, new ShowCommitInViewQuickPickItem(commit));\n\n            remotes = await Container.git.getRemotes(commit.repoPath, { sort: true });\n            if (remotes.length) {\n                items.splice(\n                    index++,\n                    0,\n                    new OpenRemotesCommandQuickPickItem(\n                        remotes,\n                        {\n                            type: RemoteResourceType.Commit,\n                            sha: commit.sha\n                        },\n                        options.currentCommand\n                    )\n                );\n            }\n        }\n\n        items.splice(index++, 0, new OpenCommitFilesCommandQuickPickItem(commit));\n        items.splice(index++, 0, new OpenCommitFileRevisionsCommandQuickPickItem(commit));\n\n        const previousSha = await Container.git.resolveReference(commit.repoPath, commit.previousFileSha);\n\n        let diffDirectoryCommmandArgs: DiffDirectoryCommandArgs = {\n            ref1: previousSha,\n            ref2: commit.sha\n        };\n        items.splice(\n            index++,\n            0,\n            new CommandQuickPickItem(\n                {\n                    label: '$(git-compare) Open Directory Compare with Previous Revision',\n                    description: `$(git-commit) ${GitService.shortenSha(previousSha)} ${\n                        GlyphChars.Space\n                    } $(git-compare) ${GlyphChars.Space} $(git-commit) ${commit.shortSha}`\n                },\n                Commands.DiffDirectory,\n                [commit.uri, diffDirectoryCommmandArgs]\n            )\n        );\n\n        diffDirectoryCommmandArgs = {\n            ref1: commit.sha\n        };\n        items.splice(\n            index++,\n            0,\n            new CommandQuickPickItem(\n                {\n                    label: '$(git-compare) Open Directory Compare with Working Tree',\n                    description: `$(git-commit) ${commit.shortSha} ${GlyphChars.Space} $(git-compare) ${GlyphChars.Space} Working Tree`\n                },\n                Commands.DiffDirectory,\n                [uri, diffDirectoryCommmandArgs]\n            )\n        );\n\n        if (!stash) {\n            const copyShaCommandArgs: CopyShaToClipboardCommandArgs = {\n                sha: commit.sha\n            };\n            items.splice(\n                index++,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: '$(clippy) Copy Commit ID to Clipboard',\n                        description: `${commit.shortSha}`\n                    },\n                    Commands.CopyShaToClipboard,\n                    [uri, copyShaCommandArgs]\n                )\n            );\n        }\n\n        const copyMessageCommandArgs: CopyMessageToClipboardCommandArgs = {\n            message: commit.message,\n            sha: commit.sha\n        };\n        items.splice(\n            index++,\n            0,\n            new CommandQuickPickItem(\n                {\n                    label: '$(clippy) Copy Commit Message to Clipboard',\n                    description: `${commit.getShortMessage()}`\n                },\n                Commands.CopyMessageToClipboard,\n                [uri, copyMessageCommandArgs]\n            )\n        );\n\n        if (!stash) {\n            if (remotes !== undefined && remotes.length) {\n                const copyRemoteUrlCommandArgs: CopyRemoteFileUrlToClipboardCommandArgs = {\n                    sha: commit.sha\n                };\n                items.splice(\n                    index++,\n                    0,\n                    new CommandQuickPickItem(\n                        {\n                            label: '$(clippy) Copy Remote Url to Clipboard'\n                        },\n                        Commands.CopyRemoteFileUrlToClipboard,\n                        [uri, copyRemoteUrlCommandArgs]\n                    )\n                );\n            }\n        }\n\n        const commitDetailsCommandArgs: ShowQuickCommitDetailsCommandArgs = {\n            commit: commit,\n            repoLog: options.repoLog,\n            sha: commit.sha,\n            goBackCommand: options.goBackCommand\n        };\n        items.splice(\n            index++,\n            0,\n            new CommandQuickPickItem(\n                {\n                    label: 'Changed Files',\n                    description: commit.getFormattedDiffStatus()\n                },\n                Commands.ShowQuickCommitDetails,\n                [uri, commitDetailsCommandArgs]\n            )\n        );\n\n        if (options.goBackCommand) {\n            items.splice(0, 0, options.goBackCommand);\n        }\n\n        return items;\n    }\n}\n","'use strict';\nimport { CancellationTokenSource, window } from 'vscode';\nimport { Container } from '../container';\nimport { GitLog } from '../git/gitService';\nimport { KeyNoopCommand } from '../keyboard';\nimport { Iterables } from '../system';\nimport {\n    CommandQuickPickItem,\n    getQuickPickIgnoreFocusOut,\n    MessageQuickPickItem,\n    showQuickPickProgress\n} from './commonQuickPicks';\nimport { CommitQuickPickItem } from './gitQuickPicks';\n\nexport class CommitsQuickPick {\n    static showProgress(message: string) {\n        return showQuickPickProgress(message, {\n            left: KeyNoopCommand,\n            ',': KeyNoopCommand,\n            '.': KeyNoopCommand\n        });\n    }\n\n    static async show(\n        log: GitLog | undefined,\n        placeHolder: string,\n        progressCancellation: CancellationTokenSource,\n        options: {\n            goBackCommand?: CommandQuickPickItem;\n            showAllCommand?: CommandQuickPickItem;\n            showInViewCommand?: CommandQuickPickItem;\n        }\n    ): Promise<CommitQuickPickItem | CommandQuickPickItem | undefined> {\n        const items = ((log && [...Iterables.map(log.commits.values(), c => CommitQuickPickItem.create(c))]) || [\n            new MessageQuickPickItem('No results found')\n        ]) as (CommitQuickPickItem | CommandQuickPickItem)[];\n\n        if (options.showInViewCommand !== undefined) {\n            items.splice(0, 0, options.showInViewCommand);\n        }\n\n        if (options.showAllCommand !== undefined) {\n            items.splice(0, 0, options.showAllCommand);\n        }\n\n        if (options.goBackCommand !== undefined) {\n            items.splice(0, 0, options.goBackCommand);\n        }\n\n        if (progressCancellation.token.isCancellationRequested) return undefined;\n\n        const scope = await Container.keyboard.beginScope({ left: options.goBackCommand });\n\n        progressCancellation.cancel();\n\n        const pick = await window.showQuickPick(items, {\n            matchOnDescription: true,\n            placeHolder: placeHolder,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut()\n            // onDidSelectItem: (item: QuickPickItem) => {\n            //     scope.setKeyCommand('right', item);\n            // }\n        });\n\n        await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\nimport { CancellationTokenSource, window } from 'vscode';\nimport { Commands, ShowQuickCurrentBranchHistoryCommandArgs, ShowQuickFileHistoryCommandArgs } from '../commands';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitLog, GitUri, RemoteResource, RemoteResourceType } from '../git/gitService';\nimport { KeyNoopCommand } from '../keyboard';\nimport { Iterables } from '../system';\nimport {\n    CommandQuickPickItem,\n    getQuickPickIgnoreFocusOut,\n    ShowFileHistoryFromQuickPickItem,\n    showQuickPickProgress\n} from './commonQuickPicks';\nimport { OpenRemotesCommandQuickPickItem } from './remotesQuickPick';\nimport { CommitQuickPickItem } from './gitQuickPicks';\n\nexport class FileHistoryQuickPick {\n    static showProgress(placeHolder: string) {\n        return showQuickPickProgress(placeHolder, {\n            left: KeyNoopCommand,\n            ',': KeyNoopCommand,\n            '.': KeyNoopCommand\n        });\n    }\n\n    static async show(\n        log: GitLog,\n        uri: GitUri,\n        placeHolder: string,\n        options: {\n            currentCommand?: CommandQuickPickItem;\n            goBackCommand?: CommandQuickPickItem;\n            nextPageCommand?: CommandQuickPickItem;\n            previousPageCommand?: CommandQuickPickItem;\n            pickerOnly?: boolean;\n            progressCancellation?: CancellationTokenSource;\n            showAllCommand?: CommandQuickPickItem;\n            showInViewCommand?: CommandQuickPickItem;\n        } = {}\n    ): Promise<CommitQuickPickItem | CommandQuickPickItem | undefined> {\n        options = { pickerOnly: false, ...options };\n\n        const items = Array.from(Iterables.map(log.commits.values(), c => CommitQuickPickItem.create(c))) as (\n            | CommitQuickPickItem\n            | CommandQuickPickItem)[];\n\n        let index = 0;\n\n        index++;\n        items.splice(0, 0, new ShowFileHistoryFromQuickPickItem(log.repoPath, placeHolder, options.currentCommand));\n\n        if (options.showInViewCommand !== undefined) {\n            index++;\n            items.splice(0, 0, options.showInViewCommand);\n        }\n\n        if (log.truncated || log.sha) {\n            if (options.showAllCommand !== undefined) {\n                index++;\n                items.splice(0, 0, options.showAllCommand);\n            }\n            else if (!options.pickerOnly) {\n                const workingUri = await Container.git.getWorkingUri(log.repoPath, uri);\n                if (workingUri) {\n                    const goBackCommandArgs: ShowQuickFileHistoryCommandArgs = {\n                        log: log,\n                        maxCount: log.maxCount,\n                        range: log.range,\n                        goBackCommand: options.goBackCommand\n                    };\n\n                    const commandArgs: ShowQuickFileHistoryCommandArgs = {\n                        goBackCommand: new CommandQuickPickItem(\n                            {\n                                label: `go back ${GlyphChars.ArrowBack}`,\n                                description: `to history of ${uri.getFormattedPath()}${\n                                    uri.sha ? ` from ${GlyphChars.Space}$(git-commit) ${uri.shortSha}` : ''\n                                }`\n                            },\n                            Commands.ShowQuickFileHistory,\n                            [uri, goBackCommandArgs]\n                        )\n                    };\n\n                    index++;\n                    items.splice(\n                        0,\n                        0,\n                        new CommandQuickPickItem(\n                            {\n                                label: '$(history) Show File History',\n                                description: `of ${GitUri.getFormattedPath(workingUri, { relativeTo: log.repoPath })}`\n                            },\n                            Commands.ShowQuickFileHistory,\n                            [workingUri, commandArgs]\n                        )\n                    );\n                }\n            }\n\n            if (options.nextPageCommand !== undefined) {\n                index++;\n                items.splice(0, 0, options.nextPageCommand);\n            }\n\n            if (options.previousPageCommand !== undefined) {\n                index++;\n                items.splice(0, 0, options.previousPageCommand);\n            }\n        }\n\n        if (!options.pickerOnly) {\n            const branch = await Container.git.getBranch(uri.repoPath!);\n\n            if (branch !== undefined) {\n                const commandArgs: ShowQuickFileHistoryCommandArgs = {\n                    log: log,\n                    maxCount: log.maxCount,\n                    range: log.range\n                };\n\n                const currentCommand = new CommandQuickPickItem(\n                    {\n                        label: `go back ${GlyphChars.ArrowBack}`,\n                        description: `to history of ${uri.getFormattedPath()}${\n                            uri.sha ? ` from ${GlyphChars.Space}$(git-commit) ${uri.shortSha}` : ''\n                        }`\n                    },\n                    Commands.ShowQuickFileHistory,\n                    [uri, commandArgs]\n                );\n\n                // Only show the full repo option if we are the root\n                if (options.goBackCommand === undefined) {\n                    const commandArgs: ShowQuickCurrentBranchHistoryCommandArgs = {\n                        goBackCommand: currentCommand\n                    };\n                    items.splice(\n                        index++,\n                        0,\n                        new CommandQuickPickItem(\n                            {\n                                label: `${GlyphChars.SpaceThin}$(git-branch) Show Branch History`,\n                                description: `shows history of ${GlyphChars.Space}$(git-branch) ${branch.name}`\n                            },\n                            Commands.ShowQuickCurrentBranchHistory,\n                            [undefined, commandArgs]\n                        )\n                    );\n                }\n\n                const remotes = await Container.git.getRemotes(uri.repoPath!, { sort: true });\n                if (remotes.length) {\n                    const resource: RemoteResource =\n                        uri.sha !== undefined\n                            ? {\n                                  type: RemoteResourceType.Revision,\n                                  branch: branch.name,\n                                  fileName: uri.relativePath,\n                                  sha: uri.sha\n                              }\n                            : {\n                                  type: RemoteResourceType.File,\n                                  branch: branch.name,\n                                  fileName: uri.relativePath\n                              };\n                    items.splice(index++, 0, new OpenRemotesCommandQuickPickItem(remotes, resource, currentCommand));\n                }\n            }\n\n            if (options.goBackCommand) {\n                items.splice(0, 0, options.goBackCommand);\n            }\n        }\n\n        if (options.progressCancellation !== undefined && options.progressCancellation.token.isCancellationRequested) {\n            return undefined;\n        }\n\n        const scope = await Container.keyboard.beginScope({\n            left: options.goBackCommand,\n            ',': options.previousPageCommand,\n            '.': options.nextPageCommand\n        });\n\n        options.progressCancellation && options.progressCancellation.cancel();\n\n        const pick = await window.showQuickPick(items, {\n            matchOnDescription: true,\n            matchOnDetail: true,\n            placeHolder: placeHolder,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut()\n            // onDidSelectItem: (item: QuickPickItem) => {\n            //     scope.setKeyCommand('right', item);\n            // }\n        });\n\n        await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\nimport { QuickPickItem, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\n\nexport interface ModesQuickPickItem extends QuickPickItem {\n    key: string | undefined;\n}\n\nexport class ModesQuickPick {\n    static async show(): Promise<ModesQuickPickItem | undefined> {\n        const modes = Object.keys(Container.config.modes);\n        if (modes.length === 0) return undefined;\n\n        const mode = Container.config.mode.active;\n\n        const items = modes.map(key => {\n            const modeCfg = Container.config.modes[key];\n            const item: ModesQuickPickItem = {\n                label: `${mode === key ? '$(check)\\u00a0\\u00a0' : '\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0'}${\n                    modeCfg.name\n                } mode`,\n                description: modeCfg.description ? `\\u00a0${GlyphChars.Dash}\\u00a0 ${modeCfg.description}` : '',\n                key: key\n            };\n            return item;\n        });\n\n        if (mode) {\n            items.splice(0, 0, {\n                label: `Exit ${Container.config.modes[mode].name} mode`,\n                key: undefined\n            });\n        }\n\n        const pick = await window.showQuickPick(items, {\n            placeHolder: 'select a GitLens mode to enter'\n        });\n\n        return pick;\n    }\n}\n","'use strict';\nimport { window } from 'vscode';\nimport { Container } from '../container';\nimport { Iterables } from '../system';\nimport { CommandQuickPickItem, getQuickPickIgnoreFocusOut } from './commonQuickPicks';\nimport { RepositoryQuickPickItem } from './gitQuickPicks';\n\nexport class RepositoriesQuickPick {\n    static async show(\n        placeHolder: string,\n        goBackCommand?: CommandQuickPickItem\n    ): Promise<RepositoryQuickPickItem | CommandQuickPickItem | undefined> {\n        const items: (RepositoryQuickPickItem | CommandQuickPickItem)[] = await Promise.all([\n            ...Iterables.map(await Container.git.getOrderedRepositories(), r =>\n                RepositoryQuickPickItem.create(r, undefined, { branch: true, status: true })\n            )\n        ]);\n\n        if (goBackCommand !== undefined) {\n            items.splice(0, 0, goBackCommand);\n        }\n\n        // const scope = await Container.keyboard.beginScope({ left: goBackCommand });\n\n        const pick = await window.showQuickPick(items, {\n            placeHolder: placeHolder,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut()\n        });\n\n        // await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { commands, TextDocumentShowOptions, TextEditor, window } from 'vscode';\nimport {\n    Commands,\n    DiffWithPreviousCommandArgs,\n    OpenChangedFilesCommandArgs,\n    openEditor,\n    ShowQuickBranchHistoryCommandArgs,\n    ShowQuickRepoStatusCommandArgs,\n    ShowQuickStashListCommandArgs\n} from '../commands';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport {\n    GitCommitType,\n    GitFileStatus,\n    GitLogCommit,\n    GitService,\n    GitStatus,\n    GitStatusFile,\n    GitUri\n} from '../git/gitService';\nimport { Keys } from '../keyboard';\nimport { Iterables, Strings } from '../system';\nimport { CommandQuickPickItem, getQuickPickIgnoreFocusOut, QuickPickItem } from './commonQuickPicks';\n\nexport class OpenStatusFileCommandQuickPickItem extends CommandQuickPickItem {\n    readonly status: GitStatusFile;\n    private readonly commit: GitLogCommit;\n\n    constructor(private readonly _status: GitStatusFile, realIndexStatus?: GitFileStatus, item?: QuickPickItem) {\n        super(\n            item || {\n                label: `${_status.staged ? '$(check)' : GlyphChars.Space.repeat(3)}${Strings.pad(\n                    _status.getOcticon(),\n                    2,\n                    2\n                )} ${paths.basename(_status.fileName)}`,\n                description: _status.getFormattedDirectory(true)\n            }\n        );\n\n        this.status = _status;\n        if (_status.indexStatus !== undefined) {\n            this.commit = new GitLogCommit(\n                GitCommitType.LogFile,\n                _status.repoPath,\n                GitService.uncommittedStagedSha,\n                'You',\n                undefined,\n                new Date(),\n                new Date(),\n                '',\n                _status.fileName,\n                [_status],\n                _status.status,\n                _status.originalFileName,\n                'HEAD',\n                _status.fileName\n            );\n        }\n        else {\n            this.commit = new GitLogCommit(\n                GitCommitType.LogFile,\n                _status.repoPath,\n                GitService.uncommittedSha,\n                'You',\n                undefined,\n                new Date(),\n                new Date(),\n                '',\n                _status.fileName,\n                [_status],\n                _status.status,\n                _status.originalFileName,\n                realIndexStatus !== undefined ? GitService.uncommittedStagedSha : 'HEAD',\n                _status.fileName\n            );\n        }\n    }\n\n    execute(options?: TextDocumentShowOptions): Thenable<TextEditor | undefined> {\n        return openEditor(this._status.uri, options);\n    }\n\n    onDidPressKey(key: Keys): Promise<{} | undefined> {\n        const commandArgs: DiffWithPreviousCommandArgs = {\n            commit: this.commit,\n            line: 0,\n            showOptions: {\n                preserveFocus: true,\n                preview: false\n            }\n        };\n        return commands.executeCommand(\n            Commands.DiffWithPrevious,\n            GitUri.fromFile(this.status, this.status.repoPath),\n            commandArgs\n        ) as Promise<{} | undefined>;\n    }\n}\n\nexport class OpenStatusFilesCommandQuickPickItem extends CommandQuickPickItem {\n    constructor(files: GitStatusFile[], item?: QuickPickItem) {\n        const uris = files.map(f => f.uri);\n        const commandArgs: OpenChangedFilesCommandArgs = {\n            uris: uris\n        };\n\n        super(\n            item || {\n                label: '$(file-symlink-file) Open Changed Files',\n                description: ''\n                // detail: `Opens all of the changed files in the repository`\n            },\n            Commands.OpenChangedFiles,\n            [undefined, commandArgs]\n        );\n    }\n}\n\ninterface ComputedStatus {\n    staged: number;\n    stagedAddsAndChanges: GitStatusFile[];\n    stagedStatus: string;\n\n    unstaged: number;\n    unstagedAddsAndChanges: GitStatusFile[];\n    unstagedStatus: string;\n}\n\nexport class RepoStatusQuickPick {\n    private static computeStatus(files: GitStatusFile[]): ComputedStatus {\n        let stagedAdds = 0;\n        let unstagedAdds = 0;\n        let stagedChanges = 0;\n        let unstagedChanges = 0;\n        let stagedDeletes = 0;\n        let unstagedDeletes = 0;\n\n        const stagedAddsAndChanges: GitStatusFile[] = [];\n        const unstagedAddsAndChanges: GitStatusFile[] = [];\n\n        for (const f of files) {\n            switch (f.indexStatus) {\n                case 'A':\n                case '?':\n                    stagedAdds++;\n                    stagedAddsAndChanges.push(f);\n                    break;\n\n                case 'D':\n                    stagedDeletes++;\n                    break;\n\n                case undefined:\n                    break;\n\n                default:\n                    stagedChanges++;\n                    stagedAddsAndChanges.push(f);\n                    break;\n            }\n\n            switch (f.workingTreeStatus) {\n                case 'A':\n                case '?':\n                    unstagedAdds++;\n                    unstagedAddsAndChanges.push(f);\n                    break;\n\n                case 'D':\n                    unstagedDeletes++;\n                    break;\n\n                case undefined:\n                    break;\n\n                default:\n                    unstagedChanges++;\n                    unstagedAddsAndChanges.push(f);\n                    break;\n            }\n        }\n\n        const staged = stagedAdds + stagedChanges + stagedDeletes;\n        const unstaged = unstagedAdds + unstagedChanges + unstagedDeletes;\n\n        return {\n            staged: staged,\n            stagedStatus: staged > 0 ? `+${stagedAdds} ~${stagedChanges} -${stagedDeletes}` : '',\n            stagedAddsAndChanges: stagedAddsAndChanges,\n            unstaged: unstaged,\n            unstagedStatus: unstaged > 0 ? `+${unstagedAdds} ~${unstagedChanges} -${unstagedDeletes}` : '',\n            unstagedAddsAndChanges: unstagedAddsAndChanges\n        };\n    }\n\n    static async show(\n        status: GitStatus,\n        goBackCommand?: CommandQuickPickItem\n    ): Promise<\n        OpenStatusFileCommandQuickPickItem | OpenStatusFilesCommandQuickPickItem | CommandQuickPickItem | undefined\n    > {\n        const items = [\n            ...Iterables.flatMap(status.files, s => {\n                if (s.workingTreeStatus !== undefined && s.indexStatus !== undefined) {\n                    return [\n                        new OpenStatusFileCommandQuickPickItem(s.with({ indexStatus: null }), s.indexStatus),\n                        new OpenStatusFileCommandQuickPickItem(s.with({ workTreeStatus: null }))\n                    ];\n                }\n\n                return [new OpenStatusFileCommandQuickPickItem(s)];\n            })\n        ] as (OpenStatusFileCommandQuickPickItem | OpenStatusFilesCommandQuickPickItem | CommandQuickPickItem)[];\n\n        // Sort the status by staged and then filename\n        items.sort(\n            (a, b) =>\n                ((a as OpenStatusFileCommandQuickPickItem).status.staged ? -1 : 1) -\n                    ((b as OpenStatusFileCommandQuickPickItem).status.staged ? -1 : 1) ||\n                (a as OpenStatusFileCommandQuickPickItem).status.fileName.localeCompare(\n                    (b as OpenStatusFileCommandQuickPickItem).status.fileName,\n                    undefined,\n                    { numeric: true, sensitivity: 'base' }\n                )\n        );\n\n        const repoStatusCommandArgs: ShowQuickRepoStatusCommandArgs = {\n            goBackCommand: goBackCommand\n        };\n        const currentCommand = new CommandQuickPickItem(\n            {\n                label: `go back ${GlyphChars.ArrowBack}`,\n                description: `to status of ${GlyphChars.Space}$(git-branch) ${status.branch}`\n            },\n            Commands.ShowQuickRepoStatus,\n            [undefined, repoStatusCommandArgs]\n        );\n\n        const computed = this.computeStatus(status.files);\n        if (computed.staged > 0) {\n            let index = 0;\n            const unstagedIndex = computed.unstaged > 0 ? status.files.findIndex(f => !f.staged) : -1;\n            if (unstagedIndex > -1) {\n                items.splice(\n                    unstagedIndex,\n                    0,\n                    new CommandQuickPickItem(\n                        {\n                            label: 'Unstaged Files',\n                            description: computed.unstagedStatus\n                        },\n                        Commands.ShowQuickRepoStatus,\n                        [undefined, repoStatusCommandArgs]\n                    )\n                );\n\n                items.splice(\n                    unstagedIndex,\n                    0,\n                    new OpenStatusFilesCommandQuickPickItem(computed.stagedAddsAndChanges, {\n                        label: `${GlyphChars.Space.repeat(4)} $(file-symlink-file) Open Staged Files`,\n                        description: ''\n                    })\n                );\n\n                items.push(\n                    new OpenStatusFilesCommandQuickPickItem(computed.unstagedAddsAndChanges, {\n                        label: `${GlyphChars.Space.repeat(4)} $(file-symlink-file) Open Unstaged Files`,\n                        description: ''\n                    })\n                );\n            }\n\n            items.splice(\n                index++,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: 'Staged Files',\n                        description: computed.stagedStatus\n                    },\n                    Commands.ShowQuickRepoStatus,\n                    [undefined, repoStatusCommandArgs]\n                )\n            );\n        }\n        else if (status.files.some(f => !f.staged)) {\n            items.splice(\n                0,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: 'Unstaged Files',\n                        description: computed.unstagedStatus\n                    },\n                    Commands.ShowQuickRepoStatus,\n                    [undefined, repoStatusCommandArgs]\n                )\n            );\n        }\n\n        if (status.files.length) {\n            items.push(\n                new OpenStatusFilesCommandQuickPickItem(\n                    computed.stagedAddsAndChanges.concat(computed.unstagedAddsAndChanges)\n                )\n            );\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: '$(x) Close Unchanged Files',\n                        description: ''\n                    },\n                    Commands.CloseUnchangedFiles\n                )\n            );\n        }\n        else {\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: 'No changes in the working tree',\n                        description: ''\n                    },\n                    Commands.ShowQuickRepoStatus,\n                    [undefined, repoStatusCommandArgs]\n                )\n            );\n        }\n\n        const stashListCommandArgs: ShowQuickStashListCommandArgs = {\n            goBackCommand: currentCommand\n        };\n        items.splice(\n            0,\n            0,\n            new CommandQuickPickItem(\n                {\n                    label: '$(inbox) Show Stashed Changes',\n                    description: 'shows stashed changes in the repository'\n                },\n                Commands.ShowQuickStashList,\n                [GitUri.fromRepoPath(status.repoPath), stashListCommandArgs]\n            )\n        );\n\n        if (status.upstream && status.state.ahead) {\n            const branchHistoryCommandArgs: ShowQuickBranchHistoryCommandArgs = {\n                branch: status.ref,\n                maxCount: 0,\n                goBackCommand: currentCommand\n            };\n            items.splice(\n                0,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: `$(cloud-upload)${GlyphChars.Space} ${status.state.ahead} Commit${\n                            status.state.ahead > 1 ? 's' : ''\n                        } ahead of ${GlyphChars.Space}$(git-branch) ${status.upstream}`,\n                        description: `shows commits in ${GlyphChars.Space}$(git-branch) ${status.branch} but not ${GlyphChars.Space}$(git-branch) ${status.upstream}`\n                    },\n                    Commands.ShowQuickBranchHistory,\n                    [\n                        GitUri.fromRepoPath(status.repoPath, `${status.upstream}..${status.ref}`),\n                        branchHistoryCommandArgs\n                    ]\n                )\n            );\n        }\n\n        if (status.upstream && status.state.behind) {\n            const branchHistoryCommandArgs: ShowQuickBranchHistoryCommandArgs = {\n                branch: status.ref,\n                maxCount: 0,\n                goBackCommand: currentCommand\n            };\n            items.splice(\n                0,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: `$(cloud-download)${GlyphChars.Space} ${status.state.behind} Commit${\n                            status.state.behind > 1 ? 's' : ''\n                        } behind ${GlyphChars.Space}$(git-branch) ${status.upstream}`,\n                        description: `shows commits in ${GlyphChars.Space}$(git-branch) ${status.upstream} but not ${\n                            GlyphChars.Space\n                        }$(git-branch) ${status.branch}${\n                            status.sha\n                                ? ` (since ${GlyphChars.Space}$(git-commit) ${GitService.shortenSha(status.sha)})`\n                                : ''\n                        }`\n                    },\n                    Commands.ShowQuickBranchHistory,\n                    [\n                        GitUri.fromRepoPath(status.repoPath, `${status.ref}..${status.upstream}`),\n                        branchHistoryCommandArgs\n                    ]\n                )\n            );\n        }\n\n        if (status.upstream && !status.state.ahead && !status.state.behind) {\n            items.splice(\n                0,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: `$(git-branch) ${status.branch} is up-to-date with ${GlyphChars.Space}$(git-branch) ${status.upstream}`,\n                        description: ''\n                    },\n                    Commands.ShowQuickRepoStatus,\n                    [undefined, repoStatusCommandArgs]\n                )\n            );\n        }\n\n        if (goBackCommand) {\n            items.splice(0, 0, goBackCommand);\n        }\n\n        const scope = await Container.keyboard.beginScope({ left: goBackCommand });\n\n        const pick = await window.showQuickPick(items, {\n            matchOnDescription: true,\n            placeHolder: `status of ${status.branch}${\n                status.upstream ? ` ${Strings.pad(GlyphChars.ArrowsRightLeft, 1, 1)} ${status.upstream}` : ''\n            }`,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut(),\n            onDidSelectItem: (item: QuickPickItem) => {\n                void scope.setKeyCommand('right', item);\n            }\n        });\n\n        await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\nimport { CancellationTokenSource, window } from 'vscode';\nimport { Commands, StashSaveCommandArgs } from '../commands';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitStash, GitStashCommit } from '../git/gitService';\nimport { KeyNoopCommand } from '../keyboard';\nimport { Iterables } from '../system';\nimport { CommandQuickPickItem, getQuickPickIgnoreFocusOut, showQuickPickProgress } from './commonQuickPicks';\nimport { CommitQuickPickItem } from './gitQuickPicks';\n\nexport class StashListQuickPick {\n    static showProgress(mode: 'list' | 'apply') {\n        const message =\n            mode === 'apply'\n                ? `Apply stashed changes to your working tree${GlyphChars.Ellipsis}`\n                : `stashed changes ${GlyphChars.Dash} search by message, filename, or commit id`;\n        return showQuickPickProgress(message, {\n            left: KeyNoopCommand,\n            ',': KeyNoopCommand,\n            '.': KeyNoopCommand\n        });\n    }\n\n    static async show(\n        stash: GitStash,\n        mode: 'list' | 'apply',\n        progressCancellation: CancellationTokenSource,\n        goBackCommand?: CommandQuickPickItem,\n        currentCommand?: CommandQuickPickItem\n    ): Promise<CommitQuickPickItem<GitStashCommit> | CommandQuickPickItem | undefined> {\n        const items = ((stash &&\n            Array.from(Iterables.map(stash.commits.values(), c => CommitQuickPickItem.create<GitStashCommit>(c)))) ||\n            []) as (CommitQuickPickItem<GitStashCommit> | CommandQuickPickItem)[];\n\n        if (mode === 'list') {\n            const commandArgs: StashSaveCommandArgs = {\n                goBackCommand: currentCommand\n            };\n            items.splice(\n                0,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: '$(plus) Stash Changes',\n                        description: 'stashes all changes'\n                    },\n                    Commands.StashSave,\n                    [commandArgs]\n                )\n            );\n        }\n\n        if (goBackCommand) {\n            items.splice(0, 0, goBackCommand);\n        }\n\n        if (progressCancellation.token.isCancellationRequested) return undefined;\n\n        const scope = await Container.keyboard.beginScope({ left: goBackCommand });\n\n        progressCancellation.cancel();\n\n        const pick = await window.showQuickPick(items, {\n            matchOnDescription: true,\n            placeHolder:\n                mode === 'apply'\n                    ? `Apply stashed changes to your working tree${GlyphChars.Ellipsis}`\n                    : `stashed changes ${GlyphChars.Dash} search by message, filename, or commit id`,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut()\n            // onDidSelectItem: (item: QuickPickItem) => {\n            //     scope.setKeyCommand('right', item);\n            // }\n        });\n\n        await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\n\nexport * from './quickpicks/commonQuickPicks';\nexport * from './quickpicks/gitQuickPicks';\n\nexport * from './quickpicks/branchHistoryQuickPick';\nexport * from './quickpicks/commitFileQuickPick';\nexport * from './quickpicks/commitQuickPick';\nexport * from './quickpicks/commitsQuickPick';\nexport * from './quickpicks/fileHistoryQuickPick';\nexport * from './quickpicks/modesQuickPick';\nexport * from './quickpicks/referencesQuickPick';\nexport * from './quickpicks/remotesQuickPick';\nexport * from './quickpicks/repositoriesQuickPick';\nexport * from './quickpicks/repoStatusQuickPick';\nexport * from './quickpicks/stashListQuickPick';\n","'use strict';\nimport { commands, TextEditor, TextEditorEdit, Uri, window } from 'vscode';\nimport { UriComparer } from '../comparers';\nimport { FileAnnotationType } from '../configuration';\nimport { isTextEditor } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { ActiveEditorCommand, command, Commands, EditorCommand } from './common';\n\n@command()\nexport class ClearFileAnnotationsCommand extends EditorCommand {\n    constructor() {\n        super([Commands.ClearFileAnnotations, Commands.ComputingFileAnnotations]);\n    }\n\n    execute(editor: TextEditor, edit: TextEditorEdit, uri?: Uri): Promise<any> {\n        // Handle the case where we are focused on a non-editor editor (output, debug console)\n        if (editor != null && !isTextEditor(editor)) {\n            if (uri != null && !UriComparer.equals(uri, editor.document.uri)) {\n                const e = window.visibleTextEditors.find(e => UriComparer.equals(uri, e.document.uri));\n                if (e !== undefined) {\n                    editor = e;\n                }\n            }\n        }\n\n        try {\n            return Container.fileAnnotations.clear(editor);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ClearFileAnnotationsCommand');\n            return Messages.showGenericErrorMessage('Unable to clear file annotations');\n        }\n    }\n}\n\nexport interface ToggleFileBlameCommandArgs {\n    on?: boolean;\n    sha?: string;\n    type?: FileAnnotationType;\n}\n\n@command()\nexport class ToggleFileBlameCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.ToggleFileBlame);\n    }\n\n    execute(editor: TextEditor, uri?: Uri, args: ToggleFileBlameCommandArgs = {}): Thenable<any> {\n        // Handle the case where we are focused on a non-editor editor (output, debug console)\n        if (editor != null && !isTextEditor(editor)) {\n            if (uri != null && !UriComparer.equals(uri, editor.document.uri)) {\n                const e = window.visibleTextEditors.find(e => UriComparer.equals(uri, e.document.uri));\n                if (e !== undefined) {\n                    editor = e;\n                }\n            }\n        }\n\n        try {\n            if (args.type === undefined) {\n                args = { ...args, type: FileAnnotationType.Blame };\n            }\n\n            return Container.fileAnnotations.toggle(\n                editor,\n                args.type!,\n                args.sha !== undefined ? args.sha : editor && editor.selection.active.line,\n                args.on\n            );\n        }\n        catch (ex) {\n            Logger.error(ex, 'ToggleFileBlameCommand');\n            return window.showErrorMessage(\n                `Unable to toggle file ${args.type} annotations. See output channel for more details`\n            );\n        }\n    }\n}\n\n@command()\nexport class ToggleFileHeatmapCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.ToggleFileHeatmap);\n    }\n\n    execute(editor: TextEditor, uri?: Uri, args: ToggleFileBlameCommandArgs = {}): Thenable<any> {\n        const copyArgs: ToggleFileBlameCommandArgs = {\n            ...args,\n            type: FileAnnotationType.Heatmap\n        };\n        return commands.executeCommand(Commands.ToggleFileBlame, uri, copyArgs);\n    }\n}\n\n@command()\nexport class ToggleFileRecentChangesCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.ToggleFileRecentChanges);\n    }\n\n    execute(editor: TextEditor, uri?: Uri, args: ToggleFileBlameCommandArgs = {}): Thenable<any> {\n        const copyArgs: ToggleFileBlameCommandArgs = {\n            ...args,\n            type: FileAnnotationType.RecentChanges\n        };\n        return commands.executeCommand(Commands.ToggleFileBlame, uri, copyArgs);\n    }\n}\n\n@command()\nexport class ToggleLineBlameCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.ToggleLineBlame);\n    }\n\n    execute(editor: TextEditor, uri?: Uri): Thenable<any> {\n        try {\n            return Container.lineAnnotations.toggle(editor);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ToggleLineBlameCommand');\n            return window.showErrorMessage(\n                'Unable to toggle line blame annotations. See output channel for more details'\n            );\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri, window } from 'vscode';\nimport { TextEditorComparer, UriComparer } from '../comparers';\nimport { BuiltInCommands, GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { Functions } from '../system';\nimport { ActiveEditorCommand, command, Commands, getCommandUri, getRepoPathOrPrompt } from './common';\n\nexport interface CloseUnchangedFilesCommandArgs {\n    uris?: Uri[];\n}\n\n@command()\nexport class CloseUnchangedFilesCommand extends ActiveEditorCommand {\n    private _onEditorChangedFn: ((editor: TextEditor | undefined) => void) | undefined;\n\n    constructor() {\n        super(Commands.CloseUnchangedFiles);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: CloseUnchangedFilesCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        try {\n            if (args.uris === undefined) {\n                args = { ...args };\n\n                const repoPath = await getRepoPathOrPrompt(\n                    `Close all files except those changed in which repository${GlyphChars.Ellipsis}`\n                );\n                if (!repoPath) return undefined;\n\n                const status = await Container.git.getStatusForRepo(repoPath);\n                if (status === undefined) return window.showWarningMessage('Unable to close unchanged files');\n\n                args.uris = status.files.map(f => f.uri);\n            }\n\n            if (args.uris.length === 0) return commands.executeCommand(BuiltInCommands.CloseAllEditors);\n\n            const disposable = window.onDidChangeActiveTextEditor(\n                Functions.debounce(\n                    (e: TextEditor | undefined) => this._onEditorChangedFn && this._onEditorChangedFn(e),\n                    50\n                )\n            );\n\n            editor = window.activeTextEditor;\n\n            let count = 0;\n            let loopCount = 0;\n            const editors: TextEditor[] = [];\n\n            // Find out how many editors there are\n            while (true) {\n                if (editor != null) {\n                    let found = false;\n                    for (const e of editors) {\n                        if (TextEditorComparer.equals(e, editor, { useId: true, usePosition: true })) {\n                            found = true;\n                            break;\n                        }\n                    }\n                    if (found) break;\n\n                    // Start counting at the first real editor\n                    count++;\n                    editors.push(editor);\n                }\n                else if (count !== 0) {\n                    count++;\n                }\n\n                editor = await this.nextEditor();\n\n                loopCount++;\n                // Break out if we've looped 4 times and haven't found any editors\n                if (loopCount >= 4 && editors.length === 0) break;\n            }\n\n            if (editors.length) {\n                editor = window.activeTextEditor;\n\n                for (let i = 0; i <= count; i++) {\n                    if (\n                        editor == null ||\n                        (editor.document !== undefined &&\n                            (editor.document.isDirty ||\n                                // eslint-disable-next-line no-loop-func\n                                args.uris.some(uri =>\n                                    UriComparer.equals(uri, editor!.document && editor!.document.uri)\n                                )))\n                    ) {\n                        editor = await this.nextEditor();\n                    }\n                    else {\n                        editor = await this.closeEditor();\n                    }\n                }\n            }\n\n            disposable.dispose();\n\n            return undefined;\n        }\n        catch (ex) {\n            Logger.error(ex, 'CloseUnchangedFilesCommand');\n            return Messages.showGenericErrorMessage('Unable to close all unchanged files');\n        }\n    }\n\n    private async closeEditor(timeout: number = 500): Promise<TextEditor | undefined> {\n        const editor = window.activeTextEditor;\n\n        void (await commands.executeCommand(BuiltInCommands.CloseActiveEditor));\n\n        if (editor !== window.activeTextEditor) {\n            return window.activeTextEditor;\n        }\n\n        return this.waitForEditorChange(timeout);\n    }\n\n    private async nextEditor(timeout: number = 500): Promise<TextEditor | undefined> {\n        const editor = window.activeTextEditor;\n\n        void (await commands.executeCommand(BuiltInCommands.NextEditor));\n\n        if (editor !== window.activeTextEditor) {\n            return window.activeTextEditor;\n        }\n\n        return this.waitForEditorChange(timeout);\n    }\n\n    private waitForEditorChange(timeout: number = 500): Promise<TextEditor | undefined> {\n        return new Promise<TextEditor>((resolve, reject) => {\n            let timer: NodeJS.Timer | undefined;\n\n            this._onEditorChangedFn = (editor: TextEditor | undefined) => {\n                if (timer) {\n                    clearTimeout(timer);\n                    timer = undefined;\n\n                    resolve(editor);\n                }\n            };\n\n            timer = setTimeout(() => {\n                timer = undefined;\n\n                resolve(window.activeTextEditor);\n            }, timeout);\n        });\n    }\n}\n","'use strict';\nimport { env, TextEditor, Uri, window } from 'vscode';\nimport { Container } from '../container';\nimport { GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { Iterables } from '../system';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    isCommandViewContextWithCommit\n} from './common';\n\nexport interface CopyMessageToClipboardCommandArgs {\n    message?: string;\n    sha?: string;\n}\n\n@command()\nexport class CopyMessageToClipboardCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.CopyMessageToClipboard);\n    }\n\n    protected preExecute(context: CommandContext, args: CopyMessageToClipboardCommandArgs = {}) {\n        if (isCommandViewContextWithCommit(context)) {\n            args = { ...args };\n            args.sha = context.node.commit.sha;\n            return this.execute(context.editor, context.node.commit.uri, args);\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: CopyMessageToClipboardCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        try {\n            args = { ...args };\n\n            let repoPath;\n            // If we don't have an editor then get the message of the last commit to the branch\n            if (uri == null) {\n                repoPath = await Container.git.getActiveRepoPath(editor);\n                if (!repoPath) return undefined;\n\n                const log = await Container.git.getLog(repoPath, { maxCount: 1 });\n                if (!log) return undefined;\n\n                args.message = Iterables.first(log.commits.values()).message;\n            }\n            else if (args.message === undefined) {\n                const gitUri = await GitUri.fromUri(uri);\n                repoPath = gitUri.repoPath;\n\n                if (args.sha === undefined) {\n                    const blameline = (editor && editor.selection.active.line) || 0;\n                    if (blameline < 0) return undefined;\n\n                    try {\n                        const blame =\n                            editor && editor.document && editor.document.isDirty\n                                ? await Container.git.getBlameForLineContents(\n                                      gitUri,\n                                      blameline,\n                                      editor.document.getText()\n                                  )\n                                : await Container.git.getBlameForLine(gitUri, blameline);\n                        if (!blame) return undefined;\n\n                        if (blame.commit.isUncommitted) return undefined;\n\n                        args.sha = blame.commit.sha;\n                        if (!repoPath) {\n                            repoPath = blame.commit.repoPath;\n                        }\n                    }\n                    catch (ex) {\n                        Logger.error(ex, 'CopyMessageToClipboardCommand', `getBlameForLine(${blameline})`);\n                        return Messages.showGenericErrorMessage('Unable to copy message');\n                    }\n                }\n\n                // Get the full commit message -- since blame only returns the summary\n                const commit = await Container.git.getCommit(repoPath!, args.sha);\n                if (commit === undefined) return undefined;\n\n                args.message = commit.message;\n            }\n\n            void (await env.clipboard.writeText(args.message));\n            return undefined;\n        }\n        catch (ex) {\n            if (ex.message.includes(\"Couldn't find the required `xsel` binary\")) {\n                window.showErrorMessage(\n                    'Unable to copy message, xsel is not installed. Please install it via your package manager, e.g. `sudo apt install xsel`'\n                );\n                return undefined;\n            }\n\n            Logger.error(ex, 'CopyMessageToClipboardCommand');\n            return Messages.showGenericErrorMessage('Unable to copy message');\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri } from 'vscode';\nimport { Container } from '../container';\nimport { GitUri } from '../git/gitService';\nimport { StatusFileNode } from '../views/nodes';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    isCommandViewContextWithCommit\n} from './common';\n\nexport interface CopyRemoteFileUrlToClipboardCommandArgs {\n    range?: boolean;\n    sha?: string;\n}\n\n@command()\nexport class CopyRemoteFileUrlToClipboardCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.CopyRemoteFileUrlToClipboard);\n    }\n\n    protected preExecute(context: CommandContext, args: CopyRemoteFileUrlToClipboardCommandArgs = { range: true }) {\n        if (context.type === 'uris' || context.type === 'scm-states') {\n            args = { ...args, range: false };\n        }\n        else if (isCommandViewContextWithCommit(context)) {\n            args = { ...args, range: false, sha: context.node.commit.sha };\n\n            // If it is a StatusFileNode then don't include the sha, since it hasn't been pushed yet\n            if (context.node instanceof StatusFileNode) {\n                args.sha = undefined;\n            }\n\n            return this.execute(\n                context.editor,\n                context.node.commit.isFile ? context.node.commit.uri : context.node.uri,\n                args\n            );\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: CopyRemoteFileUrlToClipboardCommandArgs = { range: true }) {\n        if (args.sha === undefined) {\n            uri = getCommandUri(uri, editor);\n            if (uri == null) return undefined;\n\n            const gitUri = await GitUri.fromUri(uri);\n            if (!gitUri.repoPath) return undefined;\n\n            args = { ...args };\n            if (gitUri.sha === undefined) {\n                const commit = await Container.git.getCommitForFile(gitUri.repoPath, gitUri.fsPath, {\n                    firstIfNotFound: true\n                });\n\n                if (commit !== undefined) {\n                    args.sha = commit.sha;\n                }\n            }\n            else {\n                args.sha = gitUri.sha;\n            }\n        }\n\n        return commands.executeCommand(Commands.OpenFileInRemote, uri, { ...args, clipboard: true });\n    }\n}\n","'use strict';\nimport { env, TextEditor, Uri, window } from 'vscode';\nimport { Container } from '../container';\nimport { GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { Iterables } from '../system';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    isCommandViewContextWithCommit\n} from './common';\n\nexport interface CopyShaToClipboardCommandArgs {\n    sha?: string;\n}\n\n@command()\nexport class CopyShaToClipboardCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.CopyShaToClipboard);\n    }\n\n    protected preExecute(context: CommandContext, args: CopyShaToClipboardCommandArgs = {}) {\n        if (isCommandViewContextWithCommit(context)) {\n            args = { ...args };\n            args.sha = context.node.commit.sha;\n            return this.execute(context.editor, context.node.commit.uri, args);\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: CopyShaToClipboardCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        try {\n            args = { ...args };\n\n            // If we don't have an editor then get the sha of the last commit to the branch\n            if (uri == null) {\n                const repoPath = await Container.git.getActiveRepoPath(editor);\n                if (!repoPath) return undefined;\n\n                const log = await Container.git.getLog(repoPath, { maxCount: 1 });\n                if (!log) return undefined;\n\n                args.sha = Iterables.first(log.commits.values()).sha;\n            }\n            else if (args.sha === undefined) {\n                const blameline = (editor && editor.selection.active.line) || 0;\n                if (blameline < 0) return undefined;\n\n                try {\n                    const gitUri = await GitUri.fromUri(uri);\n                    const blame =\n                        editor && editor.document && editor.document.isDirty\n                            ? await Container.git.getBlameForLineContents(gitUri, blameline, editor.document.getText())\n                            : await Container.git.getBlameForLine(gitUri, blameline);\n                    if (blame === undefined) return undefined;\n\n                    args.sha = blame.commit.sha;\n                }\n                catch (ex) {\n                    Logger.error(ex, 'CopyShaToClipboardCommand', `getBlameForLine(${blameline})`);\n                    return Messages.showGenericErrorMessage('Unable to copy commit id');\n                }\n            }\n\n            void (await env.clipboard.writeText(args.sha));\n            return undefined;\n        }\n        catch (ex) {\n            if (ex.message.includes(\"Couldn't find the required `xsel` binary\")) {\n                window.showErrorMessage(\n                    'Unable to copy commit id, xsel is not installed. Please install it via your package manager, e.g. `sudo apt install xsel`'\n                );\n                return undefined;\n            }\n\n            Logger.error(ex, 'CopyShaToClipboardCommand');\n            return Messages.showGenericErrorMessage('Unable to copy commit id');\n        }\n    }\n}\n","'use strict';\nimport { TextEditor, Uri } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../quickpicks';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    getRepoPathOrActiveOrPrompt\n} from './common';\n\nexport interface DiffBranchWithCommandArgs {\n    ref1?: string;\n    ref2?: string;\n}\n\n@command()\nexport class DiffBranchWithCommand extends ActiveEditorCommand {\n    constructor() {\n        super([\n            Commands.DiffHeadWith,\n            Commands.DiffWorkingWith,\n            Commands.DiffHeadWithBranch,\n            Commands.DiffWorkingWithBranch\n        ]);\n    }\n\n    protected preExecute(context: CommandContext, args: DiffBranchWithCommandArgs = {}) {\n        switch (context.command) {\n            case Commands.DiffHeadWith:\n            case Commands.DiffHeadWithBranch:\n                args.ref2 = 'HEAD';\n                break;\n\n            case Commands.DiffWorkingWith:\n            case Commands.DiffWorkingWithBranch:\n                args.ref2 = '';\n                break;\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffBranchWithCommandArgs = {}) {\n        if (args.ref2 === undefined) return undefined;\n\n        uri = getCommandUri(uri, editor);\n\n        try {\n            const repoPath = await getRepoPathOrActiveOrPrompt(\n                uri,\n                editor,\n                `Compare in which repository${GlyphChars.Ellipsis}`\n            );\n            if (!repoPath) return undefined;\n\n            if (!args.ref1) {\n                let checkmarks;\n                let placeHolder;\n                switch (args.ref2) {\n                    case '':\n                        checkmarks = false;\n                        placeHolder = `Compare Working Tree with${GlyphChars.Ellipsis}`;\n                        break;\n                    case 'HEAD':\n                        checkmarks = false;\n                        placeHolder = `Compare HEAD with${GlyphChars.Ellipsis}`;\n                        break;\n                    default:\n                        checkmarks = true;\n                        placeHolder = `Compare ${args.ref2} with${GlyphChars.Ellipsis}`;\n                        break;\n                }\n\n                const pick = await new ReferencesQuickPick(repoPath).show(placeHolder, {\n                    allowEnteringRefs: true,\n                    checked: args.ref2,\n                    checkmarks: checkmarks\n                });\n                if (pick === undefined) return undefined;\n\n                if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n                args.ref1 = pick.ref;\n                if (args.ref1 === undefined) return undefined;\n            }\n\n            await Container.compareView.compare(repoPath, args.ref1, args.ref2);\n\n            return undefined;\n        }\n        catch (ex) {\n            Logger.error(ex, 'DiffBranchWithBranchCommand');\n            return Messages.showGenericErrorMessage('Unable to open branch compare');\n        }\n    }\n}\n","'use strict';\nimport { env, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../quickpicks';\nimport { CompareResultsNode } from '../views/nodes';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    getRepoPathOrActiveOrPrompt,\n    isCommandViewContextWithRef\n} from './common';\n\nexport interface DiffDirectoryCommandArgs {\n    ref1?: string;\n    ref2?: string;\n}\n\n@command()\nexport class DiffDirectoryCommand extends ActiveEditorCommand {\n    constructor() {\n        super([\n            Commands.DiffDirectory,\n            Commands.DiffDirectoryWithHead,\n            Commands.ViewsOpenDirectoryDiff,\n            Commands.ViewsOpenDirectoryDiffWithWorking\n        ]);\n    }\n\n    protected async preExecute(context: CommandContext, args: DiffDirectoryCommandArgs = {}) {\n        switch (context.command) {\n            case Commands.DiffDirectoryWithHead:\n                args.ref1 = 'HEAD';\n                args.ref2 = undefined;\n                break;\n\n            case Commands.ViewsOpenDirectoryDiff:\n                if (context.type === 'viewItem' && context.node instanceof CompareResultsNode) {\n                    [args.ref1, args.ref2] = await context.node.getDiffRefs();\n                }\n                break;\n\n            case Commands.ViewsOpenDirectoryDiffWithWorking:\n                if (isCommandViewContextWithRef(context)) {\n                    args.ref1 = context.node.ref;\n                    args.ref2 = undefined;\n                }\n                break;\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffDirectoryCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        try {\n            const repoPath = await getRepoPathOrActiveOrPrompt(\n                uri,\n                editor,\n                `Compare directory in which repository${GlyphChars.Ellipsis}`\n            );\n            if (!repoPath) return undefined;\n\n            if (!args.ref1) {\n                args = { ...args };\n\n                const pick = await new ReferencesQuickPick(repoPath).show(\n                    `Compare Working Tree with${GlyphChars.Ellipsis}`,\n                    { allowEnteringRefs: true, checkmarks: false }\n                );\n                if (pick === undefined) return undefined;\n\n                if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n                args.ref1 = pick.ref;\n                if (args.ref1 === undefined) return undefined;\n            }\n\n            await Container.git.openDirectoryDiff(repoPath, args.ref1, args.ref2);\n            return undefined;\n        }\n        catch (ex) {\n            const msg = ex && ex.toString();\n            if (msg === 'No diff tool found') {\n                const result = await window.showWarningMessage(\n                    'Unable to open directory compare because there is no Git diff tool configured',\n                    'View Git Docs'\n                );\n                if (!result) return undefined;\n\n                return env.openExternal(\n                    Uri.parse('https://git-scm.com/docs/git-config#Documentation/git-config.txt-difftool')\n                );\n            }\n\n            Logger.error(ex, 'DiffDirectoryCommand');\n            return Messages.showGenericErrorMessage('Unable to open directory compare');\n        }\n    }\n}\n","'use strict';\nimport { commands, TextDocumentShowOptions, TextEditor, Uri } from 'vscode';\nimport { Container } from '../container';\nimport { GitCommit, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { ActiveEditorCommand, command, Commands, getCommandUri } from './common';\nimport { DiffWithCommandArgs } from './diffWith';\n\nexport interface DiffLineWithPreviousCommandArgs {\n    commit?: GitCommit;\n\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n}\n\n@command()\nexport class DiffLineWithPreviousCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.DiffLineWithPrevious);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffLineWithPreviousCommandArgs = {}): Promise<any> {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        const gitUri = args.commit !== undefined ? GitUri.fromCommit(args.commit) : await GitUri.fromUri(uri);\n\n        try {\n            const diffUris = await Container.git.getPreviousLineDiffUris(\n                gitUri.repoPath!,\n                gitUri,\n                args.line,\n                gitUri.sha\n            );\n\n            if (diffUris === undefined || diffUris.previous === undefined) {\n                return Messages.showCommitHasNoPreviousCommitWarningMessage();\n            }\n\n            const diffArgs: DiffWithCommandArgs = {\n                repoPath: diffUris.current.repoPath,\n                lhs: {\n                    sha: diffUris.previous.sha || '',\n                    uri: diffUris.previous.documentUri()\n                },\n                rhs: {\n                    sha: diffUris.current.sha || '',\n                    uri: diffUris.current.documentUri()\n                },\n                line: args.line,\n                showOptions: args.showOptions\n            };\n            return commands.executeCommand(Commands.DiffWith, diffArgs);\n        }\n        catch (ex) {\n            Logger.error(\n                ex,\n                'DiffLineWithPreviousCommand',\n                `getPreviousLineDiffUris(${gitUri.repoPath}, ${gitUri.fsPath}, ${gitUri.sha})`\n            );\n            return Messages.showGenericErrorMessage('Unable to open compare');\n        }\n    }\n}\n","'use strict';\nimport { commands, TextDocumentShowOptions, TextEditor, Uri, window } from 'vscode';\nimport { Container } from '../container';\nimport { GitCommit, GitService, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { ActiveEditorCommand, command, Commands, getCommandUri } from './common';\nimport { DiffWithCommandArgs } from './diffWith';\n\nexport interface DiffLineWithWorkingCommandArgs {\n    commit?: GitCommit;\n\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n}\n\n@command()\nexport class DiffLineWithWorkingCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.DiffLineWithWorking);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffLineWithWorkingCommandArgs = {}): Promise<any> {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        const gitUri = await GitUri.fromUri(uri);\n\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        if (args.commit === undefined || args.commit.isUncommitted) {\n            const blameline = args.line;\n            if (blameline < 0) return undefined;\n\n            try {\n                const blame =\n                    editor && editor.document && editor.document.isDirty\n                        ? await Container.git.getBlameForLineContents(gitUri, blameline, editor.document.getText())\n                        : await Container.git.getBlameForLine(gitUri, blameline);\n                if (blame === undefined) {\n                    return Messages.showFileNotUnderSourceControlWarningMessage('Unable to open compare');\n                }\n\n                args.commit = blame.commit;\n\n                // If the line is uncommitted, change the previous commit\n                if (args.commit.isUncommitted) {\n                    const status = await Container.git.getStatusForFile(gitUri.repoPath!, gitUri.fsPath);\n                    args.commit = args.commit.with({\n                        sha:\n                            status !== undefined && status.indexStatus !== undefined\n                                ? GitService.uncommittedStagedSha\n                                : args.commit.previousSha!,\n                        fileName: args.commit.previousFileName!,\n                        originalFileName: null,\n                        previousSha: null,\n                        previousFileName: null\n                    });\n                    // editor lines are 0-based\n                    args.line = blame.line.line - 1;\n                }\n            }\n            catch (ex) {\n                Logger.error(ex, 'DiffLineWithWorkingCommand', `getBlameForLine(${blameline})`);\n                return Messages.showGenericErrorMessage('Unable to open compare');\n            }\n        }\n\n        const workingUri = await args.commit.getWorkingUri();\n        if (workingUri === undefined) {\n            return window.showWarningMessage('Unable to open compare. File has been deleted from the working tree');\n        }\n\n        const diffArgs: DiffWithCommandArgs = {\n            repoPath: args.commit.repoPath,\n            lhs: {\n                sha: args.commit.sha,\n                uri: args.commit.uri\n            },\n            rhs: {\n                sha: '',\n                uri: workingUri\n            },\n            line: args.line,\n            showOptions: args.showOptions\n        };\n        return commands.executeCommand(Commands.DiffWith, diffArgs);\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { commands, Range, TextDocumentShowOptions, TextEditor, Uri, ViewColumn } from 'vscode';\nimport { BuiltInCommands, GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitCommit, GitService, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { ActiveEditorCommand, command, Commands } from './common';\n\nexport interface DiffWithCommandArgsRevision {\n    sha: string;\n    uri: Uri;\n    title?: string;\n}\n\nexport interface DiffWithCommandArgs {\n    lhs: DiffWithCommandArgsRevision;\n    rhs: DiffWithCommandArgsRevision;\n    repoPath: string | undefined;\n\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n}\n\n@command()\nexport class DiffWithCommand extends ActiveEditorCommand {\n    static getMarkdownCommandArgs(args: DiffWithCommandArgs): string;\n    static getMarkdownCommandArgs(commit: GitCommit, line?: number): string;\n    static getMarkdownCommandArgs(argsOrCommit: DiffWithCommandArgs | GitCommit, line?: number): string {\n        let args: DiffWithCommandArgs | GitCommit;\n        if (GitCommit.is(argsOrCommit)) {\n            const commit = argsOrCommit;\n\n            if (commit.isUncommitted) {\n                args = {\n                    repoPath: commit.repoPath,\n                    lhs: {\n                        sha: 'HEAD',\n                        uri: commit.uri\n                    },\n                    rhs: {\n                        sha: '',\n                        uri: commit.uri\n                    },\n                    line: line\n                };\n            }\n            else {\n                args = {\n                    repoPath: commit.repoPath,\n                    lhs: {\n                        sha: commit.previousSha !== undefined ? commit.previousSha : GitService.deletedOrMissingSha,\n                        uri: commit.previousUri!\n                    },\n                    rhs: {\n                        sha: commit.sha,\n                        uri: commit.uri\n                    },\n                    line: line\n                };\n            }\n        }\n        else {\n            args = argsOrCommit;\n        }\n\n        return super.getMarkdownCommandArgsCore<DiffWithCommandArgs>(Commands.DiffWith, args);\n    }\n\n    constructor() {\n        super(Commands.DiffWith);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args?: DiffWithCommandArgs): Promise<any> {\n        if (args === undefined || args.lhs === undefined || args.rhs === undefined) return undefined;\n\n        args = {\n            ...args,\n            lhs: { ...(args.lhs as DiffWithCommandArgsRevision) },\n            rhs: { ...(args.rhs as DiffWithCommandArgsRevision) },\n            showOptions: args.showOptions === undefined ? undefined : { ...args.showOptions }\n        };\n\n        if (args.repoPath === undefined) return undefined;\n\n        try {\n            let lhsSha = args.lhs.sha;\n            let rhsSha = args.rhs.sha;\n\n            [args.lhs.sha, args.rhs.sha] = await Promise.all([\n                await Container.git.resolveReference(args.repoPath, args.lhs.sha, args.lhs.uri),\n                await Container.git.resolveReference(args.repoPath, args.rhs.sha, args.rhs.uri)\n            ]);\n\n            if (args.lhs.sha !== GitService.deletedOrMissingSha) {\n                lhsSha = args.lhs.sha;\n            }\n\n            if (args.rhs.sha && args.rhs.sha !== GitService.deletedOrMissingSha) {\n                // Ensure that the file still exists in this commit\n                const status = await Container.git.getFileStatusForCommit(\n                    args.repoPath,\n                    args.rhs.uri.fsPath,\n                    args.rhs.sha\n                );\n                if (status !== undefined && status.status === 'D') {\n                    args.rhs.sha = GitService.deletedOrMissingSha;\n                }\n                else {\n                    rhsSha = args.rhs.sha;\n                }\n            }\n\n            const [lhs, rhs] = await Promise.all([\n                Container.git.getVersionedUri(args.repoPath, args.lhs.uri.fsPath, args.lhs.sha),\n                Container.git.getVersionedUri(args.repoPath, args.rhs.uri.fsPath, args.rhs.sha)\n            ]);\n\n            let rhsSuffix = GitService.shortenSha(rhsSha, { uncommitted: 'Working Tree' }) || '';\n            if (rhs === undefined) {\n                if (GitService.isUncommitted(args.rhs.sha)) {\n                    rhsSuffix = 'deleted';\n                }\n                else if (rhsSuffix.length === 0 && args.rhs.sha === GitService.deletedOrMissingSha) {\n                    rhsSuffix = 'not in Working Tree';\n                }\n                else {\n                    rhsSuffix = `deleted${rhsSuffix.length === 0 ? '' : ` in ${rhsSuffix}`}`;\n                }\n            }\n            else if (lhs === undefined) {\n                rhsSuffix = `added${rhsSuffix.length === 0 ? '' : ` in ${rhsSuffix}`}`;\n            }\n\n            let lhsSuffix = args.lhs.sha !== GitService.deletedOrMissingSha ? GitService.shortenSha(lhsSha) || '' : '';\n            if (lhs === undefined && args.rhs.sha.length === 0) {\n                if (rhs !== undefined) {\n                    lhsSuffix = lhsSuffix.length === 0 ? '' : `not in ${lhsSuffix}`;\n                    rhsSuffix = '';\n                }\n                else {\n                    lhsSuffix = `deleted${lhsSuffix.length === 0 ? '' : ` in ${lhsSuffix}`}`;\n                }\n            }\n\n            if (args.lhs.title === undefined && (lhs !== undefined || lhsSuffix.length !== 0)) {\n                args.lhs.title = `${paths.basename(args.lhs.uri.fsPath)}${lhsSuffix ? ` (${lhsSuffix})` : ''}`;\n            }\n            if (args.rhs.title === undefined) {\n                args.rhs.title = `${paths.basename(args.rhs.uri.fsPath)}${rhsSuffix ? ` (${rhsSuffix})` : ''}`;\n            }\n\n            const title =\n                args.lhs.title !== undefined && args.rhs.title !== undefined\n                    ? `${args.lhs.title} ${GlyphChars.ArrowLeftRightLong} ${args.rhs.title}`\n                    : args.lhs.title || args.rhs.title;\n\n            if (args.showOptions === undefined) {\n                args.showOptions = {};\n            }\n\n            if (args.showOptions.viewColumn === undefined) {\n                args.showOptions.viewColumn = ViewColumn.Active;\n            }\n\n            if (args.line !== undefined && args.line !== 0) {\n                args.showOptions.selection = new Range(args.line, 0, args.line, 0);\n            }\n\n            return await commands.executeCommand(\n                BuiltInCommands.Diff,\n                lhs === undefined\n                    ? GitUri.toRevisionUri(GitService.deletedOrMissingSha, args.lhs.uri.fsPath, args.repoPath)\n                    : lhs,\n                rhs === undefined\n                    ? GitUri.toRevisionUri(GitService.deletedOrMissingSha, args.rhs.uri.fsPath, args.repoPath)\n                    : rhs,\n                title,\n                args.showOptions\n            );\n        }\n        catch (ex) {\n            Logger.error(ex, 'DiffWithCommand', 'getVersionedFile');\n            return Messages.showGenericErrorMessage('Unable to open compare');\n        }\n    }\n}\n","'use strict';\nimport { commands, Range, TextDocumentShowOptions, TextEditor, Uri } from 'vscode';\nimport { Container } from '../container';\nimport { GitLogCommit, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { ActiveEditorCommand, command, CommandContext, Commands, getCommandUri } from './common';\nimport { DiffWithCommandArgs } from './diffWith';\nimport { UriComparer } from '../comparers';\n\nexport interface DiffWithNextCommandArgs {\n    commit?: GitLogCommit;\n    range?: Range;\n\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n}\n\n@command()\nexport class DiffWithNextCommand extends ActiveEditorCommand {\n    constructor() {\n        super([Commands.DiffWithNext, Commands.DiffWithNextInDiff]);\n    }\n\n    protected preExecute(context: CommandContext, args: DiffWithNextCommandArgs = {}) {\n        if (\n            context.command === Commands.DiffWithNextInDiff\n            // || (context.editor !== undefined && context.editor.viewColumn === undefined)\n        ) {\n            // HACK: If in a diff, try to determine if we are on the right or left side\n            // If there is a context uri and it doesn't match the editor uri, assume we are on the left\n            // If on the left, use the editor uri and pretend we aren't in a diff\n            if (context.uri !== undefined && context.editor !== undefined && context.editor.document !== undefined) {\n                if (!UriComparer.equals(context.uri, context.editor.document.uri, { exact: true })) {\n                    return this.execute(context.editor, context.editor.document.uri, args);\n                }\n            }\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffWithNextCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        const gitUri = args.commit !== undefined ? GitUri.fromCommit(args.commit) : await GitUri.fromUri(uri);\n        try {\n            const diffUris = await Container.git.getNextDiffUris(gitUri.repoPath!, gitUri, gitUri.sha);\n\n            if (diffUris === undefined || diffUris.next === undefined) return undefined;\n\n            const diffArgs: DiffWithCommandArgs = {\n                repoPath: diffUris.current.repoPath,\n                lhs: {\n                    sha: diffUris.current.sha || '',\n                    uri: diffUris.current.documentUri()\n                },\n                rhs: {\n                    sha: diffUris.next.sha || '',\n                    uri: diffUris.next.documentUri()\n                },\n                line: args.line,\n                showOptions: args.showOptions\n            };\n            return commands.executeCommand(Commands.DiffWith, diffArgs);\n        }\n        catch (ex) {\n            Logger.error(\n                ex,\n                'DiffWithNextCommand',\n                `getNextDiffUris(${gitUri.repoPath}, ${gitUri.fsPath}, ${gitUri.sha})`\n            );\n            return Messages.showGenericErrorMessage('Unable to open compare');\n        }\n    }\n}\n","'use strict';\nimport { commands, TextDocumentShowOptions, TextEditor, Uri } from 'vscode';\nimport { Container } from '../container';\nimport { GitCommit, GitService, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { ActiveEditorCommand, command, CommandContext, Commands, getCommandUri, openEditor } from './common';\nimport { DiffWithCommandArgs } from './diffWith';\nimport { UriComparer } from '../comparers';\n\nexport interface DiffWithPreviousCommandArgs {\n    commit?: GitCommit;\n\n    inDiffEditor?: boolean;\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n}\n\n@command()\nexport class DiffWithPreviousCommand extends ActiveEditorCommand {\n    constructor() {\n        super([Commands.DiffWithPrevious, Commands.DiffWithPreviousInDiff]);\n    }\n\n    protected preExecute(context: CommandContext, args: DiffWithPreviousCommandArgs = {}) {\n        if (\n            context.command === Commands.DiffWithPreviousInDiff\n            // || (context.editor !== undefined && context.editor.viewColumn === undefined)\n        ) {\n            // HACK: If in a diff, try to determine if we are on the right or left side\n            // If there is a context uri and it doesn't match the editor uri, assume we are on the left\n            // If on the left, use the editor uri and pretend we aren't in a diff\n            if (context.uri !== undefined && context.editor !== undefined && context.editor.document !== undefined) {\n                if (!UriComparer.equals(context.uri, context.editor.document.uri, { exact: true })) {\n                    return this.execute(context.editor, context.editor.document.uri, args);\n                }\n            }\n            args.inDiffEditor = true;\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffWithPreviousCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        let gitUri;\n        if (args.commit !== undefined) {\n            if (!args.commit.isUncommitted) {\n                const diffArgs: DiffWithCommandArgs = {\n                    repoPath: args.commit.repoPath,\n                    lhs: {\n                        sha: `${args.commit.sha}^`,\n                        uri: args.commit.originalUri\n                    },\n                    rhs: {\n                        sha: args.commit.sha || '',\n                        uri: args.commit.uri\n                    },\n                    line: args.line,\n                    showOptions: args.showOptions\n                };\n                return commands.executeCommand(Commands.DiffWith, diffArgs);\n            }\n\n            gitUri = GitUri.fromCommit(args.commit);\n        }\n        else {\n            gitUri = await GitUri.fromUri(uri);\n        }\n\n        try {\n            const diffUris = await Container.git.getPreviousDiffUris(\n                gitUri.repoPath!,\n                gitUri,\n                gitUri.sha,\n                // If we are in a diff editor, assume we are on the right side, and need to skip back 1 more revisions\n                args.inDiffEditor ? 1 : 0\n            );\n\n            if (diffUris === undefined || diffUris.previous === undefined) {\n                if (diffUris === undefined) return Messages.showCommitHasNoPreviousCommitWarningMessage();\n\n                // If we have no previous and the current is the working file, just open the working file\n                if (diffUris.current.sha === undefined) {\n                    return openEditor(diffUris.current, args.showOptions);\n                }\n\n                if (!diffUris.current.isUncommittedStaged) {\n                    return Messages.showCommitHasNoPreviousCommitWarningMessage();\n                }\n\n                // If we have no previous and the current is staged, then diff staged with missing\n                diffUris.previous = GitUri.fromFile(\n                    diffUris.current.fileName,\n                    diffUris.current.repoPath!,\n                    GitService.deletedOrMissingSha\n                );\n            }\n\n            const diffArgs: DiffWithCommandArgs = {\n                repoPath: diffUris.current.repoPath,\n                lhs: {\n                    sha: diffUris.previous.sha || '',\n                    uri: diffUris.previous.documentUri()\n                },\n                rhs: {\n                    sha: diffUris.current.sha || '',\n                    uri: diffUris.current.documentUri()\n                },\n                line: args.line,\n                showOptions: args.showOptions\n            };\n            return commands.executeCommand(Commands.DiffWith, diffArgs);\n        }\n        catch (ex) {\n            Logger.error(\n                ex,\n                'DiffWithPreviousCommand',\n                `getPreviousDiffUris(${gitUri.repoPath}, ${gitUri.fsPath}, ${gitUri.sha})`\n            );\n            return Messages.showGenericErrorMessage('Unable to open compare');\n        }\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { commands, TextDocumentShowOptions, TextEditor, Uri } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitService, GitUri } from '../git/gitService';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../quickpicks';\nimport { Strings } from '../system';\nimport { ActiveEditorCommand, command, Commands, getCommandUri } from './common';\nimport { DiffWithCommandArgs } from './diffWith';\n\nexport interface DiffWithRefCommandArgs {\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class DiffWithRefCommand extends ActiveEditorCommand {\n    constructor() {\n        super([Commands.DiffWithRef, Commands.DiffWithBranch]);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffWithRefCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        const gitUri = await GitUri.fromUri(uri);\n        if (!gitUri.repoPath) return Messages.showNoRepositoryWarningMessage('Unable to open file compare');\n\n        const pick = await new ReferencesQuickPick(gitUri.repoPath).show(\n            `Compare ${gitUri.getFormattedPath()} with${GlyphChars.Ellipsis}`,\n            {\n                allowEnteringRefs: true,\n                checkmarks: false,\n                goBack: args.goBackCommand\n            }\n        );\n        if (pick === undefined) return undefined;\n\n        if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n        const ref = pick.ref;\n        if (ref === undefined) return undefined;\n\n        let renamedUri: Uri | undefined;\n        let renamedTitle: string | undefined;\n\n        // Check to see if this file has been renamed\n        const files = await Container.git.getDiffStatus(gitUri.repoPath, 'HEAD', ref, { filter: 'R' });\n        if (files !== undefined) {\n            const fileName = Strings.normalizePath(paths.relative(gitUri.repoPath, gitUri.fsPath));\n            const rename = files.find(s => s.fileName === fileName);\n            if (rename !== undefined && rename.originalFileName !== undefined) {\n                renamedUri = GitUri.resolveToUri(rename.originalFileName, gitUri.repoPath);\n                renamedTitle = `${paths.basename(rename.originalFileName)} (${GitService.shortenSha(ref)})`;\n            }\n        }\n\n        const diffArgs: DiffWithCommandArgs = {\n            repoPath: gitUri.repoPath,\n            lhs: {\n                sha: pick.remote ? `remotes/${ref}` : ref,\n                uri: renamedUri || (gitUri as Uri),\n                title: renamedTitle || `${paths.basename(gitUri.fsPath)} (${GitService.shortenSha(ref)})`\n            },\n            rhs: {\n                sha: '',\n                uri: gitUri as Uri\n            },\n            line: args.line,\n            showOptions: args.showOptions\n        };\n        return commands.executeCommand(Commands.DiffWith, diffArgs);\n    }\n}\n","'use strict';\nimport { commands, TextDocumentShowOptions, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitBranch, GitReference, GitTag, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, FileHistoryQuickPick, ShowFileHistoryFromQuickPickItem } from '../quickpicks';\nimport { Iterables, Strings } from '../system';\nimport { ActiveEditorCommand, command, Commands, getCommandUri } from './common';\nimport { DiffWithCommandArgs } from './diffWith';\n\nexport interface DiffWithRevisionCommandArgs {\n    reference?: GitBranch | GitTag | GitReference;\n    maxCount?: number;\n\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n    nextPageCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class DiffWithRevisionCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.DiffWithRevision);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffWithRevisionCommandArgs = {}): Promise<any> {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        const gitUri = await GitUri.fromUri(uri);\n\n        const placeHolder = `Compare ${gitUri.getFormattedPath({\n            suffix: args.reference ? ` (${args.reference.name})` : undefined\n        })}${gitUri.sha ? ` ${Strings.pad(GlyphChars.Dot, 1, 1)} ${gitUri.shortSha}` : ''} with revision${\n            GlyphChars.Ellipsis\n        }`;\n\n        const progressCancellation = FileHistoryQuickPick.showProgress(placeHolder);\n        try {\n            const log = await Container.git.getLogForFile(gitUri.repoPath, gitUri.fsPath, {\n                maxCount: args.maxCount,\n                ref: (args.reference && args.reference.ref) || gitUri.sha\n            });\n            if (log === undefined) {\n                if (args.reference) {\n                    return window.showWarningMessage(`The file could not be found in ${args.reference.name}`);\n                }\n                return Messages.showFileNotUnderSourceControlWarningMessage('Unable to open history compare');\n            }\n\n            if (progressCancellation.token.isCancellationRequested) return undefined;\n\n            let previousPageCommand: CommandQuickPickItem | undefined = undefined;\n\n            let commandArgs: DiffWithRevisionCommandArgs;\n            if (log.truncated) {\n                commandArgs = { ...args };\n                const npc = new CommandQuickPickItem(\n                    {\n                        label: '$(arrow-right) Show Next Commits',\n                        description: `shows ${log.maxCount} newer commits`\n                    },\n                    Commands.DiffWithRevision,\n                    [uri, commandArgs]\n                );\n\n                const last = Iterables.last(log.commits.values());\n                if (last != null) {\n                    commandArgs = { ...args, nextPageCommand: npc };\n                    previousPageCommand = new CommandQuickPickItem(\n                        {\n                            label: '$(arrow-left) Show Previous Commits',\n                            description: `shows ${log.maxCount} older commits`\n                        },\n                        Commands.DiffWithRevision,\n                        [new GitUri(uri, last), commandArgs]\n                    );\n                }\n            }\n\n            commandArgs = { ...args };\n            const icon = GitTag.is(args.reference) ? '$(tag) ' : GitBranch.is(args.reference) ? '$(git-branch) ' : '';\n            const currentCommand = new CommandQuickPickItem(\n                {\n                    label: `go back ${GlyphChars.ArrowBack}`,\n                    description: `to history of ${gitUri.getFormattedPath()}${\n                        args.reference\n                            ? ` from ${GlyphChars.Space}${icon}${args.reference.name}`\n                            : gitUri.sha\n                            ? ` from ${GlyphChars.Space}$(git-commit) ${gitUri.shortSha}`\n                            : ''\n                    }`\n                },\n                Commands.DiffWithRevision,\n                [uri, commandArgs]\n            );\n\n            commandArgs = { ...args, maxCount: 0 };\n            const pick = await FileHistoryQuickPick.show(log, gitUri, placeHolder, {\n                pickerOnly: true,\n                progressCancellation: progressCancellation,\n                currentCommand: currentCommand,\n                nextPageCommand: args.nextPageCommand,\n                previousPageCommand: previousPageCommand,\n                showAllCommand: log.truncated\n                    ? new CommandQuickPickItem(\n                          {\n                              label: '$(sync) Show All Commits',\n                              description: 'this may take a while'\n                          },\n                          Commands.DiffWithRevision,\n                          [uri, commandArgs]\n                      )\n                    : undefined\n            });\n            if (pick === undefined) return undefined;\n\n            if (pick instanceof ShowFileHistoryFromQuickPickItem) {\n                const reference = await pick.execute();\n                if (reference === undefined) return undefined;\n                if (reference instanceof CommandQuickPickItem) return reference.execute();\n\n                commandArgs = {\n                    ...args,\n                    reference: reference.item\n                };\n                return commands.executeCommand(Commands.DiffWithRevision, gitUri, commandArgs);\n            }\n\n            if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n            const ref = pick.item.sha;\n\n            const diffArgs: DiffWithCommandArgs = {\n                repoPath: gitUri.repoPath,\n                lhs: {\n                    sha: ref,\n                    uri: gitUri as Uri\n                },\n                rhs: {\n                    sha: '',\n                    uri: gitUri as Uri\n                },\n                line: args.line,\n                showOptions: args.showOptions\n            };\n            return await commands.executeCommand(Commands.DiffWith, diffArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'DiffWithRevisionCommand');\n            return Messages.showGenericErrorMessage('Unable to open compare');\n        }\n        finally {\n            progressCancellation.cancel();\n        }\n    }\n}\n","'use strict';\nimport { commands, TextDocumentShowOptions, TextEditor, Uri, window } from 'vscode';\nimport { Container } from '../container';\nimport { GitCommit, GitService, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { ActiveEditorCommand, command, CommandContext, Commands, getCommandUri } from './common';\nimport { DiffWithCommandArgs } from './diffWith';\nimport { UriComparer } from '../comparers';\n\nexport interface DiffWithWorkingCommandArgs {\n    commit?: GitCommit;\n\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n}\n\n@command()\nexport class DiffWithWorkingCommand extends ActiveEditorCommand {\n    constructor() {\n        super([Commands.DiffWithWorking, Commands.DiffWithWorkingInDiff]);\n    }\n\n    protected preExecute(context: CommandContext, args: DiffWithWorkingCommandArgs = {}) {\n        if (\n            context.command === Commands.DiffWithWorkingInDiff\n            // || (context.editor !== undefined && context.editor.viewColumn === undefined)\n        ) {\n            // HACK: If in a diff, try to determine if we are on the right or left side\n            // If there is a context uri and it doesn't match the editor uri, assume we are on the left\n            // If on the left, use the editor uri and pretend we aren't in a diff\n            if (context.uri !== undefined && context.editor !== undefined && context.editor.document !== undefined) {\n                if (!UriComparer.equals(context.uri, context.editor.document.uri, { exact: true })) {\n                    return this.execute(context.editor, context.editor.document.uri, args);\n                }\n            }\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffWithWorkingCommandArgs = {}): Promise<any> {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        const gitUri = await GitUri.fromUri(uri);\n\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        if (args.commit === undefined || args.commit.isUncommitted) {\n            // If the sha is missing, just let the user know the file matches\n            if (gitUri.sha === undefined) return window.showInformationMessage('File matches the working tree');\n            if (gitUri.sha === GitService.deletedOrMissingSha) {\n                return window.showWarningMessage('Unable to open compare. File has been deleted from the working tree');\n            }\n\n            // If we are a fake \"staged\" sha, check the status\n            let ref: string | undefined = gitUri.sha;\n            if (gitUri.isUncommittedStaged) {\n                ref = undefined;\n\n                const status = await Container.git.getStatusForFile(gitUri.repoPath!, gitUri.fsPath);\n                if (status !== undefined && status.indexStatus !== undefined) {\n                    const diffArgs: DiffWithCommandArgs = {\n                        repoPath: gitUri.repoPath,\n                        lhs: {\n                            sha: GitService.uncommittedStagedSha,\n                            uri: gitUri.documentUri()\n                        },\n                        rhs: {\n                            sha: '',\n                            uri: gitUri.documentUri()\n                        },\n                        line: args.line,\n                        showOptions: args.showOptions\n                    };\n\n                    return commands.executeCommand(Commands.DiffWith, diffArgs);\n                }\n            }\n\n            try {\n                args.commit = await Container.git.getCommitForFile(gitUri.repoPath, gitUri.fsPath, {\n                    ref: ref,\n                    firstIfNotFound: true\n                });\n                if (args.commit === undefined) {\n                    return window.showWarningMessage(\n                        \"Unable to open compare. File doesn't exist in the specified revision\"\n                    );\n                }\n            }\n            catch (ex) {\n                Logger.error(\n                    ex,\n                    'DiffWithWorkingCommand',\n                    `getLogCommit(${gitUri.repoPath}, ${gitUri.fsPath}, ${ref})`\n                );\n                return Messages.showGenericErrorMessage('Unable to open compare');\n            }\n        }\n\n        const workingUri = await args.commit.getWorkingUri();\n        if (workingUri === undefined) {\n            return window.showWarningMessage('Unable to open compare. File has been deleted from the working tree');\n        }\n\n        const diffArgs: DiffWithCommandArgs = {\n            repoPath: args.commit.repoPath,\n            lhs: {\n                sha: args.commit.sha,\n                uri: args.commit.uri\n            },\n            rhs: {\n                sha: '',\n                uri: workingUri\n            },\n            line: args.line,\n            showOptions: args.showOptions\n        };\n        return commands.executeCommand(Commands.DiffWith, diffArgs);\n    }\n}\n","'use strict';\nimport { env, SourceControlResourceState, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitService, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { Arrays } from '../system';\nimport {\n    command,\n    Command,\n    CommandContext,\n    Commands,\n    getRepoPathOrPrompt,\n    isCommandViewContextWithFileCommit,\n    isCommandViewContextWithFileRefs\n} from './common';\n\nenum Status {\n    INDEX_MODIFIED,\n    INDEX_ADDED,\n    INDEX_DELETED,\n    INDEX_RENAMED,\n    INDEX_COPIED,\n\n    MODIFIED,\n    DELETED,\n    UNTRACKED,\n    IGNORED,\n\n    ADDED_BY_US,\n    ADDED_BY_THEM,\n    DELETED_BY_US,\n    DELETED_BY_THEM,\n    BOTH_ADDED,\n    BOTH_DELETED,\n    BOTH_MODIFIED\n}\n\nenum ResourceGroupType {\n    Merge,\n    Index,\n    WorkingTree\n}\n\ninterface Resource extends SourceControlResourceState {\n    readonly resourceGroupType: ResourceGroupType;\n    readonly type: Status;\n}\n\ninterface ExternalDiffFile {\n    uri: Uri;\n    staged: boolean;\n    ref1?: string;\n    ref2?: string;\n}\n\nexport interface ExternalDiffCommandArgs {\n    files?: ExternalDiffFile[];\n}\n\n@command()\nexport class ExternalDiffCommand extends Command {\n    constructor() {\n        super([Commands.ExternalDiff, Commands.ExternalDiffAll]);\n    }\n\n    protected async preExecute(context: CommandContext, args: ExternalDiffCommandArgs = {}) {\n        if (isCommandViewContextWithFileCommit(context)) {\n            args = { ...args };\n\n            const ref1 = GitService.isUncommitted(context.node.commit.previousFileSha)\n                ? ''\n                : context.node.commit.previousFileSha;\n            const ref2 = context.node.commit.isUncommitted ? '' : context.node.commit.sha;\n\n            args.files = [\n                {\n                    uri: GitUri.fromFile(context.node.file, context.node.file.repoPath || context.node.repoPath),\n                    staged: context.node.commit.isUncommittedStaged || context.node.file.indexStatus !== undefined,\n                    ref1: ref1,\n                    ref2: ref2\n                }\n            ];\n\n            return this.execute(args);\n        }\n\n        if (isCommandViewContextWithFileRefs(context)) {\n            args = { ...args };\n\n            args.files = [\n                {\n                    uri: GitUri.fromFile(context.node.file, context.node.file.repoPath || context.node.repoPath),\n                    staged: context.node.file.indexStatus !== undefined,\n                    ref1: context.node.ref1,\n                    ref2: context.node.ref2\n                }\n            ];\n\n            return this.execute(args);\n        }\n\n        if (args.files === undefined) {\n            if (context.type === 'scm-states') {\n                args = { ...args };\n                args.files = context.scmResourceStates.map(r => ({\n                    uri: r.resourceUri,\n                    staged: (r as Resource).resourceGroupType === ResourceGroupType.Index\n                }));\n            }\n            else if (context.type === 'scm-groups') {\n                args = { ...args };\n                args.files = Arrays.filterMap(context.scmResourceGroups[0].resourceStates, r =>\n                    this.isModified(r)\n                        ? {\n                              uri: r.resourceUri,\n                              staged: (r as Resource).resourceGroupType === ResourceGroupType.Index\n                          }\n                        : undefined\n                );\n            }\n        }\n\n        if (context.command === Commands.ExternalDiffAll) {\n            if (args.files === undefined) {\n                const repoPath = await getRepoPathOrPrompt(`Open changes from which repository${GlyphChars.Ellipsis}`);\n                if (!repoPath) return undefined;\n\n                const status = await Container.git.getStatusForRepo(repoPath);\n                if (status === undefined) {\n                    return window.showInformationMessage(\"The repository doesn't have any changes\");\n                }\n\n                args.files = [];\n\n                for (const file of status.files) {\n                    if (file.indexStatus === 'M') {\n                        args.files.push({ uri: file.uri, staged: true });\n                    }\n\n                    if (file.workingTreeStatus === 'M') {\n                        args.files.push({ uri: file.uri, staged: false });\n                    }\n                }\n            }\n        }\n\n        return this.execute(args);\n    }\n\n    private isModified(resource: SourceControlResourceState) {\n        const status = (resource as Resource).type;\n        return status === Status.BOTH_MODIFIED || status === Status.INDEX_MODIFIED || status === Status.MODIFIED;\n    }\n\n    async execute(args: ExternalDiffCommandArgs = {}) {\n        try {\n            let repoPath;\n            if (args.files === undefined) {\n                const editor = window.activeTextEditor;\n                if (editor === undefined) return undefined;\n\n                repoPath = await Container.git.getRepoPathOrActive(undefined, editor);\n                if (!repoPath) return undefined;\n\n                const uri = editor.document.uri;\n                const status = await Container.git.getStatusForFile(repoPath, uri.fsPath);\n                if (status === undefined) {\n                    return window.showInformationMessage(\"The current file doesn't have any changes\");\n                }\n\n                args.files = [];\n                if (status.indexStatus === 'M') {\n                    args.files.push({ uri: status.uri, staged: true });\n                }\n\n                if (status.workingTreeStatus === 'M') {\n                    args.files.push({ uri: status.uri, staged: false });\n                }\n            }\n            else {\n                repoPath = await Container.git.getRepoPath(args.files[0].uri.fsPath);\n                if (!repoPath) return undefined;\n            }\n\n            const tool = await Container.git.getDiffTool(repoPath);\n            if (tool === undefined) {\n                const result = await window.showWarningMessage(\n                    'Unable to open changes in diff tool. No Git diff tool is configured',\n                    'View Git Docs'\n                );\n                if (!result) return undefined;\n\n                return env.openExternal(\n                    Uri.parse('https://git-scm.com/docs/git-config#Documentation/git-config.txt-difftool')\n                );\n            }\n\n            for (const file of args.files) {\n                void Container.git.openDiffTool(repoPath, file.uri, {\n                    ref1: file.ref1,\n                    ref2: file.ref2,\n                    staged: file.staged,\n                    tool: tool\n                });\n            }\n\n            return undefined;\n        }\n        catch (ex) {\n            Logger.error(ex, 'ExternalDiffCommand');\n            return Messages.showGenericErrorMessage('Unable to open changes in diff tool');\n        }\n    }\n}\n","'use strict';\nimport { command, Command, CommandContext, Commands, isCommandViewContextWithContributor } from './common';\nimport { Container } from '../container';\n\nexport interface InviteToLiveShareCommandArgs {\n    email?: string;\n}\n\n@command()\nexport class InviteToLiveShareCommand extends Command {\n    static getMarkdownCommandArgs(args: InviteToLiveShareCommandArgs): string;\n    static getMarkdownCommandArgs(email: string | undefined): string;\n    static getMarkdownCommandArgs(argsOrEmail: InviteToLiveShareCommandArgs | string | undefined): string {\n        const args =\n            argsOrEmail === undefined || typeof argsOrEmail === 'string' ? { email: argsOrEmail } : argsOrEmail;\n        return super.getMarkdownCommandArgsCore<InviteToLiveShareCommandArgs>(Commands.InviteToLiveShare, args);\n    }\n\n    constructor() {\n        super(Commands.InviteToLiveShare);\n    }\n\n    protected preExecute(context: CommandContext, args: InviteToLiveShareCommandArgs = {}) {\n        if (isCommandViewContextWithContributor(context)) {\n            args = { ...args };\n            args.email = context.node.contributor.email;\n            return this.execute(args);\n        }\n\n        return this.execute(args);\n    }\n\n    async execute(args: InviteToLiveShareCommandArgs = {}) {\n        if (args.email) {\n            const contact = await Container.vsls.getContact(args.email);\n            if (contact != null) {\n                return contact.invite();\n            }\n        }\n\n        return Container.vsls.startSession();\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitUri, RemoteResourceType } from '../git/gitService';\nimport { Logger } from '../logger';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    getRepoPathOrActiveOrPrompt,\n    isCommandViewContextWithRemote\n} from './common';\nimport { OpenInRemoteCommandArgs } from './openInRemote';\n\nexport interface OpenBranchesInRemoteCommandArgs {\n    remote?: string;\n}\n\n@command()\nexport class OpenBranchesInRemoteCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.OpenBranchesInRemote);\n    }\n\n    protected preExecute(context: CommandContext, args: OpenBranchesInRemoteCommandArgs = {}) {\n        if (isCommandViewContextWithRemote(context)) {\n            args = { ...args };\n            args.remote = context.node.remote.name;\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: OpenBranchesInRemoteCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        const gitUri = uri && (await GitUri.fromUri(uri));\n\n        const repoPath = await getRepoPathOrActiveOrPrompt(\n            gitUri,\n            editor,\n            `Open branches on remote for which repository${GlyphChars.Ellipsis}`\n        );\n        if (!repoPath) return undefined;\n\n        try {\n            const remotes = await Container.git.getRemotes(repoPath);\n\n            const commandArgs: OpenInRemoteCommandArgs = {\n                resource: {\n                    type: RemoteResourceType.Branches\n                },\n                remote: args.remote,\n                remotes: remotes\n            };\n            return commands.executeCommand(Commands.OpenInRemote, uri, commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenBranchesInRemoteCommand');\n            return window.showErrorMessage(\n                'Unable to open branches on remote provider. See output channel for more details'\n            );\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitUri, RemoteResourceType } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../quickpicks';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    getRepoPathOrActiveOrPrompt,\n    isCommandViewContextWithBranch\n} from './common';\nimport { OpenInRemoteCommandArgs } from './openInRemote';\n\nexport interface OpenBranchInRemoteCommandArgs {\n    branch?: string;\n    remote?: string;\n}\n\n@command()\nexport class OpenBranchInRemoteCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.OpenBranchInRemote);\n    }\n\n    protected preExecute(context: CommandContext, args: OpenBranchInRemoteCommandArgs = {}) {\n        if (isCommandViewContextWithBranch(context)) {\n            args = { ...args };\n            args.branch = context.node.branch.name;\n            args.remote = context.node.branch.getRemoteName();\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: OpenBranchInRemoteCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        const gitUri = uri && (await GitUri.fromUri(uri));\n\n        const repoPath = await getRepoPathOrActiveOrPrompt(\n            gitUri,\n            editor,\n            `Open branch on remote for which repository${GlyphChars.Ellipsis}`\n        );\n        if (!repoPath) return undefined;\n\n        try {\n            if (args.branch === undefined) {\n                args = { ...args };\n\n                const pick = await new ReferencesQuickPick(repoPath).show(\n                    `Open which branch on remote${GlyphChars.Ellipsis}`,\n                    {\n                        autoPick: true,\n                        checkmarks: false,\n                        filterBranches: b => b.tracking !== undefined,\n                        include: 'branches'\n                    }\n                );\n                if (pick === undefined || pick instanceof CommandQuickPickItem) return undefined;\n\n                args.branch = pick.ref;\n            }\n\n            const remotes = await Container.git.getRemotes(repoPath);\n\n            const commandArgs: OpenInRemoteCommandArgs = {\n                resource: {\n                    type: RemoteResourceType.Branch,\n                    branch: args.branch || 'HEAD'\n                },\n                remote: args.remote,\n                remotes: remotes\n            };\n            return commands.executeCommand(Commands.OpenInRemote, uri, commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenBranchInRemoteCommandArgs');\n            return window.showErrorMessage(\n                'Unable to open branch on remote provider. See output channel for more details'\n            );\n        }\n    }\n}\n","'use strict';\nimport { TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { Arrays } from '../system';\nimport { ActiveEditorCommand, command, Commands, getCommandUri, getRepoPathOrPrompt, openEditor } from './common';\n\nexport interface OpenChangedFilesCommandArgs {\n    uris?: Uri[];\n}\n\n@command()\nexport class OpenChangedFilesCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.OpenChangedFiles);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: OpenChangedFilesCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        try {\n            if (args.uris === undefined) {\n                args = { ...args };\n\n                const repoPath = await getRepoPathOrPrompt(\n                    `Open all files changed in which repository${GlyphChars.Ellipsis}`\n                );\n                if (!repoPath) return undefined;\n\n                const status = await Container.git.getStatusForRepo(repoPath);\n                if (status === undefined) return window.showWarningMessage('Unable to open changed files');\n\n                args.uris = Arrays.filterMap(status.files, f => (f.status !== 'D' ? f.uri : undefined));\n            }\n\n            for (const uri of args.uris) {\n                await openEditor(uri, { preserveFocus: true, preview: false });\n            }\n\n            return undefined;\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenChangedFilesCommand');\n            return Messages.showGenericErrorMessage('Unable to open all changed files');\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri, window } from 'vscode';\nimport { Container } from '../container';\nimport { GitUri, RemoteResourceType } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    isCommandViewContextWithCommit\n} from './common';\nimport { OpenInRemoteCommandArgs } from './openInRemote';\n\nexport interface OpenCommitInRemoteCommandArgs {\n    sha?: string;\n}\n\n@command()\nexport class OpenCommitInRemoteCommand extends ActiveEditorCommand {\n    static getMarkdownCommandArgs(sha: string): string;\n    static getMarkdownCommandArgs(args: OpenCommitInRemoteCommandArgs): string;\n    static getMarkdownCommandArgs(argsOrSha: OpenCommitInRemoteCommandArgs | string): string {\n        const args: OpenCommitInRemoteCommandArgs = typeof argsOrSha === 'string' ? { sha: argsOrSha } : argsOrSha;\n        return super.getMarkdownCommandArgsCore<OpenCommitInRemoteCommandArgs>(Commands.OpenCommitInRemote, args);\n    }\n\n    constructor() {\n        super(Commands.OpenCommitInRemote);\n    }\n\n    protected preExecute(context: CommandContext, args: OpenCommitInRemoteCommandArgs = {}) {\n        if (isCommandViewContextWithCommit(context)) {\n            args = { ...args };\n            args.sha = context.node.commit.sha;\n            return this.execute(context.editor, context.node.commit.uri, args);\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: OpenCommitInRemoteCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n        const gitUri = await GitUri.fromUri(uri);\n        if (!gitUri.repoPath) return undefined;\n\n        try {\n            if (args.sha === undefined) {\n                const blameline = editor == null ? 0 : editor.selection.active.line;\n                if (blameline < 0) return undefined;\n\n                const blame =\n                    editor && editor.document && editor.document.isDirty\n                        ? await Container.git.getBlameForLineContents(gitUri, blameline, editor.document.getText())\n                        : await Container.git.getBlameForLine(gitUri, blameline);\n                if (blame === undefined) {\n                    return Messages.showFileNotUnderSourceControlWarningMessage(\n                        'Unable to open commit on remote provider'\n                    );\n                }\n\n                let commit = blame.commit;\n                // If the line is uncommitted, find the previous commit\n                if (commit.isUncommitted) {\n                    commit = commit.with({\n                        sha: commit.previousSha,\n                        fileName: commit.previousFileName,\n                        previousSha: null,\n                        previousFileName: null\n                    });\n                }\n\n                args.sha = commit.sha;\n            }\n\n            const remotes = await Container.git.getRemotes(gitUri.repoPath);\n\n            const commandArgs: OpenInRemoteCommandArgs = {\n                resource: {\n                    type: RemoteResourceType.Commit,\n                    sha: args.sha\n                },\n                remotes: remotes\n            };\n            return commands.executeCommand(Commands.OpenInRemote, uri, commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenCommitInRemoteCommand');\n            return window.showErrorMessage(\n                'Unable to open commit on remote provider. See output channel for more details'\n            );\n        }\n    }\n}\n","'use strict';\nimport { commands, Range, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitService, GitUri, RemoteResourceType } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../quickpicks';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    isCommandViewContextWithBranch,\n    isCommandViewContextWithCommit\n} from './common';\nimport { OpenInRemoteCommandArgs } from './openInRemote';\nimport { Strings } from '../system';\nimport { UriComparer } from '../comparers';\n\nexport interface OpenFileInRemoteCommandArgs {\n    branch?: string;\n    clipboard?: boolean;\n    range?: boolean;\n    sha?: string;\n}\n\n@command()\nexport class OpenFileInRemoteCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.OpenFileInRemote);\n    }\n\n    protected preExecute(context: CommandContext, args: OpenFileInRemoteCommandArgs = { range: true }) {\n        if (isCommandViewContextWithCommit(context)) {\n            args = { ...args };\n            args.range = false;\n            if (isCommandViewContextWithBranch(context)) {\n                args.branch = context.node.branch !== undefined ? context.node.branch.name : undefined;\n            }\n\n            return this.execute(\n                context.editor,\n                context.node.commit.isFile ? context.node.commit.uri : context.node.uri,\n                args\n            );\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: OpenFileInRemoteCommandArgs = { range: true }) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        const gitUri = await GitUri.fromUri(uri);\n        if (!gitUri.repoPath) return undefined;\n\n        try {\n            const remotes = await Container.git.getRemotes(gitUri.repoPath);\n            const range =\n                args.range && editor != null && UriComparer.equals(editor.document.uri, uri)\n                    ? new Range(\n                          editor.selection.start.with({ line: editor.selection.start.line + 1 }),\n                          editor.selection.end.with({ line: editor.selection.end.line + 1 })\n                      )\n                    : undefined;\n            let sha = args.sha || gitUri.sha;\n\n            if (args.branch === undefined && sha !== undefined && !GitService.isSha(sha) && remotes.length !== 0) {\n                const [remotePart, branchPart] = Strings.splitSingle(sha, '/');\n                if (branchPart !== undefined) {\n                    if (remotes.some(r => r.name === remotePart)) {\n                        args.branch = branchPart;\n                        sha = undefined;\n                    }\n                }\n            }\n\n            if (args.branch === undefined && args.sha === undefined) {\n                const branch = await Container.git.getBranch(gitUri.repoPath);\n                if (branch === undefined || branch.tracking === undefined) {\n                    const pick = await new ReferencesQuickPick(gitUri.repoPath).show(\n                        args.clipboard\n                            ? `Copy url for ${gitUri.relativePath} to clipboard for which branch${GlyphChars.Ellipsis}`\n                            : `Open ${gitUri.relativePath} on remote for which branch${GlyphChars.Ellipsis}`,\n                        {\n                            autoPick: true,\n                            checkmarks: false,\n                            filterBranches: b => b.tracking !== undefined,\n                            include: 'branches'\n                        }\n                    );\n                    if (pick === undefined || pick instanceof CommandQuickPickItem) return undefined;\n\n                    args.branch = pick.ref;\n                }\n                else {\n                    args.branch = branch.name;\n                }\n            }\n\n            const commandArgs: OpenInRemoteCommandArgs = {\n                resource:\n                    sha === undefined\n                        ? {\n                              type: RemoteResourceType.File,\n                              branch: args.branch || 'HEAD',\n                              fileName: gitUri.relativePath,\n                              range: range\n                          }\n                        : {\n                              type: RemoteResourceType.Revision,\n                              branch: args.branch || 'HEAD',\n                              fileName: gitUri.relativePath,\n                              range: range,\n                              sha: sha\n                          },\n                remotes: remotes,\n                clipboard: args.clipboard\n            };\n            return commands.executeCommand(Commands.OpenInRemote, uri, commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenFileInRemoteCommand');\n            return window.showErrorMessage(\n                'Unable to open file on remote provider. See output channel for more details'\n            );\n        }\n    }\n}\n","'use strict';\nimport { CancellationTokenSource, commands, Range, TextDocumentShowOptions, TextEditor, Uri, window } from 'vscode';\nimport { FileAnnotationType } from '../configuration';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitBranch, GitReference, GitTag, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, FileHistoryQuickPick, ShowFileHistoryFromQuickPickItem } from '../quickpicks';\nimport { Iterables, Strings } from '../system';\nimport { ActiveEditorCommand, command, Commands, getCommandUri, openEditor } from './common';\n\nexport interface OpenFileRevisionCommandArgs {\n    reference?: GitBranch | GitTag | GitReference;\n    uri?: Uri;\n    maxCount?: number;\n\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n    annotationType?: FileAnnotationType;\n    nextPageCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class OpenFileRevisionCommand extends ActiveEditorCommand {\n    static getMarkdownCommandArgs(args: OpenFileRevisionCommandArgs): string;\n    static getMarkdownCommandArgs(uri: Uri, annotationType?: FileAnnotationType, line?: number): string;\n    static getMarkdownCommandArgs(\n        argsOrUri: OpenFileRevisionCommandArgs | Uri,\n        annotationType?: FileAnnotationType,\n        line?: number\n    ): string {\n        let args: OpenFileRevisionCommandArgs | Uri;\n        if (argsOrUri instanceof Uri) {\n            const uri = argsOrUri;\n\n            args = {\n                uri: uri,\n                line: line,\n                annotationType: annotationType\n            };\n        }\n        else {\n            args = argsOrUri;\n        }\n\n        return super.getMarkdownCommandArgsCore<OpenFileRevisionCommandArgs>(Commands.OpenFileRevision, args);\n    }\n\n    constructor() {\n        super(Commands.OpenFileRevision);\n    }\n\n    async execute(editor: TextEditor | undefined, uri?: Uri, args: OpenFileRevisionCommandArgs = {}) {\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        let progressCancellation: CancellationTokenSource | undefined;\n\n        try {\n            let commandArgs: OpenFileRevisionCommandArgs;\n\n            if (args.uri == null) {\n                uri = getCommandUri(uri, editor);\n                if (uri == null) return undefined;\n\n                const gitUri = await GitUri.fromUri(uri);\n\n                const placeHolder = `Open revision of ${gitUri.getFormattedPath({\n                    suffix: args.reference ? ` (${args.reference.name})` : undefined\n                })}${gitUri.sha ? ` ${Strings.pad(GlyphChars.Dot, 1, 1)} ${gitUri.shortSha}` : ''}${\n                    GlyphChars.Ellipsis\n                }`;\n\n                progressCancellation = FileHistoryQuickPick.showProgress(placeHolder);\n\n                const log = await Container.git.getLogForFile(gitUri.repoPath, gitUri.fsPath, {\n                    maxCount: args.maxCount,\n                    ref: (args.reference && args.reference.ref) || gitUri.sha\n                });\n                if (log === undefined) {\n                    if (args.reference) {\n                        return window.showWarningMessage(`The file could not be found in ${args.reference.name}`);\n                    }\n                    return Messages.showFileNotUnderSourceControlWarningMessage('Unable to open history compare');\n                }\n\n                if (progressCancellation.token.isCancellationRequested) return undefined;\n\n                let previousPageCommand: CommandQuickPickItem | undefined = undefined;\n\n                if (log.truncated) {\n                    commandArgs = { ...args };\n                    const npc = new CommandQuickPickItem(\n                        {\n                            label: '$(arrow-right) Show Next Commits',\n                            description: `shows ${log.maxCount} newer commits`\n                        },\n                        Commands.OpenFileRevision,\n                        [uri, commandArgs]\n                    );\n\n                    const last = Iterables.last(log.commits.values());\n                    if (last != null) {\n                        commandArgs = { ...args, nextPageCommand: npc };\n                        previousPageCommand = new CommandQuickPickItem(\n                            {\n                                label: '$(arrow-left) Show Previous Commits',\n                                description: `shows ${log.maxCount} older commits`\n                            },\n                            Commands.OpenFileRevision,\n                            [new GitUri(uri, last), commandArgs]\n                        );\n                    }\n                }\n\n                commandArgs = { ...args };\n                const icon = GitTag.is(args.reference)\n                    ? '$(tag) '\n                    : GitBranch.is(args.reference)\n                    ? '$(git-branch) '\n                    : '';\n                const currentCommand = new CommandQuickPickItem(\n                    {\n                        label: `go back ${GlyphChars.ArrowBack}`,\n                        description: `to history of ${gitUri.getFormattedPath()}${\n                            args.reference\n                                ? ` from ${GlyphChars.Space}${icon}${args.reference.name}`\n                                : gitUri.sha\n                                ? ` from ${GlyphChars.Space}$(git-commit) ${gitUri.shortSha}`\n                                : ''\n                        }`\n                    },\n                    Commands.OpenFileRevision,\n                    [uri, commandArgs]\n                );\n\n                commandArgs = { ...args, maxCount: 0 };\n                const pick = await FileHistoryQuickPick.show(log, gitUri, placeHolder, {\n                    pickerOnly: true,\n                    progressCancellation: progressCancellation,\n                    currentCommand: currentCommand,\n                    nextPageCommand: args.nextPageCommand,\n                    previousPageCommand: previousPageCommand,\n                    showAllCommand: log.truncated\n                        ? new CommandQuickPickItem(\n                              {\n                                  label: '$(sync) Show All Commits',\n                                  description: 'this may take a while'\n                              },\n                              Commands.OpenFileRevision,\n                              [uri, commandArgs]\n                          )\n                        : undefined\n                });\n                if (pick === undefined) return undefined;\n\n                if (pick instanceof ShowFileHistoryFromQuickPickItem) {\n                    const reference = await pick.execute();\n                    if (reference === undefined) return undefined;\n                    if (reference instanceof CommandQuickPickItem) return reference.execute();\n\n                    commandArgs = {\n                        ...args,\n                        reference: reference.item\n                    };\n                    return commands.executeCommand(Commands.OpenFileRevision, gitUri, commandArgs);\n                }\n\n                if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n                args.uri = GitUri.toRevisionUri(pick.item.sha, pick.item.uri.fsPath, pick.item.repoPath);\n            }\n\n            if (args.line !== undefined && args.line !== 0) {\n                if (args.showOptions === undefined) {\n                    args.showOptions = {};\n                }\n                args.showOptions.selection = new Range(args.line, 0, args.line, 0);\n            }\n\n            const e = await openEditor(args.uri!, { ...args.showOptions, rethrow: true });\n            if (args.annotationType === undefined) return e;\n\n            return Container.fileAnnotations.show(e!, args.annotationType, args.line);\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenFileRevisionCommand');\n            return Messages.showGenericErrorMessage('Unable to open file revision');\n        }\n        finally {\n            progressCancellation && progressCancellation.cancel();\n        }\n    }\n}\n","'use strict';\nimport { Range, TextDocumentShowOptions, TextEditor, Uri } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { GitBranch, GitReference, GitTag, GitUri } from '../git/gitService';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../quickpicks';\nimport { Strings } from '../system';\nimport { ActiveEditorCommand, command, Commands, getCommandUri, openEditor } from './common';\n\nexport interface OpenFileRevisionFromCommandArgs {\n    reference?: GitBranch | GitTag | GitReference;\n\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n}\n\n@command()\nexport class OpenFileRevisionFromCommand extends ActiveEditorCommand {\n    constructor() {\n        super([Commands.OpenFileRevisionFrom, Commands.OpenFileRevisionFromBranch]);\n    }\n\n    async execute(editor: TextEditor | undefined, uri?: Uri, args: OpenFileRevisionFromCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        const gitUri = await GitUri.fromUri(uri);\n        if (!gitUri.repoPath) return undefined;\n\n        if (args.reference === undefined) {\n            const placeHolder = `Open revision of ${gitUri.getFormattedPath()}${\n                gitUri.sha ? ` ${Strings.pad(GlyphChars.Dot, 1, 1)} ${gitUri.shortSha}` : ''\n            } from${GlyphChars.Ellipsis}`;\n\n            const pick = await new ReferencesQuickPick(gitUri.repoPath).show(placeHolder, {\n                allowEnteringRefs: true,\n                checkmarks: false\n            });\n            if (pick === undefined) return undefined;\n            if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n            args.reference = pick.item;\n        }\n\n        if (args.line !== undefined && args.line !== 0) {\n            if (args.showOptions === undefined) {\n                args.showOptions = {};\n            }\n            args.showOptions.selection = new Range(args.line, 0, args.line, 0);\n        }\n\n        return openEditor(GitUri.toRevisionUri(args.reference.ref, gitUri.fsPath, gitUri.repoPath), {\n            ...args.showOptions,\n            rethrow: true\n        });\n    }\n}\n","'use strict';\nimport { TextEditor, Uri } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { GitRemote, GitService, RemoteResource, RemoteResourceType } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, OpenRemoteCommandQuickPickItem, RemotesQuickPick } from '../quickpicks';\nimport { Strings } from '../system';\nimport { ActiveEditorCommand, command, Commands } from './common';\n\nexport interface OpenInRemoteCommandArgs {\n    remote?: string;\n    remotes?: GitRemote[];\n    resource?: RemoteResource;\n    clipboard?: boolean;\n\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class OpenInRemoteCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.OpenInRemote);\n    }\n\n    async execute(editor: TextEditor, uri?: Uri, args: OpenInRemoteCommandArgs = {}) {\n        args = { ...args };\n        if (args.remotes === undefined || args.resource === undefined) return undefined;\n\n        if (args.remote !== undefined) {\n            const remotes = args.remotes.filter(r => r.name === args.remote);\n            // Only filter if we get some results\n            if (remotes.length > 0) {\n                args.remotes = remotes;\n            }\n        }\n\n        try {\n            let remote: GitRemote | undefined;\n            if (args.remotes.length > 1) {\n                remote = args.remotes.find(r => r.default);\n            }\n            else if (args.remotes.length === 1) {\n                remote = args.remotes[0];\n            }\n\n            if (remote != null) {\n                this.ensureRemoteBranchName(args);\n                const command = new OpenRemoteCommandQuickPickItem(remote, args.resource, args.clipboard);\n                return await command.execute();\n            }\n\n            const verb = args.clipboard ? 'Copy url for' : 'Open';\n            const suffix = args.clipboard ? `to clipboard from${GlyphChars.Ellipsis}` : `on${GlyphChars.Ellipsis}`;\n            let placeHolder = '';\n            switch (args.resource.type) {\n                case RemoteResourceType.Branch:\n                    this.ensureRemoteBranchName(args);\n                    placeHolder = `${verb} ${args.resource.branch} branch ${suffix}`;\n                    break;\n\n                case RemoteResourceType.Commit:\n                    placeHolder = `${verb} commit ${GitService.shortenSha(args.resource.sha)} ${suffix}`;\n                    break;\n\n                case RemoteResourceType.File:\n                    placeHolder = `${verb} ${args.resource.fileName} ${suffix}`;\n                    break;\n\n                case RemoteResourceType.Revision:\n                    if (args.resource.commit !== undefined && args.resource.commit.isFile) {\n                        if (args.resource.commit.status === 'D') {\n                            args.resource.sha = args.resource.commit.previousSha;\n                            placeHolder = `${verb} ${args.resource.fileName} ${Strings.pad(GlyphChars.Dot, 1, 1)} ${\n                                args.resource.commit.previousShortSha\n                            } ${suffix}`;\n                        }\n                        else {\n                            args.resource.sha = args.resource.commit.sha;\n                            placeHolder = `${verb} ${args.resource.fileName} ${Strings.pad(GlyphChars.Dot, 1, 1)} ${\n                                args.resource.commit.shortSha\n                            } ${suffix}`;\n                        }\n                    }\n                    else {\n                        const shortFileSha =\n                            args.resource.sha === undefined ? '' : GitService.shortenSha(args.resource.sha);\n                        const shaSuffix = shortFileSha ? ` ${Strings.pad(GlyphChars.Dot, 1, 1)} ${shortFileSha}` : '';\n\n                        placeHolder = `${verb} ${args.resource.fileName}${shaSuffix} ${suffix}`;\n                    }\n                    break;\n            }\n\n            const pick = await RemotesQuickPick.show(\n                args.remotes,\n                placeHolder,\n                args.resource,\n                args.clipboard,\n                args.goBackCommand\n            );\n            if (pick === undefined) return undefined;\n\n            return await pick.execute();\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenInRemoteCommand');\n            return Messages.showGenericErrorMessage('Unable to open in remote provider');\n        }\n    }\n\n    private ensureRemoteBranchName(args: OpenInRemoteCommandArgs) {\n        if (\n            args.remotes === undefined ||\n            args.resource === undefined ||\n            args.resource.type !== RemoteResourceType.Branch\n        )\n            return;\n\n        // Check to see if the remote is in the branch\n        const [remotePart, branchPart] = Strings.splitSingle(args.resource.branch, '/');\n        if (branchPart === undefined) return;\n\n        const remote = args.remotes.find(r => r.name === remotePart);\n        if (remote === undefined) return;\n\n        args.resource.branch = branchPart;\n        args.remotes = [remote];\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitUri, RemoteResourceType } from '../git/gitService';\nimport { Logger } from '../logger';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    getRepoPathOrActiveOrPrompt,\n    isCommandViewContextWithRemote\n} from './common';\nimport { OpenInRemoteCommandArgs } from './openInRemote';\n\nexport interface OpenRepoInRemoteCommandArgs {\n    remote?: string;\n}\n\n@command()\nexport class OpenRepoInRemoteCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.OpenRepoInRemote);\n    }\n\n    protected preExecute(context: CommandContext, args: OpenRepoInRemoteCommandArgs = {}) {\n        if (isCommandViewContextWithRemote(context)) {\n            args = { ...args };\n            args.remote = context.node.remote.name;\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: OpenRepoInRemoteCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        const gitUri = uri && (await GitUri.fromUri(uri));\n\n        const repoPath = await getRepoPathOrActiveOrPrompt(\n            gitUri,\n            editor,\n            `Open which repository on remote${GlyphChars.Ellipsis}`\n        );\n        if (!repoPath) return undefined;\n\n        try {\n            const remotes = await Container.git.getRemotes(repoPath);\n\n            const commandArgs: OpenInRemoteCommandArgs = {\n                resource: {\n                    type: RemoteResourceType.Repo\n                },\n                remote: args.remote,\n                remotes: remotes\n            };\n            return commands.executeCommand(Commands.OpenInRemote, uri, commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenRepoInRemoteCommand');\n            return window.showErrorMessage(\n                'Unable to open repository on remote provider. See output channel for more details'\n            );\n        }\n    }\n}\n","'use strict';\nimport { Range, TextDocumentShowOptions, TextEditor, Uri, window } from 'vscode';\nimport { FileAnnotationType } from '../configuration';\nimport { Container } from '../container';\nimport { GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { ActiveEditorCommand, command, Commands, getCommandUri, openEditor } from './common';\n\nexport interface OpenWorkingFileCommandArgs {\n    uri?: Uri;\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n    annotationType?: FileAnnotationType;\n}\n\n@command()\nexport class OpenWorkingFileCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.OpenWorkingFile);\n    }\n\n    async execute(editor: TextEditor, uri?: Uri, args: OpenWorkingFileCommandArgs = {}) {\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        try {\n            if (args.uri == null) {\n                uri = getCommandUri(uri, editor);\n                if (uri == null) return undefined;\n            }\n            else {\n                uri = args.uri;\n            }\n\n            args.uri = await GitUri.fromUri(uri);\n            if (GitUri.is(args.uri) && args.uri.sha) {\n                const workingUri = await Container.git.getWorkingUri(args.uri.repoPath!, args.uri);\n                if (workingUri === undefined) {\n                    return window.showWarningMessage(\n                        'Unable to open working file. File could not be found in the working tree'\n                    );\n                }\n\n                args.uri = new GitUri(workingUri, args.uri.repoPath);\n            }\n\n            if (args.line !== undefined && args.line !== 0) {\n                if (args.showOptions === undefined) {\n                    args.showOptions = {};\n                }\n                args.showOptions.selection = new Range(args.line, 0, args.line, 0);\n            }\n\n            const e = await openEditor(args.uri, { ...args.showOptions, rethrow: true });\n            if (args.annotationType === undefined) return e;\n\n            return Container.fileAnnotations.show(e!, args.annotationType, args.line);\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenWorkingFileCommand');\n            return Messages.showGenericErrorMessage('Unable to open working file');\n        }\n    }\n}\n","'use strict';\nimport { QuickInputButton, QuickPick, QuickPickItem } from 'vscode';\n\nexport interface QuickPickStep<T extends QuickPickItem = any> {\n    buttons?: QuickInputButton[];\n    selectedItems?: QuickPickItem[];\n    items: QuickPickItem[];\n    multiselect?: boolean;\n    placeholder?: string;\n    title?: string;\n\n    onDidClickButton?(quickpick: QuickPick<T>, button: QuickInputButton): void;\n    validate?(selection: T[]): boolean;\n}\n\nexport class CommandAbortError extends Error {\n    constructor() {\n        super('Abort');\n    }\n}\n\nexport abstract class QuickCommandBase implements QuickPickItem {\n    static is(item: QuickPickItem): item is QuickCommandBase {\n        return item instanceof QuickCommandBase;\n    }\n\n    readonly description?: string;\n    readonly detail?: string;\n\n    private _current: QuickPickStep | undefined;\n    private _stepsIterator: AsyncIterableIterator<QuickPickStep> | undefined;\n\n    constructor(\n        public readonly label: string,\n        public readonly title: string,\n        options: {\n            description?: string;\n            detail?: string;\n        } = {}\n    ) {\n        this.description = options.description;\n        this.detail = options.detail;\n    }\n\n    abstract steps(): AsyncIterableIterator<QuickPickStep>;\n\n    async previous(): Promise<QuickPickStep | undefined> {\n        // Simulate going back, by having no selection\n        return (await this.next([])).value;\n    }\n\n    async next(selection?: QuickPickItem[]): Promise<IteratorResult<QuickPickStep>> {\n        if (this._stepsIterator === undefined) {\n            this._stepsIterator = this.steps();\n        }\n\n        const result = await this._stepsIterator.next(selection);\n        this._current = result.value;\n\n        if (result.done) {\n            this._stepsIterator = undefined;\n        }\n\n        return result;\n    }\n\n    get value(): QuickPickStep | undefined {\n        return this._current;\n    }\n\n    protected createConfirmStep<T extends QuickPickItem>(\n        title: string,\n        confirmations: T[],\n        cancellable: boolean = true\n    ): QuickPickStep<T> {\n        return this.createStep<T>({\n            placeholder: `Confirm ${this.title}`,\n            title: title,\n            items: cancellable ? [...confirmations, { label: 'Cancel' }] : confirmations,\n            selectedItems: [confirmations[0]],\n            // eslint-disable-next-line no-loop-func\n            validate: (selection: T[]) => {\n                if (selection[0].label === 'Cancel') throw new CommandAbortError();\n                return true;\n            }\n        });\n    }\n\n    protected createStep<T extends QuickPickItem>(step: QuickPickStep<T>): QuickPickStep<T> {\n        return step;\n    }\n\n    protected canMoveNext<T extends QuickPickItem>(\n        step: QuickPickStep<T>,\n        state: { counter: number },\n        selection: T[] | undefined\n    ): selection is T[] {\n        if (selection === undefined || selection.length === 0) {\n            state.counter--;\n            if (state.counter < 0) {\n                state.counter = 0;\n            }\n            return false;\n        }\n\n        if (step.validate === undefined || step.validate(selection)) {\n            state.counter++;\n            return true;\n        }\n\n        return false;\n    }\n}\n","'use strict';\nimport { intersectionWith } from 'lodash';\nimport { QuickCommandBase } from './quickCommand';\nimport { GitBranch, GitTag, Repository } from '../../git/git';\nimport { BranchQuickPickItem, TagQuickPickItem } from '../../quickpicks';\n\nexport abstract class GitCommandBase extends QuickCommandBase {\n    protected async getBranchesAndOrTags(\n        repos: Repository | Repository[],\n        includeTags: boolean,\n        {\n            filterBranches,\n            filterTags,\n            picked\n        }: { filterBranches?: (b: GitBranch) => boolean; filterTags?: (t: GitTag) => boolean; picked?: string } = {}\n    ) {\n        let branches: GitBranch[];\n        let tags: GitTag[] | undefined;\n\n        let singleRepo = false;\n        if (repos instanceof Repository || repos.length === 1) {\n            singleRepo = true;\n            const repo = repos instanceof Repository ? repos : repos[0];\n\n            [branches, tags] = await Promise.all<GitBranch[], GitTag[] | undefined>([\n                repo.getBranches({ filter: filterBranches, sort: true }),\n                includeTags ? repo.getTags({ filter: filterTags, includeRefs: true, sort: true }) : undefined\n            ]);\n        }\n        else {\n            const [branchesByRepo, tagsByRepo] = await Promise.all<GitBranch[][], GitTag[][] | undefined>([\n                Promise.all(repos.map(r => r.getBranches({ filter: filterBranches, sort: true }))),\n                includeTags\n                    ? Promise.all(repos.map(r => r.getTags({ filter: filterTags, includeRefs: true, sort: true })))\n                    : undefined\n            ]);\n\n            branches = GitBranch.sort(\n                intersectionWith(...branchesByRepo, ((b1: GitBranch, b2: GitBranch) => b1.name === b2.name) as any)\n            );\n\n            if (includeTags) {\n                tags = GitTag.sort(\n                    intersectionWith(...tagsByRepo!, ((t1: GitTag, t2: GitTag) => t1.name === t2.name) as any)\n                );\n            }\n        }\n\n        if (!includeTags) {\n            return Promise.all(\n                branches.map(b =>\n                    BranchQuickPickItem.create(b, undefined, {\n                        current: singleRepo ? 'checkmark' : false,\n                        ref: singleRepo,\n                        status: singleRepo,\n                        type: 'remote'\n                    })\n                )\n            );\n        }\n\n        return Promise.all<BranchQuickPickItem | TagQuickPickItem>([\n            ...branches!\n                .filter(b => !b.remote)\n                .map(b =>\n                    BranchQuickPickItem.create(b, picked != null && b.ref === picked, {\n                        current: singleRepo ? 'checkmark' : false,\n                        ref: singleRepo,\n                        status: singleRepo\n                    })\n                ),\n            ...tags!.map(t =>\n                TagQuickPickItem.create(t, picked != null && t.ref === picked, {\n                    ref: singleRepo,\n                    type: true\n                })\n            ),\n            ...branches!\n                .filter(b => b.remote)\n                .map(b =>\n                    BranchQuickPickItem.create(b, picked != null && b.ref === picked, {\n                        current: singleRepo ? 'checkmark' : false,\n                        type: 'remote'\n                    })\n                )\n        ]);\n    }\n}\n","'use strict';\n/* eslint-disable no-loop-func */\nimport { Container } from '../../container';\nimport { GitBranch, GitLogCommit, Repository } from '../../git/gitService';\nimport { GlyphChars } from '../../constants';\nimport { Iterables, Strings } from '../../system';\nimport { GitCommandBase } from './gitCommand';\nimport { CommandAbortError, QuickPickStep } from './quickCommand';\nimport { BranchQuickPickItem, CommitQuickPickItem, RepositoryQuickPickItem } from '../../quickpicks';\nimport { runGitCommandInTerminal } from '../../terminal';\n\ninterface State {\n    repo: Repository;\n    destination: GitBranch;\n    source: GitBranch;\n    commits: GitLogCommit[];\n}\n\nexport class CherryPickQuickCommand extends GitCommandBase {\n    constructor() {\n        super('cherry-pick', 'Cherry Pick', { description: 'via Terminal' });\n    }\n\n    execute(state: State) {\n        // Ensure the commits are ordered with the oldest first\n        state.commits.sort((a, b) => a.date.getTime() - b.date.getTime());\n        runGitCommandInTerminal('cherry-pick', state.commits.map(c => c.sha).join(' '), state.repo.path, true);\n    }\n\n    async *steps(): AsyncIterableIterator<QuickPickStep> {\n        const state: Partial<State> & { counter: number } = { counter: 0 };\n        let oneRepo = false;\n\n        while (true) {\n            try {\n                if (state.repo === undefined || state.counter < 1) {\n                    const repos = [...(await Container.git.getOrderedRepositories())];\n\n                    if (repos.length === 1) {\n                        oneRepo = true;\n                        state.counter++;\n                        state.repo = repos[0];\n                    }\n                    else {\n                        const active = state.repo ? state.repo : await Container.git.getActiveRepository();\n\n                        const step = this.createStep<RepositoryQuickPickItem>({\n                            title: this.title,\n                            placeholder: 'Choose a repository',\n                            items: await Promise.all(\n                                repos.map(r =>\n                                    RepositoryQuickPickItem.create(r, r.id === (active && active.id), {\n                                        branch: true,\n                                        fetched: true,\n                                        status: true\n                                    })\n                                )\n                            )\n                        });\n                        const selection = yield step;\n\n                        if (!this.canMoveNext(step, state, selection)) {\n                            break;\n                        }\n\n                        state.repo = selection[0].item;\n                    }\n                }\n\n                state.destination = await state.repo.getBranch();\n                if (state.destination === undefined) break;\n\n                if (state.source === undefined || state.counter < 2) {\n                    const destId = state.destination.id;\n\n                    const step = this.createStep<BranchQuickPickItem>({\n                        title: `${this.title} into ${state.destination.name}${Strings.pad(GlyphChars.Dot, 2, 2)}${\n                            state.repo.name\n                        }`,\n                        placeholder: 'Choose a branch or tag to cherry-pick from',\n                        items: await this.getBranchesAndOrTags(state.repo, true, {\n                            filterBranches: b => b.id !== destId\n                        })\n                    });\n                    const selection = yield step;\n\n                    if (!this.canMoveNext(step, state, selection)) {\n                        if (oneRepo) {\n                            break;\n                        }\n\n                        continue;\n                    }\n\n                    state.source = selection[0].item;\n                }\n\n                if (state.commits === undefined || state.counter < 3) {\n                    const log = await Container.git.getLog(state.source.repoPath, {\n                        ref: `${state.destination.ref}..${state.source.ref}`,\n                        merges: false\n                    });\n\n                    const step = this.createStep<CommitQuickPickItem>({\n                        title: `${this.title} onto ${state.destination.name}${Strings.pad(GlyphChars.Dot, 2, 2)}${\n                            state.repo.name\n                        }`,\n                        multiselect: log !== undefined,\n                        placeholder:\n                            log === undefined\n                                ? `${state.source.name} has no pickable commits`\n                                : `Choose commits to cherry-pick onto ${state.destination.name}`,\n                        items:\n                            log === undefined\n                                ? []\n                                : [\n                                      ...Iterables.map(log.commits.values(), commit =>\n                                          CommitQuickPickItem.create(\n                                              commit,\n                                              state.commits ? state.commits.some(c => c.sha === commit.sha) : undefined,\n                                              { compact: true }\n                                          )\n                                      )\n                                  ]\n                    });\n                    const selection = yield step;\n\n                    if (!this.canMoveNext(step, state, selection)) {\n                        continue;\n                    }\n\n                    state.commits = selection.map(i => i.item);\n                }\n\n                const step = this.createConfirmStep(\n                    `Confirm ${this.title}${Strings.pad(GlyphChars.Dot, 2, 2)}${state.repo.name}`,\n                    [\n                        {\n                            label: this.title,\n                            description: `${\n                                state.commits.length === 1\n                                    ? state.commits[0].shortSha\n                                    : `${state.commits.length} commits`\n                            } onto ${state.destination.name}`,\n                            detail: `Will apply ${\n                                state.commits.length === 1\n                                    ? `commit ${state.commits[0].shortSha}`\n                                    : `${state.commits.length} commits`\n                            } onto ${state.destination.name}`\n                        }\n                    ]\n                );\n                const selection = yield step;\n\n                if (!this.canMoveNext(step, state, selection)) {\n                    continue;\n                }\n\n                this.execute(state as State);\n                break;\n            }\n            catch (ex) {\n                if (ex instanceof CommandAbortError) break;\n\n                throw ex;\n            }\n        }\n    }\n}\n","'use strict';\nimport { QuickPickItem } from 'vscode';\nimport { Container } from '../../container';\nimport { Repository } from '../../git/gitService';\nimport { CommandAbortError, QuickCommandBase, QuickPickStep } from './quickCommand';\nimport { RepositoryQuickPickItem } from '../../quickpicks';\nimport { Strings } from '../../system';\nimport { GlyphChars } from '../../constants';\n\ninterface State {\n    repos: Repository[];\n    flags: string[];\n}\n\nexport class FetchQuickCommand extends QuickCommandBase {\n    constructor() {\n        super('fetch', 'Fetch');\n    }\n\n    execute(state: State) {\n        return Container.git.fetchAll(state.repos, {\n            all: state.flags.includes('--all'),\n            prune: state.flags.includes('--prune')\n        });\n    }\n\n    async *steps(): AsyncIterableIterator<QuickPickStep> {\n        const state: Partial<State> & { counter: number } = { counter: 0 };\n        let oneRepo = false;\n\n        while (true) {\n            try {\n                if (state.repos === undefined || state.counter < 1) {\n                    const repos = [...(await Container.git.getOrderedRepositories())];\n\n                    if (repos.length === 1) {\n                        oneRepo = true;\n                        state.counter++;\n                        state.repos = [repos[0]];\n                    }\n                    else {\n                        const step = this.createStep<RepositoryQuickPickItem>({\n                            multiselect: true,\n                            title: this.title,\n                            placeholder: 'Choose repositories',\n                            items: await Promise.all(\n                                repos.map(r =>\n                                    RepositoryQuickPickItem.create(r, undefined, {\n                                        branch: true,\n                                        fetched: true,\n                                        status: true\n                                    })\n                                )\n                            )\n                        });\n                        const selection = yield step;\n\n                        if (!this.canMoveNext(step, state, selection)) {\n                            break;\n                        }\n\n                        state.repos = selection.map(i => i.item);\n                    }\n                }\n\n                const step = this.createConfirmStep<QuickPickItem & { item: string[] }>(\n                    `Confirm ${this.title}${Strings.pad(GlyphChars.Dot, 2, 2)}${\n                        state.repos.length === 1 ? state.repos[0].formattedName : `${state.repos.length} repositories`\n                    }`,\n                    [\n                        {\n                            label: this.title,\n                            description: '',\n                            detail: `Will fetch ${\n                                state.repos.length === 1\n                                    ? state.repos[0].formattedName\n                                    : `${state.repos.length} repositories`\n                            }`,\n                            item: []\n                        },\n                        {\n                            label: `${this.title} & Prune`,\n                            description: '--prune',\n                            detail: `Will fetch and prune ${\n                                state.repos.length === 1\n                                    ? state.repos[0].formattedName\n                                    : `${state.repos.length} repositories`\n                            }`,\n                            item: ['--prune']\n                        },\n                        {\n                            label: `${this.title} All`,\n                            description: '--all',\n                            detail: `Will fetch all remotes of ${\n                                state.repos.length === 1\n                                    ? state.repos[0].formattedName\n                                    : `${state.repos.length} repositories`\n                            }`,\n                            item: ['--all']\n                        }\n                    ]\n                );\n                const selection = yield step;\n\n                if (!this.canMoveNext(step, state, selection)) {\n                    if (oneRepo) {\n                        break;\n                    }\n\n                    continue;\n                }\n\n                state.flags = selection[0].item;\n\n                this.execute(state as State);\n                break;\n            }\n            catch (ex) {\n                if (ex instanceof CommandAbortError) break;\n\n                throw ex;\n            }\n        }\n    }\n}\n","'use strict';\nimport { QuickPickItem } from 'vscode';\nimport { Container } from '../../container';\nimport { GitBranch, Repository } from '../../git/gitService';\nimport { GlyphChars } from '../../constants';\nimport { CommandAbortError, QuickPickStep } from './quickCommand';\nimport { BranchQuickPickItem, RepositoryQuickPickItem } from '../../quickpicks';\nimport { Strings } from '../../system';\nimport { GitCommandBase } from './gitCommand';\nimport { runGitCommandInTerminal } from '../../terminal';\n\ninterface State {\n    repo: Repository;\n    destination: GitBranch;\n    source: GitBranch;\n    flags: string[];\n}\n\nexport class MergeQuickCommand extends GitCommandBase {\n    constructor() {\n        super('merge', 'Merge', { description: 'via Terminal' });\n    }\n\n    execute(state: State) {\n        runGitCommandInTerminal('merge', [...state.flags, state.source.ref].join(' '), state.repo.path, true);\n    }\n\n    async *steps(): AsyncIterableIterator<QuickPickStep> {\n        const state: Partial<State> & { counter: number } = { counter: 0 };\n        let oneRepo = false;\n\n        while (true) {\n            try {\n                if (state.repo === undefined || state.counter < 1) {\n                    const repos = [...(await Container.git.getOrderedRepositories())];\n\n                    if (repos.length === 1) {\n                        oneRepo = true;\n                        state.counter++;\n                        state.repo = repos[0];\n                    }\n                    else {\n                        const active = state.repo ? state.repo : await Container.git.getActiveRepository();\n\n                        const step = this.createStep<RepositoryQuickPickItem>({\n                            title: this.title,\n                            placeholder: 'Choose a repository',\n                            items: await Promise.all(\n                                repos.map(r =>\n                                    RepositoryQuickPickItem.create(r, r.id === (active && active.id), {\n                                        branch: true,\n                                        fetched: true,\n                                        status: true\n                                    })\n                                )\n                            )\n                        });\n                        const selection = yield step;\n\n                        if (!this.canMoveNext(step, state, selection)) {\n                            break;\n                        }\n\n                        state.repo = selection[0].item;\n                    }\n                }\n\n                state.destination = await state.repo.getBranch();\n                if (state.destination === undefined) break;\n\n                if (state.source === undefined || state.counter < 2) {\n                    const destId = state.destination.id;\n\n                    const step = this.createStep<BranchQuickPickItem>({\n                        title: `${this.title} into ${state.destination.name}${Strings.pad(GlyphChars.Dot, 2, 2)}${\n                            state.repo.name\n                        }`,\n                        placeholder: `Choose a branch or tag to merge into ${state.destination.name}`,\n                        items: await this.getBranchesAndOrTags(state.repo, true, {\n                            filterBranches: b => b.id !== destId,\n                            picked: state.source && state.source.ref\n                        })\n                    });\n                    const selection = yield step;\n\n                    if (!this.canMoveNext(step, state, selection)) {\n                        if (oneRepo) {\n                            break;\n                        }\n                        continue;\n                    }\n\n                    state.source = selection[0].item;\n                }\n\n                const count =\n                    (await Container.git.getCommitCount(state.repo.path, [\n                        `${state.destination.name}..${state.source.name}`\n                    ])) || 0;\n                if (count === 0) {\n                    const step = this.createConfirmStep(\n                        `Confirm ${this.title}${Strings.pad(GlyphChars.Dot, 2, 2)}${state.repo.name}`,\n                        [\n                            {\n                                label: `Cancel ${this.title}`,\n                                description: '',\n                                detail: `${state.destination.name} is up to date with ${state.source.name}`\n                            }\n                        ],\n                        false\n                    );\n\n                    yield step;\n                    break;\n                }\n\n                const step = this.createConfirmStep<QuickPickItem & { item: string[] }>(\n                    `Confirm ${this.title}${Strings.pad(GlyphChars.Dot, 2, 2)}${state.repo.name}`,\n                    [\n                        {\n                            label: this.title,\n                            description: `${state.source.name} into ${state.destination.name}`,\n                            detail: `Will merge ${Strings.pluralize('commit', count)} from ${state.source.name} into ${\n                                state.destination.name\n                            }`,\n                            item: []\n                        },\n                        {\n                            label: `Fast-forward ${this.title}`,\n                            description: `--ff-only ${state.source.name} into ${state.destination.name}`,\n                            detail: `Will fast-forward merge ${Strings.pluralize('commit', count)} from ${\n                                state.source.name\n                            } into ${state.destination.name}`,\n                            item: ['--ff-only']\n                        },\n                        {\n                            label: `No Fast-forward ${this.title}`,\n                            description: `--no-ff ${state.source.name} into ${state.destination.name}`,\n                            detail: `Will create a merge commit when merging ${Strings.pluralize(\n                                'commit',\n                                count\n                            )} from ${state.source.name} into ${state.destination.name}`,\n                            item: ['--no-ff']\n                        }\n                    ]\n                );\n                const selection = yield step;\n\n                if (!this.canMoveNext(step, state, selection)) {\n                    continue;\n                }\n\n                state.flags = selection[0].item;\n\n                this.execute(state as State);\n                break;\n            }\n            catch (ex) {\n                if (ex instanceof CommandAbortError) break;\n\n                throw ex;\n            }\n        }\n    }\n}\n","'use strict';\nimport { Container } from '../../container';\nimport { Repository } from '../../git/gitService';\nimport { CommandAbortError, QuickCommandBase, QuickPickStep } from './quickCommand';\nimport { RepositoryQuickPickItem } from '../../quickpicks';\nimport { Strings } from '../../system';\nimport { GlyphChars } from '../../constants';\n\ninterface State {\n    repos: Repository[];\n}\n\nexport class PushQuickCommand extends QuickCommandBase {\n    constructor() {\n        super('push', 'Push');\n    }\n\n    execute(state: State) {\n        return Container.git.pushAll(state.repos);\n    }\n\n    async *steps(): AsyncIterableIterator<QuickPickStep> {\n        const state: Partial<State> & { counter: number } = { counter: 0 };\n        let oneRepo = false;\n\n        while (true) {\n            try {\n                if (state.repos === undefined || state.counter < 1) {\n                    const repos = [...(await Container.git.getOrderedRepositories())];\n\n                    if (repos.length === 1) {\n                        oneRepo = true;\n                        state.counter++;\n                        state.repos = [repos[0]];\n                    }\n                    else {\n                        const step = this.createStep<RepositoryQuickPickItem>({\n                            multiselect: true,\n                            title: this.title,\n                            placeholder: 'Choose repositories',\n                            items: await Promise.all(\n                                repos.map(r =>\n                                    RepositoryQuickPickItem.create(r, undefined, {\n                                        branch: true,\n                                        fetched: true,\n                                        status: true\n                                    })\n                                )\n                            )\n                        });\n                        const selection = yield step;\n\n                        if (!this.canMoveNext(step, state, selection)) {\n                            break;\n                        }\n\n                        state.repos = selection.map(i => i.item);\n                    }\n                }\n\n                const step = this.createConfirmStep(\n                    `Confirm ${this.title}${Strings.pad(GlyphChars.Dot, 2, 2)}${\n                        state.repos.length === 1 ? state.repos[0].formattedName : `${state.repos.length} repositories`\n                    }`,\n                    [\n                        {\n                            label: this.title,\n                            description: '',\n                            detail: `Will push ${\n                                state.repos.length === 1\n                                    ? state.repos[0].formattedName\n                                    : `${state.repos.length} repositories`\n                            }`\n                        }\n                    ]\n                );\n                const selection = yield step;\n\n                if (!this.canMoveNext(step, state, selection)) {\n                    if (oneRepo) {\n                        break;\n                    }\n\n                    continue;\n                }\n\n                this.execute(state as State);\n                break;\n            }\n            catch (ex) {\n                if (ex instanceof CommandAbortError) break;\n\n                throw ex;\n            }\n        }\n    }\n}\n","'use strict';\nimport { QuickPickItem } from 'vscode';\nimport { Container } from '../../container';\nimport { Repository } from '../../git/gitService';\nimport { CommandAbortError, QuickCommandBase, QuickPickStep } from './quickCommand';\nimport { RepositoryQuickPickItem } from '../../quickpicks';\nimport { Strings } from '../../system';\nimport { GlyphChars } from '../../constants';\n\ninterface State {\n    repos: Repository[];\n    flags: string[];\n}\n\nexport class PullQuickCommand extends QuickCommandBase {\n    constructor() {\n        super('pull', 'Pull');\n    }\n\n    execute(state: State) {\n        return Container.git.pullAll(state.repos, { rebase: state.flags.includes('--rebase') });\n    }\n\n    async *steps(): AsyncIterableIterator<QuickPickStep> {\n        const state: Partial<State> & { counter: number } = { counter: 0 };\n        let oneRepo = false;\n\n        while (true) {\n            try {\n                if (state.repos === undefined || state.counter < 1) {\n                    const repos = [...(await Container.git.getOrderedRepositories())];\n\n                    if (repos.length === 1) {\n                        oneRepo = true;\n                        state.counter++;\n                        state.repos = [repos[0]];\n                    }\n                    else {\n                        const step = this.createStep<RepositoryQuickPickItem>({\n                            multiselect: true,\n                            title: this.title,\n                            placeholder: 'Choose repositories',\n                            items: await Promise.all(\n                                repos.map(r =>\n                                    RepositoryQuickPickItem.create(r, undefined, {\n                                        branch: true,\n                                        fetched: true,\n                                        status: true\n                                    })\n                                )\n                            )\n                        });\n                        const selection = yield step;\n\n                        if (!this.canMoveNext(step, state, selection)) {\n                            break;\n                        }\n\n                        state.repos = selection.map(i => i.item);\n                    }\n                }\n\n                const step = this.createConfirmStep<QuickPickItem & { item: string[] }>(\n                    `Confirm ${this.title}${Strings.pad(GlyphChars.Dot, 2, 2)}${\n                        state.repos.length === 1 ? state.repos[0].formattedName : `${state.repos.length} repositories`\n                    }`,\n                    [\n                        {\n                            label: this.title,\n                            description: '',\n                            detail: `Will pull ${\n                                state.repos.length === 1\n                                    ? state.repos[0].formattedName\n                                    : `${state.repos.length} repositories`\n                            }`,\n                            item: []\n                        },\n                        {\n                            label: `${this.title} with Rebase`,\n                            description: '--rebase',\n                            detail: `Will pull with rebase ${\n                                state.repos.length === 1\n                                    ? state.repos[0].formattedName\n                                    : `${state.repos.length} repositories`\n                            }`,\n                            item: ['--rebase']\n                        }\n                    ]\n                );\n                const selection = yield step;\n\n                if (!this.canMoveNext(step, state, selection)) {\n                    if (oneRepo) {\n                        break;\n                    }\n\n                    continue;\n                }\n\n                state.flags = selection[0].item;\n\n                this.execute(state as State);\n                break;\n            }\n            catch (ex) {\n                if (ex instanceof CommandAbortError) break;\n\n                throw ex;\n            }\n        }\n    }\n}\n","'use strict';\n/* eslint-disable no-loop-func */\nimport { ProgressLocation, QuickInputButtons, window } from 'vscode';\nimport { Container } from '../../container';\nimport { Repository } from '../../git/gitService';\nimport { GlyphChars } from '../../constants';\nimport { GitCommandBase } from './gitCommand';\nimport { CommandAbortError, QuickPickStep } from './quickCommand';\nimport { ReferencesQuickPickItem, RepositoryQuickPickItem } from '../../quickpicks';\nimport { Strings } from '../../system';\n\ninterface State {\n    repos: Repository[];\n    ref: string;\n}\n\nexport class CheckoutQuickCommand extends GitCommandBase {\n    constructor() {\n        super('checkout', 'Checkout');\n    }\n\n    async execute(state: State) {\n        return void (await window.withProgress(\n            {\n                location: ProgressLocation.Notification,\n                title: `Checking out ${\n                    state.repos.length === 1 ? state.repos[0].formattedName : `${state.repos.length} repositories`\n                } to ${state.ref}`\n            },\n            () => Promise.all(state.repos.map(r => r.checkout(state.ref, { progress: false })))\n        ));\n    }\n\n    async *steps(): AsyncIterableIterator<QuickPickStep> {\n        const state: Partial<State> & { counter: number } = { counter: 0 };\n        let oneRepo = false;\n        let showTags = false;\n\n        while (true) {\n            try {\n                if (state.repos === undefined || state.counter < 1) {\n                    const repos = [...(await Container.git.getOrderedRepositories())];\n\n                    if (repos.length === 1) {\n                        oneRepo = true;\n                        state.counter++;\n                        state.repos = [repos[0]];\n                    }\n                    else {\n                        const step = this.createStep<RepositoryQuickPickItem>({\n                            multiselect: true,\n                            title: this.title,\n                            placeholder: 'Choose repositories',\n                            items: await Promise.all(\n                                repos.map(repo =>\n                                    RepositoryQuickPickItem.create(\n                                        repo,\n                                        state.repos ? state.repos.some(r => r.id === repo.id) : undefined,\n                                        { branch: true, fetched: true, status: true }\n                                    )\n                                )\n                            )\n                        });\n                        const selection = yield step;\n\n                        if (!this.canMoveNext(step, state, selection)) {\n                            break;\n                        }\n\n                        state.repos = selection.map(i => i.item);\n                    }\n                }\n\n                if (state.ref === undefined || state.counter < 2) {\n                    const includeTags = showTags || state.repos.length === 1;\n\n                    const items = await this.getBranchesAndOrTags(state.repos, includeTags);\n                    const step = this.createStep<ReferencesQuickPickItem>({\n                        title: `${this.title}${Strings.pad(GlyphChars.Dot, 2, 2)}${\n                            state.repos.length === 1\n                                ? state.repos[0].formattedName\n                                : `${state.repos.length} repositories`\n                        }`,\n                        placeholder: `Choose a branch${includeTags ? ' or tag' : ''} to checkout to`,\n                        items: items,\n                        selectedItems: state.ref ? items.filter(ref => ref.label === state.ref) : undefined,\n                        buttons: includeTags\n                            ? [QuickInputButtons.Back]\n                            : [\n                                  QuickInputButtons.Back,\n                                  {\n                                      iconPath: {\n                                          dark: Container.context.asAbsolutePath('images/dark/icon-tag.svg') as any,\n                                          light: Container.context.asAbsolutePath('images/light/icon-tag.svg') as any\n                                      },\n                                      tooltip: 'Show Tags'\n                                  }\n                              ],\n                        onDidClickButton: async (quickpick, button) => {\n                            quickpick.busy = true;\n                            quickpick.enabled = false;\n\n                            if (!showTags) {\n                                showTags = true;\n                            }\n\n                            quickpick.placeholder = `Choose a branch${showTags ? ' or tag' : ''} to checkout to`;\n                            quickpick.buttons = [QuickInputButtons.Back];\n\n                            quickpick.items = await this.getBranchesAndOrTags(state.repos!, showTags);\n\n                            quickpick.busy = false;\n                            quickpick.enabled = true;\n                        }\n                    });\n                    const selection = yield step;\n\n                    if (!this.canMoveNext(step, state, selection)) {\n                        if (oneRepo) {\n                            break;\n                        }\n\n                        continue;\n                    }\n\n                    state.ref = selection[0].item.ref;\n                }\n\n                const step = this.createConfirmStep(\n                    `Confirm ${this.title}${Strings.pad(GlyphChars.Dot, 2, 2)}${\n                        state.repos.length === 1 ? state.repos[0].formattedName : `${state.repos.length} repositories`\n                    } to ${state.ref}`,\n                    [\n                        {\n                            label: this.title,\n                            description: `${state.ref}`,\n                            detail: `Will checkout ${\n                                state.repos.length === 1\n                                    ? state.repos[0].formattedName\n                                    : `${state.repos.length} repositories`\n                            } to ${state.ref}`\n                        }\n                    ]\n                );\n                const selection = yield step;\n\n                if (!this.canMoveNext(step, state, selection)) {\n                    continue;\n                }\n\n                this.execute(state as State);\n                break;\n            }\n            catch (ex) {\n                if (ex instanceof CommandAbortError) break;\n\n                throw ex;\n            }\n        }\n    }\n}\n","'use strict';\nimport { QuickPickItem } from 'vscode';\nimport { Container } from '../../container';\nimport { GitBranch, Repository } from '../../git/gitService';\nimport { GlyphChars } from '../../constants';\nimport { CommandAbortError, QuickPickStep } from './quickCommand';\nimport { BranchQuickPickItem, RepositoryQuickPickItem } from '../../quickpicks';\nimport { Strings } from '../../system';\nimport { GitCommandBase } from './gitCommand';\nimport { runGitCommandInTerminal } from '../../terminal';\n\ninterface State {\n    repo: Repository;\n    destination: GitBranch;\n    source: GitBranch;\n    flags: string[];\n}\n\nexport class RebaseQuickCommand extends GitCommandBase {\n    constructor() {\n        super('rebase', 'Rebase', { description: 'via Terminal' });\n    }\n\n    execute(state: State) {\n        runGitCommandInTerminal('rebase', [...state.flags, state.source.ref].join(' '), state.repo.path, true);\n    }\n\n    async *steps(): AsyncIterableIterator<QuickPickStep> {\n        const state: Partial<State> & { counter: number } = { counter: 0 };\n        let oneRepo = false;\n\n        while (true) {\n            try {\n                if (state.repo === undefined || state.counter < 1) {\n                    const repos = [...(await Container.git.getOrderedRepositories())];\n\n                    if (repos.length === 1) {\n                        oneRepo = true;\n                        state.counter++;\n                        state.repo = repos[0];\n                    }\n                    else {\n                        const active = state.repo ? state.repo : await Container.git.getActiveRepository();\n\n                        const step = this.createStep<RepositoryQuickPickItem>({\n                            title: this.title,\n                            placeholder: 'Choose a repository',\n                            items: await Promise.all(\n                                repos.map(r =>\n                                    RepositoryQuickPickItem.create(r, r.id === (active && active.id), {\n                                        branch: true,\n                                        fetched: true,\n                                        status: true\n                                    })\n                                )\n                            )\n                        });\n                        const selection = yield step;\n\n                        if (!this.canMoveNext(step, state, selection)) {\n                            break;\n                        }\n\n                        state.repo = selection[0].item;\n                    }\n                }\n\n                state.destination = await state.repo.getBranch();\n                if (state.destination === undefined) break;\n\n                if (state.source === undefined || state.counter < 2) {\n                    const destId = state.destination.id;\n\n                    const step = this.createStep<BranchQuickPickItem>({\n                        title: `${this.title} ${state.destination.name}${Strings.pad(GlyphChars.Dot, 2, 2)}${\n                            state.repo.name\n                        }`,\n                        placeholder: `Choose a branch or tag to rebase ${state.destination.name} with`,\n                        items: await this.getBranchesAndOrTags(state.repo, true, {\n                            filterBranches: b => b.id !== destId,\n                            picked: state.source && state.source.ref\n                        })\n                    });\n                    const selection = yield step;\n\n                    if (!this.canMoveNext(step, state, selection)) {\n                        if (oneRepo) {\n                            break;\n                        }\n                        continue;\n                    }\n\n                    state.source = selection[0].item;\n                }\n\n                const count =\n                    (await Container.git.getCommitCount(state.repo.path, [\n                        `${state.destination.name}..${state.source.name}`\n                    ])) || 0;\n                if (count === 0) {\n                    const step = this.createConfirmStep(\n                        `Confirm ${this.title}${Strings.pad(GlyphChars.Dot, 2, 2)}${state.repo.name}`,\n                        [\n                            {\n                                label: `Cancel ${this.title}`,\n                                description: '',\n                                detail: `${state.destination.name} is up to date with ${state.source.name}`\n                            }\n                        ],\n                        false\n                    );\n\n                    yield step;\n                    break;\n                }\n\n                const step = this.createConfirmStep<QuickPickItem & { item: string[] }>(\n                    `Confirm ${this.title}${Strings.pad(GlyphChars.Dot, 2, 2)}${state.repo.name}`,\n                    [\n                        {\n                            label: this.title,\n                            description: `${state.destination.name} with ${state.source.name}`,\n                            detail: `Will update ${state.destination.name} by applying ${Strings.pluralize(\n                                'commit',\n                                count\n                            )} on top of ${state.source.name}`,\n                            item: []\n                        },\n                        {\n                            label: `Interactive ${this.title}`,\n                            description: `--interactive ${state.destination.name} with ${state.source.name}`,\n                            detail: `Will interactively update ${\n                                state.destination.name\n                            } by applying ${Strings.pluralize('commit', count)} on top of ${state.source.name}`,\n                            item: ['--interactive']\n                        }\n                    ]\n                );\n                const selection = yield step;\n\n                if (!this.canMoveNext(step, state, selection)) {\n                    continue;\n                }\n\n                state.flags = selection[0].item;\n\n                this.execute(state as State);\n                break;\n            }\n            catch (ex) {\n                if (ex instanceof CommandAbortError) break;\n\n                throw ex;\n            }\n        }\n    }\n}\n","'use strict';\nimport { Disposable, QuickInputButtons, QuickPickItem, window } from 'vscode';\nimport { command, Command, Commands } from './common';\nimport { log } from '../system';\nimport { CherryPickQuickCommand } from './quick/cherry-pick';\nimport { QuickCommandBase, QuickPickStep } from './quick/quickCommand';\nimport { FetchQuickCommand } from './quick/fetch';\nimport { MergeQuickCommand } from './quick/merge';\nimport { PushQuickCommand } from './quick/push';\nimport { PullQuickCommand } from './quick/pull';\nimport { CheckoutQuickCommand } from './quick/checkout';\nimport { RebaseQuickCommand } from './quick/rebase';\n\nconst sanitizeLabel = /\\$\\(.+?\\)|\\W/g;\n\n@command()\nexport class GitCommandsCommand extends Command {\n    constructor() {\n        super(Commands.GitCommands);\n    }\n\n    @log({ args: false, correlate: true, singleLine: true, timed: false })\n    async execute() {\n        const commands: QuickCommandBase[] = [\n            new CheckoutQuickCommand(),\n            new CherryPickQuickCommand(),\n            new MergeQuickCommand(),\n            new FetchQuickCommand(),\n            new PullQuickCommand(),\n            new PushQuickCommand(),\n            new RebaseQuickCommand()\n        ];\n\n        const quickpick = window.createQuickPick();\n        quickpick.ignoreFocusOut = true;\n\n        let inCommand: QuickCommandBase | undefined;\n\n        function showCommand(command: QuickPickStep | undefined) {\n            if (command === undefined) {\n                const previousLabel = inCommand && inCommand.label;\n                inCommand = undefined;\n\n                quickpick.buttons = [];\n                quickpick.title = 'GitLens';\n                quickpick.placeholder = 'Select command...';\n                quickpick.canSelectMany = false;\n                quickpick.items = commands;\n\n                if (previousLabel) {\n                    const active = quickpick.items.find(i => i.label === previousLabel);\n                    if (active) {\n                        quickpick.activeItems = [active];\n                    }\n                }\n            }\n            else {\n                quickpick.buttons = command.buttons || [QuickInputButtons.Back];\n                quickpick.title = command.title;\n                quickpick.placeholder = command.placeholder;\n                quickpick.canSelectMany = Boolean(command.multiselect);\n\n                quickpick.items = command.items;\n\n                if (quickpick.canSelectMany) {\n                    quickpick.selectedItems = command.selectedItems || quickpick.items.filter(i => i.picked);\n                    quickpick.activeItems = quickpick.selectedItems;\n                }\n                else {\n                    quickpick.activeItems = command.selectedItems || quickpick.items.filter(i => i.picked);\n                }\n\n                // // BUG: https://github.com/microsoft/vscode/issues/75046\n                // // If we can multiselect, then ensure the selectedItems gets reset (otherwise it could end up included the current selected items)\n                // if (quickpick.canSelectMany && quickpick.selectedItems.length !== 0) {\n                //     quickpick.selectedItems = [];\n                // }\n            }\n        }\n\n        async function next(command: QuickCommandBase, items: QuickPickItem[] | undefined) {\n            quickpick.busy = true;\n            // quickpick.enabled = false;\n\n            const next = await command.next(items);\n            if (next.done) {\n                return false;\n            }\n\n            quickpick.value = '';\n            showCommand(next.value);\n\n            // quickpick.enabled = true;\n            quickpick.busy = false;\n\n            return true;\n        }\n\n        showCommand(undefined);\n\n        const disposables: Disposable[] = [];\n\n        try {\n            void (await new Promise<void>(resolve => {\n                disposables.push(\n                    quickpick.onDidHide(() => resolve()),\n                    quickpick.onDidTriggerButton(async e => {\n                        if (e === QuickInputButtons.Back) {\n                            quickpick.value = '';\n                            if (inCommand !== undefined) {\n                                showCommand(await inCommand.previous());\n                            }\n\n                            return;\n                        }\n\n                        const step = inCommand && inCommand.value;\n                        if (step === undefined || step.onDidClickButton === undefined) return;\n\n                        step.onDidClickButton(quickpick, e);\n                    }),\n                    quickpick.onDidChangeValue(async e => {\n                        if (quickpick.canSelectMany && e === ' ') {\n                            quickpick.value = '';\n                            quickpick.selectedItems =\n                                quickpick.selectedItems.length === quickpick.items.length ? [] : quickpick.items;\n\n                            return;\n                        }\n\n                        if (e.endsWith(' ')) {\n                            if (quickpick.canSelectMany && quickpick.selectedItems.length !== 0) {\n                                return;\n                            }\n\n                            const cmd = quickpick.value.toLowerCase().trim();\n\n                            let items;\n                            if (inCommand === undefined) {\n                                const command = commands.find(\n                                    c => c.label.replace(sanitizeLabel, '').toLowerCase() === cmd\n                                );\n                                if (command === undefined) return;\n\n                                inCommand = command;\n                            }\n                            else {\n                                const step = inCommand.value;\n                                if (step === undefined) return;\n\n                                const item = step.items.find(\n                                    i => i.label.replace(sanitizeLabel, '').toLowerCase() === cmd\n                                );\n                                if (item === undefined) return;\n\n                                items = [item];\n                            }\n\n                            if (!(await next(inCommand, items))) {\n                                resolve();\n                            }\n                        }\n                    }),\n                    quickpick.onDidAccept(async () => {\n                        let items = quickpick.selectedItems;\n                        if (items.length === 0) {\n                            if (!quickpick.canSelectMany || quickpick.activeItems.length === 0) return;\n\n                            items = quickpick.activeItems;\n                        }\n\n                        if (inCommand === undefined) {\n                            const command = items[0];\n                            if (!QuickCommandBase.is(command)) return;\n\n                            inCommand = command;\n                        }\n\n                        if (!(await next(inCommand, items as QuickPickItem[]))) {\n                            resolve();\n                        }\n                    })\n                );\n\n                quickpick.show();\n            }));\n\n            quickpick.hide();\n        }\n        finally {\n            quickpick.dispose();\n            disposables.forEach(d => d.dispose());\n        }\n    }\n}\n","'use strict';\nimport { Container } from '../container';\nimport { command, Command, Commands } from './common';\n\n@command()\nexport class FetchRepositoriesCommand extends Command {\n    constructor() {\n        super(Commands.FetchRepositories);\n    }\n\n    execute() {\n        return Container.git.fetchAll();\n    }\n}\n\n@command()\nexport class PullRepositoriesCommand extends Command {\n    constructor() {\n        super(Commands.PullRepositories);\n    }\n\n    execute() {\n        return Container.git.pullAll();\n    }\n}\n\n@command()\nexport class PushRepositoriesCommand extends Command {\n    constructor() {\n        super(Commands.PushRepositories);\n    }\n\n    execute() {\n        return Container.git.pushAll();\n    }\n}\n","'use strict';\nimport { ConfigurationTarget } from 'vscode';\nimport { configuration } from '../configuration';\nimport { command, Command, Commands } from './common';\n\n@command()\nexport class ResetSuppressedWarningsCommand extends Command {\n    constructor() {\n        super(Commands.ResetSuppressedWarnings);\n    }\n\n    async execute() {\n        await configuration.update(\n            configuration.name('advanced')('messages').value,\n            undefined,\n            ConfigurationTarget.Global\n        );\n    }\n}\n","'use strict';\nimport { commands, InputBoxOptions, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitRepoSearchBy, GitService } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, CommitsQuickPick, ShowCommitSearchResultsInViewQuickPickItem } from '../quickpicks';\nimport { Iterables } from '../system';\nimport { SearchResultsCommitsNode } from '../views/nodes';\nimport {\n    ActiveEditorCachedCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    getRepoPathOrPrompt,\n    isCommandViewContextWithRepo\n} from './common';\nimport { ShowQuickCommitDetailsCommandArgs } from './showQuickCommitDetails';\n\nconst searchByRegex = /^([@~:#])/;\nconst symbolToSearchByMap = new Map<string, GitRepoSearchBy>([\n    ['@', GitRepoSearchBy.Author],\n    ['~', GitRepoSearchBy.Changes],\n    [':', GitRepoSearchBy.Files],\n    ['#', GitRepoSearchBy.Sha]\n]);\n\nconst searchByToSymbolMap = new Map<GitRepoSearchBy, string>([\n    [GitRepoSearchBy.Author, '@'],\n    [GitRepoSearchBy.Changes, '~'],\n    [GitRepoSearchBy.Files, ':'],\n    [GitRepoSearchBy.Sha, '#']\n]);\n\nexport interface SearchCommitsCommandArgs {\n    search?: string;\n    searchBy?: GitRepoSearchBy;\n    prefillOnly?: boolean;\n    repoPath?: string;\n    showInView?: boolean;\n\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class SearchCommitsCommand extends ActiveEditorCachedCommand {\n    private _lastSearch: string | undefined;\n\n    constructor() {\n        super([Commands.SearchCommits, Commands.SearchCommitsInView]);\n    }\n\n    protected preExecute(context: CommandContext, args: SearchCommitsCommandArgs = {}) {\n        if (context.type === 'viewItem') {\n            args = { ...args };\n            args.showInView = true;\n\n            if (context.node instanceof SearchResultsCommitsNode) {\n                args.search = context.node.search;\n                args.searchBy = context.node.searchBy;\n                args.prefillOnly = true;\n            }\n\n            if (isCommandViewContextWithRepo(context)) {\n                args.repoPath = context.node.repo.path;\n                return this.execute(context.editor, context.node.uri, args);\n            }\n        }\n        else if (context.command === Commands.SearchCommitsInView) {\n            args = { ...args };\n            args.showInView = true;\n        }\n        else {\n            // TODO: Add a user setting (default to view?)\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: SearchCommitsCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        const repoPath =\n            args.repoPath ||\n            (await getRepoPathOrPrompt(\n                `Search for commits in which repository${GlyphChars.Ellipsis}`,\n                args.goBackCommand\n            ));\n        if (!repoPath) return undefined;\n\n        args = { ...args };\n        const originalArgs = { ...args };\n\n        if (args.prefillOnly && args.search && args.searchBy) {\n            args.search = `${searchByToSymbolMap.get(args.searchBy) || ''}${args.search}`;\n            args.searchBy = undefined;\n        }\n\n        if (!args.search || args.searchBy == null) {\n            let selection: [number, number] | undefined;\n            if (!args.search) {\n                if (args.searchBy != null) {\n                    args.search = searchByToSymbolMap.get(args.searchBy);\n                    selection = [1, 1];\n                }\n                else {\n                    args.search = this._lastSearch;\n                }\n            }\n\n            if (args.showInView) {\n                await Container.searchView.show();\n            }\n\n            const repo = await Container.git.getRepository(repoPath);\n\n            const opts: InputBoxOptions = {\n                value: args.search,\n                prompt: 'Please enter a search string',\n                placeHolder: `Search${\n                    repo === undefined ? '' : ` ${repo.formattedName}`\n                } for commits by message, author (@<pattern>), files (:<path/glob>), commit id (#<sha>), or changes (~<pattern>)`,\n                valueSelection: selection\n            };\n            args.search = await window.showInputBox(opts);\n            if (args.search === undefined) {\n                return args.goBackCommand === undefined ? undefined : args.goBackCommand.execute();\n            }\n\n            this._lastSearch = originalArgs.search = args.search;\n\n            const match = searchByRegex.exec(args.search);\n            if (match && match[1]) {\n                args.searchBy = symbolToSearchByMap.get(match[1]);\n                args.search = args.search.substring(args.search[1] === ' ' ? 2 : 1);\n            }\n            else if (GitService.isShaLike(args.search)) {\n                args.searchBy = GitRepoSearchBy.Sha;\n            }\n            else {\n                args.searchBy = GitRepoSearchBy.Message;\n            }\n        }\n\n        if (args.searchBy === undefined) {\n            args.searchBy = GitRepoSearchBy.Message;\n        }\n\n        let searchLabel: string | undefined = undefined;\n        switch (args.searchBy) {\n            case GitRepoSearchBy.Author:\n                searchLabel = `commits with an author matching '${args.search}'`;\n                break;\n\n            case GitRepoSearchBy.Changes:\n                searchLabel = `commits with changes matching '${args.search}'`;\n                break;\n\n            case GitRepoSearchBy.Files:\n                searchLabel = `commits with files matching '${args.search}'`;\n                break;\n\n            case GitRepoSearchBy.Message:\n                searchLabel = args.search ? `commits with a message matching '${args.search}'` : 'all commits';\n                break;\n\n            case GitRepoSearchBy.Sha:\n                searchLabel = `commits with an id matching '${args.search}'`;\n                break;\n        }\n\n        if (args.showInView) {\n            void Container.searchView.search(repoPath, args.search, args.searchBy, {\n                label: { label: searchLabel! }\n            });\n\n            return undefined;\n        }\n\n        const progressCancellation = CommitsQuickPick.showProgress(searchLabel!);\n        try {\n            const log = await Container.git.getLogForSearch(repoPath, args.search, args.searchBy);\n\n            if (progressCancellation.token.isCancellationRequested) return undefined;\n\n            let goBackCommand: CommandQuickPickItem | undefined =\n                args.goBackCommand ||\n                new CommandQuickPickItem(\n                    {\n                        label: `go back ${GlyphChars.ArrowBack}`,\n                        description: 'to commit search'\n                    },\n                    Commands.SearchCommits,\n                    [uri, originalArgs]\n                );\n\n            let commit;\n            if (args.searchBy !== GitRepoSearchBy.Sha || log === undefined || log.count !== 1) {\n                const pick = await CommitsQuickPick.show(log, searchLabel!, progressCancellation, {\n                    goBackCommand: goBackCommand,\n                    showAllCommand:\n                        log !== undefined && log.truncated\n                            ? new CommandQuickPickItem(\n                                  {\n                                      label: '$(sync) Show All Commits',\n                                      description: 'this may take a while'\n                                  },\n                                  Commands.SearchCommits,\n                                  [uri, { ...args, maxCount: 0, goBackCommand: goBackCommand }]\n                              )\n                            : undefined,\n                    showInViewCommand:\n                        log !== undefined\n                            ? new ShowCommitSearchResultsInViewQuickPickItem(args.search, args.searchBy, log, {\n                                  label: searchLabel!\n                              })\n                            : undefined\n                });\n                if (pick === undefined) return undefined;\n\n                if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n                commit = pick.item;\n                goBackCommand = undefined;\n            }\n            else {\n                commit = Iterables.first(log.commits.values());\n            }\n\n            const commandArgs: ShowQuickCommitDetailsCommandArgs = {\n                sha: commit.sha,\n                commit: commit,\n                goBackCommand:\n                    goBackCommand ||\n                    new CommandQuickPickItem(\n                        {\n                            label: `go back ${GlyphChars.ArrowBack}`,\n                            description: `to search for ${searchLabel}`\n                        },\n                        Commands.SearchCommits,\n                        [uri, args]\n                    )\n            };\n            return commands.executeCommand(Commands.ShowQuickCommitDetails, commit.toGitUri(), commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowCommitSearchCommand');\n            return Messages.showGenericErrorMessage('Unable to find commits');\n        }\n        finally {\n            progressCancellation.cancel();\n        }\n    }\n}\n","'use strict';\nimport { commands } from 'vscode';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { command, Command, Commands, getLastCommand } from './common';\n\n@command()\nexport class ShowLastQuickPickCommand extends Command {\n    constructor() {\n        super(Commands.ShowLastQuickPick);\n    }\n\n    execute() {\n        const command = getLastCommand();\n        if (command === undefined) return Promise.resolve(undefined);\n\n        try {\n            return commands.executeCommand(command.command, ...command.args);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowLastQuickPickCommand');\n            return Messages.showGenericErrorMessage('Unable to show last quick pick');\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitLog, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { BranchHistoryQuickPick, CommandQuickPickItem, ReferencesQuickPick } from '../quickpicks';\nimport { ActiveEditorCachedCommand, command, Commands, getCommandUri, getRepoPathOrActiveOrPrompt } from './common';\nimport { ShowQuickCommitDetailsCommandArgs } from './showQuickCommitDetails';\n\nexport interface ShowQuickBranchHistoryCommandArgs {\n    branch?: string;\n    log?: GitLog;\n    maxCount?: number;\n    repoPath?: string;\n\n    goBackCommand?: CommandQuickPickItem;\n    nextPageCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class ShowQuickBranchHistoryCommand extends ActiveEditorCachedCommand {\n    constructor() {\n        super(Commands.ShowQuickBranchHistory);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: ShowQuickBranchHistoryCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        const gitUri = uri && (await GitUri.fromUri(uri));\n\n        args = { ...args };\n\n        let progressCancellation =\n            args.branch === undefined ? undefined : BranchHistoryQuickPick.showProgress(args.branch);\n        try {\n            const repoPath =\n                args.repoPath ||\n                (await getRepoPathOrActiveOrPrompt(\n                    gitUri,\n                    editor,\n                    `Show branch history in which repository${GlyphChars.Ellipsis}`\n                ));\n            if (!repoPath) return undefined;\n\n            if (args.branch === undefined) {\n                let goBackCommand;\n                if (!(await Container.git.getRepoPathOrActive(uri, editor))) {\n                    goBackCommand = new CommandQuickPickItem(\n                        {\n                            label: `go back ${GlyphChars.ArrowBack}`,\n                            description: 'to which repository'\n                        },\n                        Commands.ShowQuickBranchHistory,\n                        [uri, args]\n                    );\n                }\n\n                const pick = await new ReferencesQuickPick(repoPath).show(\n                    `Show history for branch${GlyphChars.Ellipsis}`,\n                    {\n                        checkmarks: false,\n                        goBack: goBackCommand,\n                        include: 'branches'\n                    }\n                );\n                if (pick === undefined) return undefined;\n                if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n                args.branch = pick.ref;\n                if (args.branch === undefined) return undefined;\n\n                progressCancellation = BranchHistoryQuickPick.showProgress(args.branch);\n            }\n\n            if (args.log === undefined) {\n                args.log = await Container.git.getLog(repoPath, {\n                    maxCount: args.maxCount,\n                    ref: (gitUri && gitUri.sha) || args.branch\n                });\n                if (args.log === undefined) return window.showWarningMessage('Unable to show branch history');\n            }\n\n            if (progressCancellation !== undefined && progressCancellation.token.isCancellationRequested) {\n                return undefined;\n            }\n\n            const pick = await BranchHistoryQuickPick.show(\n                args.log,\n                gitUri,\n                args.branch,\n                progressCancellation!,\n                args.goBackCommand,\n                args.nextPageCommand\n            );\n            if (pick === undefined) return undefined;\n\n            if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n            // Create a command to get back to here\n            const currentCommand = new CommandQuickPickItem(\n                {\n                    label: `go back ${GlyphChars.ArrowBack}`,\n                    description: `to history of ${GlyphChars.Space}$(git-branch) ${args.branch}`\n                },\n                Commands.ShowQuickBranchHistory,\n                [uri, { ...args }]\n            );\n\n            const commandArgs: ShowQuickCommitDetailsCommandArgs = {\n                sha: pick.item.sha,\n                commit: pick.item,\n                repoLog: args.log,\n                goBackCommand: currentCommand\n            };\n            return commands.executeCommand(Commands.ShowQuickCommitDetails, pick.item.toGitUri(), commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowQuickBranchHistoryCommand');\n            return Messages.showGenericErrorMessage('Unable to show branch history');\n        }\n        finally {\n            progressCancellation && progressCancellation.cancel();\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitCommit, GitLog, GitLogCommit, GitRepoSearchBy, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, CommitQuickPick, CommitWithFileStatusQuickPickItem } from '../quickpicks';\nimport {\n    ActiveEditorCachedCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    isCommandViewContextWithCommit\n} from './common';\nimport { ShowQuickCommitFileDetailsCommandArgs } from './showQuickCommitFileDetails';\n\nexport interface ShowQuickCommitDetailsCommandArgs {\n    sha?: string;\n    commit?: GitCommit | GitLogCommit;\n    repoLog?: GitLog;\n    showInView?: boolean;\n\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class ShowQuickCommitDetailsCommand extends ActiveEditorCachedCommand {\n    static getMarkdownCommandArgs(sha: string): string;\n    static getMarkdownCommandArgs(args: ShowQuickCommitDetailsCommandArgs): string;\n    static getMarkdownCommandArgs(argsOrSha: ShowQuickCommitDetailsCommandArgs | string): string {\n        const args = typeof argsOrSha === 'string' ? { sha: argsOrSha } : argsOrSha;\n        return super.getMarkdownCommandArgsCore<ShowQuickCommitDetailsCommandArgs>(\n            Commands.ShowQuickCommitDetails,\n            args\n        );\n    }\n\n    constructor() {\n        super([Commands.ShowCommitInView, Commands.ShowQuickCommitDetails]);\n    }\n\n    protected preExecute(context: CommandContext, args: ShowQuickCommitDetailsCommandArgs = {}) {\n        if (context.command === Commands.ShowCommitInView) {\n            args = { ...args };\n            args.showInView = true;\n        }\n\n        if (context.type === 'viewItem') {\n            args = { ...args };\n            args.sha = context.node.uri.sha;\n\n            if (isCommandViewContextWithCommit(context)) {\n                args.commit = context.node.commit;\n            }\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: ShowQuickCommitDetailsCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        const gitUri = await GitUri.fromUri(uri);\n\n        let repoPath = gitUri.repoPath;\n\n        args = { ...args };\n        if (args.sha === undefined) {\n            if (editor == null) return undefined;\n\n            const blameline = editor.selection.active.line;\n            if (blameline < 0) return undefined;\n\n            try {\n                const blame = await Container.git.getBlameForLine(gitUri, blameline);\n                if (blame === undefined) {\n                    return Messages.showFileNotUnderSourceControlWarningMessage('Unable to show commit details');\n                }\n\n                // Because the previous sha of an uncommitted file isn't trust worthy we just have to kick out\n                if (blame.commit.isUncommitted) {\n                    return Messages.showLineUncommittedWarningMessage('Unable to show commit details');\n                }\n\n                args.sha = blame.commit.sha;\n                repoPath = blame.commit.repoPath;\n\n                args.commit = blame.commit;\n            }\n            catch (ex) {\n                Logger.error(ex, 'ShowQuickCommitDetailsCommand', `getBlameForLine(${blameline})`);\n                return Messages.showGenericErrorMessage('Unable to show commit details');\n            }\n        }\n\n        try {\n            if (args.commit === undefined || args.commit.isFile) {\n                if (args.repoLog !== undefined) {\n                    args.commit = args.repoLog.commits.get(args.sha!);\n                    // If we can't find the commit, kill the repoLog\n                    if (args.commit === undefined) {\n                        args.repoLog = undefined;\n                    }\n                }\n\n                if (args.repoLog === undefined) {\n                    const log = await Container.git.getLog(repoPath!, { maxCount: 2, ref: args.sha });\n                    if (log === undefined) {\n                        return Messages.showCommitNotFoundWarningMessage('Unable to show commit details');\n                    }\n\n                    args.commit = log.commits.get(args.sha!);\n                }\n            }\n\n            if (args.commit === undefined) {\n                return Messages.showCommitNotFoundWarningMessage('Unable to show commit details');\n            }\n\n            if (args.showInView) {\n                void (await Container.searchView.search(repoPath!, args.commit.sha, GitRepoSearchBy.Sha, {\n                    label: { label: `commits with an id matching '${args.commit.shortSha}'` }\n                }));\n\n                return undefined;\n            }\n\n            if (args.goBackCommand === undefined) {\n                const branch = await Container.git.getBranch(args.commit.repoPath);\n                if (branch !== undefined) {\n                    // Create a command to get back to the branch history\n                    args.goBackCommand = new CommandQuickPickItem(\n                        {\n                            label: `go back ${GlyphChars.ArrowBack}`,\n                            description: `to ${branch.name} history`\n                        },\n                        Commands.ShowQuickCurrentBranchHistory,\n                        [args.commit.toGitUri()]\n                    );\n                }\n            }\n\n            // Create a command to get back to where we are right now\n            const currentCommand = new CommandQuickPickItem(\n                {\n                    label: `go back ${GlyphChars.ArrowBack}`,\n                    description: `to details of ${GlyphChars.Space}$(git-commit) ${args.commit.shortSha}`\n                },\n                Commands.ShowQuickCommitDetails,\n                [args.commit.toGitUri(), args]\n            );\n\n            const pick = await new CommitQuickPick(repoPath).show(args.commit as GitLogCommit, uri, {\n                currentCommand: currentCommand,\n                goBackCommand: args.goBackCommand,\n                repoLog: args.repoLog\n            });\n            if (pick === undefined) return undefined;\n\n            if (!(pick instanceof CommitWithFileStatusQuickPickItem)) return pick.execute();\n\n            const commandArgs: ShowQuickCommitFileDetailsCommandArgs = {\n                commit: pick.commit,\n                sha: pick.sha,\n                goBackCommand: currentCommand\n            };\n            return commands.executeCommand(Commands.ShowQuickCommitFileDetails, pick.commit.toGitUri(), commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowQuickCommitDetailsCommand');\n            return Messages.showGenericErrorMessage('Unable to show commit details');\n        }\n    }\n}\n","'use strict';\nimport { TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitCommit, GitLog, GitLogCommit, GitService, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, CommitFileQuickPick } from '../quickpicks';\nimport {\n    ActiveEditorCachedCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    isCommandViewContextWithCommit\n} from './common';\nimport { ShowQuickCommitDetailsCommandArgs } from './showQuickCommitDetails';\n\nexport interface ShowQuickCommitFileDetailsCommandArgs {\n    sha?: string;\n    commit?: GitCommit | GitLogCommit;\n    fileLog?: GitLog;\n    revisionUri?: string;\n\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class ShowQuickCommitFileDetailsCommand extends ActiveEditorCachedCommand {\n    static getMarkdownCommandArgs(args: ShowQuickCommitFileDetailsCommandArgs): string {\n        return super.getMarkdownCommandArgsCore<ShowQuickCommitFileDetailsCommandArgs>(\n            Commands.ShowQuickCommitFileDetails,\n            args\n        );\n    }\n\n    constructor() {\n        super([Commands.ShowQuickCommitFileDetails, Commands.ShowQuickRevisionDetails]);\n    }\n\n    protected async preExecute(context: CommandContext, args: ShowQuickCommitFileDetailsCommandArgs = {}) {\n        if (context.command === Commands.ShowQuickRevisionDetails && context.editor !== undefined) {\n            args = { ...args };\n\n            const gitUri = await GitUri.fromUri(context.editor.document.uri);\n            args.sha = gitUri.sha;\n        }\n\n        if (context.type === 'viewItem') {\n            args = { ...args };\n            args.sha = context.node.uri.sha;\n\n            if (isCommandViewContextWithCommit(context)) {\n                args.commit = context.node.commit;\n            }\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: ShowQuickCommitFileDetailsCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        let gitUri;\n        if (args.revisionUri !== undefined) {\n            gitUri = GitUri.fromRevisionUri(Uri.parse(args.revisionUri));\n            args.sha = gitUri.sha;\n        }\n        else {\n            gitUri = await GitUri.fromUri(uri);\n        }\n\n        args = { ...args };\n        if (args.sha === undefined) {\n            if (editor == null) return undefined;\n\n            const blameline = editor.selection.active.line;\n            if (blameline < 0) return undefined;\n\n            try {\n                const blame = await Container.git.getBlameForLine(gitUri, blameline);\n                if (blame === undefined) {\n                    return Messages.showFileNotUnderSourceControlWarningMessage('Unable to show commit file details');\n                }\n\n                // Because the previous sha of an uncommitted file isn't trust worthy we just have to kick out\n                if (blame.commit.isUncommitted) {\n                    return Messages.showLineUncommittedWarningMessage('Unable to show commit file details');\n                }\n\n                args.sha = blame.commit.sha;\n\n                args.commit = blame.commit;\n            }\n            catch (ex) {\n                Logger.error(ex, 'ShowQuickCommitFileDetailsCommand', `getBlameForLine(${blameline})`);\n                return window.showErrorMessage(\n                    'Unable to show commit file details. See output channel for more details'\n                );\n            }\n        }\n\n        try {\n            if (args.commit === undefined || !args.commit.isFile) {\n                if (args.fileLog !== undefined) {\n                    args.commit = args.fileLog.commits.get(args.sha!);\n                    // If we can't find the commit, kill the fileLog\n                    if (args.commit === undefined) {\n                        args.fileLog = undefined;\n                    }\n                }\n\n                if (args.fileLog === undefined) {\n                    const repoPath = args.commit === undefined ? gitUri.repoPath : args.commit.repoPath;\n                    args.commit = await Container.git.getCommitForFile(repoPath, gitUri.fsPath, { ref: args.sha });\n                    if (args.commit === undefined) {\n                        return Messages.showCommitNotFoundWarningMessage('Unable to show commit file details');\n                    }\n                }\n            }\n\n            if (args.commit === undefined) {\n                return Messages.showCommitNotFoundWarningMessage('Unable to show commit file details');\n            }\n\n            const shortSha = GitService.shortenSha(args.sha!);\n\n            if (args.goBackCommand === undefined) {\n                const commandArgs: ShowQuickCommitDetailsCommandArgs = {\n                    commit: args.commit,\n                    sha: args.sha\n                };\n\n                // Create a command to get back to the commit details\n                args.goBackCommand = new CommandQuickPickItem(\n                    {\n                        label: `go back ${GlyphChars.ArrowBack}`,\n                        description: `to details of ${GlyphChars.Space}$(git-commit) ${shortSha}`\n                    },\n                    Commands.ShowQuickCommitDetails,\n                    [args.commit.toGitUri(), commandArgs]\n                );\n            }\n\n            // Create a command to get back to where we are right now\n            const currentCommand = new CommandQuickPickItem(\n                {\n                    label: `go back ${GlyphChars.ArrowBack}`,\n                    description: `to details of ${args.commit.getFormattedPath()} from ${\n                        GlyphChars.Space\n                    }$(git-commit) ${shortSha}`\n                },\n                Commands.ShowQuickCommitFileDetails,\n                [args.commit.toGitUri(), args]\n            );\n\n            const pick = await CommitFileQuickPick.show(\n                args.commit as GitLogCommit,\n                uri,\n                args.goBackCommand,\n                currentCommand,\n                args.fileLog\n            );\n            if (pick === undefined) return undefined;\n\n            if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n            return undefined;\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowQuickCommitFileDetailsCommand');\n            return Messages.showGenericErrorMessage('Unable to show commit file details');\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem } from '../quickpicks';\nimport { ActiveEditorCachedCommand, command, Commands, getCommandUri, getRepoPathOrActiveOrPrompt } from './common';\nimport { ShowQuickBranchHistoryCommandArgs } from './showQuickBranchHistory';\n\nexport interface ShowQuickCurrentBranchHistoryCommandArgs {\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class ShowQuickCurrentBranchHistoryCommand extends ActiveEditorCachedCommand {\n    constructor() {\n        super(Commands.ShowQuickCurrentBranchHistory);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: ShowQuickCurrentBranchHistoryCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        try {\n            const repoPath = await getRepoPathOrActiveOrPrompt(\n                uri,\n                editor,\n                `Show current branch history for which repository${GlyphChars.Ellipsis}`\n            );\n            if (!repoPath) return undefined;\n\n            const branch = await Container.git.getBranch(repoPath);\n            if (branch === undefined) return undefined;\n\n            const commandArgs: ShowQuickBranchHistoryCommandArgs = {\n                branch: branch.name,\n                repoPath: repoPath,\n                goBackCommand: args.goBackCommand\n            };\n            return commands.executeCommand(Commands.ShowQuickBranchHistory, uri, commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowQuickCurrentBranchHistoryCommand');\n            return Messages.showGenericErrorMessage('Unable to show branch history');\n        }\n    }\n}\n","'use strict';\nimport { commands, Range, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitBranch, GitLog, GitReference, GitTag, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport {\n    CommandQuickPickItem,\n    FileHistoryQuickPick,\n    ShowFileHistoryFromQuickPickItem,\n    ShowFileHistoryInViewQuickPickItem\n} from '../quickpicks';\nimport { Iterables, Strings } from '../system';\nimport { ActiveEditorCachedCommand, command, CommandContext, Commands, getCommandUri } from './common';\nimport { ShowQuickCommitFileDetailsCommandArgs } from './showQuickCommitFileDetails';\n\nexport interface ShowQuickFileHistoryCommandArgs {\n    reference?: GitBranch | GitTag | GitReference;\n    log?: GitLog;\n    maxCount?: number;\n    range?: Range;\n    showInView?: boolean;\n\n    goBackCommand?: CommandQuickPickItem;\n    nextPageCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class ShowQuickFileHistoryCommand extends ActiveEditorCachedCommand {\n    constructor() {\n        super([Commands.ShowFileHistoryInView, Commands.ShowQuickFileHistory]);\n    }\n\n    protected preExecute(context: CommandContext, args: ShowQuickFileHistoryCommandArgs = {}) {\n        if (context.command === Commands.ShowFileHistoryInView) {\n            args = { ...args };\n            args.showInView = true;\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: ShowQuickFileHistoryCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return commands.executeCommand(Commands.ShowQuickCurrentBranchHistory);\n\n        const gitUri = await GitUri.fromUri(uri);\n\n        if (args.showInView) {\n            await Container.fileHistoryView.showHistoryForUri(gitUri);\n\n            return undefined;\n        }\n\n        args = { ...args };\n\n        const placeHolder = `${gitUri.getFormattedPath({\n            suffix: args.reference ? ` (${args.reference.name})` : undefined\n        })}${gitUri.sha ? ` ${Strings.pad(GlyphChars.Dot, 1, 1)} ${gitUri.shortSha}` : ''}`;\n\n        const progressCancellation = FileHistoryQuickPick.showProgress(placeHolder);\n\n        try {\n            if (args.log === undefined) {\n                args.log = await Container.git.getLogForFile(gitUri.repoPath, gitUri.fsPath, {\n                    maxCount: args.maxCount,\n                    range: args.range,\n                    ref: (args.reference && args.reference.ref) || gitUri.sha\n                });\n                if (args.log === undefined) {\n                    if (args.reference) {\n                        return window.showWarningMessage(`The file could not be found in ${args.reference.name}`);\n                    }\n                    return Messages.showFileNotUnderSourceControlWarningMessage('Unable to show file history');\n                }\n            }\n\n            if (progressCancellation !== undefined && progressCancellation.token.isCancellationRequested) {\n                return undefined;\n            }\n\n            let previousPageCommand: CommandQuickPickItem | undefined = undefined;\n\n            if (args.log.truncated) {\n                let commandArgs: ShowQuickFileHistoryCommandArgs;\n                commandArgs = { ...args, log: undefined };\n                const npc = new CommandQuickPickItem(\n                    {\n                        label: '$(arrow-right) Show Next Commits',\n                        description: `shows ${args.log.maxCount} newer commits`\n                    },\n                    Commands.ShowQuickFileHistory,\n                    [gitUri, commandArgs]\n                );\n\n                const last = Iterables.last(args.log.commits.values());\n                if (last != null) {\n                    commandArgs = { ...args, log: undefined, nextPageCommand: npc };\n                    previousPageCommand = new CommandQuickPickItem(\n                        {\n                            label: '$(arrow-left) Show Previous Commits',\n                            description: `shows ${args.log.maxCount} older commits`\n                        },\n                        Commands.ShowQuickFileHistory,\n                        [new GitUri(uri, last), commandArgs]\n                    );\n                }\n            }\n\n            const icon = GitTag.is(args.reference) ? '$(tag) ' : GitBranch.is(args.reference) ? '$(git-branch) ' : '';\n            // Create a command to get back to where we are right now\n            const currentCommand = new CommandQuickPickItem(\n                {\n                    label: `go back ${GlyphChars.ArrowBack}`,\n                    description: `to history of ${gitUri.getFormattedPath()}${\n                        args.reference\n                            ? ` from ${GlyphChars.Space}${icon}${args.reference.name}`\n                            : gitUri.sha\n                            ? ` from ${GlyphChars.Space}$(git-commit) ${gitUri.shortSha}`\n                            : ''\n                    }`\n                },\n                Commands.ShowQuickFileHistory,\n                [uri, args]\n            );\n\n            const pick = await FileHistoryQuickPick.show(args.log, gitUri, placeHolder, {\n                progressCancellation: progressCancellation,\n                currentCommand: currentCommand,\n                goBackCommand: args.goBackCommand,\n                nextPageCommand: args.nextPageCommand,\n                previousPageCommand: previousPageCommand,\n                showAllCommand:\n                    args.log !== undefined && args.log.truncated\n                        ? new CommandQuickPickItem(\n                              {\n                                  label: '$(sync) Show All Commits',\n                                  description: 'this may take a while'\n                              },\n                              Commands.ShowQuickFileHistory,\n                              [uri, { ...args, log: undefined, maxCount: 0 }]\n                          )\n                        : undefined,\n                showInViewCommand:\n                    args.log !== undefined\n                        ? new ShowFileHistoryInViewQuickPickItem(\n                              gitUri,\n                              (args.reference && args.reference.ref) || gitUri.sha\n                          )\n                        : undefined\n            });\n            if (pick === undefined) return undefined;\n\n            if (pick instanceof ShowFileHistoryFromQuickPickItem) {\n                const reference = await pick.execute();\n                if (reference === undefined) return undefined;\n                if (reference instanceof CommandQuickPickItem) return reference.execute();\n\n                const commandArgs: ShowQuickFileHistoryCommandArgs = {\n                    ...args,\n                    log: undefined,\n                    reference: reference.item,\n                    goBackCommand: currentCommand\n                };\n                return commands.executeCommand(Commands.ShowQuickFileHistory, gitUri, commandArgs);\n            }\n\n            if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n            const commandArgs: ShowQuickCommitFileDetailsCommandArgs = {\n                commit: pick.item,\n                fileLog: args.log,\n                sha: pick.item.sha,\n                goBackCommand: currentCommand\n            };\n\n            return commands.executeCommand(Commands.ShowQuickCommitFileDetails, pick.item.toGitUri(), commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowQuickFileHistoryCommand');\n            return Messages.showGenericErrorMessage('Unable to show file history');\n        }\n        finally {\n            progressCancellation && progressCancellation.cancel();\n        }\n    }\n}\n","'use strict';\nimport { TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, RepoStatusQuickPick } from '../quickpicks';\nimport { ActiveEditorCachedCommand, command, Commands, getCommandUri, getRepoPathOrActiveOrPrompt } from './common';\n\nexport interface ShowQuickRepoStatusCommandArgs {\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class ShowQuickRepoStatusCommand extends ActiveEditorCachedCommand {\n    constructor() {\n        super(Commands.ShowQuickRepoStatus);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: ShowQuickRepoStatusCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        try {\n            const repoPath = await getRepoPathOrActiveOrPrompt(\n                uri,\n                editor,\n                `Show status for which repository${GlyphChars.Ellipsis}`\n            );\n            if (!repoPath) return undefined;\n\n            const status = await Container.git.getStatusForRepo(repoPath);\n            if (status === undefined) return window.showWarningMessage('Unable to show repository status');\n\n            const pick = await RepoStatusQuickPick.show(status, args.goBackCommand);\n            if (pick === undefined) return undefined;\n\n            if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n            return undefined;\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowQuickRepoStatusCommand');\n            return Messages.showGenericErrorMessage('Unable to show repository status');\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, StashListQuickPick } from '../quickpicks';\nimport { ActiveEditorCachedCommand, command, Commands, getCommandUri, getRepoPathOrActiveOrPrompt } from './common';\nimport { ShowQuickCommitDetailsCommandArgs } from './showQuickCommitDetails';\n\nexport interface ShowQuickStashListCommandArgs {\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class ShowQuickStashListCommand extends ActiveEditorCachedCommand {\n    constructor() {\n        super(Commands.ShowQuickStashList);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: ShowQuickStashListCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        const repoPath = await getRepoPathOrActiveOrPrompt(\n            uri,\n            editor,\n            `Show stashed changes for which repository${GlyphChars.Ellipsis}`\n        );\n        if (!repoPath) return undefined;\n\n        const progressCancellation = StashListQuickPick.showProgress('list');\n\n        try {\n            const stash = await Container.git.getStashList(repoPath);\n            if (stash === undefined) return window.showWarningMessage('Unable to show stashed changes');\n\n            if (progressCancellation.token.isCancellationRequested) return undefined;\n\n            // Create a command to get back to here\n            const currentCommandArgs: ShowQuickStashListCommandArgs = {\n                goBackCommand: args.goBackCommand\n            };\n            const currentCommand = new CommandQuickPickItem(\n                {\n                    label: `go back ${GlyphChars.ArrowBack}`,\n                    description: 'to stashed changes'\n                },\n                Commands.ShowQuickStashList,\n                [uri, currentCommandArgs]\n            );\n\n            const pick = await StashListQuickPick.show(\n                stash,\n                'list',\n                progressCancellation,\n                args.goBackCommand,\n                currentCommand\n            );\n            if (pick === undefined) return undefined;\n\n            if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n            const commandArgs: ShowQuickCommitDetailsCommandArgs = {\n                commit: pick.item,\n                sha: pick.item.sha,\n                goBackCommand: currentCommand\n            };\n            return commands.executeCommand(Commands.ShowQuickCommitDetails, pick.item.toGitUri(), commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowQuickStashListCommand');\n            return Messages.showGenericErrorMessage('Unable to show stashed changes');\n        }\n        finally {\n            progressCancellation.cancel();\n        }\n    }\n}\n","'use strict';\nimport { Container } from '../container';\nimport { command, Command, CommandContext, Commands } from './common';\n\n@command()\nexport class ShowViewCommand extends Command {\n    constructor() {\n        super([\n            Commands.ShowCompareView,\n            Commands.ShowFileHistoryView,\n            Commands.ShowLineHistoryView,\n            Commands.ShowRepositoriesView,\n            Commands.ShowSearchView\n        ]);\n    }\n\n    protected preExecute(context: CommandContext) {\n        return this.execute(context.command as Commands);\n    }\n\n    execute(command: Commands) {\n        switch (command) {\n            case Commands.ShowCompareView:\n                return Container.compareView.show();\n            case Commands.ShowFileHistoryView:\n                return Container.fileHistoryView.show();\n            case Commands.ShowLineHistoryView:\n                return Container.lineHistoryView.show();\n            case Commands.ShowRepositoriesView:\n                return Container.repositoriesView.show();\n            case Commands.ShowSearchView:\n                return Container.searchView.show();\n        }\n\n        return Promise.resolve(undefined);\n    }\n}\n","'use strict';\nimport { window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitStashCommit } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, StashListQuickPick } from '../quickpicks';\nimport {\n    command,\n    Command,\n    CommandContext,\n    Commands,\n    getRepoPathOrPrompt,\n    isCommandViewContextWithCommit,\n    isCommandViewContextWithRepo\n} from './common';\n\nexport interface StashApplyCommandArgs {\n    confirm?: boolean;\n    deleteAfter?: boolean;\n    repoPath?: string;\n    stashItem?: { stashName: string; message: string; repoPath: string };\n\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class StashApplyCommand extends Command {\n    constructor() {\n        super(Commands.StashApply);\n    }\n\n    protected preExecute(context: CommandContext, args: StashApplyCommandArgs = { confirm: true, deleteAfter: false }) {\n        if (isCommandViewContextWithCommit<GitStashCommit>(context)) {\n            args = { ...args };\n            args.stashItem = context.node.commit;\n            return this.execute(args);\n        }\n        else if (isCommandViewContextWithRepo(context)) {\n            args = { ...args };\n            args.repoPath = context.node.repo.path;\n        }\n\n        return this.execute(args);\n    }\n\n    async execute(args: StashApplyCommandArgs = { confirm: true, deleteAfter: false }) {\n        args = { ...args };\n\n        if (args.stashItem === undefined || args.stashItem.stashName === undefined) {\n            if (args.repoPath === undefined) {\n                args.repoPath = await getRepoPathOrPrompt(\n                    `Apply stashed changes from which repository${GlyphChars.Ellipsis}`,\n                    args.goBackCommand\n                );\n            }\n            if (!args.repoPath) return undefined;\n\n            const progressCancellation = StashListQuickPick.showProgress('apply');\n\n            try {\n                const stash = await Container.git.getStashList(args.repoPath);\n                if (stash === undefined) return window.showInformationMessage('There are no stashed changes');\n\n                if (progressCancellation.token.isCancellationRequested) return undefined;\n\n                const currentCommand = new CommandQuickPickItem(\n                    {\n                        label: `go back ${GlyphChars.ArrowBack}`,\n                        description: 'to apply stashed changes'\n                    },\n                    Commands.StashApply,\n                    [args]\n                );\n\n                const pick = await StashListQuickPick.show(\n                    stash,\n                    'apply',\n                    progressCancellation,\n                    args.goBackCommand,\n                    currentCommand\n                );\n                if (pick instanceof CommandQuickPickItem) return pick.execute();\n                if (pick === undefined) {\n                    return args.goBackCommand === undefined ? undefined : args.goBackCommand.execute();\n                }\n\n                args.goBackCommand = currentCommand;\n                args.stashItem = pick.item;\n            }\n            finally {\n                progressCancellation.cancel();\n            }\n        }\n\n        try {\n            if (args.confirm) {\n                const message =\n                    args.stashItem.message.length > 80\n                        ? `${args.stashItem.message.substring(0, 80)}${GlyphChars.Ellipsis}`\n                        : args.stashItem.message;\n                const result = await window.showWarningMessage(\n                    `Apply stashed changes '${message}' to your working tree?`,\n                    { title: 'Yes, delete after applying' },\n                    { title: 'Yes' },\n                    { title: 'No', isCloseAffordance: true }\n                );\n                if (result === undefined || result.title === 'No') {\n                    return args.goBackCommand === undefined ? undefined : args.goBackCommand.execute();\n                }\n\n                args.deleteAfter = result.title !== 'Yes';\n            }\n\n            return await Container.git.stashApply(args.stashItem.repoPath, args.stashItem.stashName, args.deleteAfter);\n        }\n        catch (ex) {\n            Logger.error(ex, 'StashApplyCommand');\n            if (ex.message.includes('Your local changes to the following files would be overwritten by merge')) {\n                return window.showWarningMessage(\n                    'Unable to apply stash. Your working tree changes would be overwritten.'\n                );\n            }\n            else if (ex.message.includes('Auto-merging') && ex.message.includes('CONFLICT')) {\n                return window.showInformationMessage('Stash applied with conflicts');\n            }\n\n            return Messages.showGenericErrorMessage(\n                `Unable to apply stash \\u2014 ${ex.message.trim().replace(/\\n+?/g, '; ')}`\n            );\n        }\n    }\n}\n","'use strict';\nimport { window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitStashCommit } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem } from '../quickpicks';\nimport { command, Command, CommandContext, Commands, isCommandViewContextWithCommit } from './common';\n\nexport interface StashDeleteCommandArgs {\n    confirm?: boolean;\n    stashItem?: { stashName: string; message: string; repoPath: string };\n\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class StashDeleteCommand extends Command {\n    constructor() {\n        super(Commands.StashDelete);\n    }\n\n    protected preExecute(context: CommandContext, args: StashDeleteCommandArgs = { confirm: true }) {\n        if (isCommandViewContextWithCommit<GitStashCommit>(context)) {\n            args = { ...args };\n            args.stashItem = context.node.commit;\n            return this.execute(args);\n        }\n\n        return this.execute(args);\n    }\n\n    async execute(args: StashDeleteCommandArgs = { confirm: true }) {\n        args = { ...args };\n        if (\n            args.stashItem === undefined ||\n            args.stashItem.stashName === undefined ||\n            args.stashItem.repoPath === undefined\n        ) {\n            return undefined;\n        }\n\n        if (args.confirm === undefined) {\n            args.confirm = true;\n        }\n\n        try {\n            if (args.confirm) {\n                const message =\n                    args.stashItem.message.length > 80\n                        ? `${args.stashItem.message.substring(0, 80)}${GlyphChars.Ellipsis}`\n                        : args.stashItem.message;\n                const result = await window.showWarningMessage(\n                    `Delete stashed changes '${message}'?`,\n                    { title: 'Yes' },\n                    { title: 'No', isCloseAffordance: true }\n                );\n                if (result === undefined || result.title !== 'Yes') {\n                    return args.goBackCommand === undefined ? undefined : args.goBackCommand.execute();\n                }\n            }\n\n            return await Container.git.stashDelete(args.stashItem.repoPath, args.stashItem.stashName);\n        }\n        catch (ex) {\n            Logger.error(ex, 'StashDeleteCommand');\n            return Messages.showGenericErrorMessage('Unable to delete stash');\n        }\n    }\n}\n","'use strict';\nimport { Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitUri } from '../git/gitUri';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem } from '../quickpicks';\nimport {\n    command,\n    Command,\n    CommandContext,\n    Commands,\n    getRepoPathOrPrompt,\n    isCommandViewContextWithFile,\n    isCommandViewContextWithRepo,\n    isCommandViewContextWithRepoPath\n} from './common';\n\nexport interface StashSaveCommandArgs {\n    message?: string;\n    repoPath?: string;\n    uris?: Uri[];\n\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class StashSaveCommand extends Command {\n    constructor() {\n        super([Commands.StashSave, Commands.StashSaveFiles]);\n    }\n\n    protected preExecute(context: CommandContext, args: StashSaveCommandArgs = {}) {\n        if (isCommandViewContextWithFile(context)) {\n            args = { ...args };\n            args.uris = [GitUri.fromFile(context.node.file, context.node.file.repoPath || context.node.repoPath)];\n        }\n        else if (isCommandViewContextWithRepo(context)) {\n            args = { ...args };\n            args.repoPath = context.node.repo.path;\n        }\n        else if (isCommandViewContextWithRepoPath(context)) {\n            args = { ...args };\n            args.repoPath = context.node.repoPath;\n        }\n        else if (context.type === 'scm-states') {\n            args = { ...args };\n            args.uris = context.scmResourceStates.map(s => s.resourceUri);\n        }\n        else if (context.type === 'scm-groups') {\n            args = { ...args };\n            args.uris = context.scmResourceGroups.reduce<Uri[]>(\n                (a, b) => a.concat(b.resourceStates.map(s => s.resourceUri)),\n                []\n            );\n        }\n\n        return this.execute(args);\n    }\n\n    async execute(args: StashSaveCommandArgs = {}) {\n        args = { ...args };\n\n        const uri = args.uris !== undefined && args.uris.length !== 0 ? args.uris[0] : undefined;\n        if (args.repoPath === undefined) {\n            args.repoPath = await getRepoPathOrPrompt(\n                `Stash changes for which repository${GlyphChars.Ellipsis}`,\n                args.goBackCommand,\n                uri\n            );\n        }\n        if (!args.repoPath) return undefined;\n\n        try {\n            if (args.message == null) {\n                args.message = await window.showInputBox({\n                    prompt: 'Please provide a stash message',\n                    placeHolder: 'Stash message'\n                });\n                if (args.message === undefined) {\n                    return args.goBackCommand === undefined ? undefined : args.goBackCommand.execute();\n                }\n            }\n\n            return await Container.git.stashSave(args.repoPath, args.message, args.uris);\n        }\n        catch (ex) {\n            Logger.error(ex, 'StashSaveCommand');\n\n            const msg = ex && ex.message;\n            if (msg.includes('newer version of Git')) {\n                return window.showErrorMessage(`Unable to save stash. ${msg}`);\n            }\n            return Messages.showGenericErrorMessage('Unable to save stash');\n        }\n    }\n}\n","'use strict';\nimport { Messages } from '../messages';\nimport { command, Command, Commands } from './common';\n\n@command()\nexport class SupportGitLensCommand extends Command {\n    constructor() {\n        super(Commands.SupportGitLens);\n    }\n\n    execute() {\n        return Messages.showSupportGitLensMessage();\n    }\n}\n","'use strict';\nimport { ConfigurationTarget } from 'vscode';\nimport { configuration } from '../configuration';\nimport { Container } from '../container';\nimport { ModesQuickPick } from '../quickpicks';\nimport { command, Command, Commands } from './common';\nimport { log } from '../system/decorators/log';\nimport { Logger } from '../logger';\n\n@command()\nexport class SwitchModeCommand extends Command {\n    constructor() {\n        super(Commands.SwitchMode);\n    }\n\n    @log({ args: false, correlate: true, singleLine: true, timed: false })\n    async execute() {\n        const cc = Logger.getCorrelationContext();\n\n        const pick = await ModesQuickPick.show();\n        if (pick === undefined) return;\n\n        if (cc) {\n            cc.exitDetails = ` \\u2014 mode=${pick.key || ''}`;\n        }\n\n        const active = Container.config.mode.active;\n        if (active === pick.key) return;\n\n        // Check if we have applied any annotations and clear them if we won't be applying them again\n        if (active != null && active.length !== 0) {\n            const activeAnnotations = Container.config.modes[active].annotations;\n            if (activeAnnotations != null) {\n                const newAnnotations = pick.key != null ? Container.config.modes[pick.key].annotations : undefined;\n                if (activeAnnotations !== newAnnotations) {\n                    await Container.fileAnnotations.clearAll();\n                }\n            }\n        }\n\n        await configuration.update(configuration.name('mode')('active').value, pick.key, ConfigurationTarget.Global);\n    }\n}\n\n@command()\nexport class ToggleReviewModeCommand extends Command {\n    constructor() {\n        super(Commands.ToggleReviewMode);\n    }\n\n    @log({ args: false, singleLine: true, timed: false })\n    async execute() {\n        if (!Object.keys(Container.config.modes).includes('review')) return;\n\n        const mode = Container.config.mode.active === 'review' ? undefined : 'review';\n        await configuration.update(configuration.name('mode')('active').value, mode, ConfigurationTarget.Global);\n    }\n}\n\n@command()\nexport class ToggleZenModeCommand extends Command {\n    constructor() {\n        super(Commands.ToggleZenMode);\n    }\n\n    @log({ args: false, singleLine: true, timed: false })\n    async execute() {\n        if (!Object.keys(Container.config.modes).includes('zen')) return;\n\n        const mode = Container.config.mode.active === 'zen' ? undefined : 'zen';\n        await configuration.update(configuration.name('mode')('active').value, mode, ConfigurationTarget.Global);\n    }\n}\n","'use strict';\nimport { Container } from '../container';\nimport { command, Command, Commands } from './common';\n\n@command()\nexport class ToggleCodeLensCommand extends Command {\n    constructor() {\n        super(Commands.ToggleCodeLens);\n    }\n\n    execute() {\n        return Container.codeLens.toggleCodeLens();\n    }\n}\n","'use strict';\n\nexport * from './commands/annotations';\nexport * from './commands/closeUnchangedFiles';\nexport * from './commands/common';\nexport * from './commands/copyMessageToClipboard';\nexport * from './commands/copyRemoteFileUrlToClipboard';\nexport * from './commands/copyShaToClipboard';\nexport * from './commands/diffBranchWith';\nexport * from './commands/diffDirectory';\nexport * from './commands/diffLineWithPrevious';\nexport * from './commands/diffLineWithWorking';\nexport * from './commands/diffWith';\nexport * from './commands/diffWithNext';\nexport * from './commands/diffWithPrevious';\nexport * from './commands/diffWithRef';\nexport * from './commands/diffWithRevision';\nexport * from './commands/diffWithWorking';\nexport * from './commands/externalDiff';\nexport * from './commands/inviteToLiveShare';\nexport * from './commands/openBranchesInRemote';\nexport * from './commands/openBranchInRemote';\nexport * from './commands/openChangedFiles';\nexport * from './commands/openCommitInRemote';\nexport * from './commands/openFileInRemote';\nexport * from './commands/openFileRevision';\nexport * from './commands/openFileRevisionFrom';\nexport * from './commands/openInRemote';\nexport * from './commands/openRepoInRemote';\nexport * from './commands/openWorkingFile';\nexport * from './commands/gitCommands';\nexport * from './commands/repositories';\nexport * from './commands/resetSuppressedWarnings';\nexport * from './commands/searchCommits';\nexport * from './commands/showLastQuickPick';\nexport * from './commands/showQuickBranchHistory';\nexport * from './commands/showQuickCommitDetails';\nexport * from './commands/showQuickCommitFileDetails';\nexport * from './commands/showQuickCurrentBranchHistory';\nexport * from './commands/showQuickFileHistory';\nexport * from './commands/showQuickRepoStatus';\nexport * from './commands/showQuickStashList';\nexport * from './commands/showView';\nexport * from './commands/stashApply';\nexport * from './commands/stashDelete';\nexport * from './commands/stashSave';\nexport * from './commands/supportGitLens';\nexport * from './commands/switchMode';\nexport * from './commands/toggleCodeLens';\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Container } from '../../container';\nimport { GitBranch, GitTrackingState, GitUri } from '../../git/gitService';\nimport { Iterables, Strings } from '../../system';\nimport { ViewWithFiles } from '../viewBase';\nimport { CommitNode } from './commitNode';\nimport { ShowMoreNode } from './common';\nimport { insertDateMarkers } from './helpers';\nimport { PageableViewNode, ResourceType, ViewNode } from './viewNode';\n\nexport interface BranchTrackingStatus {\n    ref: string;\n    repoPath: string;\n    state: GitTrackingState;\n    upstream?: string;\n}\n\nexport class BranchTrackingStatusNode extends ViewNode<ViewWithFiles> implements PageableViewNode {\n    readonly supportsPaging = true;\n    readonly rememberLastMaxCount = true;\n    maxCount: number | undefined = this.view.getNodeLastMaxCount(this);\n\n    constructor(\n        view: ViewWithFiles,\n        parent: ViewNode,\n        public readonly branch: GitBranch,\n        public readonly status: BranchTrackingStatus,\n        public readonly direction: 'ahead' | 'behind',\n        // Specifies that the node is shown as a root under the repository node\n        private readonly _root: boolean = false\n    ) {\n        super(GitUri.fromRepoPath(status.repoPath), view, parent);\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.status.repoPath}):${this._root ? 'root:' : ''}branch(${\n            this.status.ref\n        }):status:upstream:(${this.status.upstream}):${this.direction}`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const ahead = this.direction === 'ahead';\n        const range = ahead\n            ? `${this.status.upstream}..${this.status.ref}`\n            : `${this.status.ref}..${this.status.upstream}`;\n\n        const log = await Container.git.getLog(this.uri.repoPath!, {\n            maxCount: this.maxCount !== undefined ? this.maxCount : this.view.config.defaultItemLimit,\n            ref: range\n        });\n        if (log === undefined) return [];\n\n        let children;\n        if (ahead) {\n            // Since the last commit when we are looking 'ahead' can have no previous (because of the range given) -- look it up\n            const commits = [...log.commits.values()];\n            const commit = commits[commits.length - 1];\n            if (commit.previousSha === undefined) {\n                const previousLog = await Container.git.getLog(this.uri.repoPath!, { maxCount: 2, ref: commit.sha });\n                if (previousLog !== undefined) {\n                    commits[commits.length - 1] = Iterables.first(previousLog.commits.values());\n                }\n            }\n\n            children = [\n                ...insertDateMarkers(\n                    Iterables.map(commits, c => new CommitNode(this.view, this, c, this.branch)),\n                    this,\n                    1\n                )\n            ];\n        }\n        else {\n            children = [\n                ...insertDateMarkers(\n                    Iterables.map(log.commits.values(), c => new CommitNode(this.view, this, c, this.branch)),\n                    this,\n                    1\n                )\n            ];\n        }\n\n        if (log.truncated) {\n            children.push(new ShowMoreNode(this.view, this, 'Commits', log.maxCount, children[children.length - 1]));\n        }\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const ahead = this.direction === 'ahead';\n        const label = ahead\n            ? `${Strings.pluralize('commit', this.status.state.ahead)} ahead`\n            : `${Strings.pluralize('commit', this.status.state.behind)} behind`;\n\n        const item = new TreeItem(label, TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        if (this._root) {\n            item.contextValue = ahead ? ResourceType.StatusAheadOfUpstream : ResourceType.StatusBehindUpstream;\n        }\n        else {\n            item.contextValue = ahead\n                ? ResourceType.BranchStatusAheadOfUpstream\n                : ResourceType.BranchStatusBehindUpstream;\n        }\n        item.tooltip = `${label}${ahead ? ' of ' : ''}${this.status.upstream}`;\n\n        const iconSuffix = ahead ? 'upload' : 'download';\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath(`images/dark/icon-${iconSuffix}.svg`),\n            light: Container.context.asAbsolutePath(`images/light/icon-${iconSuffix}.svg`)\n        };\n\n        return item;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { ViewBranchesLayout } from '../../configuration';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { GitBranch, GitRemoteType, GitUri } from '../../git/gitService';\nimport { debug, gate, Iterables, log } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { BranchTrackingStatusNode } from './branchTrackingStatusNode';\nimport { CommitNode } from './commitNode';\nimport { MessageNode, ShowMoreNode } from './common';\nimport { insertDateMarkers } from './helpers';\nimport { PageableViewNode, ResourceType, ViewNode, ViewRefNode } from './viewNode';\n\nexport class BranchNode extends ViewRefNode<RepositoriesView> implements PageableViewNode {\n    readonly supportsPaging = true;\n    readonly rememberLastMaxCount = true;\n    maxCount: number | undefined = this.view.getNodeLastMaxCount(this);\n\n    private _children: ViewNode[] | undefined;\n\n    constructor(\n        uri: GitUri,\n        view: RepositoriesView,\n        parent: ViewNode,\n        public readonly branch: GitBranch,\n        // Specifies that the node is shown as a root under the repository node\n        private readonly _root: boolean = false\n    ) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.branch.repoPath})${this._root ? ':root' : ''}:branch(${this.branch.name})${\n            this.branch.current ? '+current' : ''\n        }${this.branch.remote ? '+remote' : ''}${this.branch.starred ? '+starred' : ''}`;\n    }\n\n    get current(): boolean {\n        return this.branch.current;\n    }\n\n    get label(): string {\n        const branchName = this.branch.getName();\n        if (this.view.config.branches.layout === ViewBranchesLayout.List) return branchName;\n\n        return (this._root && this.current) || this.branch.detached || this.branch.starred\n            ? branchName\n            : this.branch.getBasename();\n    }\n\n    get ref(): string {\n        return this.branch.ref;\n    }\n\n    get treeHierarchy(): string[] {\n        return this.branch.detached || this.branch.starred ? [this.branch.name] : this.branch.getName().split('/');\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        if (this._children === undefined) {\n            const children = [];\n            if (!this._root && this.branch.tracking) {\n                const status = {\n                    ref: this.branch.ref,\n                    repoPath: this.branch.repoPath,\n                    state: this.branch.state,\n                    upstream: this.branch.tracking\n                };\n\n                if (this.branch.state.behind) {\n                    children.push(new BranchTrackingStatusNode(this.view, this, this.branch, status, 'behind'));\n                }\n\n                if (this.branch.state.ahead) {\n                    children.push(new BranchTrackingStatusNode(this.view, this, this.branch, status, 'ahead'));\n                }\n            }\n\n            const log = await Container.git.getLog(this.uri.repoPath!, {\n                maxCount: this.maxCount !== undefined ? this.maxCount : this.view.config.defaultItemLimit,\n                ref: this.ref\n            });\n            if (log === undefined) return [new MessageNode(this.view, this, 'No commits could be found.')];\n\n            const getBranchAndTagTips = await Container.git.getBranchesAndTagsTipsFn(\n                this.uri.repoPath,\n                this.branch.name\n            );\n            children.push(\n                ...insertDateMarkers(\n                    Iterables.map(\n                        log.commits.values(),\n                        c => new CommitNode(this.view, this, c, this.branch, getBranchAndTagTips)\n                    ),\n                    this\n                )\n            );\n\n            if (log.truncated) {\n                children.push(\n                    new ShowMoreNode(this.view, this, 'Commits', log.maxCount, children[children.length - 1])\n                );\n            }\n\n            this._children = children;\n        }\n        return this._children;\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        const name = this.label;\n        let tooltip = `${this.branch.getName()}${this.current ? ' (current)' : ''}`;\n        let iconSuffix = '';\n\n        let description;\n        if (!this.branch.remote && this.branch.tracking !== undefined) {\n            if (this.view.config.showTrackingBranch) {\n                let arrows = GlyphChars.Dash;\n\n                const remote = await this.branch.getRemote();\n                if (remote !== undefined) {\n                    let left;\n                    let right;\n                    for (const { type } of remote.types) {\n                        if (type === GitRemoteType.Fetch) {\n                            left = true;\n\n                            if (right) break;\n                        }\n                        else if (type === GitRemoteType.Push) {\n                            right = true;\n\n                            if (left) break;\n                        }\n                    }\n\n                    if (left && right) {\n                        arrows = GlyphChars.ArrowsRightLeft;\n                    }\n                    else if (right) {\n                        arrows = GlyphChars.ArrowRight;\n                    }\n                    else if (left) {\n                        arrows = GlyphChars.ArrowLeft;\n                    }\n                }\n\n                description = `${this.branch.getTrackingStatus({ suffix: `${GlyphChars.Space} ` })}${arrows}${\n                    GlyphChars.Space\n                } ${this.branch.tracking}`;\n            }\n            tooltip += ` is tracking ${this.branch.tracking}\\n${this.branch.getTrackingStatus({\n                empty: 'up-to-date',\n                expand: true,\n                separator: '\\n'\n            })}`;\n\n            if (this.branch.state.ahead || this.branch.state.behind) {\n                if (this.branch.state.behind) {\n                    iconSuffix = '-red';\n                }\n                if (this.branch.state.ahead) {\n                    iconSuffix = this.branch.state.behind ? '-yellow' : '-green';\n                }\n            }\n        }\n\n        const item = new TreeItem(\n            // Hide the current branch checkmark when the node is displayed as a root under the repository node\n            `${!this._root && this.current ? `${GlyphChars.Check} ${GlyphChars.Space}` : ''}${name}`,\n            TreeItemCollapsibleState.Collapsed\n        );\n        item.contextValue = ResourceType.Branch;\n        if (this.current) {\n            item.contextValue += '+current';\n        }\n        if (this.branch.remote) {\n            item.contextValue += '+remote';\n        }\n        if (this.branch.starred) {\n            item.contextValue += '+starred';\n        }\n        if (this.branch.tracking) {\n            item.contextValue += '+tracking';\n        }\n\n        item.description = description;\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath(`images/dark/icon-branch${iconSuffix}.svg`),\n            light: Container.context.asAbsolutePath(`images/light/icon-branch${iconSuffix}.svg`)\n        };\n        item.id = this.id;\n        item.tooltip = tooltip;\n\n        return item;\n    }\n\n    @log()\n    async star() {\n        await this.branch.star();\n        void this.parent!.triggerChange();\n    }\n\n    @log()\n    async unstar() {\n        await this.branch.unstar();\n        void this.parent!.triggerChange();\n    }\n\n    @gate()\n    @debug()\n    refresh() {\n        this._children = undefined;\n    }\n}\n","'use strict';\nimport { ThemeIcon, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { GitUri } from '../../git/gitService';\nimport { Arrays } from '../../system';\nimport { View } from '../viewBase';\nimport { BranchNode } from './branchNode';\nimport { TagNode } from './tagNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class BranchOrTagFolderNode extends ViewNode {\n    constructor(\n        view: View,\n        parent: ViewNode,\n        public readonly type: 'branch' | 'remote-branch' | 'tag',\n        public readonly repoPath: string,\n        public readonly folderName: string,\n        public readonly relativePath: string | undefined,\n        public readonly root: Arrays.HierarchicalItem<BranchNode | TagNode>,\n        private readonly _key?: string,\n        private readonly _expanded: boolean = false\n    ) {\n        super(GitUri.fromRepoPath(repoPath), view, parent);\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.repoPath})${this._key === undefined ? '' : `:${this._key}`}:${\n            this.type\n        }-folder(${this.relativePath})`;\n    }\n\n    getChildren(): ViewNode[] {\n        if (this.root.descendants === undefined || this.root.children === undefined) return [];\n\n        const children: (BranchOrTagFolderNode | BranchNode | TagNode)[] = [];\n\n        for (const folder of this.root.children.values()) {\n            if (folder.value === undefined) {\n                // If the folder contains the current branch, expand it by default\n                const expanded =\n                    folder.descendants !== undefined &&\n                    folder.descendants.some(n => n instanceof BranchNode && n.current);\n                children.push(\n                    new BranchOrTagFolderNode(\n                        this.view,\n                        this,\n                        this.type,\n                        this.repoPath,\n                        folder.name,\n                        folder.relativePath,\n                        folder,\n                        this._key,\n                        expanded\n                    )\n                );\n                continue;\n            }\n\n            children.push(folder.value);\n        }\n\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem(\n            this.label,\n            this._expanded ? TreeItemCollapsibleState.Expanded : TreeItemCollapsibleState.Collapsed\n        );\n        item.id = this.id;\n        item.contextValue = ResourceType.Folder;\n        item.iconPath = ThemeIcon.Folder;\n        item.tooltip = this.label;\n        return item;\n    }\n\n    get label(): string {\n        return this.folderName;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { ViewBranchesLayout } from '../../configuration';\nimport { Container } from '../../container';\nimport { GitUri, Repository } from '../../git/gitService';\nimport { Arrays, debug, gate } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { BranchNode } from './branchNode';\nimport { BranchOrTagFolderNode } from './branchOrTagFolderNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class BranchesNode extends ViewNode<RepositoriesView> {\n    private _children: ViewNode[] | undefined;\n\n    constructor(uri: GitUri, view: RepositoriesView, parent: ViewNode, public readonly repo: Repository) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.repo.path}):branches`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        if (this._children === undefined) {\n            const branches = await this.repo.getBranches({\n                // only show local branches\n                filter: b => !b.remote,\n                sort: true\n            });\n            if (branches === undefined) return [];\n\n            const branchNodes = branches.map(b => new BranchNode(this.uri, this.view, this, b));\n            if (this.view.config.branches.layout === ViewBranchesLayout.List) return branchNodes;\n\n            const hierarchy = Arrays.makeHierarchical(\n                branchNodes,\n                n => n.treeHierarchy,\n                (...paths: string[]) => paths.join('/'),\n                this.view.config.files.compact\n            );\n\n            const root = new BranchOrTagFolderNode(\n                this.view,\n                this,\n                'branch',\n                this.repo.path,\n                '',\n                undefined,\n                hierarchy,\n                'branches'\n            );\n            this._children = await root.getChildren();\n        }\n        return this._children;\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        const item = new TreeItem('Branches', TreeItemCollapsibleState.Collapsed);\n        item.contextValue = ResourceType.Branches;\n        if (await this.repo.hasRemotes()) {\n            item.contextValue += '+remotes';\n        }\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-branch.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-branch.svg')\n        };\n        item.id = this.id;\n\n        return item;\n    }\n\n    @gate()\n    @debug()\n    refresh() {\n        this._children = undefined;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { CompareView } from '../compareView';\nimport { CompareNode } from './compareNode';\nimport { ResourceType, unknownGitUri, ViewNode } from './viewNode';\n\nexport class ComparePickerNode extends ViewNode<CompareView> {\n    constructor(view: CompareView, protected readonly parent: CompareNode) {\n        super(unknownGitUri, view, parent);\n    }\n\n    getChildren(): ViewNode[] {\n        return [];\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        const selectedRef = this.parent.selectedRef;\n        const repoPath = selectedRef !== undefined ? selectedRef.repoPath : undefined;\n\n        let description;\n        if (repoPath !== undefined) {\n            if ((await Container.git.getRepositoryCount()) > 1) {\n                const repo = await Container.git.getRepository(repoPath);\n                description = (repo && repo.formattedName) || repoPath;\n            }\n        }\n\n        let item;\n        if (selectedRef === undefined) {\n            item = new TreeItem(\n                'Compare <branch, tag, or ref> with <branch, tag, or ref>',\n                TreeItemCollapsibleState.None\n            );\n            item.contextValue = ResourceType.ComparePicker;\n            item.description = description;\n            item.tooltip = `Click to select or enter a reference for compare${GlyphChars.Ellipsis}`;\n            item.command = {\n                title: `Compare${GlyphChars.Ellipsis}`,\n                command: this.view.getQualifiedCommand('selectForCompare')\n            };\n        }\n        else {\n            item = new TreeItem(\n                `Compare ${selectedRef.label} with <branch, tag, or ref>`,\n                TreeItemCollapsibleState.None\n            );\n            item.contextValue = ResourceType.ComparePickerWithRef;\n            item.description = description;\n            item.tooltip = `Click to compare ${selectedRef.label} with${GlyphChars.Ellipsis}`;\n            item.command = {\n                title: `Compare ${selectedRef.label} with${GlyphChars.Ellipsis}`,\n                command: this.view.getQualifiedCommand('compareWithSelected')\n            };\n        }\n\n        return item;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { getRepoPathOrPrompt } from '../../commands';\nimport { CommandContext, GlyphChars, NamedRef, setCommandContext } from '../../constants';\nimport { GitService } from '../../git/gitService';\nimport { ReferencesQuickPick } from '../../quickpicks';\nimport { debug, gate, Iterables, log, Promises } from '../../system';\nimport { CompareView } from '../compareView';\nimport { MessageNode } from './common';\nimport { ComparePickerNode } from './comparePickerNode';\nimport { ResourceType, unknownGitUri, ViewNode } from './viewNode';\n\ninterface RepoRef {\n    label: string;\n    repoPath: string;\n    ref: string | NamedRef;\n}\n\nexport class CompareNode extends ViewNode<CompareView> {\n    private _children: (ViewNode | MessageNode)[] = [];\n    private _comparePickerNode: ComparePickerNode | undefined;\n\n    constructor(view: CompareView) {\n        super(unknownGitUri, view);\n    }\n\n    private _selectedRef: RepoRef | undefined;\n    get selectedRef(): RepoRef | undefined {\n        return this._selectedRef;\n    }\n\n    getChildren(): ViewNode[] {\n        if (this._children.length === 0) {\n            // Not really sure why I can't reuse this node -- but if I do the Tree errors out with an id already exists error\n            this._comparePickerNode = new ComparePickerNode(this.view, this);\n            this._children = [this._comparePickerNode];\n\n            const pinned = this.view.getPinnedComparisons();\n            if (pinned.length !== 0) {\n                this._children.push(...pinned);\n            }\n        }\n        else if (this._comparePickerNode === undefined || !this._children.includes(this._comparePickerNode)) {\n            // Not really sure why I can't reuse this node -- but if I do the Tree errors out with an id already exists error\n            this._comparePickerNode = new ComparePickerNode(this.view, this);\n            this._children.splice(0, 0, this._comparePickerNode);\n\n            if (this._selectedRef !== undefined) {\n                const node = this._comparePickerNode;\n                setImmediate(() => this.view.reveal(node, { focus: false, select: true }));\n            }\n        }\n\n        return this._children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Compare', TreeItemCollapsibleState.Expanded);\n        item.contextValue = ResourceType.Compare;\n        return item;\n    }\n\n    addOrReplace(results: ViewNode, replace: boolean) {\n        if (this._children.includes(results)) return;\n\n        if (this._children.length !== 0 && replace) {\n            this._children.length = 0;\n            this._children.push(results);\n\n            // Re-add the pinned comparisons\n            const pinned = this.view.getPinnedComparisons();\n            if (pinned.length !== 0) {\n                this._children.push(...pinned);\n            }\n        }\n        else {\n            if (this._comparePickerNode !== undefined) {\n                const index = this._children.indexOf(this._comparePickerNode);\n                if (index !== -1) {\n                    this._children.splice(index, 1);\n                }\n            }\n\n            this._children.splice(0, 0, results);\n        }\n\n        this.view.triggerNodeChange();\n    }\n\n    @log()\n    clear() {\n        this._selectedRef = undefined;\n        setCommandContext(CommandContext.ViewsCanCompare, false);\n\n        this._children.length = 0;\n        this.view.triggerNodeChange();\n    }\n\n    @log({\n        args: { 0: (n: ViewNode) => n.toString() }\n    })\n    dismiss(node: ViewNode) {\n        this._selectedRef = undefined;\n        setCommandContext(CommandContext.ViewsCanCompare, false);\n\n        if (this._children.length !== 0) {\n            const index = this._children.indexOf(node);\n            if (index === -1) return;\n\n            this._children.splice(index, 1);\n        }\n        this.view.triggerNodeChange();\n    }\n\n    @gate()\n    @debug()\n    async refresh() {\n        if (this._children.length === 0) return;\n\n        const promises: Promise<any>[] = [\n            ...Iterables.filterMap(this._children, c => {\n                const result = c.refresh === undefined ? false : c.refresh();\n                return Promises.isPromise<boolean | void>(result) ? result : undefined;\n            })\n        ];\n        await Promise.all(promises);\n    }\n\n    async compareWithSelected(repoPath?: string, ref?: string | NamedRef) {\n        if (this._selectedRef === undefined) return;\n\n        if (repoPath === undefined) {\n            repoPath = this._selectedRef.repoPath;\n        }\n        else if (repoPath !== this._selectedRef.repoPath) {\n            // If we don't have a matching repoPath, then start over\n            void this.selectForCompare(repoPath, ref);\n\n            return;\n        }\n\n        if (ref === undefined) {\n            const pick = await new ReferencesQuickPick(repoPath).show(\n                `Compare ${this.getRefName(this._selectedRef.ref)} with${GlyphChars.Ellipsis}`,\n                {\n                    allowEnteringRefs: true,\n                    checked:\n                        typeof this._selectedRef.ref === 'string' ? this._selectedRef.ref : this._selectedRef.ref.ref,\n                    checkmarks: true\n                }\n            );\n            if (pick === undefined) {\n                await this.view.show();\n                await this.view.reveal(this._comparePickerNode!, { focus: true, select: true });\n\n                return;\n            }\n\n            ref = pick.ref;\n        }\n\n        const ref1 = this._selectedRef;\n\n        this._selectedRef = undefined;\n        setCommandContext(CommandContext.ViewsCanCompare, false);\n\n        void (await this.view.compare(repoPath, ref1.ref, ref));\n    }\n\n    async selectForCompare(repoPath?: string, ref?: string | NamedRef) {\n        if (repoPath === undefined) {\n            repoPath = await getRepoPathOrPrompt(`Compare in which repository${GlyphChars.Ellipsis}`);\n        }\n        if (repoPath === undefined) {\n            await this.view.show();\n            await this.view.reveal(this._comparePickerNode!, { focus: true, select: true });\n\n            return;\n        }\n\n        let autoCompare = false;\n        if (ref === undefined) {\n            const pick = await new ReferencesQuickPick(repoPath).show(`Compare${GlyphChars.Ellipsis}`, {\n                allowEnteringRefs: true,\n                checkmarks: false\n            });\n            if (pick === undefined) {\n                await this.view.show();\n                await this.view.reveal(this._comparePickerNode!, { focus: true, select: true });\n\n                return;\n            }\n\n            ref = pick.ref;\n\n            autoCompare = true;\n        }\n\n        this._selectedRef = { label: this.getRefName(ref), repoPath: repoPath, ref: ref };\n        setCommandContext(CommandContext.ViewsCanCompare, true);\n\n        void (await this.triggerChange());\n        await this.view.reveal(this._comparePickerNode!, { focus: true, select: true });\n\n        if (autoCompare) {\n            void (await this.compareWithSelected());\n        }\n    }\n\n    private getRefName(ref: string | NamedRef) {\n        return typeof ref === 'string' ? GitService.shortenSha(ref)! : ref.label || GitService.shortenSha(ref.ref)!;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { NamedRef } from '../../constants';\nimport { Container } from '../../container';\nimport { GitService, GitUri } from '../../git/gitService';\nimport { debug, gate, log, Strings } from '../../system';\nimport { CompareView } from '../compareView';\nimport { CommitsQueryResults, ResultsCommitsNode } from './resultsCommitsNode';\nimport { FilesQueryResults, ResultsFilesNode } from './resultsFilesNode';\nimport { ResourceType, SubscribeableViewNode, ViewNode } from './viewNode';\n\nlet instanceId = 0;\n\nexport class CompareResultsNode extends SubscribeableViewNode<CompareView> {\n    private _children: ViewNode[] | undefined;\n    private _instanceId: number;\n\n    constructor(\n        view: CompareView,\n        public readonly repoPath: string,\n        private _ref: NamedRef,\n        private _compareWith: NamedRef,\n        private _pinned: boolean = false,\n        private _comparisonNotation?: '...' | '..'\n    ) {\n        super(GitUri.fromRepoPath(repoPath), view);\n        this._instanceId = instanceId++;\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.repoPath}):compare(${this._ref.ref}:${this._compareWith.ref})|${this._instanceId}`;\n    }\n\n    get pinned(): boolean {\n        return this._pinned;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        if (this._children === undefined) {\n            const [ref1, ref2] = await this.getDiffRefs();\n\n            this._children = [\n                new ResultsCommitsNode(\n                    this.view,\n                    this,\n                    this.uri.repoPath!,\n                    'commits',\n                    this.getCommitsQuery.bind(this),\n                    {\n                        expand: false,\n                        includeDescription: true\n                    }\n                ),\n                new ResultsFilesNode(this.view, this, this.uri.repoPath!, ref1, ref2, this.getFilesQuery.bind(this))\n            ];\n        }\n        return this._children;\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        let description;\n        if ((await Container.git.getRepositoryCount()) > 1) {\n            const repo = await Container.git.getRepository(this.uri.repoPath!);\n            description = (repo && repo.formattedName) || this.uri.repoPath;\n        }\n\n        const item = new TreeItem(\n            `Comparing ${this._ref.label || GitService.shortenSha(this._ref.ref, { working: 'Working Tree' })} to ${this\n                ._compareWith.label || GitService.shortenSha(this._compareWith.ref, { working: 'Working Tree' })}`,\n            this._state || TreeItemCollapsibleState.Collapsed\n        );\n        item.contextValue = `${ResourceType.CompareResults}+${\n            this.comparisonNotation === '..' ? 'twodot' : 'threedot'\n        }`;\n        if (this._pinned) {\n            item.contextValue += '+pinned';\n        }\n\n        item.description = description;\n        if (this._pinned) {\n            item.iconPath = {\n                dark: Container.context.asAbsolutePath('images/dark/icon-pin-small.svg'),\n                light: Container.context.asAbsolutePath('images/light/icon-pin-small.svg')\n            };\n        }\n\n        return item;\n    }\n\n    canDismiss(): boolean {\n        return !this._pinned;\n    }\n\n    @gate()\n    @debug()\n    async getDiffRefs(): Promise<[string, string]> {\n        if (this.comparisonNotation === '..') {\n            return [\n                (await Container.git.getMergeBase(this.repoPath, this._compareWith.ref, this._ref.ref)) ||\n                    this._compareWith.ref,\n                this._ref.ref\n            ];\n        }\n\n        return [this._compareWith.ref, this._ref.ref];\n    }\n\n    @log()\n    async pin() {\n        if (this._pinned) return;\n\n        await this.view.updatePinnedComparison(this.getPinnableId(), {\n            path: this.repoPath,\n            ref1: this._ref,\n            ref2: this._compareWith,\n            notation: this._comparisonNotation\n        });\n\n        this._pinned = true;\n        void this.triggerChange();\n    }\n\n    @gate()\n    @debug()\n    refresh(reset: boolean = false) {\n        if (!reset) return;\n\n        this._children = undefined;\n    }\n\n    @log()\n    async setComparisonNotation(comparisonNotation: '...' | '..') {\n        this._comparisonNotation = comparisonNotation;\n\n        if (this._pinned) {\n            await this.view.updatePinnedComparison(this.getPinnableId(), {\n                path: this.repoPath,\n                ref1: this._ref,\n                ref2: this._compareWith,\n                notation: this._comparisonNotation\n            });\n        }\n\n        this._children = undefined;\n        this.view.triggerNodeChange(this);\n    }\n\n    @log()\n    async swap() {\n        // Save the current id so we can update it later\n        const currentId = this.getPinnableId();\n\n        const ref1 = this._ref;\n        this._ref = this._compareWith;\n        this._compareWith = ref1;\n\n        // If we were pinned, remove the existing pin and save a new one\n        if (this._pinned) {\n            await this.view.updatePinnedComparison(currentId);\n            await this.view.updatePinnedComparison(this.getPinnableId(), {\n                path: this.repoPath,\n                ref1: this._ref,\n                ref2: this._compareWith,\n                notation: this._comparisonNotation\n            });\n        }\n\n        this._children = undefined;\n        this.view.triggerNodeChange(this);\n    }\n\n    @log()\n    async unpin() {\n        if (!this._pinned) return;\n\n        await this.view.updatePinnedComparison(this.getPinnableId());\n\n        this._pinned = false;\n        void this.triggerChange();\n    }\n\n    protected subscribe() {\n        return undefined;\n    }\n\n    private get comparisonNotation() {\n        return this._comparisonNotation || (Container.config.advanced.useSymmetricDifferenceNotation ? '...' : '..');\n    }\n\n    private get diffComparisonNotation() {\n        // In git diff the range syntax doesn't mean the same thing as with git log -- since git diff is about comparing endpoints not ranges\n        // see https://git-scm.com/docs/git-diff#Documentation/git-diff.txt-emgitdiffemltoptionsgtltcommitgtltcommitgt--ltpathgt82308203\n        // So inverting the range syntax should be about equivalent for the behavior we want\n        return this.comparisonNotation === '...' ? '..' : '...';\n    }\n\n    private async getCommitsQuery(maxCount: number | undefined): Promise<CommitsQueryResults> {\n        const log = await Container.git.getLog(this.uri.repoPath!, {\n            maxCount: maxCount,\n            ref: `${this._compareWith.ref || 'HEAD'}${this.comparisonNotation}${this._ref.ref}`\n        });\n\n        const count = log !== undefined ? log.count : 0;\n        const truncated = log !== undefined ? log.truncated : false;\n\n        return {\n            label: Strings.pluralize('commit', count, { number: truncated ? `${count}+` : undefined, zero: 'No' }),\n            log: log\n        };\n    }\n\n    private async getFilesQuery(): Promise<FilesQueryResults> {\n        const diff = await Container.git.getDiffStatus(\n            this.uri.repoPath!,\n            `${this._compareWith.ref || 'HEAD'}${this.diffComparisonNotation}${this._ref.ref || 'HEAD'}`\n        );\n\n        return {\n            label: `${Strings.pluralize('file', diff !== undefined ? diff.length : 0, { zero: 'No' })} changed`,\n            diff: diff\n        };\n    }\n\n    private getPinnableId() {\n        return Strings.sha1(`${this.repoPath}|${this._ref.ref}|${this._compareWith.ref}`);\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { GitContributor, GitUri } from '../../git/gitService';\nimport { Iterables, Strings } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { PageableViewNode, ResourceType, ViewNode } from './viewNode';\nimport { Container } from '../../container';\nimport { MessageNode, ShowMoreNode } from './common';\nimport { insertDateMarkers } from './helpers';\nimport { CommitNode } from './commitNode';\nimport { GlyphChars } from '../../constants';\n\nexport class ContributorNode extends ViewNode<RepositoriesView> implements PageableViewNode {\n    readonly supportsPaging = true;\n    readonly rememberLastMaxCount = true;\n    maxCount: number | undefined = this.view.getNodeLastMaxCount(this);\n\n    constructor(uri: GitUri, view: RepositoriesView, parent: ViewNode, public readonly contributor: GitContributor) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.contributor.repoPath}):contributor(${this.contributor.name}|${this.contributor.email}}`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const log = await Container.git.getLog(this.uri.repoPath!, {\n            maxCount: this.maxCount !== undefined ? this.maxCount : this.view.config.defaultItemLimit,\n            authors: [`^${this.contributor.name} <${this.contributor.email}>$`]\n        });\n        if (log === undefined) return [new MessageNode(this.view, this, 'No commits could be found.')];\n\n        const getBranchAndTagTips = await Container.git.getBranchesAndTagsTipsFn(this.uri.repoPath);\n        const children = [\n            ...insertDateMarkers(\n                Iterables.map(\n                    log.commits.values(),\n                    c => new CommitNode(this.view, this, c, undefined, getBranchAndTagTips)\n                ),\n                this\n            )\n        ];\n\n        if (log.truncated) {\n            children.push(new ShowMoreNode(this.view, this, 'Commits', log.maxCount, children[children.length - 1]));\n        }\n        return children;\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        const presence = await Container.vsls.getContactPresence(this.contributor.email);\n\n        const item = new TreeItem(this.contributor.name, TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        item.contextValue = ResourceType.Contributor;\n        item.description = `${\n            presence != null && presence.status !== 'offline'\n                ? `${presence.statusText} ${GlyphChars.Space}${GlyphChars.Dot}${GlyphChars.Space} `\n                : ''\n        }${this.contributor.email}`;\n        item.tooltip = `${this.contributor.name}${presence != null ? ` (${presence.statusText})` : ''}\\n${\n            this.contributor.email\n        }\\n${Strings.pluralize('commit', this.contributor.count)}`;\n\n        if (this.view.config.avatars) {\n            item.iconPath = this.contributor.getGravatarUri(Container.config.defaultGravatarsStyle);\n        }\n\n        return item;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { GitUri, Repository } from '../../git/gitService';\nimport { RepositoriesView } from '../repositoriesView';\nimport { MessageNode } from './common';\nimport { ContributorNode } from './contributorNode';\nimport { ResourceType, ViewNode } from './viewNode';\nimport { Container } from '../../container';\n\nexport class ContributorsNode extends ViewNode<RepositoriesView> {\n    constructor(uri: GitUri, view: RepositoriesView, parent: ViewNode, public readonly repo: Repository) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.repo.path}):contributors`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const contributors = await this.repo.getContributors();\n        if (contributors.length === 0) return [new MessageNode(this.view, this, 'No contributors could be found.')];\n\n        contributors.sort((a, b) => b.count - a.count);\n\n        const children = contributors.map(c => new ContributorNode(this.uri, this.view, this, c));\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Contributors', TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        item.contextValue = ResourceType.Contributors;\n\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-people.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-people.svg')\n        };\n\n        return item;\n    }\n}\n","'use strict';\nimport { Disposable, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Container } from '../../container';\nimport {\n    GitCommitType,\n    GitLogCommit,\n    GitService,\n    GitUri,\n    RepositoryChange,\n    RepositoryChangeEvent,\n    RepositoryFileSystemChangeEvent\n} from '../../git/gitService';\nimport { Logger } from '../../logger';\nimport { debug, Iterables } from '../../system';\nimport { View } from '../viewBase';\nimport { CommitFileNode } from './commitFileNode';\nimport { MessageNode, ShowMoreNode } from './common';\nimport { insertDateMarkers } from './helpers';\nimport { PageableViewNode, ResourceType, SubscribeableViewNode, ViewNode } from './viewNode';\n\nexport class FileHistoryNode extends SubscribeableViewNode implements PageableViewNode {\n    readonly supportsPaging = true;\n    maxCount: number | undefined;\n\n    constructor(uri: GitUri, view: View, parent: ViewNode) {\n        super(uri, view, parent);\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const children: ViewNode[] = [];\n\n        if (this.uri.sha === undefined) {\n            const status = await Container.git.getStatusForFile(this.uri.repoPath!, this.uri.fsPath);\n            if (status !== undefined && (status.indexStatus !== undefined || status.workingTreeStatus !== undefined)) {\n                let sha;\n                let previousSha;\n                if (status.workingTreeStatus !== undefined) {\n                    sha = GitService.uncommittedSha;\n                    if (status.indexStatus !== undefined) {\n                        previousSha = GitService.uncommittedStagedSha;\n                    }\n                    else if (status.workingTreeStatus !== '?') {\n                        previousSha = 'HEAD';\n                    }\n                }\n                else {\n                    sha = GitService.uncommittedStagedSha;\n                    previousSha = 'HEAD';\n                }\n\n                const user = await Container.git.getCurrentUser(this.uri.repoPath!);\n                const commit = new GitLogCommit(\n                    GitCommitType.LogFile,\n                    this.uri.repoPath!,\n                    sha,\n                    'You',\n                    user !== undefined ? user.email : undefined,\n                    new Date(),\n                    new Date(),\n                    '',\n                    status.fileName,\n                    [status],\n                    status.status,\n                    status.originalFileName,\n                    previousSha,\n                    status.originalFileName || status.fileName\n                );\n                children.push(\n                    new CommitFileNode(this.view, this, status, commit, { displayAsCommit: true, inFileHistory: true })\n                );\n            }\n        }\n\n        const log = await Container.git.getLogForFile(this.uri.repoPath, this.uri.fsPath, {\n            maxCount: this.maxCount !== undefined ? this.maxCount : undefined,\n            ref: this.uri.sha\n        });\n        if (log !== undefined) {\n            children.push(\n                ...insertDateMarkers(\n                    Iterables.map(\n                        log.commits.values(),\n                        c =>\n                            new CommitFileNode(this.view, this, c.files[0], c, {\n                                displayAsCommit: true,\n                                inFileHistory: true\n                            })\n                    ),\n                    this\n                )\n            );\n\n            if (log.truncated) {\n                children.push(\n                    new ShowMoreNode(this.view, this, 'Commits', log.maxCount, children[children.length - 1])\n                );\n            }\n        }\n\n        if (children.length === 0) return [new MessageNode(this.view, this, 'No file history could be found.')];\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem(\n            `${this.uri.fileName}${\n                this.uri.sha\n                    ? ` ${\n                          this.uri.sha === GitService.deletedOrMissingSha ? this.uri.shortSha : `(${this.uri.shortSha})`\n                      }`\n                    : ''\n            }`,\n            TreeItemCollapsibleState.Expanded\n        );\n        item.contextValue = ResourceType.FileHistory;\n        item.description = this.uri.directory;\n        item.tooltip = `History of ${this.uri.fileName}\\n${this.uri.directory}/${\n            this.uri.sha === undefined ? '' : `\\n\\n${this.uri.sha}`\n        }`;\n\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-history.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-history.svg')\n        };\n\n        void this.ensureSubscription();\n\n        return item;\n    }\n\n    @debug()\n    protected async subscribe() {\n        const repo = await Container.git.getRepository(this.uri);\n        if (repo === undefined) return undefined;\n\n        const subscription = Disposable.from(\n            repo.onDidChange(this.onRepoChanged, this),\n            repo.onDidChangeFileSystem(this.onRepoFileSystemChanged, this),\n            { dispose: () => repo.stopWatchingFileSystem() }\n        );\n\n        repo.startWatchingFileSystem();\n\n        return subscription;\n    }\n\n    private onRepoChanged(e: RepositoryChangeEvent) {\n        if (!e.changed(RepositoryChange.Repository)) return;\n\n        Logger.log(`FileHistoryNode.onRepoChanged(${e.changes.join()}); triggering node refresh`);\n\n        void this.triggerChange();\n    }\n\n    private onRepoFileSystemChanged(e: RepositoryFileSystemChangeEvent) {\n        if (!e.uris.some(uri => uri.toString(true) === this.uri.toString(true))) return;\n\n        Logger.debug(\n            `FileHistoryNode${this.id}.onRepoFileSystemChanged(${this.uri.toString(true)}); triggering node refresh`\n        );\n\n        void this.triggerChange();\n    }\n}\n","'use strict';\nimport { Disposable, TextEditor, TreeItem, TreeItemCollapsibleState, window } from 'vscode';\nimport { UriComparer } from '../../comparers';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { GitCommitish, GitUri } from '../../git/gitService';\nimport { Logger } from '../../logger';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../../quickpicks';\nimport { debug, Functions, gate, log } from '../../system';\nimport { FileHistoryView } from '../fileHistoryView';\nimport { MessageNode } from './common';\nimport { FileHistoryNode } from './fileHistoryNode';\nimport { ResourceType, SubscribeableViewNode, unknownGitUri, ViewNode } from './viewNode';\n\nexport class FileHistoryTrackerNode extends SubscribeableViewNode<FileHistoryView> {\n    private _baseRef: string | undefined;\n    private _fileUri: GitUri | undefined;\n    private _child: FileHistoryNode | undefined;\n\n    constructor(view: FileHistoryView) {\n        super(unknownGitUri, view);\n    }\n\n    dispose() {\n        super.dispose();\n\n        this.resetChild();\n    }\n\n    @debug()\n    private resetChild() {\n        if (this._child === undefined) return;\n\n        this._child.dispose();\n        this._child = undefined;\n    }\n\n    getChildren(): ViewNode[] {\n        if (this._child === undefined) {\n            if (this._fileUri === undefined && this.uri === unknownGitUri) {\n                return [\n                    new MessageNode(\n                        this.view,\n                        this,\n                        'There are no editors open that can provide file history information.'\n                    )\n                ];\n            }\n\n            const uri = this._fileUri || this.uri;\n            const commitish: GitCommitish = { ...uri, repoPath: uri.repoPath!, sha: this._baseRef || uri.sha };\n            const fileUri = new GitUri(uri, commitish);\n            this._child = new FileHistoryNode(fileUri, this.view, this);\n        }\n\n        return [this._child];\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('File History', TreeItemCollapsibleState.Expanded);\n        item.contextValue = ResourceType.ActiveFileHistory;\n\n        void this.ensureSubscription();\n\n        return item;\n    }\n\n    @gate()\n    @log()\n    async changeBase() {\n        const pick = await new ReferencesQuickPick(this.uri.repoPath!).show(\n            `Change the file history base to${GlyphChars.Ellipsis}`,\n            {\n                allowEnteringRefs: true,\n                checked: this._baseRef,\n                checkmarks: true\n            }\n        );\n        if (pick === undefined || pick instanceof CommandQuickPickItem) return;\n\n        this._baseRef = pick.current ? undefined : pick.ref;\n        if (this._child === undefined) return;\n\n        this._uri = unknownGitUri;\n        await this.triggerChange();\n    }\n\n    @gate()\n    @debug({\n        exit: r => `returned ${r}`\n    })\n    async refresh(reset: boolean = false) {\n        const cc = Logger.getCorrelationContext();\n\n        if (reset) {\n            this._uri = unknownGitUri;\n            this.resetChild();\n        }\n\n        const editor = window.activeTextEditor;\n        if (editor == null || !Container.git.isTrackable(editor.document.uri)) {\n            if (\n                this.uri === unknownGitUri ||\n                (Container.git.isTrackable(this.uri) &&\n                    window.visibleTextEditors.some(e => e.document && UriComparer.equals(e.document.uri, this.uri)))\n            ) {\n                return true;\n            }\n\n            this._uri = unknownGitUri;\n            this.resetChild();\n\n            if (cc !== undefined) {\n                cc.exitDetails = `, uri=${Logger.toLoggable(this._uri)}`;\n            }\n            return false;\n        }\n\n        if (UriComparer.equals(editor!.document.uri, this.uri)) {\n            if (cc !== undefined) {\n                cc.exitDetails = `, uri=${Logger.toLoggable(this._uri)}`;\n            }\n            return true;\n        }\n\n        let gitUri = await GitUri.fromUri(editor!.document.uri);\n\n        let uri;\n        if (gitUri.sha !== undefined) {\n            // If we have a sha, normalize the history to the working file (so we get a full history all the time)\n            const workingUri = await Container.git.getWorkingUri(gitUri.repoPath!, gitUri);\n            if (workingUri !== undefined) {\n                uri = workingUri;\n            }\n        }\n\n        if (this.uri !== unknownGitUri && UriComparer.equals(uri || gitUri, this.uri)) {\n            return true;\n        }\n\n        if (uri !== undefined) {\n            gitUri = await GitUri.fromUri(uri);\n        }\n\n        this._uri = gitUri;\n        this.resetChild();\n\n        if (cc !== undefined) {\n            cc.exitDetails = `, uri=${Logger.toLoggable(this._uri)}`;\n        }\n        return false;\n    }\n\n    @log()\n    setEditorFollowing(enabled: boolean) {\n        if (enabled && this._fileUri !== undefined) {\n            this._fileUri = undefined;\n            this._baseRef = undefined;\n\n            this._uri = unknownGitUri;\n            // Don't need to call triggerChange here, since canSubscribe will do it\n        }\n\n        this.canSubscribe = enabled;\n    }\n\n    @log()\n    async showHistoryForUri(uri: GitUri, baseRef?: string) {\n        this._fileUri = uri;\n        this._baseRef = baseRef;\n\n        this._uri = unknownGitUri;\n        await this.triggerChange();\n    }\n\n    @debug()\n    protected subscribe() {\n        return Disposable.from(\n            window.onDidChangeActiveTextEditor(Functions.debounce(this.onActiveEditorChanged, 500), this)\n        );\n    }\n\n    @debug({ args: false })\n    private onActiveEditorChanged(editor: TextEditor | undefined) {\n        void this.triggerChange();\n    }\n}\n","'use strict';\nimport { Disposable, Selection, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Container } from '../../container';\nimport { GitCommitType, GitFile, GitLogCommit } from '../../git/git';\nimport {\n    GitService,\n    GitUri,\n    RepositoryChange,\n    RepositoryChangeEvent,\n    RepositoryFileSystemChangeEvent\n} from '../../git/gitService';\nimport { Logger } from '../../logger';\nimport { debug, Iterables } from '../../system';\nimport { View } from '../viewBase';\nimport { CommitFileNode } from './commitFileNode';\nimport { MessageNode, ShowMoreNode } from './common';\nimport { insertDateMarkers } from './helpers';\nimport { PageableViewNode, ResourceType, SubscribeableViewNode, ViewNode } from './viewNode';\n\nexport class LineHistoryNode extends SubscribeableViewNode implements PageableViewNode {\n    readonly supportsPaging = true;\n    maxCount: number | undefined;\n\n    constructor(\n        uri: GitUri,\n        view: View,\n        parent: ViewNode,\n        public readonly selection: Selection,\n        private readonly _editorContents: string | undefined\n    ) {\n        super(uri, view, parent);\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const children: ViewNode[] = [];\n\n        let selection = this.selection;\n\n        if (this.uri.sha === undefined) {\n            // Check for any uncommitted changes in the range\n            const blame = this._editorContents\n                ? await Container.git.getBlameForRangeContents(this.uri, selection, this._editorContents)\n                : await Container.git.getBlameForRange(this.uri, selection);\n            if (blame !== undefined) {\n                for (const commit of blame.commits.values()) {\n                    if (!commit.isUncommitted) continue;\n\n                    const file: GitFile = {\n                        fileName: commit.fileName,\n                        indexStatus: '?',\n                        originalFileName: commit.originalFileName,\n                        repoPath: this.uri.repoPath!,\n                        status: 'M',\n                        workingTreeStatus: '?'\n                    };\n\n                    const uncommitted = new GitLogCommit(\n                        GitCommitType.LogFile,\n                        this.uri.repoPath!,\n                        commit.sha,\n                        'You',\n                        commit.email,\n                        commit.authorDate,\n                        commit.committerDate,\n                        commit.message,\n                        commit.fileName,\n                        [file],\n                        'M',\n                        commit.originalFileName,\n                        commit.previousSha,\n                        commit.originalFileName || commit.fileName\n                    );\n\n                    const firstLine = blame.lines[0];\n                    const lastLine = blame.lines[blame.lines.length - 1];\n\n                    // Since there could be a change in the line numbers, update the selection\n                    const firstActive = selection.active.line === firstLine.line - 1;\n                    selection = new Selection(\n                        (firstActive ? lastLine : firstLine).originalLine - 1,\n                        selection.anchor.character,\n                        (firstActive ? firstLine : lastLine).originalLine - 1,\n                        selection.active.character\n                    );\n\n                    children.splice(\n                        0,\n                        0,\n                        new CommitFileNode(this.view, this, file, uncommitted, {\n                            displayAsCommit: true,\n                            inFileHistory: true,\n                            selection: selection\n                        })\n                    );\n\n                    break;\n                }\n            }\n        }\n\n        const log = await Container.git.getLogForFile(this.uri.repoPath, this.uri.fsPath, {\n            maxCount: this.maxCount !== undefined ? this.maxCount : undefined,\n            ref: this.uri.sha,\n            range: selection\n        });\n        if (log !== undefined) {\n            children.push(\n                ...insertDateMarkers(\n                    Iterables.filterMap(\n                        log.commits.values(),\n                        c =>\n                            new CommitFileNode(this.view, this, c.files[0], c, {\n                                displayAsCommit: true,\n                                inFileHistory: true,\n                                selection: selection\n                            })\n                    ),\n                    this\n                )\n            );\n\n            if (log.truncated) {\n                children.push(\n                    new ShowMoreNode(this.view, this, 'Commits', log.maxCount, children[children.length - 1])\n                );\n            }\n        }\n\n        if (children.length === 0) return [new MessageNode(this.view, this, 'No line history could be found.')];\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const lines = this.selection.isSingleLine\n            ? ` #${this.selection.start.line + 1}`\n            : ` #${this.selection.start.line + 1}-${this.selection.end.line + 1}`;\n        const item = new TreeItem(\n            `${this.uri.fileName}${lines}${\n                this.uri.sha\n                    ? ` ${\n                          this.uri.sha === GitService.deletedOrMissingSha ? this.uri.shortSha : `(${this.uri.shortSha})`\n                      }`\n                    : ''\n            }`,\n            TreeItemCollapsibleState.Expanded\n        );\n        item.contextValue = ResourceType.LineHistory;\n        item.description = this.uri.directory;\n        item.tooltip = `History of ${this.uri.fileName}${lines}\\n${this.uri.directory}/${\n            this.uri.sha === undefined ? '' : `\\n\\n${this.uri.sha}`\n        }`;\n\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-history.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-history.svg')\n        };\n\n        void this.ensureSubscription();\n\n        return item;\n    }\n\n    @debug()\n    protected async subscribe() {\n        const repo = await Container.git.getRepository(this.uri);\n        if (repo === undefined) return undefined;\n\n        const subscription = Disposable.from(\n            repo.onDidChange(this.onRepoChanged, this),\n            repo.onDidChangeFileSystem(this.onRepoFileSystemChanged, this),\n            { dispose: () => repo.stopWatchingFileSystem() }\n        );\n\n        repo.startWatchingFileSystem();\n\n        return subscription;\n    }\n\n    private onRepoChanged(e: RepositoryChangeEvent) {\n        if (!e.changed(RepositoryChange.Repository)) return;\n\n        Logger.log(`LineHistoryNode.onRepoChanged(${e.changes.join()}); triggering node refresh`);\n\n        void this.triggerChange();\n    }\n\n    private onRepoFileSystemChanged(e: RepositoryFileSystemChangeEvent) {\n        if (!e.uris.some(uri => uri.toString(true) === this.uri.toString(true))) return;\n\n        Logger.debug(`LineHistoryNode.onRepoFileSystemChanged(${this.uri.toString(true)}); triggering node refresh`);\n\n        void this.triggerChange();\n    }\n}\n","'use strict';\nimport { Disposable, Selection, TreeItem, TreeItemCollapsibleState, window } from 'vscode';\nimport { UriComparer } from '../../comparers';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { GitCommitish, GitUri } from '../../git/gitService';\nimport { Logger } from '../../logger';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../../quickpicks';\nimport { debug, Functions, gate, log } from '../../system';\nimport { LinesChangeEvent } from '../../trackers/gitLineTracker';\nimport { LineHistoryView } from '../lineHistoryView';\nimport { MessageNode } from './common';\nimport { LineHistoryNode } from './lineHistoryNode';\nimport { ResourceType, SubscribeableViewNode, unknownGitUri, ViewNode } from './viewNode';\n\nexport class LineHistoryTrackerNode extends SubscribeableViewNode<LineHistoryView> {\n    private _base: string | undefined;\n    private _child: LineHistoryNode | undefined;\n    private _editorContents: string | undefined;\n    private _selection: Selection | undefined;\n\n    constructor(view: LineHistoryView) {\n        super(unknownGitUri, view);\n    }\n\n    dispose() {\n        super.dispose();\n\n        this.resetChild();\n    }\n\n    @debug()\n    private resetChild() {\n        if (this._child === undefined) return;\n\n        this._child.dispose();\n        this._child = undefined;\n    }\n\n    getChildren(): ViewNode[] {\n        if (this._child === undefined) {\n            if (this.uri === unknownGitUri) {\n                return [\n                    new MessageNode(\n                        this.view,\n                        this,\n                        'There are no editors open that can provide line history information.'\n                    )\n                ];\n            }\n\n            const commitish: GitCommitish = {\n                ...this.uri,\n                repoPath: this.uri.repoPath!,\n                sha: this.uri.sha || this._base\n            };\n            const fileUri = new GitUri(this.uri, commitish);\n            this._child = new LineHistoryNode(fileUri, this.view, this, this._selection!, this._editorContents);\n        }\n\n        return [this._child];\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Line History', TreeItemCollapsibleState.Expanded);\n        item.contextValue = ResourceType.ActiveLineHistory;\n\n        void this.ensureSubscription();\n\n        return item;\n    }\n\n    @gate()\n    @log()\n    async changeBase() {\n        const pick = await new ReferencesQuickPick(this.uri.repoPath!).show(\n            `Change the line history base to${GlyphChars.Ellipsis}`,\n            {\n                allowEnteringRefs: true,\n                checked: this._base,\n                checkmarks: true\n            }\n        );\n        if (pick === undefined || pick instanceof CommandQuickPickItem) return;\n\n        this._base = pick.current ? undefined : pick.ref;\n        if (this._child === undefined) return;\n\n        this._uri = unknownGitUri;\n        await this.triggerChange();\n    }\n\n    @gate()\n    @debug({\n        exit: r => `returned ${r}`\n    })\n    async refresh(reset: boolean = false) {\n        const cc = Logger.getCorrelationContext();\n\n        if (reset) {\n            this._uri = unknownGitUri;\n            this._editorContents = undefined;\n            this._selection = undefined;\n            this.resetChild();\n        }\n\n        const editor = window.activeTextEditor;\n        if (editor == null || !Container.git.isTrackable(editor.document.uri)) {\n            if (\n                this.uri === unknownGitUri ||\n                (Container.git.isTrackable(this.uri) &&\n                    window.visibleTextEditors.some(e => e.document && UriComparer.equals(e.document.uri, this.uri)))\n            ) {\n                return true;\n            }\n\n            this._uri = unknownGitUri;\n            this._editorContents = undefined;\n            this._selection = undefined;\n            this.resetChild();\n\n            if (cc !== undefined) {\n                cc.exitDetails = `, uri=${Logger.toLoggable(this._uri)}`;\n            }\n            return false;\n        }\n\n        if (\n            UriComparer.equals(editor!.document.uri, this.uri) &&\n            (this._selection !== undefined && editor.selection.isEqual(this._selection))\n        ) {\n            if (cc !== undefined) {\n                cc.exitDetails = `, uri=${Logger.toLoggable(this._uri)}`;\n            }\n            return true;\n        }\n\n        const gitUri = await GitUri.fromUri(editor!.document.uri);\n\n        if (\n            this.uri !== unknownGitUri &&\n            UriComparer.equals(gitUri, this.uri) &&\n            (this._selection !== undefined && editor.selection.isEqual(this._selection))\n        ) {\n            return true;\n        }\n\n        this._uri = gitUri;\n        this._editorContents = editor.document.isDirty ? editor.document.getText() : undefined;\n        this._selection = editor.selection;\n        this.resetChild();\n\n        if (cc !== undefined) {\n            cc.exitDetails = `, uri=${Logger.toLoggable(this._uri)}`;\n        }\n        return false;\n    }\n\n    @log()\n    setEditorFollowing(enabled: boolean) {\n        this.canSubscribe = enabled;\n    }\n\n    @debug()\n    protected subscribe() {\n        if (Container.lineTracker.isSubscribed(this)) return undefined;\n\n        const onActiveLinesChanged = Functions.debounce(this.onActiveLinesChanged.bind(this), 250);\n\n        return Container.lineTracker.start(\n            this,\n            Disposable.from(\n                Container.lineTracker.onDidChangeActiveLines((e: LinesChangeEvent) => {\n                    if (e.pending) return;\n\n                    onActiveLinesChanged(e);\n                })\n            )\n        );\n    }\n\n    @debug({ args: false })\n    private onActiveLinesChanged(e: LinesChangeEvent) {\n        void this.triggerChange();\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { GitReflogRecord, GitUri } from '../../git/gitService';\nimport { Iterables } from '../../system';\nimport { ViewWithFiles } from '../viewBase';\nimport { CommitNode } from './commitNode';\nimport { MessageNode, ShowMoreNode } from './common';\nimport { PageableViewNode, ResourceType, ViewNode } from './viewNode';\n\nexport class ReflogRecordNode extends ViewNode<ViewWithFiles> implements PageableViewNode {\n    readonly supportsPaging = true;\n    readonly rememberLastMaxCount = true;\n    maxCount: number | undefined = this.view.getNodeLastMaxCount(this);\n\n    constructor(view: ViewWithFiles, parent: ViewNode, public readonly record: GitReflogRecord) {\n        super(GitUri.fromRepoPath(record.repoPath), view, parent);\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.uri.repoPath}):reflog-record(${this.record.sha}|${this.record.selector}|${\n            this.record.command\n        }|${this.record.commandArgs || ''}|${this.record.date.getTime()})`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const range = `${this.record.previousSha}..${this.record.sha}`;\n\n        const log = await Container.git.getLog(this.uri.repoPath!, {\n            maxCount: this.maxCount !== undefined ? this.maxCount : this.view.config.defaultItemLimit,\n            ref: range\n        });\n        if (log === undefined) return [new MessageNode(this.view, this, 'No commits')];\n\n        const children: (CommitNode | ShowMoreNode)[] = [\n            ...Iterables.map(log.commits.values(), c => new CommitNode(this.view, this, c))\n        ];\n\n        if (log.truncated) {\n            children.push(new ShowMoreNode(this.view, this, 'Commits', log.maxCount, children[children.length - 1]));\n        }\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem(\n            `${this.record.command}${this.record.commandArgs ? ` ${this.record.commandArgs}` : ''}`,\n            TreeItemCollapsibleState.Collapsed\n        );\n        item.id = this.id;\n        item.description = `${\n            this.record.HEAD.length === 0\n                ? ''\n                : `${this.record.HEAD} ${GlyphChars.Space}${GlyphChars.Dot}${GlyphChars.Space} `\n        }${this.record.formattedDate}`;\n        item.contextValue = ResourceType.ReflogRecord;\n        item.tooltip = `${this.record.HEAD.length === 0 ? '' : `${this.record.HEAD}\\n`}${this.record.command}${\n            this.record.commandArgs ? ` ${this.record.commandArgs}` : ''\n        }${\n            this.record.details ? ` (${this.record.details})` : ''\n        }\\n${this.record.formatDateFromNow()} (${this.record.formatDate()})\\n${this.record.previousShortSha} ${\n            GlyphChars.Space\n        }${GlyphChars.ArrowRight}${GlyphChars.Space} ${this.record.shortSha}`;\n\n        return item;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Container } from '../../container';\nimport { GitUri, Repository } from '../../git/gitService';\nimport { PageableViewNode, ResourceType, ViewNode } from './viewNode';\nimport { RepositoriesView } from '../repositoriesView';\nimport { ReflogRecordNode } from './reflogRecordNode';\nimport { debug, gate } from '../../system';\nimport { MessageNode, ShowMoreNode } from './common';\n\nexport class ReflogNode extends ViewNode<RepositoriesView> implements PageableViewNode {\n    readonly supportsPaging = true;\n    readonly rememberLastMaxCount = true;\n    maxCount: number | undefined = this.view.getNodeLastMaxCount(this);\n\n    private _children: ViewNode[] | undefined;\n\n    constructor(uri: GitUri, view: RepositoriesView, parent: ViewNode, public readonly repo: Repository) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.repo.path}):reflog`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        if (this._children === undefined) {\n            const children = [];\n\n            const reflog = await Container.git.getIncomingActivity(this.repo.path, {\n                all: true,\n                maxCount: this.maxCount !== undefined ? this.maxCount : this.view.config.defaultItemLimit\n            });\n            if (reflog === undefined || reflog.records.length === 0) {\n                return [new MessageNode(this.view, this, 'No activity could be found.')];\n            }\n\n            children.push(...reflog.records.map(r => new ReflogRecordNode(this.view, this, r)));\n\n            if (reflog.truncated) {\n                children.push(\n                    new ShowMoreNode(this.view, this, 'Activity', reflog.maxCount, children[children.length - 1])\n                );\n            }\n\n            this._children = children;\n        }\n        return this._children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Incoming Activity', TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        item.contextValue = ResourceType.Reflog;\n        item.description = 'experimental';\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-merge.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-merge.svg')\n        };\n\n        return item;\n    }\n\n    @gate()\n    @debug()\n    refresh() {\n        this._children = undefined;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { ViewBranchesLayout } from '../../configuration';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { GitRemote, GitRemoteType, GitUri, Repository } from '../../git/gitService';\nimport { Arrays, log } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { BranchNode } from './branchNode';\nimport { BranchOrTagFolderNode } from './branchOrTagFolderNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class RemoteNode extends ViewNode<RepositoriesView> {\n    constructor(\n        uri: GitUri,\n        view: RepositoriesView,\n        parent: ViewNode,\n        public readonly remote: GitRemote,\n        public readonly repo: Repository\n    ) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.remote.repoPath}):remote(${this.remote.name}:${this.remote.id})`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const branches = await this.repo.getBranches({\n            // only show remote branchs for this remote\n            filter: b => b.remote && b.name.startsWith(this.remote.name),\n            sort: true\n        });\n        if (branches === undefined) return [];\n\n        const branchNodes = branches.map(b => new BranchNode(this.uri, this.view, this, b));\n        if (this.view.config.branches.layout === ViewBranchesLayout.List) return branchNodes;\n\n        const hierarchy = Arrays.makeHierarchical(\n            branchNodes,\n            n => n.treeHierarchy,\n            (...paths: string[]) => paths.join('/'),\n            this.view.config.files.compact\n        );\n\n        const root = new BranchOrTagFolderNode(\n            this.view,\n            this,\n            'remote-branch',\n            this.repo.path,\n            '',\n            undefined,\n            hierarchy,\n            `remote(${this.remote.name}`\n        );\n        const children = (await root.getChildren()) as (BranchOrTagFolderNode | BranchNode)[];\n\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        let arrows;\n        let left;\n        let right;\n        for (const { type } of this.remote.types) {\n            if (type === GitRemoteType.Fetch) {\n                left = true;\n\n                if (right) break;\n            }\n            else if (type === GitRemoteType.Push) {\n                right = true;\n\n                if (left) break;\n            }\n        }\n\n        if (left && right) {\n            arrows = GlyphChars.ArrowsRightLeft;\n        }\n        else if (right) {\n            arrows = GlyphChars.ArrowRight;\n        }\n        else if (left) {\n            arrows = GlyphChars.ArrowLeft;\n        }\n        else {\n            arrows = GlyphChars.Dash;\n        }\n\n        const item = new TreeItem(\n            `${this.remote.default ? `${GlyphChars.Check} ${GlyphChars.Space}` : ''}${this.remote.name}`,\n            TreeItemCollapsibleState.Collapsed\n        );\n\n        item.description =\n            this.remote.provider !== undefined\n                ? `${arrows}${GlyphChars.Space} ${this.remote.provider.name} ${GlyphChars.Space}${GlyphChars.Dot}${GlyphChars.Space} ${this.remote.provider.displayPath}`\n                : `${arrows}${GlyphChars.Space} ${\n                      this.remote.domain\n                          ? `${this.remote.domain} ${GlyphChars.Space}${GlyphChars.Dot}${GlyphChars.Space} `\n                          : ''\n                  }${this.remote.path}`;\n        item.contextValue = ResourceType.Remote;\n        if (this.remote.default) {\n            item.contextValue += '+default';\n        }\n\n        if (this.remote.provider !== undefined) {\n            item.iconPath = {\n                dark: Container.context.asAbsolutePath(`images/dark/icon-${this.remote.provider.icon}.svg`),\n                light: Container.context.asAbsolutePath(`images/light/icon-${this.remote.provider.icon}.svg`)\n            };\n        }\n        else {\n            item.iconPath = {\n                dark: Container.context.asAbsolutePath('images/dark/icon-remote.svg'),\n                light: Container.context.asAbsolutePath('images/light/icon-remote.svg')\n            };\n        }\n\n        item.id = this.id;\n        item.tooltip = `${this.remote.name} (${\n            this.remote.provider !== undefined ? this.remote.provider.name : this.remote.domain\n        })\\n${this.remote.provider !== undefined ? this.remote.provider.displayPath : this.remote.path}\\n`;\n\n        for (const type of this.remote.types) {\n            item.tooltip += `\\n${type.url} (${type.type})`;\n        }\n\n        return item;\n    }\n\n    @log()\n    fetch(options: { progress?: boolean } = {}) {\n        return this.repo.fetch({ ...options, remote: this.remote.name });\n    }\n\n    @log()\n    async setAsDefault(state: boolean = true) {\n        void (await this.remote.setAsDefault(state));\n        void this.parent!.triggerChange();\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Container } from '../../container';\nimport { GitUri, Repository } from '../../git/gitService';\nimport { RepositoriesView } from '../repositoriesView';\nimport { MessageNode } from './common';\nimport { RemoteNode } from './remoteNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class RemotesNode extends ViewNode<RepositoriesView> {\n    constructor(uri: GitUri, view: RepositoriesView, parent: ViewNode, public readonly repo: Repository) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.repo.path}):remotes`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const remotes = await this.repo.getRemotes({ sort: true });\n        if (remotes === undefined || remotes.length === 0) {\n            return [new MessageNode(this.view, this, 'No remotes could be found')];\n        }\n\n        return remotes.map(r => new RemoteNode(this.uri, this.view, this, r, this.repo));\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Remotes', TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        item.contextValue = ResourceType.Remotes;\n\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-remote.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-remote.svg')\n        };\n\n        return item;\n    }\n}\n","'use strict';\nimport { GitFile, GitLogCommit } from '../../git/gitService';\nimport { View } from '../viewBase';\nimport { CommitFileNode } from './commitFileNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class StashFileNode extends CommitFileNode {\n    constructor(view: View, parent: ViewNode, file: GitFile, commit: GitLogCommit) {\n        super(view, parent, file, commit);\n    }\n\n    protected get resourceType(): ResourceType {\n        return ResourceType.StashFile;\n    }\n\n    protected getCommitTemplate() {\n        return this.view.config.stashFormat;\n    }\n\n    protected getCommitDescriptionTemplate() {\n        return this.view.config.stashDescriptionFormat;\n    }\n\n    protected getCommitFileTemplate() {\n        return this.view.config.stashFileFormat;\n    }\n\n    protected getCommitFileDescriptionTemplate() {\n        return this.view.config.stashFileDescriptionFormat;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Container } from '../../container';\nimport { CommitFormatter, GitStashCommit } from '../../git/gitService';\nimport { Iterables } from '../../system';\nimport { View } from '../viewBase';\nimport { StashFileNode } from './stashFileNode';\nimport { ResourceType, ViewNode, ViewRefNode } from './viewNode';\n\nexport class StashNode extends ViewRefNode {\n    constructor(view: View, parent: ViewNode, public readonly commit: GitStashCommit) {\n        super(commit.toGitUri(), view, parent);\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.commit.repoPath}):stash(${this.commit.sha})`;\n    }\n\n    get ref(): string {\n        return this.commit.sha;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const files = (this.commit as GitStashCommit).files;\n\n        // Check for any untracked files -- since git doesn't return them via `git stash list` :(\n        // See https://stackoverflow.com/questions/12681529/\n        const log = await Container.git.getLog(this.commit.repoPath, {\n            maxCount: 1,\n            ref: `${(this.commit as GitStashCommit).stashName}^3`\n        });\n        if (log !== undefined) {\n            const commit = Iterables.first(log.commits.values());\n            if (commit !== undefined && commit.files.length !== 0) {\n                // Since these files are untracked -- make them look that way\n                commit.files.forEach(s => (s.status = '?'));\n                files.splice(files.length, 0, ...commit.files);\n            }\n        }\n\n        const children = files.map(s => new StashFileNode(this.view, this, s, this.commit.toFileCommit(s)));\n        children.sort((a, b) => a.label!.localeCompare(b.label!, undefined, { numeric: true, sensitivity: 'base' }));\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem(\n            CommitFormatter.fromTemplate(this.view.config.stashFormat, this.commit, {\n                truncateMessageAtNewLine: true,\n                dateFormat: Container.config.defaultDateFormat\n            }),\n            TreeItemCollapsibleState.Collapsed\n        );\n        item.id = this.id;\n        item.description = CommitFormatter.fromTemplate(this.view.config.stashDescriptionFormat, this.commit, {\n            truncateMessageAtNewLine: true,\n            dateFormat: Container.config.defaultDateFormat\n        });\n        item.contextValue = ResourceType.Stash;\n        // eslint-disable-next-line no-template-curly-in-string\n        item.tooltip = CommitFormatter.fromTemplate('${ago} (${date})\\n\\n${message}', this.commit, {\n            dateFormat: Container.config.defaultDateFormat\n        });\n\n        return item;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Container } from '../../container';\nimport { GitUri, Repository } from '../../git/gitService';\nimport { Iterables } from '../../system';\nimport { View } from '../viewBase';\nimport { MessageNode } from './common';\nimport { StashNode } from './stashNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class StashesNode extends ViewNode {\n    constructor(uri: GitUri, view: View, parent: ViewNode, public readonly repo: Repository) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.repo.path}):stashes`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const stash = await this.repo.getStashList();\n        if (stash === undefined) return [new MessageNode(this.view, this, 'No stashed changes.')];\n\n        return [...Iterables.map(stash.commits.values(), c => new StashNode(this.view, this, c))];\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Stashes', TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        item.contextValue = ResourceType.Stashes;\n\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-stash.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-stash.svg')\n        };\n\n        return item;\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { Command, ThemeIcon, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Commands, DiffWithPreviousCommandArgs } from '../../commands';\nimport { Container } from '../../container';\nimport { GitFile, GitLogCommit, GitUri, StatusFileFormatter } from '../../git/gitService';\nimport { Strings } from '../../system';\nimport { View } from '../viewBase';\nimport { CommitFileNode } from './commitFileNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class StatusFileNode extends ViewNode {\n    public readonly commits: GitLogCommit[];\n    public readonly file: GitFile;\n    public readonly repoPath: string;\n\n    private readonly _hasStagedChanges: boolean;\n    private readonly _hasUnstagedChanges: boolean;\n\n    constructor(view: View, parent: ViewNode, repoPath: string, file: GitFile, commits: GitLogCommit[]) {\n        let hasStagedChanges = false;\n        let hasUnstagedChanges = false;\n        let ref = undefined;\n        for (const c of commits) {\n            if (c.isUncommitted) {\n                if (c.isUncommittedStaged) {\n                    hasStagedChanges = true;\n                    if (!hasUnstagedChanges) {\n                        ref = c.sha;\n                    }\n\n                    break;\n                }\n                else {\n                    ref = undefined;\n                    hasUnstagedChanges = true;\n                }\n            }\n            else if (hasUnstagedChanges || hasStagedChanges) {\n                break;\n            }\n            else {\n                ref = c.sha;\n                break;\n            }\n        }\n\n        super(GitUri.fromFile(file, repoPath, ref), view, parent);\n\n        this.repoPath = repoPath;\n        this.file = file;\n        this.commits = commits;\n\n        this._hasStagedChanges = hasStagedChanges;\n        this._hasUnstagedChanges = hasUnstagedChanges;\n    }\n\n    getChildren(): ViewNode[] {\n        return this.commits.map(c => new CommitFileNode(this.view, this, this.file, c, { displayAsCommit: true }));\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem(this.label, TreeItemCollapsibleState.None);\n        item.description = this.description;\n\n        if ((this._hasStagedChanges || this._hasUnstagedChanges) && this.commits.length === 1) {\n            item.contextValue = ResourceType.File;\n            if (this._hasStagedChanges) {\n                item.contextValue += '+staged';\n                item.tooltip = StatusFileFormatter.fromTemplate(\n                    // eslint-disable-next-line no-template-curly-in-string\n                    '${file}\\n${directory}/\\n\\n${status}${ (originalPath)} in Index (staged)',\n                    this.file\n                );\n            }\n            else {\n                item.contextValue += '+unstaged';\n                item.tooltip = StatusFileFormatter.fromTemplate(\n                    // eslint-disable-next-line no-template-curly-in-string\n                    '${file}\\n${directory}/\\n\\n${status}${ (originalPath)} in Working Tree',\n                    this.file\n                );\n            }\n\n            // Use the file icon and decorations\n            item.resourceUri = GitUri.resolveToUri(this.file.fileName, this.repoPath);\n            item.iconPath = ThemeIcon.File;\n\n            item.command = this.getCommand();\n        }\n        else {\n            item.collapsibleState = TreeItemCollapsibleState.Collapsed;\n            if (this._hasStagedChanges || this._hasUnstagedChanges) {\n                item.contextValue = ResourceType.File;\n                if (this._hasStagedChanges && this._hasUnstagedChanges) {\n                    item.contextValue += '+staged+unstaged';\n                }\n                else if (this._hasStagedChanges) {\n                    item.contextValue += '+staged';\n                }\n                else {\n                    item.contextValue += '+unstaged';\n                }\n\n                // Use the file icon and decorations\n                item.resourceUri = GitUri.resolveToUri(this.file.fileName, this.repoPath);\n                item.iconPath = ThemeIcon.File;\n            }\n            else {\n                item.contextValue = ResourceType.StatusFileCommits;\n\n                const icon = GitFile.getStatusIcon(this.file.status);\n                item.iconPath = {\n                    dark: Container.context.asAbsolutePath(paths.join('images', 'dark', icon)),\n                    light: Container.context.asAbsolutePath(paths.join('images', 'light', icon))\n                };\n            }\n\n            item.tooltip = StatusFileFormatter.fromTemplate(\n                `\\${file}\\n\\${directory}/\\n\\n\\${status}\\${ (originalPath)} in ${this.getChangedIn()}`,\n                this.file\n            );\n        }\n\n        // Only cache the label/description for a single refresh\n        this._label = undefined;\n        this._description = undefined;\n\n        return item;\n    }\n\n    private _description: string | undefined;\n    get description() {\n        if (this._description === undefined) {\n            this._description = StatusFileFormatter.fromTemplate(\n                this.view.config.statusFileDescriptionFormat,\n                {\n                    ...this.file,\n                    commit: this.commit\n                },\n                {\n                    relativePath: this.relativePath\n                }\n            );\n        }\n        return this._description;\n    }\n\n    private _folderName: string | undefined;\n    get folderName() {\n        if (this._folderName === undefined) {\n            this._folderName = paths.dirname(this.uri.relativePath);\n        }\n        return this._folderName;\n    }\n\n    private _label: string | undefined;\n    get label() {\n        if (this._label === undefined) {\n            this._label = StatusFileFormatter.fromTemplate(\n                this.view.config.statusFileFormat,\n                {\n                    ...this.file,\n                    commit: this.commit\n                },\n                {\n                    relativePath: this.relativePath\n                }\n            );\n        }\n        return this._label;\n    }\n\n    get commit() {\n        return this.commits[0];\n    }\n\n    get priority(): number {\n        if (this._hasStagedChanges && !this._hasUnstagedChanges) return -3;\n        if (this._hasStagedChanges) return -2;\n        if (this._hasUnstagedChanges) return -1;\n        return 0;\n    }\n\n    private _relativePath: string | undefined;\n    get relativePath(): string | undefined {\n        return this._relativePath;\n    }\n    set relativePath(value: string | undefined) {\n        this._relativePath = value;\n        this._label = undefined;\n        this._description = undefined;\n    }\n\n    private getChangedIn(): string {\n        const changedIn = [];\n\n        let commits = 0;\n\n        if (this._hasUnstagedChanges) {\n            commits++;\n            changedIn.push('Working Tree');\n        }\n\n        if (this._hasStagedChanges) {\n            commits++;\n            changedIn.push('Index (staged)');\n        }\n\n        if (this.commits.length > commits) {\n            commits = this.commits.length - commits;\n        }\n\n        if (commits > 0) {\n            changedIn.push(Strings.pluralize('commit', commits));\n        }\n\n        if (changedIn.length > 2) {\n            changedIn[changedIn.length - 1] = `and ${changedIn[changedIn.length - 1]}`;\n        }\n        return changedIn.join(changedIn.length > 2 ? ', ' : ' and ');\n    }\n\n    getCommand(): Command | undefined {\n        const commandArgs: DiffWithPreviousCommandArgs = {\n            commit: this.commit,\n            line: 0,\n            showOptions: {\n                preserveFocus: true,\n                preview: true\n            }\n        };\n        return {\n            title: 'Compare File with Previous Revision',\n            command: Commands.DiffWithPrevious,\n            arguments: [GitUri.fromFile(this.file, this.repoPath), commandArgs]\n        };\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { ViewFilesLayout } from '../../configuration';\nimport { Container } from '../../container';\nimport { GitStatusFile } from '../../git/git';\nimport {\n    GitCommitType,\n    GitFileWithCommit,\n    GitLog,\n    GitLogCommit,\n    GitService,\n    GitStatus,\n    GitUri\n} from '../../git/gitService';\nimport { Arrays, Iterables, Objects, Strings } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { FileNode, FolderNode } from './folderNode';\nimport { StatusFileNode } from './statusFileNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class StatusFilesNode extends ViewNode<RepositoriesView> {\n    readonly repoPath: string;\n\n    constructor(\n        view: RepositoriesView,\n        parent: ViewNode,\n        public readonly status: GitStatus,\n        public readonly range: string | undefined\n    ) {\n        super(GitUri.fromRepoPath(status.repoPath), view, parent);\n        this.repoPath = status.repoPath;\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.status.repoPath}):status:files`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        let files: GitFileWithCommit[] = [];\n\n        const repoPath = this.repoPath;\n\n        let log: GitLog | undefined;\n        if (this.range !== undefined) {\n            log = await Container.git.getLog(repoPath, { maxCount: 0, ref: this.range });\n            if (log !== undefined) {\n                files = [\n                    ...Iterables.flatMap(log.commits.values(), c =>\n                        c.files.map(s => {\n                            const file: GitFileWithCommit = { ...s, commit: c };\n                            return file;\n                        })\n                    )\n                ];\n            }\n        }\n\n        if (this.status.files.length !== 0 && this.includeWorkingTree) {\n            files.splice(\n                0,\n                0,\n                ...Iterables.flatMap(this.status.files, s => {\n                    if (s.workingTreeStatus !== undefined && s.indexStatus !== undefined) {\n                        // Decrements the date to guarantee this entry will be sorted after the previous entry (most recent first)\n                        const older = new Date();\n                        older.setMilliseconds(older.getMilliseconds() - 1);\n\n                        return [\n                            this.toStatusFile(s, GitService.uncommittedSha, GitService.uncommittedStagedSha),\n                            this.toStatusFile(s, GitService.uncommittedStagedSha, 'HEAD', older)\n                        ];\n                    }\n                    else if (s.indexStatus !== undefined) {\n                        return [this.toStatusFile(s, GitService.uncommittedStagedSha, 'HEAD')];\n                    }\n\n                    return [this.toStatusFile(s, GitService.uncommittedSha, 'HEAD')];\n                })\n            );\n        }\n\n        files.sort((a, b) => b.commit.date.getTime() - a.commit.date.getTime());\n\n        const groups = Arrays.groupBy(files, s => s.fileName);\n\n        let children: FileNode[] = [\n            ...Iterables.map(\n                Objects.values(groups),\n                files =>\n                    new StatusFileNode(this.view, this, repoPath, files[files.length - 1], files.map(s => s.commit))\n            )\n        ];\n\n        if (this.view.config.files.layout !== ViewFilesLayout.List) {\n            const hierarchy = Arrays.makeHierarchical(\n                children,\n                n => n.uri.relativePath.split('/'),\n                (...parts: string[]) => Strings.normalizePath(paths.join(...parts)),\n                this.view.config.files.compact\n            );\n\n            const root = new FolderNode(this.view, this, repoPath, '', hierarchy, true);\n            children = (await root.getChildren()) as FileNode[];\n        }\n        else {\n            children.sort(\n                (a, b) =>\n                    a.priority - b.priority ||\n                    a.label!.localeCompare(b.label!, undefined, { numeric: true, sensitivity: 'base' })\n            );\n        }\n\n        return children;\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        let files = this.status.files !== undefined && this.includeWorkingTree ? this.status.files.length : 0;\n\n        if (this.status.upstream !== undefined && this.status.state.ahead > 0) {\n            if (files > 0) {\n                const aheadFiles = await Container.git.getDiffStatus(this.repoPath, `${this.status.upstream}...`);\n\n                if (aheadFiles !== undefined) {\n                    const uniques = new Set();\n                    for (const f of this.status.files) {\n                        uniques.add(f.fileName);\n                    }\n                    for (const f of aheadFiles) {\n                        uniques.add(f.fileName);\n                    }\n\n                    files = uniques.size;\n                }\n            }\n            else {\n                const stats = await Container.git.getChangedFilesCount(this.repoPath, `${this.status.upstream}...`);\n                if (stats !== undefined) {\n                    files += stats.files;\n                }\n            }\n        }\n\n        const label = `${Strings.pluralize('file', files)} changed`;\n        const item = new TreeItem(label, TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        item.contextValue = ResourceType.StatusFiles;\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-diff.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-diff.svg')\n        };\n\n        return item;\n    }\n\n    private get includeWorkingTree(): boolean {\n        return this.view.config.includeWorkingTree;\n    }\n\n    private toStatusFile(file: GitStatusFile, ref: string, previousRef: string, date?: Date): GitFileWithCommit {\n        return {\n            status: file.status,\n            repoPath: file.repoPath,\n            indexStatus: file.indexStatus,\n            workingTreeStatus: file.workingTreeStatus,\n            fileName: file.fileName,\n            originalFileName: file.originalFileName,\n            commit: new GitLogCommit(\n                GitCommitType.LogFile,\n                file.repoPath,\n                ref,\n                'You',\n                undefined,\n                date || new Date(),\n                date || new Date(),\n                '',\n                file.fileName,\n                [file],\n                file.status,\n                file.originalFileName,\n                previousRef,\n                file.fileName\n            )\n        };\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { ViewBranchesLayout } from '../../configuration';\nimport { Container } from '../../container';\nimport { GitTag, GitUri } from '../../git/gitService';\nimport { Iterables } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { CommitNode } from './commitNode';\nimport { MessageNode, ShowMoreNode } from './common';\nimport { insertDateMarkers } from './helpers';\nimport { PageableViewNode, ResourceType, ViewNode, ViewRefNode } from './viewNode';\nimport { emojify } from '../../emojis';\n\nexport class TagNode extends ViewRefNode<RepositoriesView> implements PageableViewNode {\n    readonly supportsPaging = true;\n    readonly rememberLastMaxCount = true;\n    maxCount: number | undefined = this.view.getNodeLastMaxCount(this);\n\n    constructor(uri: GitUri, view: RepositoriesView, parent: ViewNode, public readonly tag: GitTag) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.tag.repoPath}):tag(${this.tag.name})`;\n    }\n\n    get label(): string {\n        return this.view.config.branches.layout === ViewBranchesLayout.Tree ? this.tag.getBasename() : this.tag.name;\n    }\n\n    get ref(): string {\n        return this.tag.name;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const log = await Container.git.getLog(this.uri.repoPath!, {\n            maxCount: this.maxCount !== undefined ? this.maxCount : this.view.config.defaultItemLimit,\n            ref: this.tag.name\n        });\n        if (log === undefined) return [new MessageNode(this.view, this, 'No commits could be found.')];\n\n        const getBranchAndTagTips = await Container.git.getBranchesAndTagsTipsFn(this.uri.repoPath, this.tag.name);\n        const children = [\n            ...insertDateMarkers(\n                Iterables.map(\n                    log.commits.values(),\n                    c => new CommitNode(this.view, this, c, undefined, getBranchAndTagTips)\n                ),\n                this\n            )\n        ];\n\n        if (log.truncated) {\n            children.push(new ShowMoreNode(this.view, this, 'Commits', log.maxCount, children[children.length - 1]));\n        }\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem(this.label, TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        item.contextValue = ResourceType.Tag;\n        item.tooltip = `${this.tag.name}${\n            this.tag.annotation === undefined ? '' : `\\n${emojify(this.tag.annotation)}`\n        }`;\n\n        return item;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { ViewBranchesLayout } from '../../configuration';\nimport { Container } from '../../container';\nimport { GitUri, Repository } from '../../git/gitService';\nimport { Arrays } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { BranchOrTagFolderNode } from './branchOrTagFolderNode';\nimport { MessageNode } from './common';\nimport { TagNode } from './tagNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class TagsNode extends ViewNode<RepositoriesView> {\n    constructor(uri: GitUri, view: RepositoriesView, parent: ViewNode, public readonly repo: Repository) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.repo.path}):tags`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const tags = await this.repo.getTags({ sort: true });\n        if (tags.length === 0) return [new MessageNode(this.view, this, 'No tags could be found.')];\n\n        const tagNodes = tags.map(t => new TagNode(this.uri, this.view, this, t));\n        if (this.view.config.branches.layout === ViewBranchesLayout.List) return tagNodes;\n\n        const hierarchy = Arrays.makeHierarchical(\n            tagNodes,\n            n => n.tag.name.split('/'),\n            (...paths: string[]) => paths.join('/'),\n            this.view.config.files.compact\n        );\n\n        const root = new BranchOrTagFolderNode(\n            this.view,\n            this,\n            'tag',\n            this.repo.path,\n            '',\n            undefined,\n            hierarchy,\n            'tags'\n        );\n        const children = (await root.getChildren()) as (BranchOrTagFolderNode | TagNode)[];\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Tags', TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        item.contextValue = ResourceType.Tags;\n\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-tag.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-tag.svg')\n        };\n\n        return item;\n    }\n}\n","'use strict';\nimport { Disposable, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport {\n    GitBranch,\n    GitStatus,\n    GitUri,\n    Repository,\n    RepositoryChange,\n    RepositoryChangeEvent,\n    RepositoryFileSystemChangeEvent\n} from '../../git/gitService';\nimport { Dates, debug, gate, log, Strings } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { CompareBranchNode } from './compareBranchNode';\nimport { BranchesNode } from './branchesNode';\nimport { BranchNode } from './branchNode';\nimport { BranchTrackingStatusNode } from './branchTrackingStatusNode';\nimport { MessageNode } from './common';\nimport { ContributorsNode } from './contributorsNode';\nimport { ReflogNode } from './reflogNode';\nimport { RemotesNode } from './remotesNode';\nimport { StashesNode } from './stashesNode';\nimport { StatusFilesNode } from './statusFilesNode';\nimport { TagsNode } from './tagsNode';\nimport { ResourceType, SubscribeableViewNode, ViewNode } from './viewNode';\n\nconst hasTimeRegex = /[hHm]/;\n\nexport class RepositoryNode extends SubscribeableViewNode<RepositoriesView> {\n    private _children: ViewNode[] | undefined;\n    private _lastFetched: number = 0;\n    private _status: Promise<GitStatus | undefined>;\n\n    constructor(uri: GitUri, view: RepositoriesView, parent: ViewNode, public readonly repo: Repository) {\n        super(uri, view, parent);\n\n        this._status = this.repo.getStatus();\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.repo.path})${this.repo.starred ? '+starred' : ''}`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        if (this._children === undefined) {\n            const children = [];\n\n            const status = await this._status;\n            if (status !== undefined) {\n                const branch = new GitBranch(\n                    status.repoPath,\n                    status.branch,\n                    false,\n                    true,\n                    status.sha,\n                    status.upstream,\n                    status.state.ahead,\n                    status.state.behind,\n                    status.detached\n                );\n                children.push(new BranchNode(this.uri, this.view, this, branch, true));\n\n                if (status.state.behind) {\n                    children.push(new BranchTrackingStatusNode(this.view, this, branch, status, 'behind', true));\n                }\n\n                if (status.state.ahead) {\n                    children.push(new BranchTrackingStatusNode(this.view, this, branch, status, 'ahead', true));\n                }\n\n                if (status.state.ahead || (status.files.length !== 0 && this.includeWorkingTree)) {\n                    const range = status.upstream ? `${status.upstream}..${branch.ref}` : undefined;\n                    children.push(new StatusFilesNode(this.view, this, status, range));\n                }\n\n                if (this.view.config.showBranchComparison !== false) {\n                    children.push(new CompareBranchNode(this.uri, this.view, this, branch));\n                }\n\n                if (!this.view.config.repositories.compact) {\n                    children.push(new MessageNode(this.view, this, '', GlyphChars.Dash.repeat(2), ''));\n                }\n            }\n\n            children.push(\n                new BranchesNode(this.uri, this.view, this, this.repo),\n                new ContributorsNode(this.uri, this.view, this, this.repo)\n            );\n\n            if (Container.config.insiders) {\n                children.push(new ReflogNode(this.uri, this.view, this, this.repo));\n            }\n\n            children.push(\n                new RemotesNode(this.uri, this.view, this, this.repo),\n                new StashesNode(this.uri, this.view, this, this.repo),\n                new TagsNode(this.uri, this.view, this, this.repo)\n            );\n            this._children = children;\n        }\n        return this._children;\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        const label = this.repo.formattedName || this.uri.repoPath || '';\n\n        this._lastFetched = await this.repo.getLastFetched();\n\n        const lastFetchedTooltip = this.formatLastFetched({\n            prefix: `${Strings.pad(GlyphChars.Dash, 2, 2)}Last fetched on `,\n            format: Container.config.defaultDateFormat || 'dddd MMMM Do, YYYY',\n            includeTime: true\n        });\n\n        let description;\n        let tooltip = this.repo.formattedName\n            ? `${this.repo.formattedName}${lastFetchedTooltip}\\n${this.uri.repoPath}`\n            : `${this.uri.repoPath}${lastFetchedTooltip}`;\n        let iconSuffix = '';\n        let workingStatus = '';\n\n        const status = await this._status;\n        if (status !== undefined) {\n            tooltip += `\\n\\nCurrent branch is ${status.branch}`;\n\n            if (status.files.length !== 0 && this.includeWorkingTree) {\n                workingStatus = status.getFormattedDiffStatus({\n                    compact: true,\n                    prefix: Strings.pad(GlyphChars.Dot, 2, 2)\n                });\n            }\n\n            const upstreamStatus = status.getUpstreamStatus({\n                prefix: `${GlyphChars.Space} `\n            });\n\n            description = `${status.branch}${upstreamStatus}${workingStatus}`;\n\n            iconSuffix = workingStatus ? '-blue' : '';\n            if (status.upstream !== undefined) {\n                tooltip += ` and is tracking ${status.upstream}\\n${status.getUpstreamStatus({\n                    empty: 'No commits ahead or behind',\n                    expand: true,\n                    separator: '\\n',\n                    suffix: '\\n'\n                })}`;\n\n                if (status.state.behind) {\n                    iconSuffix = '-red';\n                }\n                if (status.state.ahead) {\n                    iconSuffix = status.state.behind ? '-yellow' : '-green';\n                }\n            }\n\n            if (workingStatus) {\n                tooltip += `\\n\\nWorking tree has uncommitted changes${status.getFormattedDiffStatus({\n                    expand: true,\n                    prefix: '\\n',\n                    separator: '\\n'\n                })}`;\n            }\n        }\n\n        if (!this.repo.supportsChangeEvents) {\n            description = `<!>${description ? ` ${GlyphChars.Space}${description}` : ''}`;\n            tooltip += '\\n\\n<!> Unable to automatically detect repository changes';\n        }\n\n        const item = new TreeItem(label, TreeItemCollapsibleState.Expanded);\n        item.contextValue = ResourceType.Repository;\n        if (this.repo.starred) {\n            item.contextValue += '+starred';\n        }\n        item.description = `${description || ''}${this.formatLastFetched({\n            prefix: `${Strings.pad(GlyphChars.Dot, 2, 2)}Last fetched `\n        })}`;\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath(`images/dark/icon-repo${iconSuffix}.svg`),\n            light: Container.context.asAbsolutePath(`images/light/icon-repo${iconSuffix}.svg`)\n        };\n        item.id = this.id;\n        item.tooltip = tooltip;\n\n        void this.ensureSubscription();\n\n        return item;\n    }\n\n    @log()\n    fetch(options: { all?: boolean; progress?: boolean; prune?: boolean; remote?: string } = {}) {\n        return this.repo.fetch(options);\n    }\n\n    @log()\n    pull(options: { progress?: boolean; rebase?: boolean } = {}) {\n        return this.repo.pull(options);\n    }\n\n    @log()\n    push(options: { force?: boolean; progress?: boolean } = {}) {\n        return this.repo.push(options);\n    }\n\n    @gate()\n    @debug()\n    async refresh() {\n        this._status = this.repo.getStatus();\n\n        this._children = undefined;\n        await this.ensureSubscription();\n    }\n\n    @log()\n    async star() {\n        await this.repo.star();\n        void this.parent!.triggerChange();\n    }\n\n    @log()\n    async unstar() {\n        await this.repo.unstar();\n        void this.parent!.triggerChange();\n    }\n\n    @debug()\n    protected subscribe() {\n        const disposables = [this.repo.onDidChange(this.onRepoChanged, this)];\n\n        // if (Container.config.defaultDateStyle === DateStyle.Relative) {\n        //     disposables.push(Functions.interval(() => void this.updateLastFetched(), 60000));\n        // }\n\n        if (this.includeWorkingTree) {\n            disposables.push(this.repo.onDidChangeFileSystem(this.onFileSystemChanged, this), {\n                dispose: () => this.repo.stopWatchingFileSystem()\n            });\n\n            this.repo.startWatchingFileSystem();\n        }\n\n        return Disposable.from(...disposables);\n    }\n\n    private get includeWorkingTree(): boolean {\n        return this.view.config.includeWorkingTree;\n    }\n\n    @debug({\n        args: {\n            0: (e: RepositoryFileSystemChangeEvent) =>\n                `{ repository: ${e.repository ? e.repository.name : ''}, uris(${e.uris.length}): [${e.uris\n                    .slice(0, 1)\n                    .map(u => u.fsPath)\n                    .join(', ')}${e.uris.length > 1 ? ', ...' : ''}] }`\n        }\n    })\n    private onFileSystemChanged(e: RepositoryFileSystemChangeEvent) {\n        void this.triggerChange();\n    }\n\n    @debug({\n        args: {\n            0: (e: RepositoryChangeEvent) =>\n                `{ repository: ${e.repository ? e.repository.name : ''}, changes: ${e.changes.join()} }`\n        }\n    })\n    private onRepoChanged(e: RepositoryChangeEvent) {\n        if (e.changed(RepositoryChange.Closed)) {\n            this.dispose();\n\n            return;\n        }\n\n        if (\n            this._children === undefined ||\n            e.changed(RepositoryChange.Repository) ||\n            e.changed(RepositoryChange.Config)\n        ) {\n            void this.triggerChange();\n\n            return;\n        }\n\n        if (e.changed(RepositoryChange.Stashes)) {\n            const node = this._children.find(c => c instanceof StashesNode);\n            if (node !== undefined) {\n                void this.view.triggerNodeChange(node);\n            }\n        }\n\n        if (e.changed(RepositoryChange.Remotes)) {\n            const node = this._children.find(c => c instanceof RemotesNode);\n            if (node !== undefined) {\n                void this.view.triggerNodeChange(node);\n            }\n        }\n\n        if (e.changed(RepositoryChange.Tags)) {\n            const node = this._children.find(c => c instanceof TagsNode);\n            if (node !== undefined) {\n                void this.view.triggerNodeChange(node);\n            }\n        }\n    }\n\n    private formatLastFetched(options: { prefix?: string; format?: string; includeTime?: boolean } = {}) {\n        if (this._lastFetched === 0) return '';\n\n        // if (options.format === undefined && Container.config.defaultDateStyle === DateStyle.Relative) {\n        //     // If less than a day has passed show a relative date\n        //     if (Date.now() - this._lastFetched < Dates.MillisecondsPerDay) {\n        //         return `${options.prefix || ''}${Dates.toFormatter(new Date(this._lastFetched)).fromNow()}`;\n        //     }\n        // }\n\n        let format = options.format || Container.config.defaultDateShortFormat || 'MMM D, YYYY';\n        if (\n            (options.includeTime ||\n                // If less than a day has passed show the time too\n                (options.includeTime === undefined && Date.now() - this._lastFetched < Dates.MillisecondsPerDay)) &&\n            // If the time is already included don't do anything\n            !hasTimeRegex.test(format)\n        ) {\n            format = `h:mma, ${format}`;\n        }\n\n        return `${options.prefix || ''}${Dates.getFormatter(new Date(this._lastFetched)).format(format)}`;\n    }\n\n    // @debug()\n    // private async updateLastFetched() {\n    //     const prevLastFetched = this._lastFetched;\n    //     this._lastFetched = await this.repo.getLastFetched();\n\n    //     // If the fetched date hasn't changed and it was over a day ago, kick out\n    //     if (this._lastFetched === prevLastFetched && Date.now() - this._lastFetched >= Dates.MillisecondsPerDay) return;\n\n    //     this.view.triggerNodeChange(this);\n    // }\n}\n","'use strict';\nimport { Disposable, TextEditor, TreeItem, TreeItemCollapsibleState, window } from 'vscode';\nimport { Container } from '../../container';\nimport { GitUri } from '../../git/gitService';\nimport { Logger } from '../../logger';\nimport { debug, Functions, gate } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { MessageNode } from './common';\nimport { RepositoryNode } from './repositoryNode';\nimport { ResourceType, SubscribeableViewNode, unknownGitUri, ViewNode } from './viewNode';\n\nexport class RepositoriesNode extends SubscribeableViewNode<RepositoriesView> {\n    private _children: (RepositoryNode | MessageNode)[] | undefined;\n\n    constructor(view: RepositoriesView) {\n        super(unknownGitUri, view);\n    }\n\n    dispose() {\n        super.dispose();\n\n        this.resetChildren();\n    }\n\n    @debug()\n    private resetChildren() {\n        if (this._children === undefined) return;\n\n        for (const child of this._children) {\n            if (child instanceof RepositoryNode) {\n                child.dispose();\n            }\n        }\n        this._children = undefined;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        if (this._children === undefined) {\n            const repositories = await Container.git.getOrderedRepositories();\n            if (repositories.length === 0) return [new MessageNode(this.view, this, 'No repositories could be found.')];\n\n            this._children = repositories.map(r => new RepositoryNode(GitUri.fromRepoPath(r.path), this.view, this, r));\n        }\n\n        return this._children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Repositories', TreeItemCollapsibleState.Expanded);\n        item.contextValue = ResourceType.Repositories;\n\n        void this.ensureSubscription();\n\n        return item;\n    }\n\n    @gate()\n    @debug()\n    async refresh(reset: boolean = false) {\n        if (this._children === undefined) return;\n\n        if (reset) {\n            this.resetChildren();\n            await this.unsubscribe();\n            void this.ensureSubscription();\n\n            return;\n        }\n\n        const repositories = await Container.git.getOrderedRepositories();\n        if (repositories.length === 0 && (this._children === undefined || this._children.length === 0)) return;\n\n        if (repositories.length === 0) {\n            this._children = [new MessageNode(this.view, this, 'No repositories could be found.')];\n            return;\n        }\n\n        const children = [];\n        for (const repo of repositories) {\n            const normalizedPath = repo.normalizedPath;\n            const child = (this._children as RepositoryNode[]).find(c => c.repo.normalizedPath === normalizedPath);\n            if (child !== undefined) {\n                children.push(child);\n                void child.refresh();\n            }\n            else {\n                children.push(new RepositoryNode(GitUri.fromRepoPath(repo.path), this.view, this, repo));\n            }\n        }\n\n        for (const child of this._children as RepositoryNode[]) {\n            if (children.includes(child)) continue;\n\n            child.dispose();\n        }\n\n        this._children = children;\n\n        void this.ensureSubscription();\n    }\n\n    @debug()\n    protected subscribe() {\n        const subscriptions = [Container.git.onDidChangeRepositories(this.onRepositoriesChanged, this)];\n\n        if (this.view.config.autoReveal) {\n            subscriptions.push(\n                window.onDidChangeActiveTextEditor(Functions.debounce(this.onActiveEditorChanged, 500), this)\n            );\n        }\n\n        return Disposable.from(...subscriptions);\n    }\n\n    @debug({ args: false })\n    private onActiveEditorChanged(editor: TextEditor | undefined) {\n        if (editor == null || this._children === undefined || this._children.length === 1) {\n            return;\n        }\n\n        try {\n            const uri = editor.document.uri;\n            const node = this._children.find(n => n instanceof RepositoryNode && n.repo.containsUri(uri)) as\n                | RepositoryNode\n                | undefined;\n            if (node === undefined) return;\n\n            // Check to see if this repo has a descendent that is already selected\n            let parent = this.view.selection.length === 0 ? undefined : this.view.selection[0];\n            while (parent !== undefined) {\n                if (parent === node) return;\n\n                parent = parent.getParent();\n            }\n\n            void this.view.reveal(node, { expand: true });\n        }\n        catch (ex) {\n            Logger.error(ex);\n        }\n    }\n\n    @debug()\n    private onRepositoriesChanged() {\n        void this.triggerChange();\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { SearchCommitsCommandArgs } from '../../commands';\nimport { GlyphChars } from '../../constants';\nimport { GitRepoSearchBy } from '../../git/gitService';\nimport { debug, gate, Iterables, log, Promises } from '../../system';\nimport { View } from '../viewBase';\nimport { CommandMessageNode, MessageNode } from './common';\nimport { ResourceType, unknownGitUri, ViewNode } from './viewNode';\n\nexport class SearchNode extends ViewNode {\n    private _children: (ViewNode | MessageNode)[] = [];\n\n    constructor(view: View) {\n        super(unknownGitUri, view);\n    }\n\n    getChildren(): ViewNode[] {\n        if (this._children.length === 0) {\n            const command = {\n                title: ' ',\n                command: 'gitlens.showCommitSearch'\n            };\n\n            const getCommandArgs = (searchBy: GitRepoSearchBy): SearchCommitsCommandArgs => {\n                return {\n                    searchBy: searchBy\n                };\n            };\n\n            return [\n                new CommandMessageNode(\n                    this.view,\n                    this,\n                    {\n                        ...command,\n                        arguments: [this, getCommandArgs(GitRepoSearchBy.Message)]\n                    },\n                    'Search commits by message',\n                    'message-pattern',\n                    'Click to search commits by message'\n                ),\n                new CommandMessageNode(\n                    this.view,\n                    this,\n                    {\n                        ...command,\n                        arguments: [this, getCommandArgs(GitRepoSearchBy.Author)]\n                    },\n                    `${GlyphChars.Space.repeat(4)} or, by author`,\n                    '@ author-pattern',\n                    'Click to search commits by author'\n                ),\n                new CommandMessageNode(\n                    this.view,\n                    this,\n                    {\n                        ...command,\n                        arguments: [this, getCommandArgs(GitRepoSearchBy.Sha)]\n                    },\n                    `${GlyphChars.Space.repeat(4)} or, by commit id`,\n                    '# sha',\n                    'Click to search commits by commit id'\n                ),\n                new CommandMessageNode(\n                    this.view,\n                    this,\n                    {\n                        ...command,\n                        arguments: [this, getCommandArgs(GitRepoSearchBy.Files)]\n                    },\n                    `${GlyphChars.Space.repeat(4)} or, by files`,\n                    ': file-path/glob',\n                    'Click to search commits by files'\n                ),\n                new CommandMessageNode(\n                    this.view,\n                    this,\n                    {\n                        ...command,\n                        arguments: [this, getCommandArgs(GitRepoSearchBy.Changes)]\n                    },\n                    `${GlyphChars.Space.repeat(4)} or, by changes`,\n                    '~ pattern',\n                    'Click to search commits by changes'\n                )\n            ];\n        }\n\n        return this._children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Search', TreeItemCollapsibleState.Expanded);\n        item.contextValue = ResourceType.Search;\n        return item;\n    }\n\n    addOrReplace(results: ViewNode, replace: boolean) {\n        if (this._children.includes(results)) return;\n\n        if (this._children.length !== 0 && replace) {\n            this._children.length = 0;\n            this._children.push(results);\n        }\n        else {\n            this._children.splice(0, 0, results);\n        }\n\n        this.view.triggerNodeChange();\n    }\n\n    @log()\n    clear() {\n        if (this._children.length === 0) return;\n\n        this._children.length = 0;\n        this.view.triggerNodeChange();\n    }\n\n    @log({\n        args: { 0: (n: ViewNode) => n.toString() }\n    })\n    dismiss(node: ViewNode) {\n        if (this._children.length === 0) return;\n\n        const index = this._children.findIndex(n => n === node);\n        if (index === -1) return;\n\n        this._children.splice(index, 1);\n        this.view.triggerNodeChange();\n    }\n\n    @gate()\n    @debug()\n    async refresh() {\n        if (this._children.length === 0) return;\n\n        const promises: Promise<any>[] = [\n            ...Iterables.filterMap(this._children, c => {\n                const result = c.refresh === undefined ? false : c.refresh();\n                return Promises.isPromise<boolean | void>(result) ? result : undefined;\n            })\n        ];\n        await Promise.all(promises);\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { SearchCommitsCommandArgs } from '../../commands';\nimport { Commands } from '../../commands/common';\nimport { GitRepoSearchBy } from '../../git/gitService';\nimport { ViewWithFiles } from '../viewBase';\nimport { CommitsQueryResults, ResultsCommitsNode } from './resultsCommitsNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nlet instanceId = 0;\n\nexport class SearchResultsCommitsNode extends ResultsCommitsNode {\n    private _instanceId: number;\n\n    constructor(\n        view: ViewWithFiles,\n        parent: ViewNode,\n        repoPath: string,\n        public readonly search: string,\n        public readonly searchBy: GitRepoSearchBy,\n        label: string,\n        commitsQuery: (maxCount: number | undefined) => Promise<CommitsQueryResults>\n    ) {\n        super(view, parent, repoPath, label, commitsQuery, {\n            expand: true,\n            includeDescription: true\n        });\n\n        this._instanceId = instanceId++;\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.repoPath}):search(${this.searchBy}:${this.search}):commits|${this._instanceId}`;\n    }\n\n    get type(): ResourceType {\n        return ResourceType.SearchResults;\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        const item = await super.getTreeItem();\n\n        if (item.collapsibleState === TreeItemCollapsibleState.None) {\n            const args: SearchCommitsCommandArgs = {\n                search: this.search,\n                searchBy: this.searchBy,\n                prefillOnly: true\n            };\n            item.command = {\n                title: 'Search Commits',\n                command: Commands.SearchCommitsInView,\n                arguments: [args]\n            };\n        }\n\n        return item;\n    }\n}\n","'use strict';\n\nexport * from './nodes/common';\n\nexport * from './nodes/viewNode';\nexport * from './nodes/branchesNode';\nexport * from './nodes/branchNode';\nexport * from './nodes/branchTrackingStatusNode';\nexport * from './nodes/commitFileNode';\nexport * from './nodes/commitNode';\nexport * from './nodes/compareBranchNode';\nexport * from './nodes/compareNode';\nexport * from './nodes/compareResultsNode';\nexport * from './nodes/contributorNode';\nexport * from './nodes/contributorsNode';\nexport * from './nodes/fileHistoryNode';\nexport * from './nodes/fileHistoryTrackerNode';\nexport * from './nodes/folderNode';\nexport * from './nodes/lineHistoryNode';\nexport * from './nodes/lineHistoryTrackerNode';\nexport * from './nodes/reflogNode';\nexport * from './nodes/reflogRecordNode';\nexport * from './nodes/remoteNode';\nexport * from './nodes/remotesNode';\nexport * from './nodes/repositoriesNode';\nexport * from './nodes/repositoryNode';\nexport * from './nodes/resultsCommitsNode';\nexport * from './nodes/resultsFileNode';\nexport * from './nodes/resultsFilesNode';\nexport * from './nodes/searchNode';\nexport * from './nodes/searchResultsCommitsNode';\nexport * from './nodes/stashesNode';\nexport * from './nodes/stashFileNode';\nexport * from './nodes/stashNode';\nexport * from './nodes/statusFileNode';\nexport * from './nodes/statusFilesNode';\nexport * from './nodes/tagsNode';\nexport * from './nodes/tagNode';\n","'use strict';\nimport { commands, ConfigurationTarget, env, MessageItem, Uri, window } from 'vscode';\nimport { Commands } from './commands';\nimport { configuration, ViewLocation } from './configuration';\nimport { CommandContext, setCommandContext } from './constants';\nimport { GitCommit } from './git/gitService';\nimport { Logger } from './logger';\nimport { Versions } from './system';\nimport { Container } from './container';\n\nexport enum SuppressedMessages {\n    CommitHasNoPreviousCommitWarning = 'suppressCommitHasNoPreviousCommitWarning',\n    CommitNotFoundWarning = 'suppressCommitNotFoundWarning',\n    FileNotUnderSourceControlWarning = 'suppressFileNotUnderSourceControlWarning',\n    GitDisabledWarning = 'suppressGitDisabledWarning',\n    GitVersionWarning = 'suppressGitVersionWarning',\n    LineUncommittedWarning = 'suppressLineUncommittedWarning',\n    NoRepositoryWarning = 'suppressNoRepositoryWarning',\n    SupportGitLensNotification = 'suppressSupportGitLensNotification'\n}\n\nexport class Messages {\n    static showCommitHasNoPreviousCommitWarningMessage(commit?: GitCommit): Promise<MessageItem | undefined> {\n        if (commit === undefined) {\n            return Messages.showMessage(\n                'info',\n                'There is no previous commit.',\n                SuppressedMessages.CommitHasNoPreviousCommitWarning\n            );\n        }\n        return Messages.showMessage(\n            'info',\n            `Commit ${commit.shortSha} (${commit.author}, ${commit.formattedDate}) has no previous commit.`,\n            SuppressedMessages.CommitHasNoPreviousCommitWarning\n        );\n    }\n\n    static showCommitNotFoundWarningMessage(message: string): Promise<MessageItem | undefined> {\n        return Messages.showMessage(\n            'warn',\n            `${message}. The commit could not be found.`,\n            SuppressedMessages.CommitNotFoundWarning\n        );\n    }\n\n    static async showGenericErrorMessage(message: string): Promise<MessageItem | undefined> {\n        const actions: MessageItem[] = [{ title: 'Open Output Channel' }];\n        const result = await Messages.showMessage(\n            'error',\n            `${message}. See output channel for more details`,\n            undefined,\n            null,\n            ...actions\n        );\n\n        if (result !== undefined) {\n            Logger.showOutputChannel();\n        }\n        return result;\n    }\n\n    static showFileNotUnderSourceControlWarningMessage(message: string): Promise<MessageItem | undefined> {\n        return Messages.showMessage(\n            'warn',\n            `${message}. The file is probably not under source control.`,\n            SuppressedMessages.FileNotUnderSourceControlWarning\n        );\n    }\n\n    static showGitDisabledErrorMessage() {\n        return Messages.showMessage(\n            'error',\n            'GitLens requires Git to be enabled. Please re-enable Git \\u2014 set `git.enabled` to true and reload',\n            SuppressedMessages.GitDisabledWarning\n        );\n    }\n\n    static showGitVersionUnsupportedErrorMessage(version: string): Promise<MessageItem | undefined> {\n        return Messages.showMessage(\n            'error',\n            `GitLens requires a newer version of Git (>= 2.2.0) than is currently installed (${version}). Please install a more recent version of Git.`,\n            SuppressedMessages.GitVersionWarning\n        );\n    }\n\n    static showLineUncommittedWarningMessage(message: string): Promise<MessageItem | undefined> {\n        return Messages.showMessage(\n            'warn',\n            `${message}. The line has uncommitted changes.`,\n            SuppressedMessages.LineUncommittedWarning\n        );\n    }\n\n    static showNoRepositoryWarningMessage(message: string): Promise<MessageItem | undefined> {\n        return Messages.showMessage(\n            'warn',\n            `${message}. No repository could be found.`,\n            SuppressedMessages.NoRepositoryWarning\n        );\n    }\n\n    static async showSupportGitLensMessage() {\n        const actions: MessageItem[] = [\n            { title: 'Become a Sponsor' },\n            { title: 'Donate via PayPal' },\n            { title: 'Donate via Cash App' }\n        ];\n\n        const result = await Messages.showMessage(\n            'info',\n            'While GitLens is offered to everyone for free, if you find it useful, please consider [supporting](https://gitlens.amod.io/#support-gitlens) it. Thank you! ',\n            undefined,\n            null,\n            ...actions\n        );\n\n        if (result != null) {\n            let uri;\n            if (result === actions[0]) {\n                uri = Uri.parse('https://www.patreon.com/eamodio');\n            }\n            else if (result === actions[1]) {\n                uri = Uri.parse('https://www.paypal.me/eamodio');\n            }\n            else if (result === actions[2]) {\n                uri = Uri.parse('https://cash.me/$eamodio');\n            }\n\n            if (uri !== undefined) {\n                await setCommandContext(CommandContext.ViewsHideSupportGitLens, true);\n                await this.suppressedMessage(SuppressedMessages.SupportGitLensNotification!);\n                await env.openExternal(uri);\n            }\n        }\n    }\n\n    static async showSetupViewLayoutMessage(previousVersion: string | undefined) {\n        if (\n            Container.config.views.repositories.location !== ViewLocation.GitLens ||\n            Container.config.views.fileHistory.location !== ViewLocation.GitLens ||\n            Container.config.views.lineHistory.location !== ViewLocation.GitLens ||\n            Container.config.views.search.location !== ViewLocation.GitLens ||\n            Container.config.views.compare.location !== ViewLocation.GitLens\n        ) {\n            return;\n        }\n\n        if (\n            previousVersion !== undefined &&\n            Versions.compare(Versions.fromString(previousVersion), Versions.from(9, 6, 3)) === 1\n        ) {\n            return;\n        }\n\n        const actions: MessageItem[] = [{ title: 'Customize...' }, { title: 'Use Defaults' }];\n        const result = await Messages.showMessage(\n            'info',\n            'GitLens views can be configured to be shown in different side bar layouts to best match your workflow. You can easily change the default layout (where all views are shown together on the GitLens side bar) below.',\n            undefined,\n            null,\n            ...actions\n        );\n\n        if (result != null && result === actions[0]) {\n            await commands.executeCommand(Commands.ShowSettingsPage, 'views-layout');\n        }\n    }\n\n    static async showWhatsNewMessage(version: string) {\n        const actions: MessageItem[] = [{ title: \"What's New\" }, { title: 'Release Notes' }, { title: '' }];\n\n        const result = await Messages.showMessage(\n            'info',\n            `GitLens has been updated to v${version}  check out what's new!`,\n            undefined,\n            null,\n            ...actions\n        );\n\n        if (result != null) {\n            if (result === actions[0]) {\n                await commands.executeCommand(Commands.ShowWelcomePage);\n            }\n            else if (result === actions[1]) {\n                await env.openExternal(Uri.parse('https://github.com/eamodio/vscode-gitlens/blob/master/CHANGELOG.md'));\n            }\n            else if (result === actions[2]) {\n                await env.openExternal(Uri.parse('https://gitlens.amod.io/#support-gitlens'));\n            }\n        }\n    }\n\n    private static async showMessage(\n        type: 'info' | 'warn' | 'error',\n        message: string,\n        suppressionKey?: SuppressedMessages,\n        dontShowAgain: MessageItem | null = { title: \"Don't Show Again\" },\n        ...actions: MessageItem[]\n    ): Promise<MessageItem | undefined> {\n        Logger.log(`ShowMessage(${type}, '${message}', ${suppressionKey}, ${dontShowAgain})`);\n\n        if (\n            suppressionKey !== undefined &&\n            configuration.get<boolean>(configuration.name('advanced')('messages')(suppressionKey).value)\n        ) {\n            Logger.log(`ShowMessage(${type}, '${message}', ${suppressionKey}, ${dontShowAgain}) skipped`);\n            return undefined;\n        }\n\n        if (suppressionKey !== undefined && dontShowAgain !== null) {\n            actions.push(dontShowAgain);\n        }\n\n        let result: MessageItem | undefined = undefined;\n        switch (type) {\n            case 'info':\n                result = await window.showInformationMessage(message, ...actions);\n                break;\n\n            case 'warn':\n                result = await window.showWarningMessage(message, ...actions);\n                break;\n\n            case 'error':\n                result = await window.showErrorMessage(message, ...actions);\n                break;\n        }\n\n        if ((suppressionKey !== undefined && dontShowAgain === null) || result === dontShowAgain) {\n            Logger.log(\n                `ShowMessage(${type}, '${message}', ${suppressionKey}, ${dontShowAgain}) don't show again requested`\n            );\n            await this.suppressedMessage(suppressionKey!);\n\n            if (result === dontShowAgain) return undefined;\n        }\n\n        Logger.log(\n            `ShowMessage(${type}, '${message}', ${suppressionKey}, ${dontShowAgain}) returned ${\n                result ? result.title : result\n            }`\n        );\n        return result;\n    }\n\n    private static suppressedMessage(suppressionKey: SuppressedMessages) {\n        const section = configuration.name('advanced')('messages').value;\n        const messages: { [key: string]: boolean | undefined } = configuration.get<{}>(section);\n\n        messages[suppressionKey] = true;\n\n        for (const [key, value] of Object.entries(messages)) {\n            if (value !== true) {\n                messages[key] = undefined;\n            }\n        }\n\n        return configuration.update(section, messages, ConfigurationTarget.Global);\n    }\n}\n","module.exports = require(\"path\");","'use strict';\n/* eslint-disable constructor-super */\nimport * as paths from 'path';\nimport { Uri } from 'vscode';\nimport { UriComparer } from '../comparers';\nimport { DocumentSchemes, GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitCommit, GitFile, GitService } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { debug, memoize, Strings } from '../system';\n\nconst emptyStr = '';\nconst slash = '/';\n\nexport interface GitCommitish {\n    fileName?: string;\n    repoPath: string;\n    sha?: string;\n    versionedPath?: string;\n}\n\n// Taken from https://github.com/Microsoft/vscode/blob/master/src/vs/base/common/uri.ts#L331-L337\ninterface UriComponents {\n    scheme: string;\n    authority: string;\n    path: string;\n    query: string;\n    fragment: string;\n}\n\ninterface UriEx {\n    new (): Uri;\n    new (scheme: string, authority: string, path: string, query: string, fragment: string): Uri;\n    // Use this ctor, because vscode doesn't validate it\n    new (components: UriComponents): Uri;\n}\n\nexport class GitUri extends ((Uri as any) as UriEx) {\n    static is(uri: any): uri is GitUri {\n        return uri instanceof GitUri;\n    }\n\n    readonly repoPath?: string;\n    readonly sha?: string;\n    readonly versionedPath?: string;\n\n    constructor(uri?: Uri);\n    constructor(uri: Uri, commit: GitCommitish);\n    constructor(uri: Uri, repoPath: string | undefined);\n    constructor(uri?: Uri, commitOrRepoPath?: GitCommitish | string) {\n        if (uri == null) {\n            super('unknown', emptyStr, emptyStr, emptyStr, emptyStr);\n\n            return;\n        }\n\n        if (uri.scheme === DocumentSchemes.GitLens) {\n            const data = JSON.parse(uri.query) as UriRevisionData;\n\n            // When Uri's come from the FileSystemProvider, the uri.query only contains the root repo info (not the actual file path), so fix that here\n            const index = uri.path.indexOf(data.path);\n            if (index + data.path.length < uri.path.length) {\n                data.path = index === 0 ? uri.path : uri.path.substr(index);\n            }\n\n            super({\n                scheme: uri.scheme,\n                authority: uri.authority,\n                path: uri.path,\n                query: JSON.stringify(data),\n                fragment: uri.fragment\n            });\n\n            this.repoPath = data.repoPath;\n            if (GitService.isUncommittedStaged(data.ref) || !GitService.isUncommitted(data.ref)) {\n                this.sha = data.ref;\n            }\n\n            return;\n        }\n\n        if (commitOrRepoPath === undefined) {\n            super(uri);\n\n            return;\n        }\n\n        if (typeof commitOrRepoPath === 'string') {\n            super(uri);\n\n            this.repoPath = commitOrRepoPath;\n\n            return;\n        }\n\n        const [authority, fsPath] = GitUri.ensureValidUNCPath(\n            uri.authority,\n            GitUri.resolve(commitOrRepoPath.fileName || uri.fsPath, commitOrRepoPath.repoPath)\n        );\n\n        let path;\n        switch (uri.scheme) {\n            case 'https':\n            case 'http':\n            case 'file':\n                if (!fsPath) {\n                    path = slash;\n                }\n                else if (fsPath[0] !== slash) {\n                    path = `/${fsPath}`;\n                }\n                else {\n                    path = fsPath;\n                }\n                break;\n            default:\n                path = fsPath;\n                break;\n        }\n\n        super({\n            scheme: uri.scheme,\n            authority: authority,\n            path: path,\n            query: uri.query,\n            fragment: uri.fragment\n        });\n        this.repoPath = commitOrRepoPath.repoPath;\n        this.versionedPath = commitOrRepoPath.versionedPath;\n        if (GitService.isUncommittedStaged(commitOrRepoPath.sha) || !GitService.isUncommitted(commitOrRepoPath.sha)) {\n            this.sha = commitOrRepoPath.sha;\n        }\n    }\n\n    @memoize()\n    get directory(): string {\n        return GitUri.getDirectory(this.relativeFsPath);\n    }\n\n    @memoize()\n    get fileName(): string {\n        return paths.basename(this.relativeFsPath);\n    }\n\n    @memoize()\n    get isUncommitted() {\n        return GitService.isUncommitted(this.sha);\n    }\n\n    @memoize()\n    get isUncommittedStaged() {\n        return GitService.isUncommittedStaged(this.sha);\n    }\n\n    @memoize()\n    private get relativeFsPath() {\n        return this.repoPath == null || this.repoPath.length === 0\n            ? this.fsPath\n            : paths.relative(this.repoPath, this.fsPath);\n    }\n\n    @memoize()\n    get relativePath() {\n        return Strings.normalizePath(this.relativeFsPath);\n    }\n\n    @memoize()\n    get shortSha() {\n        return GitService.shortenSha(this.sha);\n    }\n\n    @memoize<GitUri['documentUri']>(options => `${options!.useVersionedPath ? 'versioned' : ''}`)\n    documentUri({ useVersionedPath }: { useVersionedPath?: boolean } = {}) {\n        if (useVersionedPath && this.versionedPath !== undefined) return GitUri.file(this.versionedPath);\n        if (this.scheme !== 'file') return this;\n\n        return GitUri.file(this.fsPath);\n    }\n\n    equals(uri: Uri | undefined) {\n        if (!UriComparer.equals(this, uri)) return false;\n\n        return this.sha === (GitUri.is(uri) ? uri.sha : undefined);\n    }\n\n    getFormattedPath(options: { relativeTo?: string; separator?: string; suffix?: string } = {}): string {\n        const {\n            relativeTo = this.repoPath,\n            separator = Strings.pad(GlyphChars.Dot, 2, 2),\n            suffix = emptyStr\n        } = options;\n\n        const directory = GitUri.getDirectory(this.fsPath, relativeTo);\n        return `${paths.basename(this.fsPath)}${suffix}${directory ? `${separator}${directory}` : emptyStr}`;\n    }\n\n    @memoize()\n    toFileUri() {\n        return GitUri.file(this.fsPath);\n    }\n\n    private static ensureValidUNCPath(authority: string, fsPath: string): [string, string] {\n        // Taken from https://github.com/Microsoft/vscode/blob/e444eaa768a1e8bd8315f2cee265d725e96a8162/src/vs/base/common/uri.ts#L300-L325\n        // check for authority as used in UNC shares or use the path as given\n        if (fsPath[0] === slash && fsPath[1] === slash) {\n            const index = fsPath.indexOf(slash, 2);\n            if (index === -1) {\n                authority = fsPath.substring(2);\n                fsPath = slash;\n            }\n            else {\n                authority = fsPath.substring(2, index);\n                fsPath = fsPath.substring(index) || slash;\n            }\n        }\n\n        return [authority, fsPath];\n    }\n\n    static file(path: string, useVslsScheme?: boolean) {\n        const uri = Uri.file(path);\n        if (Container.vsls.isMaybeGuest && useVslsScheme !== false) {\n            return uri.with({ scheme: DocumentSchemes.Vsls });\n        }\n\n        return uri;\n    }\n\n    static fromCommit(commit: GitCommit, previous: boolean = false) {\n        if (!previous) return new GitUri(commit.uri, commit);\n\n        return new GitUri(commit.previousUri, {\n            repoPath: commit.repoPath,\n            sha: commit.previousSha\n        });\n    }\n\n    static fromFile(fileName: string, repoPath: string, ref?: string): GitUri;\n    static fromFile(file: GitFile, repoPath: string, ref?: string, original?: boolean): GitUri;\n    static fromFile(fileOrName: GitFile | string, repoPath: string, ref?: string, original: boolean = false): GitUri {\n        const uri = GitUri.resolveToUri(\n            typeof fileOrName === 'string'\n                ? fileOrName\n                : (original && fileOrName.originalFileName) || fileOrName.fileName,\n            repoPath\n        );\n        return ref == null || ref.length === 0\n            ? new GitUri(uri, repoPath)\n            : new GitUri(uri, { repoPath: repoPath, sha: ref });\n    }\n\n    static fromRepoPath(repoPath: string, ref?: string) {\n        return ref == null || ref.length === 0\n            ? new GitUri(GitUri.file(repoPath), repoPath)\n            : new GitUri(GitUri.file(repoPath), { repoPath: repoPath, sha: ref });\n    }\n\n    static fromRevisionUri(uri: Uri): GitUri {\n        return new GitUri(uri);\n    }\n\n    @debug({\n        exit: uri => `returned ${Logger.toLoggable(uri)}`\n    })\n    static async fromUri(uri: Uri) {\n        if (GitUri.is(uri)) return uri;\n\n        if (!Container.git.isTrackable(uri)) return new GitUri(uri);\n\n        if (uri.scheme === DocumentSchemes.GitLens) return new GitUri(uri);\n\n        // If this is a git uri, find its repoPath\n        if (uri.scheme === DocumentSchemes.Git) {\n            const data: { path: string; ref: string } = JSON.parse(uri.query);\n\n            const repoPath = await Container.git.getRepoPath(data.path);\n\n            let ref;\n            switch (data.ref) {\n                case emptyStr:\n                case '~':\n                    ref = GitService.uncommittedStagedSha;\n                    break;\n\n                case null:\n                    ref = undefined;\n                    break;\n\n                default:\n                    ref = data.ref;\n                    break;\n            }\n\n            const commitish: GitCommitish = {\n                fileName: data.path,\n                repoPath: repoPath!,\n                sha: ref\n            };\n            return new GitUri(uri, commitish);\n        }\n\n        return new GitUri(uri, await Container.git.getRepoPath(uri));\n    }\n\n    static getDirectory(fileName: string, relativeTo?: string): string {\n        let directory: string | undefined = paths.dirname(fileName);\n        if (relativeTo !== undefined) {\n            directory = paths.relative(relativeTo, directory);\n        }\n        directory = Strings.normalizePath(directory);\n        return directory == null || directory.length === 0 || directory === '.' ? emptyStr : directory;\n    }\n\n    static getFormattedPath(\n        fileNameOrUri: string | Uri,\n        options: { relativeTo?: string; separator?: string; suffix?: string } = {}\n    ): string {\n        const { relativeTo, separator = Strings.pad(GlyphChars.Dot, 2, 2), suffix = emptyStr } = options;\n\n        let fileName: string;\n        if (fileNameOrUri instanceof Uri) {\n            if (GitUri.is(fileNameOrUri)) return fileNameOrUri.getFormattedPath(options);\n\n            fileName = fileNameOrUri.fsPath;\n        }\n        else {\n            fileName = fileNameOrUri;\n        }\n\n        const directory = GitUri.getDirectory(fileName, relativeTo);\n        return !directory\n            ? `${paths.basename(fileName)}${suffix}`\n            : `${paths.basename(fileName)}${suffix}${separator}${directory}`;\n    }\n\n    static relativeTo(fileNameOrUri: string | Uri, relativeTo: string | undefined): string {\n        const fileName = fileNameOrUri instanceof Uri ? fileNameOrUri.fsPath : fileNameOrUri;\n        const relativePath =\n            relativeTo == null || relativeTo.length === 0 || !paths.isAbsolute(fileName)\n                ? fileName\n                : paths.relative(relativeTo, fileName);\n        return Strings.normalizePath(relativePath);\n    }\n\n    static git(fileName: string, repoPath?: string) {\n        const path = GitUri.resolve(fileName, repoPath);\n        return Uri.parse(\n            // Change encoded / back to / otherwise uri parsing won't work properly\n            `${DocumentSchemes.Git}:${encodeURIComponent(path).replace(/%2F/g, slash)}?${encodeURIComponent(\n                JSON.stringify({\n                    // Ensure we use the fsPath here, otherwise the url won't open properly\n                    path: Uri.file(path).fsPath,\n                    ref: '~'\n                })\n            )}`\n        );\n    }\n\n    static resolve(fileName: string, repoPath?: string) {\n        const normalizedFileName = Strings.normalizePath(fileName);\n        if (repoPath === undefined) return normalizedFileName;\n\n        const normalizedRepoPath = Strings.normalizePath(repoPath);\n        if (normalizedFileName == null || normalizedFileName.length === 0) return normalizedRepoPath;\n\n        if (normalizedFileName.startsWith(normalizedRepoPath)) return normalizedFileName;\n\n        return Strings.normalizePath(paths.join(normalizedRepoPath, normalizedFileName));\n    }\n\n    static resolveToUri(fileName: string, repoPath?: string) {\n        return GitUri.file(this.resolve(fileName, repoPath));\n    }\n\n    static toKey(fileName: string): string;\n    static toKey(uri: Uri): string;\n    static toKey(fileNameOrUri: string | Uri): string;\n    static toKey(fileNameOrUri: string | Uri): string {\n        return Strings.normalizePath(typeof fileNameOrUri === 'string' ? fileNameOrUri : fileNameOrUri.fsPath);\n\n        // return typeof fileNameOrUri === 'string'\n        //     ? GitUri.file(fileNameOrUri).toString(true)\n        //     : fileNameOrUri.toString(true);\n    }\n\n    static toRevisionUri(uri: GitUri): Uri;\n    static toRevisionUri(ref: string, fileName: string, repoPath: string): Uri;\n    static toRevisionUri(ref: string, file: GitFile, repoPath: string): Uri;\n    static toRevisionUri(uriOrRef: string | GitUri, fileNameOrFile?: string | GitFile, repoPath?: string): Uri {\n        let fileName: string;\n        let ref: string | undefined;\n        let shortSha: string | undefined;\n\n        if (typeof uriOrRef === 'string') {\n            if (typeof fileNameOrFile === 'string') {\n                fileName = fileNameOrFile;\n            }\n            else {\n                fileName = GitUri.resolve(fileNameOrFile!.fileName, repoPath);\n            }\n\n            ref = uriOrRef;\n            shortSha = GitService.shortenSha(ref);\n        }\n        else {\n            fileName = uriOrRef.fsPath;\n\n            ref = uriOrRef.sha;\n            shortSha = uriOrRef.shortSha;\n            repoPath = uriOrRef.repoPath!;\n        }\n\n        if (ref == null || ref.length === 0) {\n            return Uri.file(fileName);\n        }\n\n        if (GitService.isUncommitted(ref)) {\n            return GitService.isUncommittedStaged(ref) ? GitUri.git(fileName, repoPath) : Uri.file(fileName);\n        }\n\n        const filePath = Strings.normalizePath(fileName, { addLeadingSlash: true });\n        const data: UriRevisionData = {\n            path: filePath,\n            ref: ref,\n            repoPath: Strings.normalizePath(repoPath!)\n        };\n\n        const uri = Uri.parse(\n            // Replace / in the authority with a similar unicode characters otherwise parsing will be wrong\n            `${DocumentSchemes.GitLens}://${encodeURIComponent(shortSha!.replace(/\\//g, '\\u200A\\u2215\\u200A'))}${\n                // Change encoded / back to / otherwise uri parsing won't work properly\n                filePath === slash ? emptyStr : encodeURIComponent(filePath).replace(/%2F/g, slash)\n            }?${encodeURIComponent(JSON.stringify(data))}`\n        );\n        return uri;\n    }\n}\n\ninterface UriRevisionData {\n    path: string;\n    ref?: string;\n    repoPath: string;\n}\n","import { Command, ThemeIcon, TreeItem, TreeItemCollapsibleState, Uri } from 'vscode';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { View } from '../viewBase';\nimport { PageableViewNode, ResourceType, unknownGitUri, ViewNode } from './viewNode';\n\nexport class MessageNode extends ViewNode {\n    constructor(\n        view: View,\n        parent: ViewNode,\n        private readonly _message: string,\n        private readonly _description?: string,\n        private readonly _tooltip?: string,\n        private readonly _iconPath?:\n            | string\n            | Uri\n            | {\n                  light: string | Uri;\n                  dark: string | Uri;\n              }\n            | ThemeIcon\n    ) {\n        super(unknownGitUri, view, parent);\n    }\n\n    getChildren(): ViewNode[] | Promise<ViewNode[]> {\n        return [];\n    }\n\n    getTreeItem(): TreeItem | Promise<TreeItem> {\n        const item = new TreeItem(this._message, TreeItemCollapsibleState.None);\n        item.contextValue = ResourceType.Message;\n        item.description = this._description;\n        item.tooltip = this._tooltip;\n        item.iconPath = this._iconPath;\n        return item;\n    }\n}\n\nexport class CommandMessageNode extends MessageNode {\n    constructor(\n        view: View,\n        parent: ViewNode,\n        private readonly _command: Command,\n        message: string,\n        description?: string,\n        tooltip?: string,\n        iconPath?:\n            | string\n            | Uri\n            | {\n                  light: string | Uri;\n                  dark: string | Uri;\n              }\n            | ThemeIcon\n    ) {\n        super(view, parent, message, description, tooltip, iconPath);\n    }\n\n    getTreeItem(): TreeItem | Promise<TreeItem> {\n        const item = super.getTreeItem();\n        if (item instanceof TreeItem) {\n            item.command = this._command;\n            return item;\n        }\n\n        return item.then(i => {\n            i.command = this._command;\n            return i;\n        });\n    }\n}\n\nexport class UpdateableMessageNode extends ViewNode {\n    constructor(\n        view: View,\n        parent: ViewNode,\n        public readonly id: string,\n        private _message: string,\n        private _tooltip?: string,\n        private _iconPath?:\n            | string\n            | Uri\n            | {\n                  light: string | Uri;\n                  dark: string | Uri;\n              }\n            | ThemeIcon\n    ) {\n        super(unknownGitUri, view, parent);\n    }\n\n    getChildren(): ViewNode[] | Promise<ViewNode[]> {\n        return [];\n    }\n\n    getTreeItem(): TreeItem | Promise<TreeItem> {\n        const item = new TreeItem(this._message, TreeItemCollapsibleState.None);\n        item.id = this.id;\n        item.contextValue = ResourceType.Message;\n        item.tooltip = this._tooltip;\n        item.iconPath = this._iconPath;\n        return item;\n    }\n\n    update(\n        changes: {\n            message?: string;\n            tooltip?: string | null;\n            iconPath?:\n                | string\n                | null\n                | Uri\n                | {\n                      light: string | Uri;\n                      dark: string | Uri;\n                  }\n                | ThemeIcon;\n        },\n        view: View\n    ) {\n        if (changes.message !== undefined) {\n            this._message = changes.message;\n        }\n\n        if (changes.tooltip !== undefined) {\n            this._tooltip = changes.tooltip === null ? undefined : changes.tooltip;\n        }\n\n        if (changes.iconPath !== undefined) {\n            this._iconPath = changes.iconPath === null ? undefined : changes.iconPath;\n        }\n\n        view.triggerNodeChange(this);\n    }\n}\n\nexport abstract class PagerNode extends ViewNode {\n    constructor(\n        view: View,\n        parent: ViewNode & PageableViewNode,\n        protected readonly message: string,\n        maxCount: number | undefined,\n        private readonly _previousNode?: ViewNode,\n        private readonly _pageSize: number = Container.config.views.pageItemLimit\n    ) {\n        super(unknownGitUri, view, parent);\n\n        parent.maxCount = maxCount;\n    }\n\n    showMore() {\n        return this.view.showMoreNodeChildren(\n            this.parent! as ViewNode & PageableViewNode,\n            this._pageSize,\n            this._previousNode\n        );\n    }\n\n    showAll() {\n        return this.view.showMoreNodeChildren(this.parent! as ViewNode & PageableViewNode, 0, this._previousNode);\n    }\n\n    getChildren(): ViewNode[] | Promise<ViewNode[]> {\n        return [];\n    }\n\n    getTreeItem(): TreeItem | Promise<TreeItem> {\n        const item = new TreeItem(this.message, TreeItemCollapsibleState.None);\n        item.contextValue = ResourceType.Pager;\n        item.command = this.getCommand();\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-ellipsis.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-ellipsis.svg')\n        };\n        return item;\n    }\n\n    getCommand(): Command | undefined {\n        return {\n            title: 'Show More',\n            command: 'gitlens.views.showMoreChildren',\n            arguments: [this]\n        };\n    }\n}\n\nexport class ShowMoreNode extends PagerNode {\n    constructor(\n        view: View,\n        parent: ViewNode & PageableViewNode,\n        itemType: string,\n        maxCount: number | undefined,\n        previousNode: ViewNode,\n        pageSize?: number\n    ) {\n        super(\n            view,\n            parent,\n            pageSize === 0\n                ? `Show All ${itemType} ${GlyphChars.Space}${GlyphChars.Dash}${GlyphChars.Space} this may take a while`\n                : `Show More ${itemType}`,\n            maxCount,\n            previousNode,\n            pageSize\n        );\n    }\n}\n","'use strict';\nimport { TextDocument, TextEditor, Uri } from 'vscode';\n\nabstract class Comparer<T> {\n    abstract equals(lhs: T, rhs: T): boolean;\n}\n\nclass UriComparer extends Comparer<Uri> {\n    equals(lhs: Uri | undefined, rhs: Uri | undefined, options: { exact?: boolean } = { exact: false }) {\n        if (lhs === rhs) return true;\n        if (lhs === undefined || rhs === undefined) return false;\n\n        if (options.exact) {\n            return lhs.toString(true) === rhs.toString(true);\n        }\n        return lhs.scheme === rhs.scheme && lhs.fsPath === rhs.fsPath;\n    }\n}\n\nclass TextDocumentComparer extends Comparer<TextDocument> {\n    equals(lhs: TextDocument | undefined, rhs: TextDocument | undefined) {\n        return lhs === rhs;\n        // if (lhs === rhs) return true;\n        // if (lhs === undefined || rhs === undefined) return false;\n\n        // return uriComparer.equals(lhs.uri, rhs.uri);\n    }\n}\n\nclass TextEditorComparer extends Comparer<TextEditor> {\n    equals(\n        lhs: TextEditor | undefined,\n        rhs: TextEditor | undefined,\n        options: { useId: boolean; usePosition: boolean } = { useId: false, usePosition: false }\n    ) {\n        if (lhs === rhs) return true;\n        if (lhs === undefined || rhs === undefined) return false;\n\n        if (options.usePosition && lhs.viewColumn !== rhs.viewColumn) return false;\n\n        if (options.useId && (!lhs.document || !rhs.document)) {\n            if ((lhs as any).id !== (rhs as any).id) return false;\n\n            return true;\n        }\n\n        return textDocumentComparer.equals(lhs.document, rhs.document);\n    }\n}\n\nconst textDocumentComparer = new TextDocumentComparer();\nconst textEditorComparer = new TextEditorComparer();\nconst uriComparer = new UriComparer();\nexport {\n    textDocumentComparer as TextDocumentComparer,\n    textEditorComparer as TextEditorComparer,\n    uriComparer as UriComparer\n};\n","'use strict';\nimport { Disposable, Terminal, window } from 'vscode';\nimport { extensionTerminalName } from './constants';\nimport { Container } from './container';\n\nlet _terminal: Terminal | undefined;\nlet _terminalCwd: string | undefined;\nlet _disposable: Disposable | undefined;\n\nfunction ensureTerminal(cwd: string): Terminal {\n    if (_terminal === undefined) {\n        _terminal = window.createTerminal(extensionTerminalName);\n        _disposable = window.onDidCloseTerminal((e: Terminal) => {\n            if (e.name === extensionTerminalName) {\n                _terminal = undefined;\n                _disposable!.dispose();\n                _disposable = undefined;\n            }\n        });\n\n        Container.context.subscriptions.push(_disposable);\n        _terminalCwd = undefined;\n    }\n\n    if (_terminalCwd !== cwd) {\n        _terminal.sendText(`cd \"${cwd}\"`, true);\n        _terminalCwd = cwd;\n    }\n\n    return _terminal;\n}\n\nexport function runGitCommandInTerminal(command: string, args: string, cwd: string, execute: boolean = false) {\n    // let git = GitService.getGitPath();\n    // if (git.includes(' ')) {\n    //     git = `\"${git}\"`;\n    // }\n\n    const terminal = ensureTerminal(cwd);\n    terminal.show(false);\n    terminal.sendText(`git ${command} ${args}`, execute);\n}\n","'use strict';\nimport { commands, Disposable } from 'vscode';\nimport { CommandContext, extensionId, setCommandContext } from './constants';\nimport { Logger } from './logger';\n\nexport declare interface KeyCommand {\n    onDidPressKey?(key: Keys): Thenable<{} | undefined>;\n}\n\nconst keyNoopCommand = Object.create(null) as KeyCommand;\nexport { keyNoopCommand as KeyNoopCommand };\n\nexport declare type Keys = 'left' | 'right' | ',' | '.' | 'escape';\nexport const keys: Keys[] = ['left', 'right', ',', '.', 'escape'];\n\nexport declare interface KeyMapping {\n    [id: string]: KeyCommand | (() => Thenable<KeyCommand>) | undefined;\n}\n\nconst mappings: KeyMapping[] = [];\n\nexport class KeyboardScope implements Disposable {\n    constructor(private readonly mapping: KeyMapping) {\n        for (const key in mapping) {\n            mapping[key] = mapping[key] || keyNoopCommand;\n        }\n    }\n\n    async dispose() {\n        const index = mappings.indexOf(this.mapping);\n        Logger.log('KeyboardScope.dispose', mappings.length, index);\n        if (index === mappings.length - 1) {\n            mappings.pop();\n            await this.updateKeyCommandsContext(mappings[mappings.length - 1]);\n        }\n        else {\n            mappings.splice(index, 1);\n        }\n    }\n\n    async begin() {\n        mappings.push(this.mapping);\n        await this.updateKeyCommandsContext(this.mapping);\n        return this;\n    }\n\n    async clearKeyCommand(key: Keys) {\n        const mapping = mappings[mappings.length - 1];\n        if (mapping !== this.mapping || !mapping[key]) return;\n\n        Logger.log('KeyboardScope.clearKeyCommand', mappings.length, key);\n        mapping[key] = undefined;\n        await setCommandContext(`${CommandContext.Key}:${key}`, false);\n    }\n\n    async setKeyCommand(key: Keys, command: KeyCommand | (() => Promise<KeyCommand>)) {\n        const mapping = mappings[mappings.length - 1];\n        if (mapping !== this.mapping) return;\n\n        Logger.log('KeyboardScope.setKeyCommand', mappings.length, key, Boolean(mapping[key]));\n\n        if (!mapping[key]) {\n            mapping[key] = command;\n            await setCommandContext(`${CommandContext.Key}:${key}`, true);\n        }\n        else {\n            mapping[key] = command;\n        }\n    }\n\n    private async updateKeyCommandsContext(mapping: KeyMapping) {\n        const promises = [];\n        for (const key of keys) {\n            promises.push(setCommandContext(`${CommandContext.Key}:${key}`, Boolean(mapping && mapping[key])));\n        }\n        await Promise.all(promises);\n    }\n}\n\nexport class Keyboard implements Disposable {\n    private _disposable: Disposable;\n\n    constructor() {\n        const subscriptions = keys.map(key =>\n            commands.registerCommand(`${extensionId}.key.${key}`, () => this.execute(key), this)\n        );\n        this._disposable = Disposable.from(...subscriptions);\n    }\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n    }\n\n    beginScope(mapping?: KeyMapping): Promise<KeyboardScope> {\n        Logger.log('Keyboard.beginScope', mappings.length);\n        return new KeyboardScope(mapping ? Object.assign(Object.create(null), mapping) : Object.create(null)).begin();\n    }\n\n    async execute(key: Keys): Promise<{} | undefined> {\n        if (!mappings.length) return undefined;\n\n        try {\n            const mapping = mappings[mappings.length - 1];\n\n            let command = mapping[key] as KeyCommand | (() => Promise<KeyCommand>);\n            if (typeof command === 'function') {\n                command = await command();\n            }\n            if (!command || typeof command.onDidPressKey !== 'function') return undefined;\n\n            Logger.log('Keyboard.execute', key);\n\n            return await command.onDidPressKey(key);\n        }\n        catch (ex) {\n            Logger.error(ex, 'Keyboard.execute');\n            return undefined;\n        }\n    }\n}\n","'use strict';\nimport { env, Range, Uri, window } from 'vscode';\nimport { Logger } from '../../logger';\nimport { Messages } from '../../messages';\nimport { GitLogCommit } from '../models/logCommit';\n\nexport enum RemoteResourceType {\n    Branch = 'branch',\n    Branches = 'branches',\n    Commit = 'commit',\n    File = 'file',\n    Repo = 'repo',\n    Revision = 'revision'\n}\n\nexport type RemoteResource =\n    | {\n          type: RemoteResourceType.Branch;\n          branch: string;\n      }\n    | {\n          type: RemoteResourceType.Branches;\n      }\n    | {\n          type: RemoteResourceType.Commit;\n          sha: string;\n      }\n    | {\n          type: RemoteResourceType.File;\n          branch?: string;\n          fileName: string;\n          range?: Range;\n      }\n    | {\n          type: RemoteResourceType.Repo;\n      }\n    | {\n          type: RemoteResourceType.Revision;\n          branch?: string;\n          commit?: GitLogCommit;\n          fileName: string;\n          range?: Range;\n          sha?: string;\n      };\n\nexport function getNameFromRemoteResource(resource: RemoteResource) {\n    switch (resource.type) {\n        case RemoteResourceType.Branch:\n            return 'Branch';\n        case RemoteResourceType.Branches:\n            return 'Branches';\n        case RemoteResourceType.Commit:\n            return 'Commit';\n        case RemoteResourceType.File:\n            return 'File';\n        case RemoteResourceType.Repo:\n            return 'Repository';\n        case RemoteResourceType.Revision:\n            return 'Revision';\n        default:\n            return '';\n    }\n}\n\nexport abstract class RemoteProvider {\n    private _name: string | undefined;\n\n    constructor(\n        public readonly domain: string,\n        public readonly path: string,\n        public readonly protocol: string = 'https',\n        name?: string,\n        public readonly custom: boolean = false\n    ) {\n        this._name = name;\n    }\n\n    get icon(): string {\n        return 'remote';\n    }\n\n    get displayPath(): string {\n        return this.path;\n    }\n\n    abstract get name(): string;\n\n    protected get baseUrl() {\n        return `${this.protocol}://${this.domain}/${this.path}`;\n    }\n\n    enrichMessage(message: string): string {\n        return message;\n    }\n\n    protected formatName(name: string) {\n        if (this._name !== undefined) return this._name;\n        return `${name}${this.custom ? ` (${this.domain})` : ''}`;\n    }\n\n    protected splitPath(): [string, string] {\n        const index = this.path.indexOf('/');\n        return [this.path.substring(0, index), this.path.substring(index + 1)];\n    }\n\n    protected getUrlForRepository(): string {\n        return this.baseUrl;\n    }\n    protected abstract getUrlForBranches(): string;\n    protected abstract getUrlForBranch(branch: string): string;\n    protected abstract getUrlForCommit(sha: string): string;\n    protected abstract getUrlForFile(fileName: string, branch?: string, sha?: string, range?: Range): string;\n\n    private openUrl(url?: string): Thenable<{} | undefined> {\n        if (url === undefined) return Promise.resolve(undefined);\n\n        return env.openExternal(Uri.parse(url));\n    }\n\n    async copy(resource: RemoteResource): Promise<{} | undefined> {\n        const url = this.url(resource);\n        if (url === undefined) return undefined;\n\n        try {\n            void (await env.clipboard.writeText(url));\n\n            return undefined;\n        }\n        catch (ex) {\n            if (ex.message.includes(\"Couldn't find the required `xsel` binary\")) {\n                window.showErrorMessage(\n                    'Unable to copy remote url, xsel is not installed. Please install it via your package manager, e.g. `sudo apt install xsel`'\n                );\n                return undefined;\n            }\n\n            Logger.error(ex, 'CopyRemoteUrlToClipboardCommand');\n            return Messages.showGenericErrorMessage('Unable to copy remote url');\n        }\n    }\n\n    open(resource: RemoteResource): Thenable<{} | undefined> {\n        return this.openUrl(this.url(resource));\n    }\n\n    url(resource: RemoteResource): string | undefined {\n        switch (resource.type) {\n            case RemoteResourceType.Branch:\n                return this.getUrlForBranch(encodeURIComponent(resource.branch));\n            case RemoteResourceType.Branches:\n                return this.getUrlForBranches();\n            case RemoteResourceType.Commit:\n                return this.getUrlForCommit(encodeURIComponent(resource.sha));\n            case RemoteResourceType.File:\n                return this.getUrlForFile(\n                    resource.fileName,\n                    resource.branch !== undefined ? encodeURIComponent(resource.branch) : undefined,\n                    undefined,\n                    resource.range\n                );\n            case RemoteResourceType.Repo:\n                return this.getUrlForRepository();\n            case RemoteResourceType.Revision:\n                return this.getUrlForFile(\n                    resource.fileName,\n                    resource.branch !== undefined ? encodeURIComponent(resource.branch) : undefined,\n                    resource.sha !== undefined ? encodeURIComponent(resource.sha) : undefined,\n                    resource.range\n                );\n        }\n\n        return undefined;\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { Command, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Commands, DiffWithPreviousCommandArgs } from '../../commands';\nimport { ViewFilesLayout } from '../../configuration';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { CommitFormatter, GitBranch, GitLogCommit } from '../../git/gitService';\nimport { Arrays, Iterables, Strings } from '../../system';\nimport { ViewWithFiles } from '../viewBase';\nimport { CommitFileNode } from './commitFileNode';\nimport { FileNode, FolderNode } from './folderNode';\nimport { ResourceType, ViewNode, ViewRefNode } from './viewNode';\n\nexport class CommitNode extends ViewRefNode<ViewWithFiles> {\n    constructor(\n        view: ViewWithFiles,\n        parent: ViewNode,\n        public readonly commit: GitLogCommit,\n        public readonly branch?: GitBranch,\n        private readonly getBranchAndTagTips?: (sha: string) => string | undefined\n    ) {\n        super(commit.toGitUri(), view, parent);\n    }\n\n    get ref(): string {\n        return this.commit.sha;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const commit = this.commit;\n        let children: FileNode[] = [\n            ...Iterables.map(commit.files, s => new CommitFileNode(this.view, this, s, commit.toFileCommit(s)))\n        ];\n\n        if (this.view.config.files.layout !== ViewFilesLayout.List) {\n            const hierarchy = Arrays.makeHierarchical(\n                children,\n                n => n.uri.relativePath.split('/'),\n                (...parts: string[]) => Strings.normalizePath(paths.join(...parts)),\n                this.view.config.files.compact\n            );\n\n            const root = new FolderNode(this.view, this, this.repoPath, '', hierarchy);\n            children = (await root.getChildren()) as FileNode[];\n        }\n        else {\n            children.sort((a, b) =>\n                a.label!.localeCompare(b.label!, undefined, { numeric: true, sensitivity: 'base' })\n            );\n        }\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const label = CommitFormatter.fromTemplate(this.view.config.commitFormat, this.commit, {\n            dateFormat: Container.config.defaultDateFormat,\n            getBranchAndTagTips: this.getBranchAndTagTips,\n            truncateMessageAtNewLine: true\n        });\n\n        const item = new TreeItem(label, TreeItemCollapsibleState.Collapsed);\n        item.contextValue = ResourceType.Commit;\n        if (this.branch !== undefined && this.branch.current) {\n            item.contextValue += '+current';\n        }\n        item.description = CommitFormatter.fromTemplate(this.view.config.commitDescriptionFormat, this.commit, {\n            truncateMessageAtNewLine: true,\n            dateFormat: Container.config.defaultDateFormat\n        });\n\n        if (this.view.config.avatars) {\n            item.iconPath = this.commit.getGravatarUri(Container.config.defaultGravatarsStyle);\n        }\n        else {\n            item.iconPath = {\n                dark: Container.context.asAbsolutePath('images/dark/icon-commit.svg'),\n                light: Container.context.asAbsolutePath('images/light/icon-commit.svg')\n            };\n        }\n\n        item.tooltip = CommitFormatter.fromTemplate(\n            this.commit.isUncommitted\n                ? `\\${author} ${GlyphChars.Dash} \\${id}\\n\\${ago} (\\${date})`\n                : `\\${author} \\${(email) }${GlyphChars.Dash} \\${id}\\${ (tips)}\\n\\${ago} (\\${date})\\n\\n\\${message}`,\n            this.commit,\n            {\n                dateFormat: Container.config.defaultDateFormat,\n                getBranchAndTagTips: this.getBranchAndTagTips\n            }\n        );\n\n        if (!this.commit.isUncommitted) {\n            item.tooltip += this.commit.getFormattedDiffStatus({\n                expand: true,\n                prefix: '\\n\\n',\n                separator: '\\n'\n            });\n        }\n\n        return item;\n    }\n\n    getCommand(): Command | undefined {\n        const commandArgs: DiffWithPreviousCommandArgs = {\n            commit: this.commit,\n            line: 0,\n            showOptions: {\n                preserveFocus: true,\n                preview: true\n            }\n        };\n        return {\n            title: 'Compare File with Previous Revision',\n            command: Commands.DiffWithPrevious,\n            arguments: [this.uri, commandArgs]\n        };\n    }\n}\n","'use strict';\nimport { GitLogCommit } from '../../git/gitService';\nimport { MessageNode } from './common';\nimport { ViewNode } from './viewNode';\n\nconst markers: [number, string][] = [\n    [0, 'Less than a week ago'],\n    [7, 'Over a week ago'],\n    [30, 'Over a month ago'],\n    [90, 'Over 3 months ago']\n];\n\n// eslint-disable-next-line consistent-return\nexport function* insertDateMarkers<T extends ViewNode & { commit: GitLogCommit }>(\n    iterable: Iterable<T>,\n    parent: ViewNode,\n    skip?: number\n): Iterable<ViewNode> {\n    if (!parent.view.config.showRelativeDateMarkers) {\n        return yield* iterable;\n    }\n\n    let index = skip || 0;\n    let time = undefined;\n    const now = Date.now();\n\n    let first = true;\n\n    for (const node of iterable) {\n        if (index < markers.length) {\n            let [daysAgo, marker] = markers[index];\n            if (time === undefined) {\n                const date = new Date(now);\n                time = date.setDate(date.getDate() - daysAgo);\n            }\n\n            const date = new Date(node.commit.committerDate.setUTCHours(0, 0, 0, 0)).getTime();\n            if (date <= time) {\n                while (index < markers.length - 1) {\n                    [daysAgo] = markers[index + 1];\n                    const nextDate = new Date(now);\n                    const nextTime = nextDate.setDate(nextDate.getDate() - daysAgo);\n\n                    if (date > nextTime) break;\n\n                    index++;\n                    time = undefined;\n                    [, marker] = markers[index];\n                }\n\n                // Don't show the last marker as the first entry -- since it could be wildly far off\n                if (!first || index < markers.length - 1) {\n                    yield new MessageNode(parent.view, parent, marker);\n                }\n\n                index++;\n                time = undefined;\n            }\n        }\n\n        first = false;\n        yield node;\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { Command, Selection, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Commands, DiffWithPreviousCommandArgs } from '../../commands';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { CommitFormatter, GitFile, GitLogCommit, GitUri, StatusFileFormatter } from '../../git/gitService';\nimport { View } from '../viewBase';\nimport { ResourceType, ViewNode, ViewRefFileNode } from './viewNode';\n\nexport class CommitFileNode extends ViewRefFileNode {\n    constructor(\n        view: View,\n        parent: ViewNode,\n        public readonly file: GitFile,\n        public commit: GitLogCommit,\n        private readonly _options: { displayAsCommit?: boolean; inFileHistory?: boolean; selection?: Selection } = {}\n    ) {\n        super(GitUri.fromFile(file, commit.repoPath, commit.sha), view, parent);\n    }\n\n    get fileName(): string {\n        return this.file.fileName;\n    }\n\n    get priority(): number {\n        return 0;\n    }\n\n    get ref(): string {\n        return this.commit.sha;\n    }\n\n    getChildren(): ViewNode[] {\n        return [];\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        if (!this.commit.isFile) {\n            // See if we can get the commit directly from the multi-file commit\n            const commit = this.commit.toFileCommit(this.file);\n            if (commit === undefined) {\n                const log = await Container.git.getLogForFile(this.repoPath, this.file.fileName, {\n                    maxCount: 2,\n                    ref: this.commit.sha\n                });\n                if (log !== undefined) {\n                    this.commit = log.commits.get(this.commit.sha) || this.commit;\n                }\n            }\n            else {\n                this.commit = commit;\n            }\n        }\n\n        const item = new TreeItem(this.label, TreeItemCollapsibleState.None);\n        item.contextValue = this.resourceType;\n        item.description = this.description;\n        item.tooltip = this.tooltip;\n\n        if (this._options.displayAsCommit && this.view.config.avatars) {\n            item.iconPath = this.commit.getGravatarUri(Container.config.defaultGravatarsStyle);\n        }\n        else {\n            const icon = GitFile.getStatusIcon(this.file.status);\n            item.iconPath = {\n                dark: Container.context.asAbsolutePath(paths.join('images', 'dark', icon)),\n                light: Container.context.asAbsolutePath(paths.join('images', 'light', icon))\n            };\n        }\n\n        item.command = this.getCommand();\n\n        // Only cache the label/description/tooltip for a single refresh\n        this._label = undefined;\n        this._description = undefined;\n        this._tooltip = undefined;\n\n        return item;\n    }\n\n    private _description: string | undefined;\n    get description() {\n        if (this._description === undefined) {\n            this._description = this._options.displayAsCommit\n                ? CommitFormatter.fromTemplate(this.getCommitDescriptionTemplate(), this.commit, {\n                      truncateMessageAtNewLine: true,\n                      dateFormat: Container.config.defaultDateFormat\n                  })\n                : StatusFileFormatter.fromTemplate(this.getCommitFileDescriptionTemplate(), this.file, {\n                      relativePath: this.relativePath\n                  });\n        }\n        return this._description;\n    }\n\n    private _folderName: string | undefined;\n    get folderName() {\n        if (this._folderName === undefined) {\n            this._folderName = paths.dirname(this.uri.relativePath);\n        }\n        return this._folderName;\n    }\n\n    private _label: string | undefined;\n    get label() {\n        if (this._label === undefined) {\n            this._label = this._options.displayAsCommit\n                ? CommitFormatter.fromTemplate(this.getCommitTemplate(), this.commit, {\n                      truncateMessageAtNewLine: true,\n                      dateFormat: Container.config.defaultDateFormat\n                  })\n                : StatusFileFormatter.fromTemplate(this.getCommitFileTemplate(), this.file, {\n                      relativePath: this.relativePath\n                  });\n        }\n        return this._label;\n    }\n\n    private _relativePath: string | undefined;\n    get relativePath(): string | undefined {\n        return this._relativePath;\n    }\n    set relativePath(value: string | undefined) {\n        this._relativePath = value;\n        this._label = undefined;\n        this._tooltip = undefined;\n    }\n\n    protected get resourceType(): string {\n        if (!this.commit.isUncommitted) {\n            return `${ResourceType.File}+committed${this._options.inFileHistory ? '+history' : ''}`;\n        }\n\n        return this.commit.isUncommittedStaged ? `${ResourceType.File}+staged` : `${ResourceType.File}+unstaged`;\n    }\n\n    private _tooltip: string | undefined;\n    get tooltip() {\n        if (this._tooltip === undefined) {\n            if (this._options.displayAsCommit) {\n                // eslint-disable-next-line no-template-curly-in-string\n                const status = StatusFileFormatter.fromTemplate('${status}${ (originalPath)}', this.file);\n                this._tooltip = CommitFormatter.fromTemplate(\n                    this.commit.isUncommitted\n                        ? `\\${author} ${GlyphChars.Dash} \\${id}\\n${status}\\n\\${ago} (\\${date})`\n                        : `\\${author} ${\n                              GlyphChars.Dash\n                          } \\${id}\\n${status}\\n\\${ago} (\\${date})\\n\\n\\${message}${this.commit.getFormattedDiffStatus({\n                              expand: true,\n                              prefix: '\\n\\n',\n                              separator: '\\n'\n                          })}`,\n                    this.commit,\n                    {\n                        dateFormat: Container.config.defaultDateFormat\n                    }\n                );\n            }\n            else {\n                this._tooltip = StatusFileFormatter.fromTemplate(\n                    // eslint-disable-next-line no-template-curly-in-string\n                    '${file}\\n${directory}/\\n\\n${status}${ (originalPath)}',\n                    this.file\n                );\n            }\n        }\n        return this._tooltip;\n    }\n\n    protected getCommitTemplate() {\n        return this.view.config.commitFormat;\n    }\n\n    protected getCommitDescriptionTemplate() {\n        return this.view.config.commitDescriptionFormat;\n    }\n\n    protected getCommitFileTemplate() {\n        return this.view.config.commitFileFormat;\n    }\n\n    protected getCommitFileDescriptionTemplate() {\n        return this.view.config.commitFileDescriptionFormat;\n    }\n\n    getCommand(): Command | undefined {\n        let line;\n        if (this.commit.line !== undefined) {\n            line = this.commit.line.to.line - 1;\n        }\n        else {\n            line = this._options.selection !== undefined ? this._options.selection.active.line : 0;\n        }\n\n        const commandArgs: DiffWithPreviousCommandArgs = {\n            commit: this.commit,\n            line: line,\n            showOptions: {\n                preserveFocus: true,\n                preview: true\n            }\n        };\n        return {\n            title: 'Compare File with Previous Revision',\n            command: Commands.DiffWithPrevious,\n            arguments: [GitUri.fromFile(this.file, this.commit.repoPath), commandArgs]\n        };\n    }\n}\n","'use strict';\nimport { TraceLevel } from './logger';\n\nexport interface Config {\n    blame: {\n        avatars: boolean;\n        compact: boolean;\n        dateFormat: string | null;\n        format: string;\n        heatmap: {\n            enabled: boolean;\n            location: 'left' | 'right';\n        };\n        highlight: {\n            enabled: boolean;\n            locations: HighlightLocations[];\n        };\n        ignoreWhitespace: boolean;\n        separateLines: boolean;\n        toggleMode: AnnotationsToggleMode;\n    };\n    currentLine: {\n        dateFormat: string | null;\n        enabled: boolean;\n        format: string;\n        scrollable: boolean;\n    };\n    codeLens: CodeLensConfig;\n    debug: boolean;\n    defaultDateFormat: string | null;\n    defaultDateShortFormat: string | null;\n    defaultDateSource: DateSource;\n    defaultDateStyle: DateStyle;\n    defaultGravatarsStyle: GravatarDefaultStyle;\n    heatmap: {\n        ageThreshold: number;\n        coldColor: string;\n        hotColor: string;\n        toggleMode: AnnotationsToggleMode;\n    };\n    hovers: {\n        annotations: {\n            changes: boolean;\n            details: boolean;\n            enabled: boolean;\n            over: 'line' | 'annotation';\n        };\n        currentLine: {\n            changes: boolean;\n            details: boolean;\n            enabled: boolean;\n            over: 'line' | 'annotation';\n        };\n        avatars: boolean;\n        changesDiff: 'line' | 'hunk';\n        detailsMarkdownFormat: string;\n        enabled: boolean;\n    };\n    insiders: boolean;\n    keymap: KeyMap;\n    liveshare: {\n        allowGuestAccess: boolean;\n    };\n    menus: boolean | MenuConfig;\n    mode: {\n        active: string;\n        statusBar: {\n            enabled: boolean;\n            alignment: 'left' | 'right';\n        };\n    };\n    modes: { [key: string]: ModeConfig };\n    outputLevel: TraceLevel;\n    recentChanges: {\n        highlight: {\n            locations: HighlightLocations[];\n        };\n        toggleMode: AnnotationsToggleMode;\n    };\n    remotes: RemotesConfig[];\n    showWhatsNewAfterUpgrades: boolean;\n    statusBar: {\n        alignment: 'left' | 'right';\n        command: StatusBarCommand;\n        dateFormat: string | null;\n        enabled: boolean;\n        format: string;\n        reduceFlicker: boolean;\n    };\n    strings: {\n        codeLens: {\n            unsavedChanges: {\n                recentChangeAndAuthors: string;\n                recentChangeOnly: string;\n                authorsOnly: string;\n            };\n        };\n    };\n    views: ViewsConfig;\n    advanced: AdvancedConfig;\n}\n\nexport enum AnnotationsToggleMode {\n    File = 'file',\n    Window = 'window'\n}\n\nexport enum CodeLensCommand {\n    DiffWithPrevious = 'gitlens.diffWithPrevious',\n    ShowQuickCommitDetails = 'gitlens.showQuickCommitDetails',\n    ShowQuickCommitFileDetails = 'gitlens.showQuickCommitFileDetails',\n    ShowQuickCurrentBranchHistory = 'gitlens.showQuickRepoHistory',\n    ShowQuickFileHistory = 'gitlens.showQuickFileHistory',\n    ToggleFileBlame = 'gitlens.toggleFileBlame'\n}\n\nexport enum CodeLensScopes {\n    Document = 'document',\n    Containers = 'containers',\n    Blocks = 'blocks'\n}\n\nexport enum CustomRemoteType {\n    Bitbucket = 'Bitbucket',\n    BitbucketServer = 'BitbucketServer',\n    Custom = 'Custom',\n    GitHub = 'GitHub',\n    GitLab = 'GitLab'\n}\n\nexport enum DateSource {\n    Authored = 'authored',\n    Committed = 'committed'\n}\n\nexport enum DateStyle {\n    Absolute = 'absolute',\n    Relative = 'relative'\n}\n\nexport enum FileAnnotationType {\n    Blame = 'blame',\n    Heatmap = 'heatmap',\n    RecentChanges = 'recentChanges'\n}\n\nexport enum GravatarDefaultStyle {\n    Faces = 'wavatar',\n    Geometric = 'identicon',\n    Monster = 'monsterid',\n    MysteryPerson = 'mp',\n    Retro = 'retro',\n    Robot = 'robohash'\n}\n\nexport enum HighlightLocations {\n    Gutter = 'gutter',\n    Line = 'line',\n    Overview = 'overview'\n}\n\nexport enum KeyMap {\n    Alternate = 'alternate',\n    Chorded = 'chorded',\n    None = 'none'\n}\n\nexport enum StatusBarCommand {\n    DiffWithPrevious = 'gitlens.diffWithPrevious',\n    DiffWithWorking = 'gitlens.diffWithWorking',\n    ShowQuickCommitDetails = 'gitlens.showQuickCommitDetails',\n    ShowQuickCommitFileDetails = 'gitlens.showQuickCommitFileDetails',\n    ShowQuickCurrentBranchHistory = 'gitlens.showQuickRepoHistory',\n    ShowQuickFileHistory = 'gitlens.showQuickFileHistory',\n    ToggleCodeLens = 'gitlens.toggleCodeLens',\n    ToggleFileBlame = 'gitlens.toggleFileBlame'\n}\n\nexport enum ViewBranchesLayout {\n    List = 'list',\n    Tree = 'tree'\n}\n\nexport enum ViewFilesLayout {\n    Auto = 'auto',\n    List = 'list',\n    Tree = 'tree'\n}\n\nexport enum ViewLocation {\n    Explorer = 'explorer',\n    GitLens = 'gitlens',\n    SourceControl = 'scm'\n}\n\nexport enum ViewShowBranchComparison {\n    Branch = 'branch',\n    Working = 'working'\n}\n\nexport interface AdvancedConfig {\n    abbreviatedShaLength: number;\n    blame: {\n        customArguments: string[] | null;\n        delayAfterEdit: number;\n        sizeThresholdAfterEdit: number;\n    };\n    caching: {\n        enabled: boolean;\n    };\n    fileHistoryFollowsRenames: boolean;\n    maxListItems: number;\n    maxSearchItems: number;\n    messages: {\n        suppressCommitHasNoPreviousCommitWarning: boolean;\n        suppressCommitNotFoundWarning: boolean;\n        suppressFileNotUnderSourceControlWarning: boolean;\n        suppressGitDisabledWarning: boolean;\n        suppressGitVersionWarning: boolean;\n        suppressLineUncommittedWarning: boolean;\n        suppressNoRepositoryWarning: boolean;\n        suppressSupportGitLensNotification: boolean;\n    };\n    quickPick: {\n        closeOnFocusOut: boolean;\n    };\n    repositorySearchDepth: number;\n    similarityThreshold: number;\n    telemetry: {\n        enabled: boolean;\n    };\n    useSymmetricDifferenceNotation: boolean;\n}\n\nexport interface CodeLensConfig {\n    authors: {\n        enabled: boolean;\n        command: CodeLensCommand;\n    };\n    enabled: boolean;\n    includeSingleLineSymbols: boolean;\n    recentChange: {\n        enabled: boolean;\n        command: CodeLensCommand;\n    };\n    scopes: CodeLensScopes[];\n    scopesByLanguage: CodeLensLanguageScope[];\n    symbolScopes: string[];\n}\n\nexport interface CodeLensLanguageScope {\n    language: string | undefined;\n    scopes?: CodeLensScopes[];\n    symbolScopes?: string[];\n}\n\nexport interface CompareViewConfig {\n    avatars: boolean;\n    enabled: boolean;\n    files: ViewsFilesConfig;\n    location: ViewLocation;\n}\n\nexport interface FileHistoryViewConfig {\n    avatars: boolean;\n    enabled: boolean;\n    location: ViewLocation;\n}\n\nexport interface LineHistoryViewConfig {\n    avatars: boolean;\n    enabled: boolean;\n    location: ViewLocation;\n}\n\nexport interface MenuConfig {\n    editor:\n        | false\n        | {\n              blame: boolean;\n              clipboard: boolean;\n              compare: boolean;\n              details: boolean;\n              history: boolean;\n              remote: boolean;\n          };\n    editorGroup:\n        | false\n        | {\n              compare: boolean;\n              history: boolean;\n          };\n    editorTab:\n        | false\n        | {\n              clipboard: boolean;\n              compare: boolean;\n              history: boolean;\n              remote: boolean;\n          };\n    explorer:\n        | false\n        | {\n              clipboard: boolean;\n              compare: boolean;\n              history: boolean;\n              remote: boolean;\n          };\n    scmGroup:\n        | false\n        | {\n              compare: boolean;\n              openClose: boolean;\n              stash: boolean;\n              stashInline: boolean;\n          };\n    scmItem:\n        | false\n        | {\n              clipboard: boolean;\n              compare: boolean;\n              history: boolean;\n              remote: boolean;\n              stash: boolean;\n          };\n}\n\nexport interface ModeConfig {\n    name: string;\n    statusBarItemName?: string;\n    description?: string;\n    annotations?: 'blame' | 'heatmap' | 'recentChanges';\n    codeLens?: boolean;\n    currentLine?: boolean;\n    hovers?: boolean;\n    statusBar?: boolean;\n    views?: boolean;\n}\n\nexport interface RemotesConfig {\n    domain: string;\n    name?: string;\n    protocol?: string;\n    type: CustomRemoteType;\n    urls?: RemotesUrlsConfig;\n}\n\nexport interface RemotesUrlsConfig {\n    repository: string;\n    branches: string;\n    branch: string;\n    commit: string;\n    file: string;\n    fileInBranch: string;\n    fileInCommit: string;\n    fileLine: string;\n    fileRange: string;\n}\n\nexport interface RepositoriesViewConfig {\n    autoRefresh: boolean;\n    autoReveal: boolean;\n    avatars: boolean;\n    branches: {\n        layout: ViewBranchesLayout;\n    };\n    compact: boolean;\n    enabled: boolean;\n    files: ViewsFilesConfig;\n    includeWorkingTree: boolean;\n    location: ViewLocation;\n    showBranchComparison: false | ViewShowBranchComparison;\n    showTrackingBranch: boolean;\n}\n\nexport interface SearchViewConfig {\n    avatars: boolean;\n    enabled: boolean;\n    files: ViewsFilesConfig;\n    location: ViewLocation;\n}\n\nexport interface ViewsConfig {\n    fileHistory: FileHistoryViewConfig;\n    commitFileDescriptionFormat: string;\n    commitFileFormat: string;\n    commitDescriptionFormat: string;\n    commitFormat: string;\n    compare: CompareViewConfig;\n    defaultItemLimit: number;\n    lineHistory: LineHistoryViewConfig;\n    pageItemLimit: number;\n    repositories: RepositoriesViewConfig;\n    search: SearchViewConfig;\n    showRelativeDateMarkers: boolean;\n    stashFileDescriptionFormat: string;\n    stashFileFormat: string;\n    stashDescriptionFormat: string;\n    stashFormat: string;\n    statusFileDescriptionFormat: string;\n    statusFileFormat: string;\n}\n\nexport interface ViewsFilesConfig {\n    compact: boolean;\n    layout: ViewFilesLayout;\n    threshold: number;\n}\n","module.exports = require(\"fs\");","'use strict';\nimport { GlyphChars } from '../../constants';\nimport { Strings } from '../../system';\nimport { GitUri } from '../gitUri';\nimport { GitLogCommit } from './logCommit';\n\nexport declare type GitFileStatus = '!' | '?' | 'A' | 'C' | 'D' | 'M' | 'R' | 'T' | 'U' | 'X' | 'B';\n\nexport interface GitFile {\n    status: GitFileStatus;\n    readonly repoPath?: string;\n    readonly indexStatus?: GitFileStatus;\n    readonly workingTreeStatus?: GitFileStatus;\n    readonly fileName: string;\n    readonly originalFileName?: string;\n}\n\nexport interface GitFileWithCommit extends GitFile {\n    readonly commit: GitLogCommit;\n}\n\nexport namespace GitFile {\n    export function getFormattedDirectory(\n        file: GitFile,\n        includeOriginal: boolean = false,\n        relativeTo?: string\n    ): string {\n        const directory = GitUri.getDirectory(file.fileName, relativeTo);\n        return includeOriginal && file.status === 'R' && file.originalFileName\n            ? `${directory} ${Strings.pad(GlyphChars.ArrowLeft, 1, 1)} ${file.originalFileName}`\n            : directory;\n    }\n\n    export function getFormattedPath(\n        file: GitFile,\n        options: { relativeTo?: string; separator?: string; suffix?: string } = {}\n    ): string {\n        return GitUri.getFormattedPath(file.fileName, options);\n    }\n\n    export function getOriginalRelativePath(file: GitFile, relativeTo?: string): string {\n        if (file.originalFileName == null || file.originalFileName.length === 0) return '';\n\n        return GitUri.relativeTo(file.originalFileName, relativeTo);\n    }\n\n    export function getRelativePath(file: GitFile, relativeTo?: string): string {\n        return GitUri.relativeTo(file.fileName, relativeTo);\n    }\n\n    const statusIconsMap = {\n        '!': 'icon-status-ignored.svg',\n        '?': 'icon-status-untracked.svg',\n        A: 'icon-status-added.svg',\n        C: 'icon-status-copied.svg',\n        D: 'icon-status-deleted.svg',\n        M: 'icon-status-modified.svg',\n        R: 'icon-status-renamed.svg',\n        T: 'icon-status-modified.svg',\n        U: 'icon-status-conflict.svg',\n        X: 'icon-status-unknown.svg',\n        B: 'icon-status-unknown.svg'\n    };\n\n    export function getStatusIcon(status: GitFileStatus): string {\n        return statusIconsMap[status] || statusIconsMap['X'];\n    }\n\n    const statusOcticonsMap = {\n        '!': '$(diff-ignored)',\n        '?': '$(diff-added)',\n        A: '$(diff-added)',\n        C: '$(diff-added)',\n        D: '$(diff-removed)',\n        M: '$(diff-modified)',\n        R: '$(diff-renamed)',\n        T: '$(diff-modified)',\n        U: '$(alert)',\n        X: '$(question)',\n        B: '$(question)'\n    };\n\n    export function getStatusOcticon(status: GitFileStatus, missing: string = GlyphChars.Space.repeat(4)): string {\n        return statusOcticonsMap[status] || missing;\n    }\n\n    const statusTextMap = {\n        '!': 'Ignored',\n        '?': 'Untracked',\n        A: 'Added',\n        C: 'Copied',\n        D: 'Deleted',\n        M: 'Modified',\n        R: 'Renamed',\n        T: 'Modified',\n        U: 'Conflict',\n        X: 'Unknown',\n        B: 'Unknown'\n    };\n\n    export function getStatusText(status: GitFileStatus): string {\n        return statusTextMap[status] || statusTextMap['X'];\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { Git, GitAuthor, GitBlame, GitBlameCommit, GitCommitLine } from '../git';\nimport { debug, Strings } from '../../system';\n\nconst emptyStr = '';\nconst slash = '/';\n\ninterface BlameEntry {\n    sha: string;\n\n    line: number;\n    originalLine: number;\n    lineCount: number;\n\n    author: string;\n    authorDate?: string;\n    authorTimeZone?: string;\n    authorEmail?: string;\n\n    committerDate?: string;\n    committerTimeZone?: string;\n\n    previousSha?: string;\n    previousFileName?: string;\n\n    fileName?: string;\n\n    summary?: string;\n}\n\nexport class GitBlameParser {\n    @debug({ args: false, singleLine: true })\n    static parse(\n        data: string,\n        repoPath: string | undefined,\n        fileName: string,\n        currentUser: { name?: string; email?: string } | undefined\n    ): GitBlame | undefined {\n        if (!data) return undefined;\n\n        const authors: Map<string, GitAuthor> = new Map();\n        const commits: Map<string, GitBlameCommit> = new Map();\n        const lines: GitCommitLine[] = [];\n\n        let relativeFileName = repoPath && fileName;\n\n        let entry: BlameEntry | undefined = undefined;\n        let line: string;\n        let lineParts: string[];\n\n        let first = true;\n\n        for (line of Strings.lines(data)) {\n            lineParts = line.split(' ');\n            if (lineParts.length < 2) continue;\n\n            if (entry === undefined) {\n                entry = {\n                    author: undefined!,\n                    sha: lineParts[0],\n                    originalLine: parseInt(lineParts[1], 10),\n                    line: parseInt(lineParts[2], 10),\n                    lineCount: parseInt(lineParts[3], 10)\n                };\n\n                continue;\n            }\n\n            switch (lineParts[0]) {\n                case 'author':\n                    if (Git.isUncommitted(entry.sha)) {\n                        entry.author = 'You';\n                    }\n                    else {\n                        entry.author = lineParts\n                            .slice(1)\n                            .join(' ')\n                            .trim();\n                    }\n                    break;\n\n                case 'author-mail': {\n                    if (Git.isUncommitted(entry.sha)) {\n                        entry.authorEmail = currentUser !== undefined ? currentUser.email : undefined;\n                        continue;\n                    }\n\n                    entry.authorEmail = lineParts\n                        .slice(1)\n                        .join(' ')\n                        .trim();\n                    const start = entry.authorEmail.indexOf('<');\n                    if (start >= 0) {\n                        const end = entry.authorEmail.indexOf('>', start);\n                        if (end > start) {\n                            entry.authorEmail = entry.authorEmail.substring(start + 1, end);\n                        }\n                        else {\n                            entry.authorEmail = entry.authorEmail.substring(start + 1);\n                        }\n                    }\n\n                    break;\n                }\n                case 'author-time':\n                    entry.authorDate = lineParts[1];\n                    break;\n\n                case 'author-tz':\n                    entry.authorTimeZone = lineParts[1];\n                    break;\n\n                case 'committer-time':\n                    entry.committerDate = lineParts[1];\n                    break;\n\n                case 'committer-tz':\n                    entry.committerTimeZone = lineParts[1];\n                    break;\n\n                case 'summary':\n                    entry.summary = lineParts\n                        .slice(1)\n                        .join(' ')\n                        .trim();\n                    break;\n\n                case 'previous':\n                    entry.previousSha = lineParts[1];\n                    entry.previousFileName = lineParts.slice(2).join(' ');\n                    break;\n\n                case 'filename':\n                    entry.fileName = lineParts.slice(1).join(' ');\n\n                    if (first && repoPath === undefined) {\n                        // Try to get the repoPath from the most recent commit\n                        repoPath = Strings.normalizePath(\n                            fileName.replace(\n                                fileName.startsWith(slash) ? `/${entry.fileName}` : entry.fileName!,\n                                emptyStr\n                            )\n                        );\n                        relativeFileName = Strings.normalizePath(paths.relative(repoPath, fileName));\n                    }\n                    else {\n                        relativeFileName = entry.fileName!;\n                    }\n                    first = false;\n\n                    GitBlameParser.parseEntry(entry, repoPath, relativeFileName, commits, authors, lines, currentUser);\n\n                    entry = undefined;\n                    break;\n\n                default:\n                    break;\n            }\n        }\n\n        for (const [, c] of commits) {\n            if (c.author === undefined) return undefined;\n\n            const author = authors.get(c.author);\n            if (author === undefined) return undefined;\n\n            author.lineCount += c.lines.length;\n        }\n\n        const sortedAuthors = new Map([...authors.entries()].sort((a, b) => b[1].lineCount - a[1].lineCount));\n\n        const blame: GitBlame = {\n            repoPath: repoPath!,\n            authors: sortedAuthors,\n            commits: commits,\n            lines: lines\n        };\n        return blame;\n    }\n\n    private static parseEntry(\n        entry: BlameEntry,\n        repoPath: string | undefined,\n        relativeFileName: string,\n        commits: Map<string, GitBlameCommit>,\n        authors: Map<string, GitAuthor>,\n        lines: GitCommitLine[],\n        currentUser: { name?: string; email?: string } | undefined\n    ) {\n        let commit = commits.get(entry.sha);\n        if (commit === undefined) {\n            if (entry.author !== undefined) {\n                if (\n                    currentUser !== undefined &&\n                    // Name or e-mail is configured\n                    (currentUser.name !== undefined || currentUser.email !== undefined) &&\n                    // Match on name if configured\n                    (currentUser.name === undefined || currentUser.name === entry.author) &&\n                    // Match on email if configured\n                    (currentUser.email === undefined || currentUser.email === entry.authorEmail)\n                ) {\n                    entry.author = 'You';\n                }\n\n                let author = authors.get(entry.author);\n                if (author === undefined) {\n                    author = {\n                        name: entry.author,\n                        lineCount: 0\n                    };\n                    authors.set(entry.author, author);\n                }\n            }\n\n            commit = new GitBlameCommit(\n                repoPath!,\n                entry.sha,\n                entry.author,\n                entry.authorEmail,\n                new Date((entry.authorDate as any) * 1000),\n                new Date((entry.committerDate as any) * 1000),\n                entry.summary!,\n                relativeFileName,\n                entry.previousFileName !== undefined && entry.previousFileName !== entry.fileName\n                    ? entry.previousFileName\n                    : undefined,\n                entry.previousSha,\n                entry.previousSha && entry.previousFileName,\n                []\n            );\n\n            commits.set(entry.sha, commit);\n        }\n\n        for (let i = 0, len = entry.lineCount; i < len; i++) {\n            const line: GitCommitLine = {\n                sha: entry.sha,\n                line: entry.line + i,\n                originalLine: entry.originalLine + i\n            };\n\n            if (commit.previousSha) {\n                line.previousSha = commit.previousSha;\n            }\n\n            commit.lines.push(line);\n            lines[line.line - 1] = line;\n        }\n    }\n}\n","'use strict';\nimport { GitBranch } from '../models/branch';\nimport { debug } from '../../system';\n\nconst branchWithTrackingRegex = /^<h>(.+)<n>(.+)<u>(.*)<t>(?:\\[(?:ahead ([0-9]+))?[,\\s]*(?:behind ([0-9]+))?]|\\[gone])?<r>(.*)$/gm;\n\n// Using %x00 codes because some shells seem to try to expand things if not\nconst lb = '%3c'; // `%${'<'.charCodeAt(0).toString(16)}`;\nconst rb = '%3e'; // `%${'>'.charCodeAt(0).toString(16)}`;\n\nexport class GitBranchParser {\n    static defaultFormat = [\n        `${lb}h${rb}%(HEAD)`, // HEAD indicator\n        `${lb}n${rb}%(refname)`, // branch name\n        `${lb}u${rb}%(upstream:short)`, // branch upstream\n        `${lb}t${rb}%(upstream:track)`, // branch upstream tracking state\n        `${lb}r${rb}%(objectname)` // ref\n    ].join('');\n\n    @debug({ args: false, singleLine: true })\n    static parse(data: string, repoPath: string): GitBranch[] {\n        const branches: GitBranch[] = [];\n\n        if (!data) return branches;\n\n        let current;\n        let name;\n        let tracking;\n        let ahead;\n        let behind;\n        let ref;\n\n        let remote;\n\n        let match: RegExpExecArray | null;\n        do {\n            match = branchWithTrackingRegex.exec(data);\n            if (match == null) break;\n\n            [, current, name, tracking, ahead, behind, ref] = match;\n\n            if (name.startsWith('refs/remotes/')) {\n                // Strip off refs/remotes/\n                name = name.substr(13);\n                remote = true;\n            }\n            else {\n                // Strip off refs/heads/\n                name = name.substr(11);\n                remote = false;\n            }\n\n            branches.push(\n                new GitBranch(\n                    repoPath,\n                    name,\n                    remote,\n                    current.charCodeAt(0) === 42, // '*',\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ref == null || ref.length === 0 ? undefined : ` ${ref}`.substr(1),\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    tracking == null || tracking.length === 0 ? undefined : ` ${tracking}`.substr(1),\n                    Number(ahead) || 0,\n                    Number(behind) || 0\n                )\n            );\n        } while (match != null);\n\n        return branches;\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { Range } from 'vscode';\nimport { Git, GitAuthor, GitCommitType, GitFile, GitFileStatus, GitLog, GitLogCommit, GitLogCommitLine } from '../git';\nimport { Arrays, debug, Strings } from '../../system';\n\nconst emptyEntry: LogEntry = {};\nconst emptyStr = '';\nconst slash = '/';\n\nconst diffRegex = /diff --git a\\/(.*) b\\/(.*)/;\nconst diffRangeRegex = /^@@ -(\\d+?),(\\d+?) \\+(\\d+?),(\\d+?) @@/;\n\nexport const fileStatusRegex = /(\\S)\\S*\\t([^\\t\\n]+)(?:\\t(.+))?/;\nconst fileStatusAndSummaryRegex = /^(\\d+?|-)\\s+?(\\d+?|-)\\s+?(.*)(?:\\n\\s(delete|rename|create))?/;\nconst fileStatusAndSummaryRenamedFileRegex = /(.+)\\s=>\\s(.+)/;\nconst fileStatusAndSummaryRenamedFilePathRegex = /(.*?){(.+?)\\s=>\\s(.*?)}(.*)/;\n\nconst logFileSimpleRegex = /^<r> (.*)\\s*(?:(?:diff --git a\\/(.*) b\\/(.*))|(?:(\\S)\\S*\\t([^\\t\\n]+)(?:\\t(.+))?))/gm;\nconst logFileSimpleRenamedRegex = /^<r> (\\S+)\\s*(.*)$/s;\nconst logFileSimpleRenamedFilesRegex = /^(\\S)\\S*\\t([^\\t\\n]+)(?:\\t(.+)?)$/gm;\n\n// Using %x00 codes because some shells seem to try to expand things if not\nconst lb = '%x3c'; // `%x${'<'.charCodeAt(0).toString(16)}`;\nconst rb = '%x3e'; // `%x${'>'.charCodeAt(0).toString(16)}`;\nconst sl = '%x2f'; // `%x${'/'.charCodeAt(0).toString(16)}`;\nconst sp = '%x20'; // `%x${' '.charCodeAt(0).toString(16)}`;\n\ninterface LogEntry {\n    ref?: string;\n\n    author?: string;\n    date?: string;\n    committedDate?: string;\n    email?: string;\n\n    parentShas?: string[];\n\n    fileName?: string;\n    originalFileName?: string;\n    files?: GitFile[];\n\n    status?: GitFileStatus;\n    fileStats?: {\n        insertions: number;\n        deletions: number;\n    };\n\n    summary?: string;\n\n    line?: GitLogCommitLine;\n}\n\nexport class GitLogParser {\n    static defaultFormat = [\n        `${lb}${sl}f${rb}`,\n        `${lb}r${rb}${sp}%H`, // ref\n        `${lb}a${rb}${sp}%aN`, // author\n        `${lb}e${rb}${sp}%aE`, // email\n        `${lb}d${rb}${sp}%at`, // date\n        `${lb}c${rb}${sp}%ct`, // committed date\n        `${lb}p${rb}${sp}%P`, // parents\n        `${lb}s${rb}`,\n        '%B', // summary\n        `${lb}${sl}s${rb}`,\n        `${lb}f${rb}`\n    ].join('%n');\n\n    static simpleFormat = `${lb}r${rb}${sp}%H`;\n\n    @debug({ args: false })\n    static parse(\n        data: string,\n        type: GitCommitType,\n        repoPath: string | undefined,\n        fileName: string | undefined,\n        sha: string | undefined,\n        currentUser: { name?: string; email?: string } | undefined,\n        maxCount: number | undefined,\n        reverse: boolean,\n        range: Range | undefined\n    ): GitLog | undefined {\n        if (!data) return undefined;\n\n        let relativeFileName: string;\n        let recentCommit: GitLogCommit | undefined = undefined;\n\n        let entry: LogEntry = emptyEntry;\n        let line: string | undefined = undefined;\n        let token: number;\n\n        let i = 0;\n        let first = true;\n\n        const lines = Strings.lines(`${data}</f>`);\n        // Skip the first line since it will always be </f>\n        let next = lines.next();\n        if (next.done) return undefined;\n\n        if (repoPath !== undefined) {\n            repoPath = Strings.normalizePath(repoPath);\n        }\n\n        const authors: Map<string, GitAuthor> = new Map();\n        const commits: Map<string, GitLogCommit> = new Map();\n        let truncationCount = maxCount;\n\n        let match;\n        let renamedFileName;\n        let renamedMatch;\n\n        while (true) {\n            next = lines.next();\n            if (next.done) break;\n\n            line = next.value;\n\n            // Since log --reverse doesn't properly honor a max count -- enforce it here\n            if (reverse && maxCount && i >= maxCount) break;\n\n            // <1-char token> data\n            // e.g. <r> bd1452a2dc\n            token = line.charCodeAt(1);\n\n            switch (token) {\n                case 114: // 'r': // ref\n                    entry = {\n                        ref: line.substring(4)\n                    };\n                    break;\n\n                case 97: // 'a': // author\n                    if (Git.isUncommitted(entry.ref)) {\n                        entry.author = 'You';\n                    }\n                    else {\n                        entry.author = line.substring(4);\n                    }\n                    break;\n\n                case 101: // 'e': // author-mail\n                    entry.email = line.substring(4);\n                    break;\n\n                case 100: // 'd': // author-date\n                    entry.date = line.substring(4);\n                    break;\n\n                case 99: // 'c': // committer-date\n                    entry.committedDate = line.substring(4);\n                    break;\n\n                case 112: // 'p': // parents\n                    entry.parentShas = line.substring(4).split(' ');\n                    break;\n\n                case 115: // 's': // summary\n                    while (true) {\n                        next = lines.next();\n                        if (next.done) break;\n\n                        line = next.value;\n                        if (line === '</s>') break;\n\n                        if (entry.summary === undefined) {\n                            entry.summary = line;\n                        }\n                        else {\n                            entry.summary += `\\n${line}`;\n                        }\n                    }\n\n                    // Remove the trailing newline\n                    if (entry.summary != null && entry.summary.charCodeAt(entry.summary.length - 1) === 10) {\n                        entry.summary = entry.summary.slice(0, -1);\n                    }\n                    break;\n\n                case 102: {\n                    // 'f': // files\n                    // Skip the blank line git adds before the files\n                    next = lines.next();\n                    if (next.done || next.value === '</f>') break;\n\n                    while (true) {\n                        next = lines.next();\n                        if (next.done) break;\n\n                        line = next.value;\n                        if (line === '</f>') break;\n\n                        if (line.startsWith('warning:')) continue;\n\n                        if (type === GitCommitType.Log) {\n                            match = fileStatusRegex.exec(line);\n                            if (match != null) {\n                                if (entry.files === undefined) {\n                                    entry.files = [];\n                                }\n\n                                renamedFileName = match[3];\n                                if (renamedFileName !== undefined) {\n                                    entry.files.push({\n                                        status: match[1] as GitFileStatus,\n                                        fileName: renamedFileName,\n                                        originalFileName: match[2]\n                                    });\n                                }\n                                else {\n                                    entry.files.push({\n                                        status: match[1] as GitFileStatus,\n                                        fileName: match[2]\n                                    });\n                                }\n                            }\n                        }\n                        else {\n                            match = diffRegex.exec(line);\n                            if (match != null) {\n                                [, entry.originalFileName, entry.fileName] = match;\n                                if (entry.fileName === entry.originalFileName) {\n                                    entry.originalFileName = undefined;\n                                    entry.status = 'M';\n                                }\n                                else {\n                                    entry.status = 'R';\n                                }\n\n                                next = lines.next();\n                                next = lines.next();\n                                next = lines.next();\n\n                                match = diffRangeRegex.exec(next.value);\n                                if (match !== null) {\n                                    entry.line = {\n                                        from: {\n                                            line: parseInt(match[1], 10),\n                                            count: parseInt(match[2], 10)\n                                        },\n                                        to: {\n                                            line: parseInt(match[3], 10),\n                                            count: parseInt(match[4], 10)\n                                        }\n                                    };\n                                }\n\n                                while (true) {\n                                    next = lines.next();\n                                    if (next.done || next.value === '</f>') break;\n                                }\n                                break;\n                            }\n                            else {\n                                next = lines.next();\n                                match = fileStatusAndSummaryRegex.exec(`${line}\\n${next.value}`);\n                                if (match != null) {\n                                    entry.fileStats = {\n                                        insertions: Number(match[1]) || 0,\n                                        deletions: Number(match[2]) || 0\n                                    };\n\n                                    switch (match[4]) {\n                                        case undefined:\n                                            entry.status = 'M' as GitFileStatus;\n                                            entry.fileName = match[3];\n                                            break;\n                                        case 'rename':\n                                            entry.status = 'R' as GitFileStatus;\n\n                                            renamedFileName = match[3];\n                                            renamedMatch = fileStatusAndSummaryRenamedFilePathRegex.exec(\n                                                renamedFileName\n                                            );\n                                            if (renamedMatch != null) {\n                                                // If there is no new path, the path part was removed so ensure we don't end up with //\n                                                entry.fileName =\n                                                    renamedMatch[3] === ''\n                                                        ? `${renamedMatch[1]}${renamedMatch[4]}`.replace('//', '/')\n                                                        : `${renamedMatch[1]}${renamedMatch[3]}${renamedMatch[4]}`;\n                                                entry.originalFileName = `${renamedMatch[1]}${renamedMatch[2]}${renamedMatch[4]}`;\n                                            }\n                                            else {\n                                                renamedMatch = fileStatusAndSummaryRenamedFileRegex.exec(\n                                                    renamedFileName\n                                                );\n                                                if (renamedMatch != null) {\n                                                    entry.fileName = renamedMatch[2];\n                                                    entry.originalFileName = renamedMatch[1];\n                                                }\n                                                else {\n                                                    entry.fileName = renamedFileName;\n                                                }\n                                            }\n\n                                            break;\n                                        case 'create':\n                                            entry.status = 'A' as GitFileStatus;\n                                            entry.fileName = match[3];\n                                            break;\n                                        case 'delete':\n                                            entry.status = 'D' as GitFileStatus;\n                                            entry.fileName = match[3];\n                                            break;\n                                        default:\n                                            entry.status = 'M' as GitFileStatus;\n                                            entry.fileName = match[3];\n                                            break;\n                                    }\n                                }\n\n                                if (next.done || next.value === '</f>') break;\n                            }\n                        }\n                    }\n\n                    if (entry.files !== undefined) {\n                        entry.fileName = Arrays.filterMap(entry.files, f => (f.fileName ? f.fileName : undefined)).join(\n                            ', '\n                        );\n                    }\n\n                    if (first && repoPath === undefined && type === GitCommitType.LogFile && fileName !== undefined) {\n                        // Try to get the repoPath from the most recent commit\n                        repoPath = Strings.normalizePath(\n                            fileName.replace(\n                                fileName.startsWith(slash) ? `/${entry.fileName}` : entry.fileName!,\n                                emptyStr\n                            )\n                        );\n                        relativeFileName = Strings.normalizePath(paths.relative(repoPath, fileName));\n                    }\n                    else {\n                        relativeFileName = entry.fileName!;\n                    }\n                    first = false;\n\n                    const commit = commits.get(entry.ref!);\n                    if (commit === undefined) {\n                        i++;\n                    }\n                    else if (truncationCount) {\n                        // Since this matches an existing commit it will be skipped, so reduce our truncationCount to ensure accurate truncation detection\n                        truncationCount--;\n                    }\n\n                    recentCommit = GitLogParser.parseEntry(\n                        entry,\n                        commit,\n                        type,\n                        repoPath,\n                        relativeFileName,\n                        commits,\n                        authors,\n                        recentCommit,\n                        currentUser\n                    );\n\n                    break;\n                }\n            }\n        }\n\n        const log: GitLog = {\n            repoPath: repoPath!,\n            authors: authors,\n            commits: commits,\n            sha: sha,\n            count: i,\n            maxCount: maxCount,\n            range: range,\n            truncated: Boolean(truncationCount && i >= truncationCount && truncationCount !== 1)\n        };\n        return log;\n    }\n\n    private static parseEntry(\n        entry: LogEntry,\n        commit: GitLogCommit | undefined,\n        type: GitCommitType,\n        repoPath: string | undefined,\n        relativeFileName: string,\n        commits: Map<string, GitLogCommit>,\n        authors: Map<string, GitAuthor>,\n        recentCommit: GitLogCommit | undefined,\n        currentUser: { name?: string; email?: string } | undefined\n    ): GitLogCommit | undefined {\n        if (commit === undefined) {\n            if (entry.author !== undefined) {\n                if (\n                    currentUser !== undefined &&\n                    // Name or e-mail is configured\n                    (currentUser.name !== undefined || currentUser.email !== undefined) &&\n                    // Match on name if configured\n                    (currentUser.name === undefined || currentUser.name === entry.author) &&\n                    // Match on email if configured\n                    (currentUser.email === undefined || currentUser.email === entry.email)\n                ) {\n                    entry.author = 'You';\n                }\n\n                let author = authors.get(entry.author);\n                if (author === undefined) {\n                    author = {\n                        name: entry.author,\n                        lineCount: 0\n                    };\n                    authors.set(entry.author, author);\n                }\n            }\n\n            const originalFileName =\n                entry.originalFileName || (relativeFileName !== entry.fileName ? entry.fileName : undefined);\n\n            if (type === GitCommitType.LogFile) {\n                entry.files = [\n                    {\n                        status: entry.status!,\n                        fileName: relativeFileName,\n                        originalFileName: originalFileName\n                    }\n                ];\n            }\n\n            commit = new GitLogCommit(\n                type,\n                repoPath!,\n                entry.ref!,\n                entry.author!,\n                entry.email,\n                new Date((entry.date! as any) * 1000),\n                new Date((entry.committedDate! as any) * 1000),\n                entry.summary === undefined ? emptyStr : entry.summary,\n                relativeFileName,\n                entry.files || [],\n                entry.status,\n                originalFileName,\n                type === GitCommitType.Log ? entry.parentShas![0] : undefined,\n                undefined,\n                entry.fileStats,\n                entry.parentShas!,\n                entry.line\n            );\n\n            commits.set(entry.ref!, commit);\n        }\n        // else {\n        //     Logger.log(`merge commit? ${entry.sha}`);\n        // }\n\n        if (recentCommit !== undefined) {\n            // If the commit sha's match (merge commit), just forward it along\n            commit.nextSha = commit.sha !== recentCommit.sha ? recentCommit.sha : recentCommit.nextSha;\n\n            // Only add a filename if this is a file log\n            if (type === GitCommitType.LogFile) {\n                recentCommit.previousFileName = commit.originalFileName || commit.fileName;\n                commit.nextFileName = recentCommit.originalFileName || recentCommit.fileName;\n            }\n        }\n        return commit;\n    }\n\n    @debug({ args: false })\n    static parseSimple(\n        data: string,\n        skip: number,\n        skipRef?: string\n    ): [string | undefined, string | undefined, GitFileStatus | undefined] {\n        let ref;\n        let diffFile;\n        let diffRenamed;\n        let status;\n        let file;\n        let renamed;\n\n        let match: RegExpExecArray | null;\n        do {\n            match = logFileSimpleRegex.exec(data);\n            if (match == null) break;\n\n            if (match[1] === skipRef) continue;\n            if (skip-- > 0) continue;\n\n            [, ref, diffFile, diffRenamed, status, file, renamed] = match;\n\n            // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n            file = ` ${diffRenamed || diffFile || renamed || file}`.substr(1);\n            // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n            status = status == null || status.length === 0 ? undefined : ` ${status}`.substr(1);\n        } while (skip >= 0);\n\n        // Ensure the regex state is reset\n        logFileSimpleRegex.lastIndex = 0;\n\n        // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n        return [\n            ref == null || ref.length === 0 ? undefined : ` ${ref}`.substr(1),\n            file,\n            status as GitFileStatus | undefined\n        ];\n    }\n\n    @debug({ args: false })\n    static parseSimpleRenamed(\n        data: string,\n        originalFileName: string\n    ): [string | undefined, string | undefined, GitFileStatus | undefined] {\n        let match = logFileSimpleRenamedRegex.exec(data);\n        if (match == null) return [undefined, undefined, undefined];\n\n        const [, ref, files] = match;\n\n        let status;\n        let file;\n        let renamed;\n\n        do {\n            match = logFileSimpleRenamedFilesRegex.exec(files);\n            if (match == null) break;\n\n            [, status, file, renamed] = match;\n\n            if (originalFileName !== file) continue;\n\n            // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n            file = ` ${renamed || file}`.substr(1);\n            // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n            status = status == null || status.length === 0 ? undefined : ` ${status}`.substr(1);\n\n            break;\n        } while (match != null);\n\n        // Ensure the regex state is reset\n        logFileSimpleRenamedFilesRegex.lastIndex = 0;\n\n        // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n        return [\n            ref == null || ref.length === 0 ? undefined : ` ${ref}`.substr(1),\n            file,\n            status as GitFileStatus | undefined\n        ];\n    }\n}\n","'use strict';\nimport { debug } from '../../system';\nimport { GitReflog, GitReflogRecord } from '../models/reflog';\n\nconst reflogRegex = /^<r>(.+)<d>(.+?)@{(.+)}<s>(\\w*)(.*?)(?::(.*))?$/gm;\n// const reflogRegex = /^<r>(.+)<d>(.+?)@{(.+)}<s>(\\w*)(.*?)(?::(.*))?<n>(.*)$/gm;\nconst reflogHEADRegex = /.*?\\/?HEAD$/;\n\n// Using %x00 codes because some shells seem to try to expand things if not\nconst lb = '%x3c'; // `%x${'<'.charCodeAt(0).toString(16)}`;\nconst rb = '%x3e'; // `%x${'>'.charCodeAt(0).toString(16)}`;\n\nexport class GitReflogParser {\n    static defaultFormat = [\n        `${lb}r${rb}%H`, // ref\n        `${lb}d${rb}%gD`, // reflog selector (with UNIX timestamp)\n        `${lb}s${rb}%gs` // reflog subject\n        // `${lb}n${rb}%D` // ref names\n    ].join('');\n\n    @debug({ args: false })\n    static parse(data: string, repoPath: string, commands: string[], maxCount: number): GitReflog | undefined {\n        if (!data) return undefined;\n\n        const records: GitReflogRecord[] = [];\n\n        let sha;\n        let selector;\n        let date;\n        let command;\n        let commandArgs;\n        let details;\n\n        let head;\n        let headDate;\n        let headSha;\n\n        let count = 0;\n        let recordDate;\n        let record: GitReflogRecord | undefined;\n        let truncated = false;\n\n        let match: RegExpExecArray | null;\n        do {\n            match = reflogRegex.exec(data);\n            if (match == null) break;\n\n            [, sha, selector, date, command, commandArgs, details] = match;\n\n            if (record !== undefined) {\n                // If the next record has the same sha as the previous, use it if it is not pointing to just HEAD and the previous is\n                if (\n                    sha === record.sha &&\n                    (date !== recordDate || !reflogHEADRegex.test(record.selector) || reflogHEADRegex.test(selector))\n                ) {\n                    continue;\n                }\n\n                if (sha !== record.sha) {\n                    if (\n                        head != null &&\n                        headDate === recordDate &&\n                        headSha == record.sha &&\n                        reflogHEADRegex.test(record.selector)\n                    ) {\n                        record.update(sha, head);\n                    }\n                    else {\n                        record.update(sha);\n                    }\n\n                    records.push(record);\n                    record = undefined;\n                    recordDate = undefined;\n\n                    count++;\n                    if (maxCount !== 0 && count >= maxCount) {\n                        truncated = true;\n                        break;\n                    }\n                }\n            }\n\n            if (command === 'HEAD') {\n                head = selector;\n                headDate = date;\n                headSha = sha;\n\n                continue;\n            }\n\n            if (commands.includes(command)) {\n                record = new GitReflogRecord(\n                    repoPath,\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${sha}`.substr(1),\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${selector}`.substr(1),\n                    new Date(Number(date) * 1000),\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${command}`.substr(1),\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    commandArgs == null || commandArgs.length === 0 ? undefined : commandArgs.substr(1),\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    details == null || details.length === 0 ? undefined : details.substr(1)\n                );\n                recordDate = date;\n            }\n        } while (match != null);\n\n        // Ensure the regex state is reset\n        reflogRegex.lastIndex = 0;\n\n        return {\n            repoPath: repoPath,\n            records: records,\n            count: count,\n            maxCount: maxCount,\n            truncated: truncated\n        };\n    }\n}\n","'use strict';\nimport { GitRemoteType } from '../models/remote';\nimport { RemoteProvider } from '../remotes/factory';\nimport { GitRemote } from '../git';\nimport { debug } from '../../system';\n\nconst emptyStr = '';\n\nconst remoteRegex = /^(.*)\\t(.*)\\s\\((.*)\\)$/gm;\nconst urlRegex = /^(?:(git:\\/\\/)(.*?)\\/|(https?:\\/\\/)(?:.*?@)?(.*?)\\/|git@(.*):|(ssh:\\/\\/)(?:.*@)?(.*?)(?::.*?)?(?:\\/|(?=~))|(?:.*?@)(.*?):)(.*)$/;\n\n// Test git urls\n/*\nhttp://host.xz/user/project.git\nhttp://host.xz/path/to/repo.git\nhttp://host.xz/path/to/repo.git/\nhttp://username@host.xz/user/project.git\nhttp://username:password@host.xz/user/project.git\nhttps://host.xz/user/project.git\nhttps://host.xz/path/to/repo.git\nhttps://host.xz/path/to/repo.git/\nhttps://username@host.xz/user/project.git\nhttps://username:password@host.xz/user/project.git\n\ngit@host.xz:user/project.git\ngit://host.xz/path/to/repo.git/\ngit://host.xz/~user/path/to/repo.git/\n\nssh://host.xz/project.git\nssh://host.xz/path/to/repo.git\nssh://host.xz/path/to/repo.git/\nssh://host.xz:~project.git\nssh://host.xz:port/path/to/repo.git/\nssh://user@host.xz/project.git\nssh://user@host.xz/path/to/repo.git\nssh://user@host.xz/path/to/repo.git/\nssh://user@host.xz:port/path/to/repo.git/\nssh://user:password@host.xz/project.git\nssh://user:password@host.xz/path/to/repo.git\nssh://user:password@host.xz/path/to/repo.git/\n\nuser@host.xz:project.git\nuser@host.xz:path/to/repo.git\nuser@host.xz:/path/to/repo.git/\nuser:password@host.xz:project.git\nuser:password@host.xz:/path/to/repo.git\nuser:password@host.xz:/path/to/repo.git/\n*/\n\nexport class GitRemoteParser {\n    @debug({ args: false, singleLine: true })\n    static parse(\n        data: string,\n        repoPath: string,\n        providerFactory: (domain: string, path: string) => RemoteProvider | undefined\n    ): GitRemote[] | undefined {\n        if (!data) return undefined;\n\n        const remotes: GitRemote[] = [];\n        const groups = Object.create(null);\n\n        let name;\n        let url;\n        let type;\n\n        let scheme;\n        let domain;\n        let path;\n\n        let uniqueness;\n        let remote: GitRemote | undefined;\n\n        let match: RegExpExecArray | null;\n        do {\n            match = remoteRegex.exec(data);\n            if (match == null) break;\n\n            [, name, url, type] = match;\n\n            // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n            url = ` ${url}`.substr(1);\n\n            [scheme, domain, path] = this.parseGitUrl(url);\n\n            uniqueness = `${domain ? `${domain}/` : ''}${path}`;\n            remote = groups[uniqueness];\n            if (remote === undefined) {\n                const provider = providerFactory(domain, path);\n\n                remote = new GitRemote(\n                    repoPath,\n                    uniqueness,\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${name}`.substr(1),\n                    scheme,\n                    provider !== undefined ? provider.domain : domain,\n                    provider !== undefined ? provider.path : path,\n                    provider,\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    [{ url: url, type: ` ${type}`.substr(1) as GitRemoteType }]\n                );\n                remotes.push(remote);\n                groups[uniqueness] = remote;\n            }\n            else {\n                // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                remote.types.push({ url: url, type: ` ${type}`.substr(1) as GitRemoteType });\n            }\n        } while (match != null);\n\n        return remotes;\n    }\n\n    static parseGitUrl(url: string): [string, string, string] {\n        const match = urlRegex.exec(url);\n        if (match == null) return [emptyStr, emptyStr, url];\n\n        return [\n            match[1] || match[3] || match[6],\n            match[2] || match[4] || match[5] || match[7] || match[8],\n            match[9].replace(/\\.git\\/?$/, emptyStr)\n        ];\n    }\n}\n","'use strict';\nimport { GitContributor, GitShortLog } from '../git';\nimport { debug } from '../../system';\n\nconst shortlogRegex = /^(.*?)\\t(.*?) <(.*?)>$/gm;\n\nexport class GitShortLogParser {\n    @debug({ args: false, singleLine: true })\n    static parse(data: string, repoPath: string): GitShortLog | undefined {\n        if (!data) return undefined;\n\n        const contributors: GitContributor[] = [];\n\n        let count;\n        let name;\n        let email;\n\n        let match: RegExpExecArray | null;\n        do {\n            match = shortlogRegex.exec(data);\n            if (match == null) break;\n\n            [, count, name, email] = match;\n\n            contributors.push(\n                new GitContributor(\n                    repoPath,\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${name}`.substr(1),\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${email}`.substr(1),\n                    Number(count) || 0\n                )\n            );\n        } while (match != null);\n\n        return { repoPath: repoPath, contributors: contributors };\n    }\n}\n","'use strict';\nimport { fileStatusRegex, GitCommitType, GitFile, GitFileStatus, GitStash, GitStashCommit } from '../git';\nimport { Arrays, debug, Strings } from '../../system';\n// import { Logger } from './logger';\n\n// Using %x00 codes because some shells seem to try to expand things if not\nconst lb = '%x3c'; // `%x${'<'.charCodeAt(0).toString(16)}`;\nconst rb = '%x3e'; // `%x${'>'.charCodeAt(0).toString(16)}`;\nconst sl = '%x2f'; // `%x${'/'.charCodeAt(0).toString(16)}`;\nconst sp = '%x20'; // `%x${' '.charCodeAt(0).toString(16)}`;\n\nconst emptyStr = '';\nconst emptyEntry: StashEntry = {};\n\ninterface StashEntry {\n    ref?: string;\n    date?: string;\n    committedDate?: string;\n    fileNames?: string;\n    files?: GitFile[];\n    summary?: string;\n    stashName?: string;\n}\n\nexport class GitStashParser {\n    static defaultFormat = [\n        `${lb}${sl}f${rb}`,\n        `${lb}r${rb}${sp}%H`, // ref\n        `${lb}d${rb}${sp}%at`, // date\n        `${lb}c${rb}${sp}%ct`, // committed date\n        `${lb}l${rb}${sp}%gd`, // reflog-selector\n        `${lb}s${rb}`,\n        '%B', // summary\n        `${lb}${sl}s${rb}`,\n        `${lb}f${rb}`\n    ].join('%n');\n\n    @debug({ args: false, singleLine: true })\n    static parse(data: string, repoPath: string): GitStash | undefined {\n        if (!data) return undefined;\n\n        const lines = Strings.lines(`${data}</f>`);\n        // Skip the first line since it will always be </f>\n        let next = lines.next();\n        if (next.done) return undefined;\n\n        if (repoPath !== undefined) {\n            repoPath = Strings.normalizePath(repoPath);\n        }\n\n        const commits: Map<string, GitStashCommit> = new Map();\n\n        let entry: StashEntry = emptyEntry;\n        let line: string | undefined = undefined;\n        let token: number;\n\n        let match;\n        let renamedFileName;\n\n        while (true) {\n            next = lines.next();\n            if (next.done) break;\n\n            line = next.value;\n\n            // <<1-char token>> <data>\n            // e.g. <r> bd1452a2dc\n            token = line.charCodeAt(1);\n\n            switch (token) {\n                case 114: // 'r': // ref\n                    entry = {\n                        ref: line.substring(4)\n                    };\n                    break;\n\n                case 100: // 'd': // author-date\n                    entry.date = line.substring(4);\n                    break;\n\n                case 99: // 'c': // committer-date\n                    entry.committedDate = line.substring(4);\n                    break;\n\n                case 108: // 'l': // reflog-selector\n                    entry.stashName = line.substring(4);\n                    break;\n\n                case 115: // 's': // summary\n                    while (true) {\n                        next = lines.next();\n                        if (next.done) break;\n\n                        line = next.value;\n                        if (line === '</s>') break;\n\n                        if (entry.summary === undefined) {\n                            entry.summary = line;\n                        }\n                        else {\n                            entry.summary += `\\n${line}`;\n                        }\n                    }\n\n                    // Remove the trailing newline\n                    if (entry.summary != null && entry.summary.charCodeAt(entry.summary.length - 1) === 10) {\n                        entry.summary = entry.summary.slice(0, -1);\n                    }\n                    break;\n\n                case 102: // 'f': // files\n                    // Skip the blank line git adds before the files\n                    next = lines.next();\n                    if (!next.done && next.value !== '</f>') {\n                        while (true) {\n                            next = lines.next();\n                            if (next.done) break;\n\n                            line = next.value;\n                            if (line === '</f>') break;\n\n                            if (line.startsWith('warning:')) continue;\n\n                            match = fileStatusRegex.exec(line);\n                            if (match != null) {\n                                if (entry.files === undefined) {\n                                    entry.files = [];\n                                }\n\n                                renamedFileName = match[3];\n                                if (renamedFileName !== undefined) {\n                                    entry.files.push({\n                                        status: match[1] as GitFileStatus,\n                                        fileName: renamedFileName,\n                                        originalFileName: match[2]\n                                    });\n                                }\n                                else {\n                                    entry.files.push({\n                                        status: match[1] as GitFileStatus,\n                                        fileName: match[2]\n                                    });\n                                }\n                            }\n                        }\n\n                        if (entry.files !== undefined) {\n                            entry.fileNames = Arrays.filterMap(entry.files, f =>\n                                f.fileName ? f.fileName : undefined\n                            ).join(', ');\n                        }\n                    }\n\n                    GitStashParser.parseEntry(entry, repoPath, commits);\n            }\n        }\n\n        const stash: GitStash = {\n            repoPath: repoPath,\n            commits: commits\n        };\n        return stash;\n    }\n\n    private static parseEntry(entry: StashEntry, repoPath: string, commits: Map<string, GitStashCommit>) {\n        let commit = commits.get(entry.ref!);\n        if (commit === undefined) {\n            commit = new GitStashCommit(\n                GitCommitType.Stash,\n                entry.stashName!,\n                repoPath,\n                entry.ref!,\n                new Date((entry.date! as any) * 1000),\n                new Date((entry.committedDate! as any) * 1000),\n                entry.summary === undefined ? emptyStr : entry.summary,\n                entry.fileNames!,\n                entry.files || []\n            );\n        }\n\n        commits.set(entry.ref!, commit);\n    }\n}\n","'use strict';\nimport { debug, Strings } from '../../system';\nimport { GitFileStatus, GitStatus, GitStatusFile } from '../git';\n\nconst emptyStr = '';\n\nconst aheadStatusV1Regex = /(?:ahead ([0-9]+))/;\nconst behindStatusV1Regex = /(?:behind ([0-9]+))/;\n\nexport class GitStatusParser {\n    @debug({ args: false, singleLine: true })\n    static parse(data: string, repoPath: string, porcelainVersion: number): GitStatus | undefined {\n        if (!data) return undefined;\n\n        const lines = data.split('\\n').filter(Boolean);\n        if (lines.length === 0) return undefined;\n\n        if (porcelainVersion < 2) return this.parseV1(lines, repoPath);\n\n        return this.parseV2(lines, repoPath);\n    }\n\n    @debug({ args: false, singleLine: true })\n    private static parseV1(lines: string[], repoPath: string): GitStatus {\n        let branch: string | undefined;\n        const files = [];\n        const state = {\n            ahead: 0,\n            behind: 0\n        };\n        let upstream;\n\n        let position = -1;\n        while (++position < lines.length) {\n            const line = lines[position];\n            // Header\n            if (line.startsWith('##')) {\n                const lineParts = line.split(' ');\n                [branch, upstream] = lineParts[1].split('...');\n                if (lineParts.length > 2) {\n                    const upstreamStatus = lineParts.slice(2).join(' ');\n\n                    const aheadStatus = aheadStatusV1Regex.exec(upstreamStatus);\n                    state.ahead = aheadStatus == null ? 0 : Number(aheadStatus[1]) || 0;\n\n                    const behindStatus = behindStatusV1Regex.exec(upstreamStatus);\n                    state.behind = behindStatus == null ? 0 : Number(behindStatus[1]) || 0;\n                }\n            }\n            else {\n                const rawStatus = line.substring(0, 2);\n                const fileName = line.substring(3);\n                if (rawStatus[0] === 'R') {\n                    const [file1, file2] = fileName.replace(/\"/g, emptyStr).split('->');\n                    files.push(this.parseStatusFile(repoPath, rawStatus, file2.trim(), file1.trim()));\n                }\n                else {\n                    files.push(this.parseStatusFile(repoPath, rawStatus, fileName));\n                }\n            }\n        }\n\n        return new GitStatus(Strings.normalizePath(repoPath), branch || emptyStr, emptyStr, files, state, upstream);\n    }\n\n    @debug({ args: false, singleLine: true })\n    private static parseV2(lines: string[], repoPath: string): GitStatus {\n        let branch: string | undefined;\n        const files = [];\n        let sha: string | undefined;\n        const state = {\n            ahead: 0,\n            behind: 0\n        };\n        let upstream;\n\n        let position = -1;\n        while (++position < lines.length) {\n            const line = lines[position];\n            // Headers\n            if (line.startsWith('#')) {\n                const lineParts = line.split(' ');\n                switch (lineParts[1]) {\n                    case 'branch.oid':\n                        sha = lineParts[2];\n                        break;\n                    case 'branch.head':\n                        branch = lineParts[2];\n                        break;\n                    case 'branch.upstream':\n                        upstream = lineParts[2];\n                        break;\n                    case 'branch.ab':\n                        state.ahead = Number(lineParts[2].substring(1));\n                        state.behind = Number(lineParts[3].substring(1));\n                        break;\n                }\n            }\n            else {\n                const lineParts = line.split(' ');\n                switch (lineParts[0][0]) {\n                    case '1': // normal\n                        files.push(this.parseStatusFile(repoPath, lineParts[1], lineParts.slice(8).join(' ')));\n                        break;\n                    case '2': {\n                        // rename\n                        const file = lineParts\n                            .slice(9)\n                            .join(' ')\n                            .split('\\t');\n                        files.push(this.parseStatusFile(repoPath, lineParts[1], file[0], file[1]));\n                        break;\n                    }\n                    case 'u': // unmerged\n                        files.push(this.parseStatusFile(repoPath, lineParts[1], lineParts.slice(10).join(' ')));\n                        break;\n                    case '?': // untracked\n                        files.push(this.parseStatusFile(repoPath, ' ?', lineParts.slice(1).join(' ')));\n                        break;\n                }\n            }\n        }\n\n        return new GitStatus(\n            Strings.normalizePath(repoPath),\n            branch || emptyStr,\n            sha || emptyStr,\n            files,\n            state,\n            upstream\n        );\n    }\n\n    static parseStatusFile(\n        repoPath: string,\n        rawStatus: string,\n        fileName: string,\n        originalFileName?: string\n    ): GitStatusFile {\n        let indexStatus = rawStatus[0] !== '.' ? rawStatus[0].trim() : undefined;\n        if (indexStatus == null || indexStatus.length === 0) {\n            indexStatus = undefined;\n        }\n\n        let workTreeStatus = undefined;\n        if (rawStatus.length > 1) {\n            workTreeStatus = rawStatus[1] !== '.' ? rawStatus[1].trim() : undefined;\n            if (workTreeStatus == null || workTreeStatus.length === 0) {\n                workTreeStatus = undefined;\n            }\n        }\n\n        return new GitStatusFile(\n            repoPath,\n            indexStatus as GitFileStatus | undefined,\n            workTreeStatus as GitFileStatus | undefined,\n            fileName,\n            originalFileName\n        );\n    }\n}\n","'use strict';\nimport { GitTag } from '../git';\nimport { debug } from '../../system';\n\nconst tagWithRefRegex = /([0-9,a-f]+)\\srefs\\/tags\\/(.*)/gm;\nconst tagWithAnnotationRegex = /^(.+?)(?:$|(?:\\s+)(.*)$)/gm;\n\nexport class GitTagParser {\n    @debug({ args: false, singleLine: true })\n    static parse(data: string, repoPath: string): GitTag[] | undefined {\n        if (!data) return undefined;\n\n        const tags: GitTag[] = [];\n\n        let name;\n        let annotation;\n\n        let match: RegExpExecArray | null;\n        do {\n            match = tagWithAnnotationRegex.exec(data);\n            if (match == null) break;\n\n            [, name, annotation] = match;\n\n            tags.push(\n                new GitTag(\n                    repoPath,\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${name}`.substr(1),\n                    undefined,\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    annotation == null || annotation.length === 0 ? undefined : ` ${annotation}`.substr(1)\n                )\n            );\n        } while (match != null);\n\n        return tags;\n    }\n\n    static parseWithRef(data: string, repoPath: string): GitTag[] | undefined {\n        if (!data) return undefined;\n\n        const tags: GitTag[] = [];\n\n        let sha;\n        let name;\n\n        let match: RegExpExecArray | null;\n        do {\n            match = tagWithRefRegex.exec(data);\n            if (match == null) break;\n\n            [, sha, name] = match;\n\n            tags.push(\n                new GitTag(\n                    repoPath,\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${name}`.substr(1),\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${sha}`.substr(1)\n                )\n            );\n        } while (match != null);\n\n        return tags;\n    }\n}\n","'use strict';\nimport { GitTree } from '../git';\nimport { debug } from '../../system';\n\nconst emptyStr = '';\nconst treeRegex = /(?:.+?)\\s+(.+?)\\s+(.+?)\\s+(.+?)\\s+(.+)/gm;\n\nexport class GitTreeParser {\n    @debug({ args: false, singleLine: true })\n    static parse(data: string | undefined): GitTree[] | undefined {\n        if (!data) return undefined;\n\n        const trees: GitTree[] = [];\n\n        let type;\n        let sha;\n        let size;\n        let filePath;\n\n        let match: RegExpExecArray | null;\n        do {\n            match = treeRegex.exec(data);\n            if (match == null) break;\n\n            [, type, sha, size, filePath] = match;\n\n            trees.push({\n                // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                commitSha: sha == null || sha.length === 0 ? emptyStr : ` ${sha}`.substr(1),\n                // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                path: filePath == null || filePath.length === 0 ? emptyStr : ` ${filePath}`.substr(1),\n                size: Number(size) || 0,\n                // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                type: (type == null || type.length === 0 ? emptyStr : ` ${type}`.substr(1)) as 'blob' | 'tree'\n            });\n        } while (match != null);\n\n        return trees;\n    }\n}\n","'use strict';\n\nexport * from './blameParser';\nexport * from './branchParser';\nexport * from './diffParser';\nexport * from './logParser';\nexport * from './reflogParser';\nexport * from './remoteParser';\nexport * from './shortlogParser';\nexport * from './stashParser';\nexport * from './statusParser';\nexport * from './tagParser';\nexport * from './treeParser';\n","'use strict';\nimport { createHash, HexBase64Latin1Encoding } from 'crypto';\n\nconst emptyStr = '';\n\nexport namespace Strings {\n    export const enum CharCode {\n        /**\n         * The `/` character.\n         */\n        Slash = 47,\n        /**\n         * The `\\` character.\n         */\n        Backslash = 92\n    }\n\n    export function getCommonBase(s1: string, s2: string, delimiter: string) {\n        let char;\n        let index = 0;\n        for (let i = 0; i < s1.length; i++) {\n            char = s1[i];\n            if (char !== s2[i]) break;\n\n            if (char === delimiter) {\n                index = i;\n            }\n        }\n\n        return index > 0 ? s1.substring(0, index + 1) : undefined;\n    }\n\n    export function getDurationMilliseconds(start: [number, number]) {\n        const [secs, nanosecs] = process.hrtime(start);\n        return secs * 1000 + Math.floor(nanosecs / 1000000);\n    }\n\n    const pathNormalizeRegex = /\\\\/g;\n    const pathStripTrailingSlashRegex = /\\/$/g;\n    const tokenRegex = /\\$\\{(\\W*)?([^|]*?)(?:\\|(\\d+)(-|\\?)?)?(\\W*)?\\}/g;\n    const tokenSanitizeRegex = /\\$\\{(?:\\W*)?(\\w*?)(?:[\\W\\d]*)\\}/g;\n    // eslint-disable-next-line no-template-curly-in-string\n    const tokenSanitizeReplacement = '$${this.$1}';\n\n    export interface TokenOptions {\n        collapseWhitespace: boolean;\n        padDirection: 'left' | 'right';\n        prefix: string | undefined;\n        suffix: string | undefined;\n        truncateTo: number | undefined;\n    }\n\n    export function getTokensFromTemplate(template: string) {\n        const tokens: { key: string; options: TokenOptions }[] = [];\n\n        let match;\n        do {\n            match = tokenRegex.exec(template);\n            if (match == null) break;\n\n            const [, prefix, key, truncateTo, option, suffix] = match;\n            tokens.push({\n                key: key,\n                options: {\n                    collapseWhitespace: option === '?',\n                    padDirection: option === '-' ? 'left' : 'right',\n                    prefix: prefix,\n                    suffix: suffix,\n                    truncateTo: truncateTo == null ? undefined : parseInt(truncateTo, 10)\n                }\n            });\n        } while (match != null);\n\n        return tokens;\n    }\n\n    const interpolationMap = new Map<string, Function>();\n\n    export function interpolate(template: string, context: object | undefined): string {\n        if (template == null || template.length === 0) return template;\n        if (context === undefined) return template.replace(tokenSanitizeRegex, emptyStr);\n\n        let fn = interpolationMap.get(template);\n        if (fn === undefined) {\n            fn = new Function(`return \\`${template.replace(tokenSanitizeRegex, tokenSanitizeReplacement)}\\`;`);\n            interpolationMap.set(template, fn);\n        }\n\n        return fn.call(context);\n    }\n\n    export function* lines(s: string): IterableIterator<string> {\n        let i = 0;\n        while (i < s.length) {\n            let j = s.indexOf('\\n', i);\n            if (j === -1) {\n                j = s.length;\n            }\n\n            yield s.substring(i, j);\n            i = j + 1;\n        }\n    }\n\n    export function md5(s: string, encoding: HexBase64Latin1Encoding = 'base64'): string {\n        return createHash('md5')\n            .update(s)\n            .digest(encoding);\n    }\n\n    export function normalizePath(\n        fileName: string,\n        options: { addLeadingSlash?: boolean; stripTrailingSlash?: boolean } = { stripTrailingSlash: true }\n    ) {\n        if (fileName == null || fileName.length === 0) return fileName;\n\n        let normalized = fileName.replace(pathNormalizeRegex, '/');\n\n        const { addLeadingSlash, stripTrailingSlash } = { stripTrailingSlash: true, ...options };\n\n        if (stripTrailingSlash) {\n            normalized = normalized.replace(pathStripTrailingSlashRegex, emptyStr);\n        }\n\n        if (addLeadingSlash && normalized.charCodeAt(0) !== CharCode.Slash) {\n            normalized = `/${normalized}`;\n        }\n\n        return normalized;\n    }\n\n    export function pad(s: string, before: number = 0, after: number = 0, padding: string = '\\u00a0') {\n        if (before === 0 && after === 0) return s;\n\n        return `${before === 0 ? emptyStr : padding.repeat(before)}${s}${\n            after === 0 ? emptyStr : padding.repeat(after)\n        }`;\n    }\n\n    export function padLeft(s: string, padTo: number, padding: string = '\\u00a0', width?: number) {\n        const diff = padTo - (width || getWidth(s));\n        return diff <= 0 ? s : padding.repeat(diff) + s;\n    }\n\n    export function padLeftOrTruncate(s: string, max: number, padding?: string, width?: number) {\n        width = width || getWidth(s);\n        if (width < max) return padLeft(s, max, padding, width);\n        if (width > max) return truncate(s, max, undefined, width);\n        return s;\n    }\n\n    export function padRight(s: string, padTo: number, padding: string = '\\u00a0', width?: number) {\n        const diff = padTo - (width || getWidth(s));\n        return diff <= 0 ? s : s + padding.repeat(diff);\n    }\n\n    export function padOrTruncate(s: string, max: number, padding?: string, width?: number) {\n        const left = max < 0;\n        max = Math.abs(max);\n\n        width = width || getWidth(s);\n        if (width < max) return left ? padLeft(s, max, padding, width) : padRight(s, max, padding, width);\n        if (width > max) return truncate(s, max, undefined, width);\n        return s;\n    }\n\n    export function padRightOrTruncate(s: string, max: number, padding?: string, width?: number) {\n        width = width || getWidth(s);\n        if (width < max) return padRight(s, max, padding, width);\n        if (width > max) return truncate(s, max);\n        return s;\n    }\n\n    export function pluralize(\n        s: string,\n        count: number,\n        options?: { number?: string; plural?: string; suffix?: string; zero?: string }\n    ) {\n        if (options === undefined) return `${count} ${s}${count === 1 ? emptyStr : 's'}`;\n\n        return `${count === 0 ? options.zero || count : options.number || count} ${\n            count === 1 ? s : options.plural || `${s}${options.suffix || 's'}`\n        }`;\n    }\n\n    // Removes \\ / : * ? \" < > | and C0 and C1 control codes\n    // eslint-disable-next-line no-control-regex\n    const illegalCharsForFSRegex = /[\\\\/:*?\"<>|\\x00-\\x1f\\x80-\\x9f]/g;\n\n    export function sanitizeForFileSystem(s: string, replacement: string = '_') {\n        if (!s) return s;\n        return s.replace(illegalCharsForFSRegex, replacement);\n    }\n\n    export function sha1(s: string, encoding: HexBase64Latin1Encoding = 'base64'): string {\n        return createHash('sha1')\n            .update(s)\n            .digest(encoding);\n    }\n\n    export function splitLast(s: string, splitter: string) {\n        const index = s.lastIndexOf(splitter);\n        if (index === -1) return [s];\n\n        return [s.substr(index), s.substring(0, index - 1)];\n    }\n\n    export function splitSingle(s: string, splitter: string) {\n        const parts = s.split(splitter, 1);\n        const first = parts[0];\n        return first.length === s.length ? parts : [first, s.substr(first.length + 1)];\n    }\n\n    export function truncate(s: string, truncateTo: number, ellipsis: string = '\\u2026', width?: number) {\n        if (!s) return s;\n\n        width = width || getWidth(s);\n        if (width <= truncateTo) return s;\n        if (width === s.length) return `${s.substring(0, truncateTo - 1)}${ellipsis}`;\n\n        // Skip ahead to start as far as we can by assuming all the double-width characters won't be truncated\n        let chars = Math.floor(truncateTo / (width / s.length));\n        let count = getWidth(s.substring(0, chars));\n        while (count < truncateTo) {\n            count += getWidth(s[chars++]);\n        }\n\n        if (count >= truncateTo) {\n            chars--;\n        }\n\n        return `${s.substring(0, chars)}${ellipsis}`;\n    }\n\n    const ansiRegex = /[\\\\u001B\\\\u009B][[\\\\]()#;?]*(?:(?:(?:[a-zA-Z\\\\d]*(?:;[a-zA-Z\\\\d]*)*)?\\\\u0007)|(?:(?:\\\\d{1,4}(?:;\\\\d{0,4})*)?[\\\\dA-PRZcf-ntqry=><~]))/g;\n    const containsNonAsciiRegex = /[^\\x20-\\x7F\\u00a0\\u2026]/;\n\n    export function getWidth(s: string): number {\n        if (s == null || s.length === 0) return 0;\n\n        // Shortcut to avoid needless string `RegExp`s, replacements, and allocations\n        if (!containsNonAsciiRegex.test(s)) return s.length;\n\n        s = s.replace(ansiRegex, emptyStr);\n\n        let count = 0;\n        let emoji = 0;\n        let joiners = 0;\n\n        const graphemes = [...s];\n        for (let i = 0; i < graphemes.length; i++) {\n            const code = graphemes[i].codePointAt(0)!;\n\n            // Ignore control characters\n            if (code <= 0x1f || (code >= 0x7f && code <= 0x9f)) continue;\n\n            // Ignore combining characters\n            if (code >= 0x300 && code <= 0x36f) continue;\n\n            // https://stackoverflow.com/questions/30757193/find-out-if-character-in-string-is-emoji\n            if (\n                (code >= 0x1f600 && code <= 0x1f64f) || // Emoticons\n                (code >= 0x1f300 && code <= 0x1f5ff) || // Misc Symbols and Pictographs\n                (code >= 0x1f680 && code <= 0x1f6ff) || // Transport and Map\n                (code >= 0x2600 && code <= 0x26ff) || // Misc symbols\n                (code >= 0x2700 && code <= 0x27bf) || // Dingbats\n                (code >= 0xfe00 && code <= 0xfe0f) || // Variation Selectors\n                (code >= 0x1f900 && code <= 0x1f9ff) || // Supplemental Symbols and Pictographs\n                (code >= 65024 && code <= 65039) || // Variation selector\n                (code >= 8400 && code <= 8447) // Combining Diacritical Marks for Symbols\n            ) {\n                if (code >= 0x1f3fb && code <= 0x1f3ff) continue; // emoji modifier fitzpatrick type\n\n                emoji++;\n                count += 2;\n                continue;\n            }\n\n            // Ignore zero-width joiners '\\u200d'\n            if (code === 8205) {\n                joiners++;\n                count -= 2;\n                continue;\n            }\n\n            // Surrogates\n            if (code > 0xffff) {\n                i++;\n            }\n\n            count += isFullwidthCodePoint(code) ? 2 : 1;\n        }\n\n        const offset = emoji - joiners;\n        if (offset > 1) {\n            count += offset - 1;\n        }\n        return count;\n    }\n\n    function isFullwidthCodePoint(cp: number) {\n        // code points are derived from:\n        // http://www.unix.org/Public/UNIDATA/EastAsianWidth.txt\n        if (\n            cp >= 0x1100 &&\n            (cp <= 0x115f || // Hangul Jamo\n            cp === 0x2329 || // LEFT-POINTING ANGLE BRACKET\n            cp === 0x232a || // RIGHT-POINTING ANGLE BRACKET\n                // CJK Radicals Supplement .. Enclosed CJK Letters and Months\n                (cp >= 0x2e80 && cp <= 0x3247 && cp !== 0x303f) ||\n                // Enclosed CJK Letters and Months .. CJK Unified Ideographs Extension A\n                (cp >= 0x3250 && cp <= 0x4dbf) ||\n                // CJK Unified Ideographs .. Yi Radicals\n                (cp >= 0x4e00 && cp <= 0xa4c6) ||\n                // Hangul Jamo Extended-A\n                (cp >= 0xa960 && cp <= 0xa97c) ||\n                // Hangul Syllables\n                (cp >= 0xac00 && cp <= 0xd7a3) ||\n                // CJK Compatibility Ideographs\n                (cp >= 0xf900 && cp <= 0xfaff) ||\n                // Vertical Forms\n                (cp >= 0xfe10 && cp <= 0xfe19) ||\n                // CJK Compatibility Forms .. Small Form Variants\n                (cp >= 0xfe30 && cp <= 0xfe6b) ||\n                // Halfwidth and Fullwidth Forms\n                (cp >= 0xff01 && cp <= 0xff60) ||\n                (cp >= 0xffe0 && cp <= 0xffe6) ||\n                // Kana Supplement\n                (cp >= 0x1b000 && cp <= 0x1b001) ||\n                // Enclosed Ideographic Supplement\n                (cp >= 0x1f200 && cp <= 0x1f251) ||\n                // CJK Unified Ideographs Extension B .. Tertiary Ideographic Plane\n                (cp >= 0x20000 && cp <= 0x3fffd))\n        ) {\n            return true;\n        }\n\n        return false;\n    }\n}\n","'use strict';\nimport { Uri } from 'vscode';\nimport { configuration, DateSource, DateStyle, GravatarDefaultStyle } from '../../configuration';\nimport { Container } from '../../container';\nimport { Dates, memoize } from '../../system';\nimport { CommitFormatter } from '../formatters/formatters';\nimport { Git } from '../git';\nimport { GitUri } from '../gitUri';\nimport { getGravatarUri } from '../../avatars';\n\nexport interface GitAuthor {\n    name: string;\n    lineCount: number;\n}\n\nexport interface GitCommitLine {\n    sha: string;\n    previousSha?: string;\n    line: number;\n    originalLine: number;\n    code?: string;\n}\n\nexport enum GitCommitType {\n    Blame = 'blame',\n    Log = 'log',\n    LogFile = 'logFile',\n    Stash = 'stash',\n    StashFile = 'stashFile'\n}\n\nexport const CommitFormatting = {\n    dateFormat: undefined! as string | null,\n    dateSource: undefined! as DateSource,\n    dateStyle: undefined! as DateStyle,\n\n    reset: () => {\n        CommitFormatting.dateFormat = configuration.get<string | null>(configuration.name('defaultDateFormat').value);\n        CommitFormatting.dateSource = configuration.get<DateSource>(configuration.name('defaultDateSource').value);\n        CommitFormatting.dateStyle = configuration.get<DateStyle>(configuration.name('defaultDateStyle').value);\n    }\n};\n\nexport abstract class GitCommit {\n    static is(commit: any): commit is GitCommit {\n        return (\n            commit instanceof GitCommit\n            // || (commit.repoPath !== undefined &&\n            //     commit.sha !== undefined &&\n            //     (commit.type === GitCommitType.Blame ||\n            //         commit.type === GitCommitType.Log ||\n            //         commit.type === GitCommitType.LogFile ||\n            //         commit.type === GitCommitType.Stash ||\n            //         commit.type === GitCommitType.StashFile))\n        );\n    }\n\n    constructor(\n        public readonly type: GitCommitType,\n        public readonly repoPath: string,\n        public readonly sha: string,\n        public readonly author: string,\n        public readonly email: string | undefined,\n        public readonly authorDate: Date,\n        public readonly committerDate: Date,\n        public readonly message: string,\n        fileName: string,\n        public readonly originalFileName: string | undefined,\n        public previousSha: string | undefined,\n        public previousFileName: string | undefined\n    ) {\n        this._fileName = fileName || '';\n    }\n\n    private readonly _fileName: string;\n    get fileName() {\n        // If we aren't a single-file commit, return an empty file name (makes it default to the repoPath)\n        return this.isFile ? this._fileName : '';\n    }\n\n    get date(): Date {\n        return CommitFormatting.dateSource === DateSource.Committed ? this.committerDate : this.authorDate;\n    }\n\n    get formattedDate(): string {\n        return CommitFormatting.dateStyle === DateStyle.Absolute\n            ? this.formatDate(CommitFormatting.dateFormat)\n            : this.formatDateFromNow();\n    }\n\n    @memoize()\n    get shortSha() {\n        return Git.shortenSha(this.sha);\n    }\n\n    get isFile() {\n        return (\n            this.type === GitCommitType.Blame ||\n            this.type === GitCommitType.LogFile ||\n            this.type === GitCommitType.StashFile\n        );\n    }\n\n    get isStash() {\n        return this.type === GitCommitType.Stash || this.type === GitCommitType.StashFile;\n    }\n\n    @memoize()\n    get isUncommitted(): boolean {\n        return Git.isUncommitted(this.sha);\n    }\n\n    @memoize()\n    get isUncommittedStaged(): boolean {\n        return Git.isUncommittedStaged(this.sha);\n    }\n\n    @memoize()\n    get originalUri(): Uri {\n        return this.originalFileName ? GitUri.resolveToUri(this.originalFileName, this.repoPath) : this.uri;\n    }\n\n    get previousFileSha(): string {\n        return `${this.sha}^`;\n    }\n\n    get previousShortSha() {\n        return this.previousSha && Git.shortenSha(this.previousSha);\n    }\n\n    get previousUri(): Uri {\n        return this.previousFileName ? GitUri.resolveToUri(this.previousFileName, this.repoPath) : this.uri;\n    }\n\n    @memoize()\n    get uri(): Uri {\n        return GitUri.resolveToUri(this.fileName, this.repoPath);\n    }\n\n    @memoize<GitCommit['getPreviousLineDiffUris']>(\n        (uri, editorLine, ref) => `${uri.toString(true)}|${editorLine || ''}|${ref || ''}`\n    )\n    getPreviousLineDiffUris(uri: Uri, editorLine: number, ref: string | undefined) {\n        if (!this.isFile) return Promise.resolve(undefined);\n\n        return Container.git.getPreviousLineDiffUris(this.repoPath, uri, editorLine, ref);\n    }\n\n    @memoize()\n    getWorkingUri(): Promise<Uri | undefined> {\n        if (!this.isFile) return Promise.resolve(undefined);\n\n        return Container.git.getWorkingUri(this.repoPath, this.uri);\n    }\n\n    @memoize()\n    private get authorDateFormatter(): Dates.DateFormatter {\n        return Dates.getFormatter(this.authorDate);\n    }\n\n    @memoize()\n    private get committerDateFormatter(): Dates.DateFormatter {\n        return Dates.getFormatter(this.committerDate);\n    }\n\n    private get dateFormatter(): Dates.DateFormatter {\n        return CommitFormatting.dateSource === DateSource.Committed\n            ? this.committerDateFormatter\n            : this.authorDateFormatter;\n    }\n\n    @memoize<GitCommit['formatAuthorDate']>(format => (format == null ? 'MMMM Do, YYYY h:mma' : format))\n    formatAuthorDate(format?: string | null) {\n        if (format == null) {\n            format = 'MMMM Do, YYYY h:mma';\n        }\n\n        return this.authorDateFormatter.format(format);\n    }\n\n    formatAuthorDateFromNow() {\n        return this.authorDateFormatter.fromNow();\n    }\n\n    @memoize<GitCommit['formatCommitterDate']>(format => (format == null ? 'MMMM Do, YYYY h:mma' : format))\n    formatCommitterDate(format?: string | null) {\n        if (format == null) {\n            format = 'MMMM Do, YYYY h:mma';\n        }\n\n        return this.committerDateFormatter.format(format);\n    }\n\n    formatCommitterDateFromNow() {\n        return this.committerDateFormatter.fromNow();\n    }\n\n    @memoize<GitCommit['formatDate']>(format => (format == null ? 'MMMM Do, YYYY h:mma' : format))\n    formatDate(format?: string | null) {\n        if (format == null) {\n            format = 'MMMM Do, YYYY h:mma';\n        }\n\n        return this.dateFormatter.format(format);\n    }\n\n    formatDateFromNow() {\n        return this.dateFormatter.fromNow();\n    }\n\n    getFormattedPath(options: { relativeTo?: string; separator?: string; suffix?: string } = {}): string {\n        return GitUri.getFormattedPath(this.fileName, options);\n    }\n\n    getGravatarUri(fallback: GravatarDefaultStyle, size: number = 16): Uri {\n        return getGravatarUri(this.email, fallback, size);\n    }\n\n    @memoize()\n    getShortMessage() {\n        // eslint-disable-next-line no-template-curly-in-string\n        return CommitFormatter.fromTemplate('${message}', this, { truncateMessageAtNewLine: true });\n    }\n\n    @memoize()\n    toGitUri(previous: boolean = false): GitUri {\n        return GitUri.fromCommit(this, previous);\n    }\n\n    abstract with(changes: {\n        type?: GitCommitType;\n        sha?: string;\n        fileName?: string;\n        originalFileName?: string | null;\n        previousFileName?: string | null;\n        previousSha?: string | null;\n    }): GitCommit;\n\n    protected getChangedValue<T>(change: T | null | undefined, original: T | undefined): T | undefined {\n        if (change === undefined) return original;\n        return change !== null ? change : undefined;\n    }\n}\n","'use strict';\nimport { ThemeIcon, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { ViewFilesLayout, ViewsFilesConfig } from '../../configuration';\nimport { GitUri } from '../../git/gitService';\nimport { Arrays } from '../../system';\nimport { ViewWithFiles } from '../viewBase';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport interface FileNode extends ViewNode {\n    folderName: string;\n    label?: string;\n    priority: number;\n    relativePath?: string;\n    root?: Arrays.HierarchicalItem<FileNode>;\n}\n\nexport class FolderNode extends ViewNode<ViewWithFiles> {\n    readonly priority: number = 1;\n\n    constructor(\n        view: ViewWithFiles,\n        parent: ViewNode,\n        public readonly repoPath: string,\n        public readonly folderName: string,\n        public readonly root: Arrays.HierarchicalItem<FileNode>,\n        private readonly containsWorkingFiles?: boolean,\n        public readonly relativePath?: string\n    ) {\n        super(GitUri.fromRepoPath(repoPath), view, parent);\n    }\n\n    getChildren(): (FolderNode | FileNode)[] {\n        if (this.root.descendants === undefined || this.root.children === undefined) return [];\n\n        let children: (FolderNode | FileNode)[];\n\n        const nesting = FolderNode.getFileNesting(\n            this.view.config.files,\n            this.root.descendants,\n            this.relativePath === undefined\n        );\n        if (nesting !== ViewFilesLayout.List) {\n            children = [];\n            for (const folder of this.root.children.values()) {\n                if (folder.value === undefined) {\n                    children.push(\n                        new FolderNode(\n                            this.view,\n                            this,\n                            this.repoPath,\n                            folder.name,\n                            folder,\n                            this.containsWorkingFiles,\n                            folder.relativePath\n                        )\n                    );\n                    continue;\n                }\n\n                folder.value.relativePath = this.root.relativePath;\n                children.push(folder.value);\n            }\n        }\n        else {\n            this.root.descendants.forEach(n => (n.relativePath = this.root.relativePath));\n            children = this.root.descendants;\n        }\n\n        children.sort((a, b) => {\n            return (\n                (a instanceof FolderNode ? -1 : 1) - (b instanceof FolderNode ? -1 : 1) ||\n                a.priority - b.priority ||\n                a.label!.localeCompare(b.label!, undefined, { numeric: true, sensitivity: 'base' })\n            );\n        });\n\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem(this.label, TreeItemCollapsibleState.Expanded);\n        item.contextValue = ResourceType.Folder;\n        if (this.containsWorkingFiles) {\n            item.contextValue += '+working';\n        }\n        item.iconPath = ThemeIcon.Folder;\n        item.tooltip = this.label;\n        return item;\n    }\n\n    get label(): string {\n        return this.folderName;\n    }\n\n    static getFileNesting<T extends FileNode>(\n        config: ViewsFilesConfig,\n        children: T[],\n        isRoot: boolean\n    ): ViewFilesLayout {\n        const nesting = config.layout || ViewFilesLayout.Auto;\n        if (nesting === ViewFilesLayout.Auto) {\n            if (isRoot || config.compact) {\n                const nestingThreshold = config.threshold || 5;\n                if (children.length <= nestingThreshold) return ViewFilesLayout.List;\n            }\n            return ViewFilesLayout.Tree;\n        }\n        return nesting;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Container } from '../../container';\nimport { GitLog, GitUri } from '../../git/gitService';\nimport { debug, gate, Iterables, Promises } from '../../system';\nimport { ViewWithFiles } from '../viewBase';\nimport { CommitNode } from './commitNode';\nimport { ShowMoreNode } from './common';\nimport { insertDateMarkers } from './helpers';\nimport { PageableViewNode, ResourceType, ViewNode } from './viewNode';\n\nexport interface CommitsQueryResults {\n    label: string;\n    log: GitLog | undefined;\n}\n\nexport class ResultsCommitsNode extends ViewNode<ViewWithFiles> implements PageableViewNode {\n    readonly supportsPaging = true;\n    readonly rememberLastMaxCount = true;\n    maxCount: number | undefined = this.view.getNodeLastMaxCount(this);\n\n    constructor(\n        view: ViewWithFiles,\n        parent: ViewNode,\n        public readonly repoPath: string,\n        private _label: string,\n        private readonly _commitsQuery: (maxCount: number | undefined) => Promise<CommitsQueryResults>,\n        private readonly _options: { expand?: boolean; includeDescription?: boolean } = {}\n    ) {\n        super(GitUri.fromRepoPath(repoPath), view, parent);\n\n        this._options = { expand: true, includeDescription: true, ..._options };\n    }\n\n    get id(): string {\n        return `${this.parent!.id}:results:commits`;\n    }\n\n    get type(): ResourceType {\n        return ResourceType.ResultsCommits;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const { log } = await this.getCommitsQueryResults();\n        if (log === undefined) return [];\n\n        const getBranchAndTagTips = await Container.git.getBranchesAndTagsTipsFn(this.uri.repoPath);\n        const children = [\n            ...insertDateMarkers(\n                Iterables.map(\n                    log.commits.values(),\n                    c => new CommitNode(this.view, this, c, undefined, getBranchAndTagTips)\n                ),\n                this\n            )\n        ];\n\n        if (log.truncated) {\n            children.push(\n                new ShowMoreNode(this.view, this, 'Results', log.maxCount, children[children.length - 1], this.maxCount)\n            );\n        }\n\n        return children;\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        let label;\n        let log;\n        let state;\n\n        try {\n            ({ label, log } = await Promises.timeout(this.getCommitsQueryResults(), 100));\n            if (log != null) {\n                this.maxCount = log.maxCount;\n            }\n\n            state =\n                log == null || log.count === 0\n                    ? TreeItemCollapsibleState.None\n                    : this._options.expand\n                    ? TreeItemCollapsibleState.Expanded\n                    : TreeItemCollapsibleState.Collapsed;\n        }\n        catch (ex) {\n            if (ex instanceof Promises.TimeoutError) {\n                ex.promise.then(({ log }: CommitsQueryResults) => {\n                    if (log != null) {\n                        this.maxCount = log.maxCount;\n                    }\n\n                    this.triggerChange(false);\n                });\n            }\n\n            // Need to use Collapsed before we have results or the item won't show up in the view until the children are awaited\n            // https://github.com/microsoft/vscode/issues/54806 & https://github.com/microsoft/vscode/issues/62214\n            state = TreeItemCollapsibleState.Collapsed;\n        }\n\n        let description;\n        if (this._options.includeDescription && (await Container.git.getRepositoryCount()) > 1) {\n            const repo = await Container.git.getRepository(this.repoPath);\n            description = (repo && repo.formattedName) || this.repoPath;\n        }\n\n        const item = new TreeItem(label || this._label, state);\n        item.contextValue = this.type;\n        item.description = description;\n        item.id = this.id;\n\n        return item;\n    }\n\n    @gate()\n    @debug()\n    refresh(reset: boolean = false) {\n        if (!reset) return;\n\n        this._commitsQueryResults = this._commitsQuery(this.maxCount);\n    }\n\n    private _commitsQueryResults: Promise<CommitsQueryResults> | undefined;\n\n    protected getCommitsQueryResults() {\n        if (this._commitsQueryResults === undefined) {\n            this._commitsQueryResults = this._commitsQuery(this.maxCount);\n        }\n\n        return this._commitsQueryResults;\n    }\n}\n","'use strict';\nimport { LogCorrelationContext, Logger, TraceLevel } from '../../logger';\nimport { Functions } from '../function';\nimport { Promises } from '../promise';\nimport { Strings } from '../string';\n\nconst emptyStr = '';\n\nconst correlationContext = new Map<number, LogCorrelationContext>();\nlet correlationCounter = 0;\n\nexport function getCorrelationContext() {\n    return correlationContext.get(correlationCounter);\n}\n\nexport function getCorrelationId() {\n    return correlationCounter;\n}\n\nfunction getNextCorrelationId() {\n    if (correlationCounter === Number.MAX_SAFE_INTEGER) {\n        correlationCounter = 0;\n    }\n    return ++correlationCounter;\n}\n\nfunction clearCorrelationContext(correlationId: number) {\n    correlationContext.delete(correlationId);\n}\n\nfunction setCorrelationContext(correlationId: number, context: LogCorrelationContext) {\n    correlationContext.set(correlationId, context);\n}\n\nexport interface LogContext<T> {\n    id: number;\n    instance: T;\n    instanceName: string;\n    name: string;\n    prefix: string;\n}\n\nexport const LogInstanceNameFn = Symbol('logInstanceNameFn');\n\nexport function logName<T>(fn: (c: T, name: string) => string) {\n    return (target: Function) => {\n        (target as any)[LogInstanceNameFn] = fn;\n    };\n}\n\nexport function debug<T extends (...arg: any) => any>(\n    options: {\n        args?: false | { [arg: string]: (arg: any) => string | false };\n        condition?(...args: Parameters<T>): boolean;\n        correlate?: boolean;\n        enter?(...args: Parameters<T>): string;\n        exit?(result: PromiseType<ReturnType<T>>): string;\n        prefix?(context: LogContext<T>, ...args: Parameters<T>): string;\n        sanitize?(key: string, value: any): any;\n        singleLine?: boolean;\n        timed?: boolean;\n    } = { timed: true }\n) {\n    return log<T>({ debug: true, ...options });\n}\n\ntype PromiseType<T> = T extends Promise<infer U> ? U : T;\n\nexport function log<T extends (...arg: any) => any>(\n    options: {\n        args?: false | { [arg: number]: (arg: any) => string | false };\n        condition?(...args: Parameters<T>): boolean;\n        correlate?: boolean;\n        debug?: boolean;\n        enter?(...args: Parameters<T>): string;\n        exit?(result: PromiseType<ReturnType<T>>): string;\n        prefix?(context: LogContext<T>, ...args: Parameters<T>): string;\n        sanitize?(key: string, value: any): any;\n        singleLine?: boolean;\n        timed?: boolean;\n    } = { timed: true }\n) {\n    options = { timed: true, ...options };\n\n    const logFn = (options.debug ? Logger.debug.bind(Logger) : Logger.log.bind(Logger)) as\n        | typeof Logger.debug\n        | typeof Logger.log;\n\n    return (target: any, key: string, descriptor: PropertyDescriptor) => {\n        let fn: Function | undefined;\n        if (typeof descriptor.value === 'function') {\n            fn = descriptor.value;\n        }\n        else if (typeof descriptor.get === 'function') {\n            fn = descriptor.get;\n        }\n        if (fn == null) throw new Error('Not supported');\n\n        const parameters = Functions.getParameters(fn);\n\n        descriptor.value = function(this: any, ...args: Parameters<T>) {\n            const correlationId = getNextCorrelationId();\n\n            if (\n                (!Logger.isDebugging &&\n                    Logger.level !== TraceLevel.Debug &&\n                    !(Logger.level === TraceLevel.Verbose && !options.debug)) ||\n                (typeof options.condition === 'function' && !options.condition(...args))\n            ) {\n                return fn!.apply(this, args);\n            }\n\n            let instanceName: string;\n            if (this != null) {\n                instanceName = Logger.toLoggableName(this);\n                if (this.constructor != null && this.constructor[LogInstanceNameFn]) {\n                    instanceName = target.constructor[LogInstanceNameFn](this, instanceName);\n                }\n            }\n            else {\n                instanceName = emptyStr;\n            }\n\n            let { correlate } = options;\n            if (!correlate && options.timed) {\n                correlate = true;\n            }\n\n            let prefix = `${correlate ? `[${correlationId.toString(16)}] ` : emptyStr}${\n                instanceName ? `${instanceName}.` : emptyStr\n            }${key}`;\n\n            if (options.prefix != null) {\n                prefix = options.prefix(\n                    {\n                        id: correlationId,\n                        instance: this,\n                        instanceName: instanceName,\n                        name: key,\n                        prefix: prefix\n                    },\n                    ...args\n                );\n            }\n\n            let correlationContext: LogCorrelationContext | undefined;\n            if (correlate) {\n                correlationContext = { correlationId: correlationId, prefix: prefix };\n                setCorrelationContext(correlationId, correlationContext);\n            }\n\n            const enter = options.enter != null ? options.enter(...args) : emptyStr;\n\n            let loggableParams: string;\n            if (options.args === false || args.length === 0) {\n                loggableParams = emptyStr;\n\n                if (!options.singleLine) {\n                    logFn(`${prefix}${enter}`);\n                }\n            }\n            else {\n                const argFns = typeof options.args === 'object' ? options.args : undefined;\n                let argFn;\n                let loggable;\n                loggableParams = args\n                    .map((v: any, index: number) => {\n                        const p = parameters[index];\n\n                        argFn = argFns !== undefined ? argFns[index] : undefined;\n                        if (argFn !== undefined) {\n                            loggable = argFn(v);\n                            if (loggable === false) return undefined;\n                        }\n                        else {\n                            loggable = Logger.toLoggable(v, options.sanitize);\n                        }\n\n                        return p ? `${p}=${loggable}` : loggable;\n                    })\n                    .filter(Boolean)\n                    .join(', ');\n\n                if (!options.singleLine) {\n                    if (!options.debug) {\n                        Logger.logWithDebugParams(`${prefix}${enter}`, loggableParams);\n                    }\n                    else {\n                        logFn(`${prefix}${enter}`, loggableParams);\n                    }\n                }\n            }\n\n            if (options.singleLine || options.timed || options.exit != null) {\n                const start = options.timed ? process.hrtime() : undefined;\n\n                const logError = (ex: Error) => {\n                    const timing =\n                        start !== undefined ? ` \\u2022 ${Strings.getDurationMilliseconds(start)} ms` : emptyStr;\n                    if (options.singleLine) {\n                        Logger.error(\n                            ex,\n                            `${prefix}${enter}`,\n                            `failed${\n                                correlationContext !== undefined && correlationContext.exitDetails\n                                    ? correlationContext.exitDetails\n                                    : emptyStr\n                            }${timing}`,\n                            loggableParams\n                        );\n                    }\n                    else {\n                        Logger.error(\n                            ex,\n                            prefix,\n                            `failed${\n                                correlationContext !== undefined && correlationContext.exitDetails\n                                    ? correlationContext.exitDetails\n                                    : emptyStr\n                            }${timing}`\n                        );\n                    }\n\n                    if (correlate) {\n                        clearCorrelationContext(correlationId);\n                    }\n                };\n\n                let result;\n                try {\n                    result = fn!.apply(this, args);\n                }\n                catch (ex) {\n                    logError(ex);\n                    throw ex;\n                }\n\n                const logResult = (r: any) => {\n                    const timing =\n                        start !== undefined ? ` \\u2022 ${Strings.getDurationMilliseconds(start)} ms` : emptyStr;\n                    let exit;\n                    if (options.exit != null) {\n                        try {\n                            exit = options.exit(r);\n                        }\n                        catch (ex) {\n                            exit = `@log.exit error: ${ex}`;\n                        }\n                    }\n                    else {\n                        exit = 'completed';\n                    }\n\n                    if (options.singleLine) {\n                        if (!options.debug) {\n                            Logger.logWithDebugParams(\n                                `${prefix}${enter} ${exit}${\n                                    correlationContext !== undefined && correlationContext.exitDetails\n                                        ? correlationContext.exitDetails\n                                        : emptyStr\n                                }${timing}`,\n                                loggableParams\n                            );\n                        }\n                        else {\n                            logFn(\n                                `${prefix}${enter} ${exit}${\n                                    correlationContext !== undefined && correlationContext.exitDetails\n                                        ? correlationContext.exitDetails\n                                        : emptyStr\n                                }${timing}`,\n                                loggableParams\n                            );\n                        }\n                    }\n                    else {\n                        logFn(\n                            `${prefix} ${exit}${\n                                correlationContext !== undefined && correlationContext.exitDetails\n                                    ? correlationContext.exitDetails\n                                    : emptyStr\n                            }${timing}`\n                        );\n                    }\n\n                    if (correlate) {\n                        clearCorrelationContext(correlationId);\n                    }\n                };\n\n                if (result != null && Promises.isPromise(result)) {\n                    const promise = result.then(logResult);\n                    promise.catch(logError);\n                }\n                else {\n                    logResult(result);\n                }\n\n                return result;\n            }\n\n            return fn!.apply(this, args);\n        };\n    };\n}\n","'use strict';\nimport * as fs from 'fs';\nimport { Uri } from 'vscode';\nimport { GravatarDefaultStyle } from './config';\nimport { Strings } from './system';\nimport { ContactPresenceStatus } from './vsls/vsls';\nimport { Container } from './container';\n\nconst gravatarCache = new Map<string, Uri>();\nconst missingGravatarHash = '00000000000000000000000000000000';\n\nconst presenceCache = new Map<ContactPresenceStatus, string>();\n\nexport function clearGravatarCache() {\n    gravatarCache.clear();\n}\n\nexport function getGravatarUri(email: string | undefined, fallback: GravatarDefaultStyle, size: number = 16): Uri {\n    const hash =\n        email != null && email.length !== 0 ? Strings.md5(email.trim().toLowerCase(), 'hex') : missingGravatarHash;\n\n    const key = `${hash}:${size}`;\n    let gravatar = gravatarCache.get(key);\n    if (gravatar !== undefined) return gravatar;\n\n    gravatar = Uri.parse(`https://www.gravatar.com/avatar/${hash}.jpg?s=${size}&d=${fallback}`);\n    gravatarCache.set(key, gravatar);\n\n    return gravatar;\n}\n\nexport function getPresenceDataUri(status: ContactPresenceStatus) {\n    let dataUri = presenceCache.get(status);\n    if (dataUri === undefined) {\n        const contents = fs\n            .readFileSync(Container.context.asAbsolutePath(`images/dark/icon-presence-${status}.svg`))\n            .toString('base64');\n\n        dataUri = encodeURI(`data:image/svg+xml;base64,${contents}`);\n        presenceCache.set(status, dataUri);\n    }\n\n    return dataUri;\n}\n","'use strict';\nimport { Range } from 'vscode';\nimport { RemoteProvider } from './provider';\n\nconst issueEnricherRegex = /(^|\\s)(#([0-9]+))\\b/gi;\n\nconst gitRegex = /\\/_git\\/?/i;\nconst legacyDefaultCollectionRegex = /^DefaultCollection\\//i;\nconst orgAndProjectRegex = /^(.*?)\\/(.*?)\\/(.*)/;\nconst sshDomainRegex = /^(ssh|vs-ssh)\\./i;\nconst sshPathRegex = /^\\/?v\\d\\//i;\n\nexport class AzureDevOpsRemote extends RemoteProvider {\n    constructor(domain: string, path: string, protocol?: string, name?: string, legacy: boolean = false) {\n        if (sshDomainRegex.test(domain)) {\n            path = path.replace(sshPathRegex, '');\n            domain = domain.replace(sshDomainRegex, '');\n\n            // Add in /_git/ into ssh urls\n            const match = orgAndProjectRegex.exec(path);\n            if (match != null) {\n                const [, org, project, rest] = match;\n\n                // Handle legacy vsts urls\n                if (legacy) {\n                    domain = `${org}.${domain}`;\n                    path = `${project}/_git/${rest}`;\n                }\n                else {\n                    path = `${org}/${project}/_git/${rest}`;\n                }\n            }\n        }\n\n        super(domain, path, protocol, name);\n    }\n\n    get icon() {\n        return 'vsts';\n    }\n\n    get name() {\n        return 'Azure DevOps';\n    }\n\n    private _displayPath: string | undefined;\n    get displayPath(): string {\n        if (this._displayPath === undefined) {\n            this._displayPath = this.path.replace(gitRegex, '/').replace(legacyDefaultCollectionRegex, '');\n        }\n        return this._displayPath;\n    }\n\n    enrichMessage(message: string): string {\n        // Strip off any `_git` part from the repo url\n        const baseUrl = this.baseUrl.replace(gitRegex, '/');\n        // Matches #123\n        return message.replace(issueEnricherRegex, `$1[$2](${baseUrl}/_workitems/edit/$3 \"Open Work Item $2\")`);\n    }\n\n    protected getUrlForBranches(): string {\n        return `${this.baseUrl}/branches`;\n    }\n\n    protected getUrlForBranch(branch: string): string {\n        return `${this.baseUrl}/?version=GB${branch}&_a=history`;\n    }\n\n    protected getUrlForCommit(sha: string): string {\n        return `${this.baseUrl}/commit/${sha}`;\n    }\n\n    protected getUrlForFile(fileName: string, branch?: string, sha?: string, range?: Range): string {\n        let line;\n        if (range) {\n            if (range.start.line === range.end.line) {\n                line = `&line=${range.start.line}`;\n            }\n            else {\n                line = `&line=${range.start.line}&lineEnd=${range.end.line}`;\n            }\n        }\n        else {\n            line = '';\n        }\n\n        if (sha) return `${this.baseUrl}/commit/${sha}/?_a=contents&path=%2F${fileName}${line}`;\n        if (branch) return `${this.baseUrl}/?path=%2F${fileName}&version=GB${branch}&_a=contents${line}`;\n        return `${this.baseUrl}?path=%2F${fileName}${line}`;\n    }\n}\n","'use strict';\nimport { Range } from 'vscode';\nimport { RemoteProvider } from './provider';\n\nconst issueEnricherRegex = /(^|\\s)(issue #([0-9]+))\\b/gi;\nconst prEnricherRegex = /(^|\\s)(pull request #([0-9]+))\\b/gi;\n\nexport class BitbucketRemote extends RemoteProvider {\n    constructor(domain: string, path: string, protocol?: string, name?: string, custom: boolean = false) {\n        super(domain, path, protocol, name, custom);\n    }\n\n    get icon() {\n        return 'bitbucket';\n    }\n\n    get name() {\n        return this.formatName('Bitbucket');\n    }\n\n    enrichMessage(message: string): string {\n        return (\n            message\n                // Matches issue #123\n                .replace(issueEnricherRegex, `$1[$2](${this.baseUrl}/issues/$3 \"Open Issue $2\")`)\n                // Matches pull request #123\n                .replace(prEnricherRegex, `$1[$2](${this.baseUrl}/pull-requests/$3 \"Open PR $2\")`)\n        );\n    }\n\n    protected getUrlForBranches(): string {\n        return `${this.baseUrl}/branches`;\n    }\n\n    protected getUrlForBranch(branch: string): string {\n        return `${this.baseUrl}/commits/branch/${branch}`;\n    }\n\n    protected getUrlForCommit(sha: string): string {\n        return `${this.baseUrl}/commits/${sha}`;\n    }\n\n    protected getUrlForFile(fileName: string, branch?: string, sha?: string, range?: Range): string {\n        let line;\n        if (range) {\n            if (range.start.line === range.end.line) {\n                line = `#${fileName}-${range.start.line}`;\n            }\n            else {\n                line = `#${fileName}-${range.start.line}:${range.end.line}`;\n            }\n        }\n        else {\n            line = '';\n        }\n\n        if (sha) return `${this.baseUrl}/src/${sha}/${fileName}${line}`;\n        if (branch) return `${this.baseUrl}/src/${branch}/${fileName}${line}`;\n        return `${this.baseUrl}?path=${fileName}${line}`;\n    }\n}\n","'use strict';\nimport { Range } from 'vscode';\nimport { RemoteProvider } from './provider';\n\nconst issueEnricherRegex = /(^|\\s)(issue #([0-9]+))\\b/gi;\nconst prEnricherRegex = /(^|\\s)(pull request #([0-9]+))\\b/gi;\n\nexport class BitbucketServerRemote extends RemoteProvider {\n    constructor(domain: string, path: string, protocol?: string, name?: string, custom: boolean = false) {\n        super(domain, path, protocol, name, custom);\n    }\n\n    protected get baseUrl() {\n        const [project, repo] = this.path.startsWith('scm/')\n            ? this.path.replace('scm/', '').split('/')\n            : this.splitPath();\n        return `${this.protocol}://${this.domain}/projects/${project}/repos/${repo}`;\n    }\n\n    get icon() {\n        return 'bitbucket';\n    }\n\n    get name() {\n        return this.formatName('Bitbucket Server');\n    }\n\n    enrichMessage(message: string): string {\n        return (\n            message\n                // Matches issue #123\n                .replace(issueEnricherRegex, `$1[$2](${this.baseUrl}/issues/$3 \"Open Issue $2\")`)\n                // Matches pull request #123\n                .replace(prEnricherRegex, `$1[$2](${this.baseUrl}/pull-requests/$3 \"Open PR $2\")`)\n        );\n    }\n\n    protected getUrlForBranches(): string {\n        return `${this.baseUrl}/branches`;\n    }\n\n    protected getUrlForBranch(branch: string): string {\n        return `${this.baseUrl}/commits?until=${branch}`;\n    }\n\n    protected getUrlForCommit(sha: string): string {\n        return `${this.baseUrl}/commits/${sha}`;\n    }\n\n    protected getUrlForFile(fileName: string, branch?: string, sha?: string, range?: Range): string {\n        let line;\n        if (range) {\n            if (range.start.line === range.end.line) {\n                line = `#${range.start.line}`;\n            }\n            else {\n                line = `#${range.start.line}-${range.end.line}`;\n            }\n        }\n        else {\n            line = '';\n        }\n        if (sha) return `${this.baseUrl}/browse/${fileName}?at=${sha}${line}`;\n        if (branch) return `${this.baseUrl}/browse/${fileName}?at=${branch}${line}`;\n        return `${this.baseUrl}/browse/${fileName}${line}`;\n    }\n}\n","'use strict';\nimport { Range } from 'vscode';\nimport { RemotesUrlsConfig } from '../../configuration';\nimport { Strings } from '../../system';\nimport { RemoteProvider } from './provider';\n\nexport class CustomRemote extends RemoteProvider {\n    private readonly urls: RemotesUrlsConfig;\n\n    constructor(domain: string, path: string, urls: RemotesUrlsConfig, protocol?: string, name?: string) {\n        super(domain, path, protocol, name, true);\n        this.urls = urls;\n    }\n\n    get name() {\n        return this.formatName('Custom');\n    }\n\n    protected getUrlForRepository(): string {\n        return Strings.interpolate(this.urls.repository, this.getContext());\n    }\n\n    protected getUrlForBranches(): string {\n        return Strings.interpolate(this.urls.branches, this.getContext());\n    }\n\n    protected getUrlForBranch(branch: string): string {\n        return Strings.interpolate(this.urls.branch, this.getContext({ branch: branch }));\n    }\n\n    protected getUrlForCommit(sha: string): string {\n        return Strings.interpolate(this.urls.commit, this.getContext({ id: sha }));\n    }\n\n    protected getUrlForFile(fileName: string, branch?: string, sha?: string, range?: Range): string {\n        let line;\n        if (range) {\n            if (range.start.line === range.end.line) {\n                line = Strings.interpolate(this.urls.fileLine, { line: range.start.line });\n            }\n            else {\n                line = Strings.interpolate(this.urls.fileRange, { start: range.start.line, end: range.end.line });\n            }\n        }\n        else {\n            line = '';\n        }\n\n        if (sha) {\n            return Strings.interpolate(\n                this.urls.fileInCommit,\n                this.getContext({ id: sha, file: fileName, line: line })\n            );\n        }\n        if (branch) {\n            return Strings.interpolate(\n                this.urls.fileInBranch,\n                this.getContext({ branch: branch, file: fileName, line: line })\n            );\n        }\n        return Strings.interpolate(this.urls.file, this.getContext({ file: fileName, line: line }));\n    }\n\n    private getContext(context?: {}) {\n        const [repoBase, repoPath] = this.splitPath();\n        return {\n            repo: this.path,\n            repoBase: repoBase,\n            repoPath: repoPath,\n            ...(context || {})\n        };\n    }\n}\n","'use strict';\nimport { Range } from 'vscode';\nimport { RemoteProvider } from './provider';\n\nconst issueEnricherRegex = /(^|\\s)((?:#|gh-)([0-9]+))\\b/gi;\nconst issueEnricher3rdParyRegex = /\\b((\\w+-?\\w+(?!-)\\/\\w+-?\\w+(?!-))#([0-9]+))\\b/g;\n\nexport class GitHubRemote extends RemoteProvider {\n    constructor(domain: string, path: string, protocol?: string, name?: string, custom: boolean = false) {\n        super(domain, path, protocol, name, custom);\n    }\n\n    get icon() {\n        return 'github';\n    }\n\n    get name() {\n        return this.formatName('GitHub');\n    }\n\n    enrichMessage(message: string): string {\n        return (\n            message\n                // Matches #123 or gh-123 or GH-123\n                .replace(issueEnricherRegex, `$1[$2](${this.baseUrl}/issues/$3 \"Open Issue $2\")`)\n                // Matches eamodio/vscode-gitlens#123\n                .replace(\n                    issueEnricher3rdParyRegex,\n                    `[$1](${this.protocol}://${this.domain}/$2/issues/$3 \"Open Issue #$3 from $2\")`\n                )\n        );\n    }\n\n    protected getUrlForBranches(): string {\n        return `${this.baseUrl}/branches`;\n    }\n\n    protected getUrlForBranch(branch: string): string {\n        return `${this.baseUrl}/commits/${branch}`;\n    }\n\n    protected getUrlForCommit(sha: string): string {\n        return `${this.baseUrl}/commit/${sha}`;\n    }\n\n    protected getUrlForFile(fileName: string, branch?: string, sha?: string, range?: Range): string {\n        let line;\n        if (range) {\n            if (range.start.line === range.end.line) {\n                line = `#L${range.start.line}`;\n            }\n            else {\n                line = `#L${range.start.line}-L${range.end.line}`;\n            }\n        }\n        else {\n            line = '';\n        }\n\n        if (sha) return `${this.baseUrl}/blob/${sha}/${fileName}${line}`;\n        if (branch) return `${this.baseUrl}/blob/${branch}/${fileName}${line}`;\n        return `${this.baseUrl}?path=${fileName}${line}`;\n    }\n}\n","'use strict';\nimport { Range } from 'vscode';\nimport { RemoteProvider } from './provider';\n\nconst issueEnricherRegex = /(^|\\s)(#([0-9]+))\\b/gi;\n\nexport class GitLabRemote extends RemoteProvider {\n    constructor(domain: string, path: string, protocol?: string, name?: string, custom: boolean = false) {\n        super(domain, path, protocol, name, custom);\n    }\n\n    get icon() {\n        return 'gitlab';\n    }\n\n    get name() {\n        return this.formatName('GitLab');\n    }\n\n    enrichMessage(message: string): string {\n        // Matches #123\n        return message.replace(issueEnricherRegex, `$1[$2](${this.baseUrl}/issues/$3 \"Open Issue $2\")`);\n    }\n\n    protected getUrlForBranches(): string {\n        return `${this.baseUrl}/branches`;\n    }\n\n    protected getUrlForBranch(branch: string): string {\n        return `${this.baseUrl}/commits/${branch}`;\n    }\n\n    protected getUrlForCommit(sha: string): string {\n        return `${this.baseUrl}/commit/${sha}`;\n    }\n\n    protected getUrlForFile(fileName: string, branch?: string, sha?: string, range?: Range): string {\n        let line;\n        if (range) {\n            if (range.start.line === range.end.line) {\n                line = `#L${range.start.line}`;\n            }\n            else {\n                line = `#L${range.start.line}-${range.end.line}`;\n            }\n        }\n        else {\n            line = '';\n        }\n\n        if (sha) return `${this.baseUrl}/blob/${sha}/${fileName}${line}`;\n        if (branch) return `${this.baseUrl}/blob/${branch}/${fileName}${line}`;\n        return `${this.baseUrl}?path=${fileName}${line}`;\n    }\n}\n","'use strict';\nimport { CustomRemoteType, RemotesConfig } from '../../configuration';\nimport { Logger } from '../../logger';\nimport { AzureDevOpsRemote } from './azure-devops';\nimport { BitbucketRemote } from './bitbucket';\nimport { BitbucketServerRemote } from './bitbucket-server';\nimport { CustomRemote } from './custom';\nimport { GitHubRemote } from './github';\nimport { GitLabRemote } from './gitlab';\nimport { RemoteProvider } from './provider';\n\nexport { RemoteProvider };\nexport type RemoteProviders = [string | RegExp, ((domain: string, path: string) => RemoteProvider)][];\n\nconst defaultProviders: RemoteProviders = [\n    ['bitbucket.org', (domain: string, path: string) => new BitbucketRemote(domain, path)],\n    ['github.com', (domain: string, path: string) => new GitHubRemote(domain, path)],\n    ['gitlab.com', (domain: string, path: string) => new GitLabRemote(domain, path)],\n    [/\\bdev\\.azure\\.com$/i, (domain: string, path: string) => new AzureDevOpsRemote(domain, path)],\n    [/\\bbitbucket\\b/i, (domain: string, path: string) => new BitbucketServerRemote(domain, path)],\n    [/\\bgitlab\\b/i, (domain: string, path: string) => new GitLabRemote(domain, path)],\n    [\n        /\\bvisualstudio\\.com$/i,\n        (domain: string, path: string) => new AzureDevOpsRemote(domain, path, undefined, undefined, true)\n    ]\n];\n\nexport class RemoteProviderFactory {\n    static factory(providers: RemoteProviders): (domain: string, path: string) => RemoteProvider | undefined {\n        return (domain: string, path: string) => this.create(providers, domain, path);\n    }\n\n    static create(providers: RemoteProviders, domain: string, path: string): RemoteProvider | undefined {\n        try {\n            const key = domain.toLowerCase();\n            for (const [matcher, creator] of providers) {\n                if (\n                    (typeof matcher === 'string' && matcher === key) ||\n                    (typeof matcher !== 'string' && matcher.test(key))\n                ) {\n                    return creator(domain, path);\n                }\n            }\n\n            return undefined;\n        }\n        catch (ex) {\n            Logger.error(ex, 'RemoteProviderFactory');\n            return undefined;\n        }\n    }\n\n    static loadProviders(cfg: RemotesConfig[] | null | undefined): RemoteProviders {\n        const providers: RemoteProviders = [];\n\n        if (cfg != null && cfg.length > 0) {\n            for (const rc of cfg) {\n                const provider = this.getCustomProvider(rc);\n                if (provider === undefined) continue;\n\n                providers.push([rc.domain.toLowerCase(), provider]);\n            }\n        }\n\n        providers.push(...defaultProviders);\n        return providers;\n    }\n\n    private static getCustomProvider(cfg: RemotesConfig) {\n        switch (cfg.type) {\n            case CustomRemoteType.Bitbucket:\n                return (domain: string, path: string) =>\n                    new BitbucketRemote(domain, path, cfg.protocol, cfg.name, true);\n            case CustomRemoteType.BitbucketServer:\n                return (domain: string, path: string) =>\n                    new BitbucketServerRemote(domain, path, cfg.protocol, cfg.name, true);\n            case CustomRemoteType.Custom:\n                return (domain: string, path: string) =>\n                    new CustomRemote(domain, path, cfg.urls!, cfg.protocol, cfg.name);\n            case CustomRemoteType.GitHub:\n                return (domain: string, path: string) => new GitHubRemote(domain, path, cfg.protocol, cfg.name, true);\n            case CustomRemoteType.GitLab:\n                return (domain: string, path: string) => new GitLabRemote(domain, path, cfg.protocol, cfg.name, true);\n        }\n        return undefined;\n    }\n}\n","'use strict';\nimport { execFile } from 'child_process';\nimport * as fs from 'fs';\nimport * as paths from 'path';\nimport * as iconv from 'iconv-lite';\nimport { Logger } from '../logger';\n\nconst isWindows = process.platform === 'win32';\n\n/**\n * Search PATH to see if a file exists in any of the path folders.\n *\n * @param  {string} exe The file to search for\n * @return {string}     A fully qualified path, or the original path if nothing\n *                      is found\n *\n * @private\n */\nfunction runDownPath(exe: string): string {\n    // NB: Windows won't search PATH looking for executables in spawn like\n    // Posix does\n\n    // Files with any directory path don't get this applied\n    if (exe.match(/[\\\\/]/)) return exe;\n\n    const target = paths.join('.', exe);\n    try {\n        const stats = fs.statSync(target);\n        if (stats && stats.isFile() && isExecutable(stats)) return target;\n    }\n    catch {}\n\n    const path = process.env.PATH;\n    if (path != null && path.length !== 0) {\n        const haystack = path.split(isWindows ? ';' : ':');\n        let stats;\n        for (const p of haystack) {\n            const needle = paths.join(p, exe);\n            try {\n                stats = fs.statSync(needle);\n                if (stats && stats.isFile() && isExecutable(stats)) return needle;\n            }\n            catch {}\n        }\n    }\n\n    return exe;\n}\n\nfunction isExecutable(stats: fs.Stats) {\n    if (isWindows) return true;\n\n    const isGroup = stats.gid ? process.getgid && stats.gid === process.getgid() : true;\n    const isUser = stats.uid ? process.getuid && stats.uid === process.getuid() : true;\n\n    return Boolean(stats.mode & 0o0001 || (stats.mode & 0o0010 && isGroup) || (stats.mode & 0o0100 && isUser));\n}\n\n/**\n * Finds the executable and parameters to run on Windows. This method\n * mimics the POSIX behavior of being able to run scripts as executables by\n * replacing the passed-in executable with the script runner, for PowerShell,\n * CMD, and node scripts.\n *\n * This method also does the work of running down PATH, which spawn on Windows\n * also doesn't do, unlike on POSIX.\n */\nexport function findExecutable(exe: string, args: string[]): { cmd: string; args: string[] } {\n    // POSIX can just execute scripts directly, no need for silly goosery\n    if (!isWindows) return { cmd: runDownPath(exe), args: args };\n\n    if (!fs.existsSync(exe)) {\n        // NB: When you write something like `surf-client ... -- surf-build` on Windows,\n        // a shell would normally convert that to surf-build.cmd, but since it's passed\n        // in as an argument, it doesn't happen\n        const possibleExts = ['.exe', '.bat', '.cmd', '.ps1'];\n        for (const ext of possibleExts) {\n            const possibleFullPath = runDownPath(`${exe}${ext}`);\n\n            if (fs.existsSync(possibleFullPath)) return findExecutable(possibleFullPath, args);\n        }\n    }\n\n    if (exe.match(/\\.ps1$/i)) {\n        const cmd = paths.join(\n            process.env.SYSTEMROOT || 'C:\\\\WINDOWS',\n            'System32',\n            'WindowsPowerShell',\n            'v1.0',\n            'PowerShell.exe'\n        );\n        const psargs = ['-ExecutionPolicy', 'Unrestricted', '-NoLogo', '-NonInteractive', '-File', exe];\n\n        return { cmd: cmd, args: psargs.concat(args) };\n    }\n\n    if (exe.match(/\\.(bat|cmd)$/i)) {\n        const cmd = paths.join(process.env.SYSTEMROOT || 'C:\\\\WINDOWS', 'System32', 'cmd.exe');\n        const cmdArgs = ['/C', exe, ...args];\n\n        return { cmd: cmd, args: cmdArgs };\n    }\n\n    if (exe.match(/\\.(js)$/i)) {\n        const cmd = process.execPath;\n        const nodeArgs = [exe];\n\n        return { cmd: cmd, args: nodeArgs.concat(args) };\n    }\n\n    return { cmd: exe, args: args };\n}\n\nexport interface RunOptions {\n    cwd?: string;\n    readonly env?: Record<string, any>;\n    readonly encoding?: BufferEncoding | 'buffer';\n    /**\n     * The size the output buffer to allocate to the spawned process. Set this\n     * if you are anticipating a large amount of output.\n     *\n     * If not specified, this will be 10MB (10485760 bytes) which should be\n     * enough for most Git operations.\n     */\n    readonly maxBuffer?: number;\n    /**\n     * An optional string or buffer which will be written to\n     * the child process stdin stream immediately immediately\n     * after spawning the process.\n     */\n    readonly stdin?: string | Buffer;\n    /**\n     * The encoding to use when writing to stdin, if the stdin\n     * parameter is a string.\n     */\n    readonly stdinEncoding?: string;\n}\n\nconst bufferExceededRegex = /stdout maxBuffer( length)? exceeded/;\n\nexport function run<TOut extends string | Buffer>(\n    command: string,\n    args: any[],\n    encoding: BufferEncoding | 'buffer',\n    options: RunOptions = {}\n): Promise<TOut> {\n    const { stdin, stdinEncoding, ...opts }: RunOptions = { maxBuffer: 100 * 1024 * 1024, ...options };\n\n    return new Promise<TOut>((resolve, reject) => {\n        const proc = execFile(\n            command,\n            args,\n            opts,\n            (error: (Error & { stdout?: TOut | undefined }) | null, stdout, stderr) => {\n                if (error != null) {\n                    if (bufferExceededRegex.test(error.message)) {\n                        error.message = `Command output exceeded the allocated stdout buffer. Set 'options.maxBuffer' to a larger value than ${opts.maxBuffer} bytes`;\n                    }\n\n                    error.stdout =\n                        encoding === 'utf8' || encoding === 'binary' || encoding === 'buffer'\n                            ? (stdout as TOut)\n                            : (iconv.decode(Buffer.from(stdout, 'binary'), encoding) as TOut);\n                    reject(error);\n\n                    return;\n                }\n\n                if (stderr) {\n                    Logger.warn(`Warning(${command} ${args.join(' ')}): ${stderr}`);\n                }\n\n                resolve(\n                    encoding === 'utf8' || encoding === 'binary' || encoding === 'buffer'\n                        ? (stdout as TOut)\n                        : (iconv.decode(Buffer.from(stdout, 'binary'), encoding) as TOut)\n                );\n            }\n        );\n\n        if (stdin) {\n            proc.stdin.end(stdin, stdinEncoding || 'utf8');\n        }\n    });\n}\n","/* eslint-disable node/no-deprecated-api */\n\n'use strict'\n\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\nvar safer = {}\n\nvar key\n\nfor (key in buffer) {\n  if (!buffer.hasOwnProperty(key)) continue\n  if (key === 'SlowBuffer' || key === 'Buffer') continue\n  safer[key] = buffer[key]\n}\n\nvar Safer = safer.Buffer = {}\nfor (key in Buffer) {\n  if (!Buffer.hasOwnProperty(key)) continue\n  if (key === 'allocUnsafe' || key === 'allocUnsafeSlow') continue\n  Safer[key] = Buffer[key]\n}\n\nsafer.Buffer.prototype = Buffer.prototype\n\nif (!Safer.from || Safer.from === Uint8Array.from) {\n  Safer.from = function (value, encodingOrOffset, length) {\n    if (typeof value === 'number') {\n      throw new TypeError('The \"value\" argument must not be of type number. Received type ' + typeof value)\n    }\n    if (value && typeof value.length === 'undefined') {\n      throw new TypeError('The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type ' + typeof value)\n    }\n    return Buffer(value, encodingOrOffset, length)\n  }\n}\n\nif (!Safer.alloc) {\n  Safer.alloc = function (size, fill, encoding) {\n    if (typeof size !== 'number') {\n      throw new TypeError('The \"size\" argument must be of type number. Received type ' + typeof size)\n    }\n    if (size < 0 || size >= 2 * (1 << 30)) {\n      throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n    }\n    var buf = Buffer(size)\n    if (!fill || fill.length === 0) {\n      buf.fill(0)\n    } else if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n    return buf\n  }\n}\n\nif (!safer.kStringMaxLength) {\n  try {\n    safer.kStringMaxLength = process.binding('buffer').kStringMaxLength\n  } catch (e) {\n    // we can't determine kStringMaxLength in environments where process.binding\n    // is unsupported, so let's not set it\n  }\n}\n\nif (!safer.constants) {\n  safer.constants = {\n    MAX_LENGTH: safer.kMaxLength\n  }\n  if (safer.kStringMaxLength) {\n    safer.constants.MAX_STRING_LENGTH = safer.kStringMaxLength\n  }\n}\n\nmodule.exports = safer\n","'use strict';\nimport { StarredBranches, WorkspaceState } from '../../constants';\nimport { Container } from '../../container';\nimport { Git, GitRemote } from '../git';\nimport { GitStatus } from './status';\nimport { memoize } from '../../system';\n\nexport interface GitTrackingState {\n    ahead: number;\n    behind: number;\n}\n\nexport class GitBranch {\n    static is(branch: any): branch is GitBranch {\n        return branch instanceof GitBranch;\n    }\n\n    static sort(branches: GitBranch[]) {\n        return branches.sort(\n            (a, b) =>\n                (a.current ? -1 : 1) - (b.current ? -1 : 1) ||\n                (a.starred ? -1 : 1) - (b.starred ? -1 : 1) ||\n                (b.remote ? -1 : 1) - (a.remote ? -1 : 1) ||\n                a.name.localeCompare(b.name, undefined, { numeric: true, sensitivity: 'base' })\n        );\n    }\n\n    readonly detached: boolean;\n    readonly id: string;\n    readonly tracking?: string;\n    readonly state: GitTrackingState;\n\n    constructor(\n        public readonly repoPath: string,\n        public readonly name: string,\n        public readonly remote: boolean,\n        public readonly current: boolean,\n        public readonly sha?: string,\n        tracking?: string,\n        ahead: number = 0,\n        behind: number = 0,\n        detached: boolean = false\n    ) {\n        this.id = `${repoPath}|${remote ? 'remotes/' : 'heads/'}${name}`;\n\n        this.detached = detached || (this.current ? GitBranch.isDetached(name) : false);\n        if (this.detached) {\n            this.name = GitBranch.formatDetached(this.sha!);\n        }\n\n        this.tracking = tracking == null || tracking.length === 0 ? undefined : tracking;\n        this.state = {\n            ahead: ahead,\n            behind: behind\n        };\n    }\n\n    get ref() {\n        return this.detached ? this.sha! : this.name;\n    }\n\n    @memoize()\n    getBasename(): string {\n        const name = this.getName();\n        const index = name.lastIndexOf('/');\n        return index !== -1 ? name.substring(index + 1) : name;\n    }\n\n    @memoize()\n    getName(): string {\n        return this.remote ? this.name.substring(this.name.indexOf('/') + 1) : this.name;\n    }\n\n    @memoize()\n    async getRemote(): Promise<GitRemote | undefined> {\n        const remoteName = this.getRemoteName();\n        if (remoteName === undefined) return undefined;\n\n        const remotes = await Container.git.getRemotes(this.repoPath);\n        if (remotes.length === 0) return undefined;\n\n        return remotes.find(r => r.name === remoteName);\n    }\n\n    @memoize()\n    getRemoteName(): string | undefined {\n        if (this.remote) return GitBranch.getRemote(this.name);\n        if (this.tracking !== undefined) return GitBranch.getRemote(this.tracking);\n\n        return undefined;\n    }\n\n    getTrackingStatus(options?: {\n        empty?: string;\n        expand?: boolean;\n        prefix?: string;\n        separator?: string;\n        suffix?: string;\n    }): string {\n        return GitStatus.getUpstreamStatus(this.tracking, this.state, options);\n    }\n\n    get starred() {\n        const starred = Container.context.workspaceState.get<StarredBranches>(WorkspaceState.StarredBranches);\n        return starred !== undefined && starred[this.id] === true;\n    }\n\n    star() {\n        return this.updateStarred(true);\n    }\n\n    unstar() {\n        return this.updateStarred(false);\n    }\n\n    private async updateStarred(star: boolean) {\n        let starred = Container.context.workspaceState.get<StarredBranches>(WorkspaceState.StarredBranches);\n        if (starred === undefined) {\n            starred = Object.create(null);\n        }\n\n        if (star) {\n            starred![this.id] = true;\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const { [this.id]: _, ...rest } = starred!;\n            starred = rest;\n        }\n        await Container.context.workspaceState.update(WorkspaceState.StarredBranches, starred);\n    }\n\n    static formatDetached(sha: string): string {\n        return `(${Git.shortenSha(sha)}...)`;\n    }\n\n    static getRemote(branch: string): string {\n        return branch.substring(0, branch.indexOf('/'));\n    }\n\n    static isDetached(name: string): boolean {\n        // If there is whitespace in the name assume this is not a valid branch name\n        // Deals with detached HEAD states\n        return name.match(/\\s/) !== null || name.match(/\\(detached\\)/) !== null;\n    }\n}\n","'use strict';\nimport { Disposable, Event, EventEmitter, TextDocument, TextEditor, Uri } from 'vscode';\nimport { CommandContext, getEditorIfActive, isActiveDocument, setCommandContext } from '../constants';\nimport { Container } from '../container';\nimport { GitService, GitUri, Repository, RepositoryChange, RepositoryChangeEvent } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Functions } from '../system';\n\nexport interface DocumentBlameStateChangeEvent<T> {\n    readonly editor: TextEditor;\n    readonly document: TrackedDocument<T>;\n    readonly blameable: boolean;\n}\n\nexport class TrackedDocument<T> implements Disposable {\n    private _onDidBlameStateChange = new EventEmitter<DocumentBlameStateChangeEvent<T>>();\n    get onDidBlameStateChange(): Event<DocumentBlameStateChangeEvent<T>> {\n        return this._onDidBlameStateChange.event;\n    }\n\n    state: T | undefined;\n\n    private _disposable: Disposable | undefined;\n    private _disposed: boolean = false;\n    private _repo: Promise<Repository | undefined>;\n    private _uri!: GitUri;\n\n    constructor(\n        private readonly _document: TextDocument,\n        public readonly key: string,\n        public dirty: boolean,\n        private _eventDelegates: { onDidBlameStateChange(e: DocumentBlameStateChangeEvent<T>): void }\n    ) {\n        this._repo = this.initialize(_document.uri);\n    }\n\n    dispose() {\n        this._disposed = true;\n        this.reset('dispose');\n        this._disposable && this._disposable.dispose();\n    }\n\n    private async initialize(uri: Uri): Promise<Repository | undefined> {\n        // Since there is a bit of a chicken & egg problem with the DocumentTracker and the GitService, wait for the GitService to load if it isn't\n        if (Container.git === undefined) {\n            if (!(await Functions.waitUntil(() => Container.git !== undefined, 2000))) {\n                Logger.log(\n                    `TrackedDocument.initialize(${uri.toString(true)})`,\n                    'Timed out waiting for the GitService to start'\n                );\n                throw new Error('TrackedDocument timed out waiting for the GitService to start');\n            }\n        }\n\n        this._uri = await GitUri.fromUri(uri);\n        if (this._disposed) return undefined;\n\n        const repo = await Container.git.getRepository(this._uri);\n        if (this._disposed) return undefined;\n\n        if (repo !== undefined) {\n            this._disposable = repo.onDidChange(this.onRepositoryChanged, this);\n        }\n\n        await this.update({ initializing: true, repo: repo });\n\n        return repo;\n    }\n\n    private onRepositoryChanged(e: RepositoryChangeEvent) {\n        if (!e.changed(RepositoryChange.Repository)) return;\n\n        // Reset any cached state\n        this.reset('repository');\n        void this.update();\n    }\n\n    private _forceDirtyStateChangeOnNextDocumentChange: boolean = false;\n    get forceDirtyStateChangeOnNextDocumentChange() {\n        return this._forceDirtyStateChangeOnNextDocumentChange;\n    }\n\n    private _hasRemotes: boolean = false;\n    get hasRemotes() {\n        return this._hasRemotes;\n    }\n\n    get isBlameable() {\n        if (this._blameFailed) return false;\n\n        return this._isTracked;\n    }\n\n    private _isDirtyIdle: boolean = false;\n    get isDirtyIdle() {\n        return this._isDirtyIdle;\n    }\n    set isDirtyIdle(value: boolean) {\n        this._isDirtyIdle = value;\n    }\n\n    get isRevision() {\n        return this._uri !== undefined\n            ? Boolean(this._uri.sha) && this._uri.sha !== GitService.deletedOrMissingSha\n            : false;\n    }\n\n    private _isTracked: boolean = false;\n    get isTracked() {\n        return this._isTracked;\n    }\n\n    get lineCount(): number {\n        return this._document.lineCount;\n    }\n\n    get uri() {\n        return this._uri;\n    }\n\n    activate() {\n        setCommandContext(CommandContext.ActiveFileStatus, this.getStatus());\n    }\n\n    async ensureInitialized() {\n        await this._repo;\n    }\n\n    is(document: TextDocument) {\n        return document === this._document;\n    }\n\n    reset(reason: 'config' | 'dispose' | 'document' | 'repository') {\n        this._blameFailed = false;\n        this._isDirtyIdle = false;\n\n        if (this.state === undefined) return;\n\n        // // Don't remove broken blame on change (since otherwise we'll have to run the broken blame again)\n        // if (!this.state.hasErrors) {\n\n        this.state = undefined;\n        Logger.log(`Reset state for '${this.key}', reason=${reason}`);\n\n        // }\n    }\n\n    private _blameFailed: boolean = false;\n    setBlameFailure() {\n        const wasBlameable = this.isBlameable;\n\n        this._blameFailed = true;\n\n        if (wasBlameable && isActiveDocument(this._document)) {\n            void this.update({ forceBlameChange: true });\n        }\n    }\n\n    resetForceDirtyStateChangeOnNextDocumentChange() {\n        this._forceDirtyStateChangeOnNextDocumentChange = false;\n    }\n\n    setForceDirtyStateChangeOnNextDocumentChange() {\n        this._forceDirtyStateChangeOnNextDocumentChange = true;\n    }\n\n    async update(options: { forceBlameChange?: boolean; initializing?: boolean; repo?: Repository } = {}) {\n        if (this._disposed || this._uri === undefined) {\n            this._hasRemotes = false;\n            this._isTracked = false;\n\n            return;\n        }\n\n        this._isDirtyIdle = false;\n\n        const active = getEditorIfActive(this._document);\n        const wasBlameable = options.forceBlameChange ? undefined : this.isBlameable;\n\n        this._isTracked = await Container.git.isTracked(this._uri);\n\n        let repo = undefined;\n        if (this._isTracked) {\n            repo = options.repo;\n            if (repo === undefined) {\n                repo = await this._repo;\n            }\n        }\n\n        if (repo !== undefined) {\n            this._hasRemotes = await repo.hasRemotes();\n        }\n        else {\n            this._hasRemotes = false;\n        }\n\n        if (active !== undefined) {\n            const blameable = this.isBlameable;\n\n            setCommandContext(CommandContext.ActiveFileStatus, this.getStatus());\n\n            if (!options.initializing && wasBlameable !== blameable) {\n                const e: DocumentBlameStateChangeEvent<T> = { editor: active, document: this, blameable: blameable };\n                this._onDidBlameStateChange.fire(e);\n                this._eventDelegates.onDidBlameStateChange(e);\n            }\n        }\n    }\n\n    private getStatus() {\n        let status = '';\n        if (this.isTracked) {\n            status += 'tracked|';\n        }\n        if (this.isBlameable) {\n            status += 'blameable|';\n        }\n        if (this.isRevision) {\n            status += 'revision|';\n        }\n        if (this.hasRemotes) {\n            status += 'remotes|';\n        }\n\n        return status ? status : undefined;\n    }\n}\n","'use strict';\nimport {\n    ConfigurationChangeEvent,\n    Disposable,\n    EndOfLine,\n    Event,\n    EventEmitter,\n    Position,\n    Range,\n    TextDocument,\n    TextDocumentChangeEvent,\n    TextEditor,\n    TextLine,\n    Uri,\n    window,\n    workspace\n} from 'vscode';\nimport { configuration } from '../configuration';\nimport { CommandContext, DocumentSchemes, isActiveDocument, isTextEditor, setCommandContext } from '../constants';\nimport { GitUri } from '../git/gitService';\nimport { Deferrable, Functions } from '../system';\nimport { DocumentBlameStateChangeEvent, TrackedDocument } from './trackedDocument';\n\nexport * from './trackedDocument';\n\nexport interface DocumentDirtyStateChangeEvent<T> {\n    readonly editor: TextEditor;\n    readonly document: TrackedDocument<T>;\n    readonly dirty: boolean;\n}\n\nexport interface DocumentDirtyIdleTriggerEvent<T> {\n    readonly editor: TextEditor;\n    readonly document: TrackedDocument<T>;\n}\n\nexport class DocumentTracker<T> implements Disposable {\n    private _onDidChangeBlameState = new EventEmitter<DocumentBlameStateChangeEvent<T>>();\n    get onDidChangeBlameState(): Event<DocumentBlameStateChangeEvent<T>> {\n        return this._onDidChangeBlameState.event;\n    }\n\n    private _onDidChangeDirtyState = new EventEmitter<DocumentDirtyStateChangeEvent<T>>();\n    get onDidChangeDirtyState(): Event<DocumentDirtyStateChangeEvent<T>> {\n        return this._onDidChangeDirtyState.event;\n    }\n\n    private _onDidTriggerDirtyIdle = new EventEmitter<DocumentDirtyIdleTriggerEvent<T>>();\n    get onDidTriggerDirtyIdle(): Event<DocumentDirtyIdleTriggerEvent<T>> {\n        return this._onDidTriggerDirtyIdle.event;\n    }\n\n    private _dirtyIdleTriggerDelay!: number;\n    private readonly _disposable: Disposable | undefined;\n    private readonly _documentMap: Map<TextDocument | string, TrackedDocument<T>> = new Map();\n\n    constructor() {\n        this._disposable = Disposable.from(\n            configuration.onDidChange(this.onConfigurationChanged, this),\n            window.onDidChangeActiveTextEditor(this.onActiveTextEditorChanged, this),\n            // window.onDidChangeVisibleTextEditors(Functions.debounce(this.onVisibleEditorsChanged, 5000), this),\n            workspace.onDidChangeTextDocument(Functions.debounce(this.onTextDocumentChanged, 50), this),\n            workspace.onDidCloseTextDocument(this.onTextDocumentClosed, this),\n            workspace.onDidSaveTextDocument(this.onTextDocumentSaved, this)\n        );\n\n        this.onConfigurationChanged(configuration.initializingChangeEvent);\n    }\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n\n        this.clear();\n    }\n\n    initialize() {\n        this.onActiveTextEditorChanged(window.activeTextEditor);\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        // Only rest the cached state if we aren't initializing\n        if (\n            !configuration.initializing(e) &&\n            (configuration.changed(e, configuration.name('blame')('ignoreWhitespace').value, null) ||\n                configuration.changed(e, configuration.name('advanced')('caching')('enabled').value))\n        ) {\n            for (const d of this._documentMap.values()) {\n                d.reset('config');\n            }\n        }\n\n        const section = configuration.name('advanced')('blame')('delayAfterEdit').value;\n        if (configuration.changed(e, section)) {\n            this._dirtyIdleTriggerDelay = configuration.get<number>(section);\n            this._dirtyIdleTriggeredDebounced = undefined;\n        }\n    }\n\n    private _timer: NodeJS.Timer | undefined;\n    private onActiveTextEditorChanged(editor: TextEditor | undefined) {\n        if (editor !== undefined && !isTextEditor(editor)) return;\n\n        if (this._timer !== undefined) {\n            clearTimeout(this._timer);\n            this._timer = undefined;\n        }\n\n        if (editor === undefined) {\n            this._timer = setTimeout(() => {\n                this._timer = undefined;\n\n                setCommandContext(CommandContext.ActiveFileStatus, undefined);\n            }, 250);\n\n            return;\n        }\n\n        const doc = this._documentMap.get(editor.document);\n        if (doc !== undefined) {\n            doc.activate();\n\n            return;\n        }\n\n        // No need to activate this, as it is implicit in initialization if currently active\n        this.addCore(editor.document);\n    }\n\n    private onTextDocumentChanged(e: TextDocumentChangeEvent) {\n        const { scheme } = e.document.uri;\n        if (scheme !== DocumentSchemes.File && scheme !== DocumentSchemes.Vsls) return;\n\n        let doc = this._documentMap.get(e.document);\n        if (doc === undefined) {\n            doc = this.addCore(e.document);\n        }\n\n        doc.reset('document');\n\n        const dirty = e.document.isDirty;\n        const editor = window.activeTextEditor;\n\n        // If we have an idle tracker, either reset or cancel it\n        if (this._dirtyIdleTriggeredDebounced !== undefined) {\n            if (dirty) {\n                this._dirtyIdleTriggeredDebounced({ editor: editor!, document: doc });\n            }\n            else {\n                this._dirtyIdleTriggeredDebounced.cancel();\n            }\n        }\n\n        if (!doc.forceDirtyStateChangeOnNextDocumentChange && doc.dirty === dirty) return;\n\n        doc.resetForceDirtyStateChangeOnNextDocumentChange();\n        doc.dirty = dirty;\n\n        // Only fire state change events for the active document\n        if (editor === undefined || editor.document !== e.document) return;\n\n        this.fireDocumentDirtyStateChanged({ editor: editor, document: doc, dirty: doc.dirty });\n    }\n\n    private onTextDocumentClosed(document: TextDocument) {\n        const doc = this._documentMap.get(document);\n        if (doc === undefined) return;\n\n        doc.dispose();\n        this._documentMap.delete(document);\n        this._documentMap.delete(doc.key);\n    }\n\n    private onTextDocumentSaved(document: TextDocument) {\n        const doc = this._documentMap.get(document);\n        if (doc !== undefined) {\n            void doc.update({ forceBlameChange: true });\n\n            return;\n        }\n\n        // If we are saving the active document make sure we are tracking it\n        if (isActiveDocument(document)) {\n            void this.addCore(document);\n        }\n    }\n\n    // private onVisibleEditorsChanged(editors: TextEditor[]) {\n    //     if (this._documentMap.size === 0) return;\n\n    //     // If we have no visible editors, or no \"real\" visible editors reset our cache\n    //     if (editors.length === 0 || editors.every(e => !isTextEditor(e))) {\n    //         this.clear();\n    //     }\n    // }\n\n    add(document: TextDocument): Promise<TrackedDocument<T>>;\n    add(uri: Uri): Promise<TrackedDocument<T>>;\n    add(documentOrId: TextDocument | Uri): Promise<TrackedDocument<T>> {\n        return this._add(documentOrId);\n    }\n\n    clear() {\n        for (const d of this._documentMap.values()) {\n            d.dispose();\n        }\n\n        this._documentMap.clear();\n    }\n\n    get(fileName: string): Promise<TrackedDocument<T> | undefined>;\n    get(document: TextDocument): Promise<TrackedDocument<T> | undefined>;\n    get(uri: Uri): Promise<TrackedDocument<T> | undefined>;\n    get(documentOrId: string | TextDocument | Uri): Promise<TrackedDocument<T> | undefined> {\n        return this._get(documentOrId);\n    }\n\n    async getOrAdd(document: TextDocument): Promise<TrackedDocument<T>>;\n    async getOrAdd(uri: Uri): Promise<TrackedDocument<T>>;\n    async getOrAdd(documentOrId: TextDocument | Uri): Promise<TrackedDocument<T>> {\n        let doc = await this._get(documentOrId);\n        if (doc === undefined) {\n            doc = await this._add(documentOrId);\n        }\n        return doc;\n    }\n\n    has(fileName: string): boolean;\n    has(document: TextDocument): boolean;\n    has(uri: Uri): boolean;\n    has(key: string | TextDocument | Uri): boolean {\n        if (typeof key === 'string' || key instanceof Uri) {\n            key = GitUri.toKey(key);\n        }\n        return this._documentMap.has(key);\n    }\n\n    private async _add(documentOrId: TextDocument | Uri): Promise<TrackedDocument<T>> {\n        let document;\n        if (GitUri.is(documentOrId)) {\n            try {\n                document = await workspace.openTextDocument(documentOrId.documentUri({ useVersionedPath: true }));\n            }\n            catch (ex) {\n                const msg = ex.toString();\n                if (msg.includes('File seems to be binary and cannot be opened as text')) {\n                    document = new BinaryTextDocument(documentOrId);\n                }\n                else if (msg.includes('File not found')) {\n                    // If we can't find the file, assume it is because the file has been renamed or deleted at some point\n                    document = new MissingRevisionTextDocument(documentOrId);\n\n                    // const [fileName, repoPath] = await Container.git.findWorkingFileName(documentOrId, undefined, ref);\n                    // if (fileName === undefined) throw new Error(`Failed to add tracking for document: ${documentOrId}`);\n\n                    // documentOrId = await workspace.openTextDocument(path.resolve(repoPath!, fileName));\n                }\n                else {\n                    throw ex;\n                }\n            }\n        }\n        else if (documentOrId instanceof Uri) {\n            document = await workspace.openTextDocument(documentOrId);\n        }\n        else {\n            document = documentOrId;\n        }\n\n        const doc = await this.addCore(document);\n        await doc.ensureInitialized();\n\n        return doc;\n    }\n\n    private async _get(documentOrId: string | TextDocument | Uri) {\n        if (GitUri.is(documentOrId)) {\n            documentOrId = GitUri.toKey(documentOrId.documentUri({ useVersionedPath: true }));\n        }\n        else if (typeof documentOrId === 'string' || documentOrId instanceof Uri) {\n            documentOrId = GitUri.toKey(documentOrId);\n        }\n\n        const doc = this._documentMap.get(documentOrId);\n        if (doc === undefined) return undefined;\n\n        await doc.ensureInitialized();\n        return doc;\n    }\n\n    private addCore(document: TextDocument): TrackedDocument<T> {\n        const key = GitUri.toKey(document.uri);\n\n        // Always start out false, so we will fire the event if needed\n        const doc = new TrackedDocument<T>(document, key, false, {\n            onDidBlameStateChange: (e: DocumentBlameStateChangeEvent<T>) => this._onDidChangeBlameState.fire(e)\n        });\n        this._documentMap.set(document, doc);\n        this._documentMap.set(key, doc);\n\n        return doc;\n    }\n\n    private _dirtyIdleTriggeredDebounced: (((e: DocumentDirtyIdleTriggerEvent<T>) => void) & Deferrable) | undefined;\n    private _dirtyStateChangedDebounced: (((e: DocumentDirtyStateChangeEvent<T>) => void) & Deferrable) | undefined;\n    private fireDocumentDirtyStateChanged(e: DocumentDirtyStateChangeEvent<T>) {\n        if (e.dirty) {\n            setImmediate(async () => {\n                if (this._dirtyStateChangedDebounced !== undefined) {\n                    this._dirtyStateChangedDebounced.cancel();\n                }\n\n                if (window.activeTextEditor !== e.editor) return;\n\n                await e.document.ensureInitialized();\n                this._onDidChangeDirtyState.fire(e);\n            });\n\n            if (this._dirtyIdleTriggerDelay > 0) {\n                if (this._dirtyIdleTriggeredDebounced === undefined) {\n                    this._dirtyIdleTriggeredDebounced = Functions.debounce(\n                        async (e: DocumentDirtyIdleTriggerEvent<T>) => {\n                            if (\n                                this._dirtyIdleTriggeredDebounced !== undefined &&\n                                this._dirtyIdleTriggeredDebounced.pending!()\n                            ) {\n                                return;\n                            }\n\n                            await e.document.ensureInitialized();\n\n                            e.document.isDirtyIdle = true;\n                            this._onDidTriggerDirtyIdle.fire(e);\n                        },\n                        this._dirtyIdleTriggerDelay,\n                        { track: true }\n                    );\n                }\n\n                this._dirtyIdleTriggeredDebounced({ editor: e.editor, document: e.document });\n            }\n\n            return;\n        }\n\n        if (this._dirtyStateChangedDebounced === undefined) {\n            this._dirtyStateChangedDebounced = Functions.debounce(async (e: DocumentDirtyStateChangeEvent<T>) => {\n                if (window.activeTextEditor !== e.editor) return;\n\n                await e.document.ensureInitialized();\n                this._onDidChangeDirtyState.fire(e);\n            }, 250);\n        }\n\n        this._dirtyStateChangedDebounced(e);\n    }\n}\n\nclass EmptyTextDocument implements TextDocument {\n    readonly eol: EndOfLine;\n    readonly fileName: string;\n    readonly isClosed: boolean;\n    readonly isDirty: boolean;\n    readonly isUntitled: boolean;\n    readonly languageId: string;\n    readonly lineCount: number;\n    readonly uri: Uri;\n    readonly version: number;\n\n    constructor(public readonly gitUri: GitUri) {\n        this.uri = gitUri.documentUri({ useVersionedPath: true });\n\n        this.eol = EndOfLine.LF;\n        this.fileName = this.uri.fsPath;\n        this.isClosed = false;\n        this.isDirty = false;\n        this.isUntitled = false;\n        this.languageId = '';\n        this.lineCount = 0;\n        this.version = 0;\n    }\n\n    getText(range?: Range | undefined): string {\n        throw new Error('Method not supported.');\n    }\n\n    getWordRangeAtPosition(position: Position, regex?: RegExp | undefined): Range | undefined {\n        throw new Error('Method not supported.');\n    }\n\n    lineAt(line: number): TextLine;\n    lineAt(position: Position): TextLine;\n    lineAt(position: any): TextLine {\n        throw new Error('Method not supported.');\n    }\n\n    offsetAt(position: Position): number {\n        throw new Error('Method not supported.');\n    }\n\n    positionAt(offset: number): Position {\n        throw new Error('Method not supported.');\n    }\n\n    save(): Thenable<boolean> {\n        throw new Error('Method not supported.');\n    }\n\n    validatePosition(position: Position): Position {\n        throw new Error('Method not supported.');\n    }\n\n    validateRange(range: Range): Range {\n        throw new Error('Method not supported.');\n    }\n}\n\nclass BinaryTextDocument extends EmptyTextDocument {}\nclass MissingRevisionTextDocument extends EmptyTextDocument {}\n","'use strict';\nimport { GitBlame, GitDiff, GitLog } from '../git/git';\nimport { DocumentTracker } from './documentTracker';\n\nexport * from './documentTracker';\n\ninterface CachedItem<T> {\n    item: Promise<T>;\n    errorMessage?: string;\n}\n\nexport type CachedBlame = CachedItem<GitBlame>;\nexport type CachedDiff = CachedItem<GitDiff>;\nexport type CachedLog = CachedItem<GitLog>;\n\nexport class GitDocumentState {\n    private cache: Map<string, CachedBlame | CachedDiff | CachedLog> = new Map();\n\n    constructor(public readonly key: string) {}\n\n    get<T extends CachedBlame | CachedDiff | CachedLog>(key: string): T | undefined {\n        return this.cache.get(key) as T;\n    }\n\n    set<T extends CachedBlame | CachedDiff | CachedLog>(key: string, value: T) {\n        this.cache.set(key, value);\n    }\n}\n\nexport class GitDocumentTracker extends DocumentTracker<GitDocumentState> {}\n","'use strict';\nimport { CancellationToken } from 'vscode';\n\nexport namespace Promises {\n    export function cancellable<T>(promise: Promise<T>, token: CancellationToken): Promise<T | undefined> {\n        return new Promise<T | undefined>((resolve, reject) => {\n            token.onCancellationRequested(() => resolve(undefined));\n\n            promise.then(resolve, reject);\n        });\n    }\n\n    export function isPromise<T>(obj: T | Promise<T>): obj is Promise<T> {\n        return obj && typeof (obj as Promise<T>).then === 'function';\n    }\n\n    export class TimeoutError<T> extends Error {\n        constructor(public readonly promise: T) {\n            super('Promise timed out');\n        }\n    }\n\n    export function timeout<T>(promise: Promise<T>, ms: number): Promise<T> {\n        return new Promise<T>((resolve, reject) => {\n            setTimeout(() => reject(new TimeoutError(promise)), ms);\n\n            promise.then(resolve, reject);\n        });\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { BranchComparison, BranchComparisons, GlyphChars, WorkspaceState } from '../../constants';\nimport { ResourceType, ViewNode } from './viewNode';\nimport { RepositoriesView } from '../repositoriesView';\nimport { GitBranch, GitService, GitUri } from '../../git/gitService';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../../quickpicks';\nimport { CommitsQueryResults, ResultsCommitsNode } from './resultsCommitsNode';\nimport { Container } from '../../container';\nimport { log, Strings } from '../../system';\nimport { FilesQueryResults, ResultsFilesNode } from './resultsFilesNode';\nimport { ViewShowBranchComparison } from '../../config';\n\nexport class CompareBranchNode extends ViewNode<RepositoriesView> {\n    private _children: ViewNode[] | undefined;\n    private _compareWith: BranchComparison | undefined;\n\n    constructor(uri: GitUri, view: RepositoriesView, parent: ViewNode, public readonly branch: GitBranch) {\n        super(uri, view, parent);\n\n        const comparisons = Container.context.workspaceState.get<BranchComparisons>(WorkspaceState.BranchComparisons);\n        const compareWith = comparisons && comparisons[branch.id];\n        if (compareWith !== undefined && typeof compareWith === 'string') {\n            this._compareWith = {\n                ref: compareWith,\n                notation: Container.config.advanced.useSymmetricDifferenceNotation ? '...' : '..',\n                type: this.view.config.showBranchComparison || ViewShowBranchComparison.Working\n            };\n        }\n        else {\n            this._compareWith = compareWith;\n        }\n    }\n\n    get id(): string {\n        return `gitlens:repository(${this.branch.repoPath}):compare:branch(${this.branch.name}):compareWith`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        if (this._compareWith === undefined) return [];\n\n        if (this._children === undefined) {\n            let ref1 = this._compareWith.ref || 'HEAD';\n            if (this.comparisonNotation === '..') {\n                ref1 = (await Container.git.getMergeBase(this.branch.repoPath, ref1, this.branch.ref)) || ref1;\n            }\n\n            this._children = [\n                new ResultsCommitsNode(\n                    this.view,\n                    this,\n                    this.uri.repoPath!,\n                    'commits',\n                    this.getCommitsQuery.bind(this),\n                    {\n                        expand: false,\n                        includeDescription: false\n                    }\n                ),\n                new ResultsFilesNode(\n                    this.view,\n                    this,\n                    this.uri.repoPath!,\n                    ref1,\n                    this.compareWithWorkingTree ? '' : this.branch.ref,\n                    this.getFilesQuery.bind(this)\n                )\n            ];\n        }\n        return this._children;\n    }\n\n    getTreeItem(): TreeItem {\n        let state: TreeItemCollapsibleState;\n        let label;\n        let description;\n        if (this._compareWith === undefined) {\n            label = `Compare ${this.branch.name}${\n                this.compareWithWorkingTree ? ' (working)' : ''\n            } with <branch, tag, or ref>`;\n            state = TreeItemCollapsibleState.None;\n        }\n        else {\n            label = `${this.branch.name}${this.compareWithWorkingTree ? ' (working)' : ''}`;\n            description = `${GlyphChars.ArrowLeftRightLong}${GlyphChars.Space} ${GitService.shortenSha(\n                this._compareWith.ref,\n                {\n                    working: 'Working Tree'\n                }\n            )}`;\n            state = TreeItemCollapsibleState.Collapsed;\n        }\n\n        const item = new TreeItem(label, state);\n        item.command = {\n            title: `Compare ${this.branch.name}${this.compareWithWorkingTree ? ' (working)' : ''} with${\n                GlyphChars.Ellipsis\n            }`,\n            command: 'gitlens.views.executeNodeCallback',\n            arguments: [() => this.compareWith()]\n        };\n        item.contextValue = `${ResourceType.CompareBranch}${this._compareWith === undefined ? '' : '+comparing'}+${\n            this.comparisonNotation === '..' ? 'twodot' : 'threedot'\n        }+${this.comparisonType}`;\n        item.description = description;\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath(\n                `images/dark/icon-compare-${this.compareWithWorkingTree ? 'ref-working' : 'refs'}.svg`\n            ),\n            light: Container.context.asAbsolutePath(\n                `images/light/icon-compare-${this.compareWithWorkingTree ? 'ref-working' : 'refs'}.svg`\n            )\n        };\n        item.id = this.id;\n        item.tooltip = `Click to compare ${this.branch.name}${this.compareWithWorkingTree ? ' (working)' : ''} with${\n            GlyphChars.Ellipsis\n        }`;\n\n        return item;\n    }\n\n    @log()\n    async setComparisonNotation(comparisonNotation: '...' | '..') {\n        if (this._compareWith !== undefined) {\n            await this.updateCompareWith({ ...this._compareWith, notation: comparisonNotation });\n        }\n\n        this._children = undefined;\n        this.view.triggerNodeChange(this);\n    }\n\n    @log()\n    async setComparisonType(comparisonType: Exclude<ViewShowBranchComparison, false>) {\n        if (this._compareWith !== undefined) {\n            await this.updateCompareWith({ ...this._compareWith, type: comparisonType });\n        }\n\n        this._children = undefined;\n        this.view.triggerNodeChange(this);\n    }\n\n    private get comparisonNotation() {\n        return (\n            (this._compareWith && this._compareWith.notation) ||\n            (Container.config.advanced.useSymmetricDifferenceNotation ? '...' : '..')\n        );\n    }\n\n    private get diffComparisonNotation() {\n        // In git diff the range syntax doesn't mean the same thing as with git log -- since git diff is about comparing endpoints not ranges\n        // see https://git-scm.com/docs/git-diff#Documentation/git-diff.txt-emgitdiffemltoptionsgtltcommitgtltcommitgt--ltpathgt82308203\n        // So inverting the range syntax should be about equivalent for the behavior we want\n        return this.comparisonNotation === '...' ? '..' : '...';\n    }\n\n    private get comparisonType() {\n        return (\n            (this._compareWith && this._compareWith.type) ||\n            this.view.config.showBranchComparison ||\n            ViewShowBranchComparison.Working\n        );\n    }\n\n    private get compareWithWorkingTree() {\n        return this.comparisonType === ViewShowBranchComparison.Working;\n    }\n\n    private async compareWith() {\n        const pick = await new ReferencesQuickPick(this.branch.repoPath).show(\n            `Compare ${this.branch.name}${this.compareWithWorkingTree ? ' (working)' : ''} with${GlyphChars.Ellipsis}`,\n            { allowEnteringRefs: true, checked: this.branch.ref, checkmarks: true }\n        );\n        if (pick === undefined || pick instanceof CommandQuickPickItem) return;\n\n        this.updateCompareWith({\n            ref: pick.ref,\n            notation: this.comparisonNotation,\n            type: this.comparisonType\n        });\n\n        this._children = undefined;\n        this.view.triggerNodeChange(this);\n    }\n\n    private async getCommitsQuery(maxCount: number | undefined): Promise<CommitsQueryResults> {\n        const log = await Container.git.getLog(this.uri.repoPath!, {\n            maxCount: maxCount,\n            ref: `${(this._compareWith && this._compareWith.ref) || 'HEAD'}${this.comparisonNotation}${\n                this.compareWithWorkingTree ? '' : this.branch.ref\n            }`\n        });\n\n        const count = log !== undefined ? log.count : 0;\n        const truncated = log !== undefined ? log.truncated : false;\n\n        return {\n            label: Strings.pluralize('commit', count, { number: truncated ? `${count}+` : undefined, zero: 'No' }),\n            log: log\n        };\n    }\n\n    private async getFilesQuery(): Promise<FilesQueryResults> {\n        const diff = await Container.git.getDiffStatus(\n            this.uri.repoPath!,\n            `${(this._compareWith && this._compareWith.ref) || 'HEAD'}${this.diffComparisonNotation}${\n                this.compareWithWorkingTree ? '' : this.branch.ref\n            }`\n        );\n\n        return {\n            label: `${Strings.pluralize('file', diff !== undefined ? diff.length : 0, { zero: 'No' })} changed`,\n            diff: diff\n        };\n    }\n\n    private async updateCompareWith(compareWith: BranchComparison | undefined) {\n        this._compareWith = compareWith;\n\n        let comparisons = Container.context.workspaceState.get<BranchComparisons>(WorkspaceState.BranchComparisons);\n        if (comparisons === undefined) {\n            comparisons = Object.create(null);\n        }\n\n        if (compareWith) {\n            comparisons![this.branch.id] = { ...compareWith };\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const { [this.branch.id]: _, ...rest } = comparisons!;\n            comparisons = rest;\n        }\n        await Container.context.workspaceState.update(WorkspaceState.BranchComparisons, comparisons);\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { ViewFilesLayout } from '../../configuration';\nimport { GitFile, GitUri } from '../../git/gitService';\nimport { Arrays, debug, gate, Iterables, Promises, Strings } from '../../system';\nimport { ViewWithFiles } from '../viewBase';\nimport { FileNode, FolderNode } from './folderNode';\nimport { ResultsFileNode } from './resultsFileNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport interface FilesQueryResults {\n    label: string;\n    diff: GitFile[] | undefined;\n}\n\nexport class ResultsFilesNode extends ViewNode<ViewWithFiles> {\n    constructor(\n        view: ViewWithFiles,\n        parent: ViewNode,\n        public readonly repoPath: string,\n        public readonly ref1: string,\n        public readonly ref2: string,\n        private readonly _filesQuery: () => Promise<FilesQueryResults>\n    ) {\n        super(GitUri.fromRepoPath(repoPath), view, parent);\n    }\n\n    get id(): string {\n        return `${this.parent!.id}:results:files`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const { diff } = await this.getFilesQueryResults();\n        if (diff === undefined) return [];\n\n        let children: FileNode[] = [\n            ...Iterables.map(diff, s => new ResultsFileNode(this.view, this, this.repoPath, s, this.ref1, this.ref2))\n        ];\n\n        if (this.view.config.files.layout !== ViewFilesLayout.List) {\n            const hierarchy = Arrays.makeHierarchical(\n                children,\n                n => n.uri.relativePath.split('/'),\n                (...parts: string[]) => Strings.normalizePath(paths.join(...parts)),\n                this.view.config.files.compact\n            );\n\n            const root = new FolderNode(this.view, this, this.repoPath, '', hierarchy);\n            children = (await root.getChildren()) as FileNode[];\n        }\n        else {\n            children.sort(\n                (a, b) =>\n                    a.priority - b.priority ||\n                    a.label!.localeCompare(b.label!, undefined, { numeric: true, sensitivity: 'base' })\n            );\n        }\n\n        return children;\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        let label;\n        let diff;\n        let state;\n\n        try {\n            ({ label, diff } = await Promises.timeout(this.getFilesQueryResults(), 100));\n            state =\n                diff == null || diff.length === 0 ? TreeItemCollapsibleState.None : TreeItemCollapsibleState.Expanded;\n        }\n        catch (ex) {\n            if (ex instanceof Promises.TimeoutError) {\n                ex.promise.then(() => this.triggerChange(false));\n            }\n\n            // Need to use Collapsed before we have results or the item won't show up in the view until the children are awaited\n            // https://github.com/microsoft/vscode/issues/54806 & https://github.com/microsoft/vscode/issues/62214\n            state = TreeItemCollapsibleState.Collapsed;\n        }\n\n        const item = new TreeItem(label || 'files changed', state);\n        item.contextValue = ResourceType.ResultsFiles;\n        item.id = this.id;\n\n        return item;\n    }\n\n    @gate()\n    @debug()\n    refresh(reset: boolean = false) {\n        if (!reset) return;\n\n        this._filesQueryResults = this._filesQuery();\n    }\n\n    private _filesQueryResults: Promise<FilesQueryResults> | undefined;\n\n    getFilesQueryResults() {\n        if (this._filesQueryResults === undefined) {\n            this._filesQueryResults = this._filesQuery();\n        }\n\n        return this._filesQueryResults;\n    }\n}\n","'use strict';\nimport * as emojis from './emojis.json';\n\nconst emojiMap: { [key: string]: string } = (emojis as any).default;\nconst emojiRegex = /:([-+_a-z0-9]+):/g;\n\nexport function emojify(message: string) {\n    return message.replace(emojiRegex, (s, code) => {\n        return emojiMap[code] || s;\n    });\n}\n","module.exports = require(\"buffer\");","\"use strict\";\n\n// Some environments don't have global Buffer (e.g. React Native).\n// Solution would be installing npm modules \"buffer\" and \"stream\" explicitly.\nvar Buffer = require(\"safer-buffer\").Buffer;\n\nvar bomHandling = require(\"./bom-handling\"),\n    iconv = module.exports;\n\n// All codecs and aliases are kept here, keyed by encoding name/alias.\n// They are lazy loaded in `iconv.getCodec` from `encodings/index.js`.\niconv.encodings = null;\n\n// Characters emitted in case of error.\niconv.defaultCharUnicode = '';\niconv.defaultCharSingleByte = '?';\n\n// Public API.\niconv.encode = function encode(str, encoding, options) {\n    str = \"\" + (str || \"\"); // Ensure string.\n\n    var encoder = iconv.getEncoder(encoding, options);\n\n    var res = encoder.write(str);\n    var trail = encoder.end();\n    \n    return (trail && trail.length > 0) ? Buffer.concat([res, trail]) : res;\n}\n\niconv.decode = function decode(buf, encoding, options) {\n    if (typeof buf === 'string') {\n        if (!iconv.skipDecodeWarning) {\n            console.error('Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding');\n            iconv.skipDecodeWarning = true;\n        }\n\n        buf = Buffer.from(\"\" + (buf || \"\"), \"binary\"); // Ensure buffer.\n    }\n\n    var decoder = iconv.getDecoder(encoding, options);\n\n    var res = decoder.write(buf);\n    var trail = decoder.end();\n\n    return trail ? (res + trail) : res;\n}\n\niconv.encodingExists = function encodingExists(enc) {\n    try {\n        iconv.getCodec(enc);\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\n// Legacy aliases to convert functions\niconv.toEncoding = iconv.encode;\niconv.fromEncoding = iconv.decode;\n\n// Search for a codec in iconv.encodings. Cache codec data in iconv._codecDataCache.\niconv._codecDataCache = {};\niconv.getCodec = function getCodec(encoding) {\n    if (!iconv.encodings)\n        iconv.encodings = require(\"../encodings\"); // Lazy load all encoding definitions.\n    \n    // Canonicalize encoding name: strip all non-alphanumeric chars and appended year.\n    var enc = iconv._canonicalizeEncoding(encoding);\n\n    // Traverse iconv.encodings to find actual codec.\n    var codecOptions = {};\n    while (true) {\n        var codec = iconv._codecDataCache[enc];\n        if (codec)\n            return codec;\n\n        var codecDef = iconv.encodings[enc];\n\n        switch (typeof codecDef) {\n            case \"string\": // Direct alias to other encoding.\n                enc = codecDef;\n                break;\n\n            case \"object\": // Alias with options. Can be layered.\n                for (var key in codecDef)\n                    codecOptions[key] = codecDef[key];\n\n                if (!codecOptions.encodingName)\n                    codecOptions.encodingName = enc;\n                \n                enc = codecDef.type;\n                break;\n\n            case \"function\": // Codec itself.\n                if (!codecOptions.encodingName)\n                    codecOptions.encodingName = enc;\n\n                // The codec function must load all tables and return object with .encoder and .decoder methods.\n                // It'll be called only once (for each different options object).\n                codec = new codecDef(codecOptions, iconv);\n\n                iconv._codecDataCache[codecOptions.encodingName] = codec; // Save it to be reused later.\n                return codec;\n\n            default:\n                throw new Error(\"Encoding not recognized: '\" + encoding + \"' (searched as: '\"+enc+\"')\");\n        }\n    }\n}\n\niconv._canonicalizeEncoding = function(encoding) {\n    // Canonicalize encoding name: strip all non-alphanumeric chars and appended year.\n    return (''+encoding).toLowerCase().replace(/:\\d{4}$|[^0-9a-z]/g, \"\");\n}\n\niconv.getEncoder = function getEncoder(encoding, options) {\n    var codec = iconv.getCodec(encoding),\n        encoder = new codec.encoder(options, codec);\n\n    if (codec.bomAware && options && options.addBOM)\n        encoder = new bomHandling.PrependBOM(encoder, options);\n\n    return encoder;\n}\n\niconv.getDecoder = function getDecoder(encoding, options) {\n    var codec = iconv.getCodec(encoding),\n        decoder = new codec.decoder(options, codec);\n\n    if (codec.bomAware && !(options && options.stripBOM === false))\n        decoder = new bomHandling.StripBOM(decoder, options);\n\n    return decoder;\n}\n\n\n// Load extensions in Node. All of them are omitted in Browserify build via 'browser' field in package.json.\nvar nodeVer = typeof process !== 'undefined' && process.versions && process.versions.node;\nif (nodeVer) {\n\n    // Load streaming support in Node v0.10+\n    var nodeVerArr = nodeVer.split(\".\").map(Number);\n    if (nodeVerArr[0] > 0 || nodeVerArr[1] >= 10) {\n        require(\"./streams\")(iconv);\n    }\n\n    // Load Node primitive extensions.\n    require(\"./extend-node\")(iconv);\n}\n\nif (\"\" != \"\\u0100\") {\n    console.error(\"iconv-lite warning: javascript files use encoding different from utf-8. See https://github.com/ashtuchkin/iconv-lite/wiki/Javascript-source-file-encodings for more info.\");\n}\n","'use strict';\n\nexport interface GitReference {\n    name: string;\n    ref: string;\n}\n\nexport * from './blame';\nexport * from './blameCommit';\nexport * from './branch';\nexport * from './commit';\nexport * from './contributor';\nexport * from './diff';\nexport * from './file';\nexport * from './log';\nexport * from './logCommit';\nexport * from './remote';\nexport * from './repository';\nexport * from './reflog';\nexport * from './shortlog';\nexport * from './stash';\nexport * from './stashCommit';\nexport * from './status';\nexport * from './tag';\nexport * from './tree';\n","'use strict';\nimport { Uri } from 'vscode';\nimport { GlyphChars } from '../../constants';\nimport { memoize, Strings } from '../../system';\nimport { GitUri } from '../gitUri';\nimport { GitBranch, GitTrackingState } from './branch';\nimport { GitFile, GitFileStatus } from './file';\n\nexport class GitStatus {\n    readonly detached: boolean;\n\n    constructor(\n        public readonly repoPath: string,\n        public readonly branch: string,\n        public readonly sha: string,\n        public readonly files: GitStatusFile[],\n        public readonly state: GitTrackingState,\n        public readonly upstream?: string\n    ) {\n        this.detached = GitBranch.isDetached(branch);\n        if (this.detached) {\n            this.branch = GitBranch.formatDetached(this.sha);\n        }\n    }\n\n    get ref() {\n        return this.detached ? this.sha : this.branch;\n    }\n\n    @memoize()\n    getDiffStatus() {\n        const diff = {\n            added: 0,\n            deleted: 0,\n            changed: 0\n        };\n\n        if (this.files.length === 0) return diff;\n\n        for (const f of this.files) {\n            switch (f.status) {\n                case 'A':\n                case '?':\n                    diff.added++;\n                    break;\n                case 'D':\n                    diff.deleted++;\n                    break;\n                default:\n                    diff.changed++;\n                    break;\n            }\n        }\n\n        return diff;\n    }\n\n    getFormattedDiffStatus({\n        compact,\n        empty,\n        expand,\n        prefix = '',\n        separator = ' ',\n        suffix = ''\n    }: {\n        compact?: boolean;\n        empty?: string;\n        expand?: boolean;\n        prefix?: string;\n        separator?: string;\n        suffix?: string;\n    } = {}): string {\n        const { added, changed, deleted } = this.getDiffStatus();\n        if (added === 0 && changed === 0 && deleted === 0) return empty || '';\n\n        if (expand) {\n            let status = '';\n            if (added) {\n                status += `${Strings.pluralize('file', added)} added`;\n            }\n            if (changed) {\n                status += `${status.length === 0 ? '' : separator}${Strings.pluralize('file', changed)} changed`;\n            }\n            if (deleted) {\n                status += `${status.length === 0 ? '' : separator}${Strings.pluralize('file', deleted)} deleted`;\n            }\n            return `${prefix}${status}${suffix}`;\n        }\n\n        let status = '';\n        if (compact) {\n            if (added !== 0) {\n                status += `+${added}`;\n            }\n            if (changed !== 0) {\n                status += `${status.length === 0 ? '' : separator}~${changed}`;\n            }\n            if (deleted !== 0) {\n                status += `${status.length === 0 ? '' : separator}-${deleted}`;\n            }\n        }\n        else {\n            status += `+${added}${separator}~${changed}${separator}-${deleted}`;\n        }\n\n        return `${prefix}${status}${suffix}`;\n    }\n\n    getUpstreamStatus(options: {\n        empty?: string;\n        expand?: boolean;\n        prefix?: string;\n        separator?: string;\n        suffix?: string;\n    }): string {\n        return GitStatus.getUpstreamStatus(this.upstream, this.state, options);\n    }\n\n    static getUpstreamStatus(\n        upstream: string | undefined,\n        state: { ahead: number; behind: number },\n        options: { empty?: string; expand?: boolean; prefix?: string; separator?: string; suffix?: string } = {}\n    ): string {\n        if (upstream === undefined || (state.behind === 0 && state.ahead === 0)) return options.empty || '';\n\n        const { expand, prefix = '', separator = ' ', suffix = '' } = options;\n        if (expand) {\n            let status = '';\n            if (state.behind) {\n                status += `${Strings.pluralize('commit', state.behind)} behind`;\n            }\n            if (state.ahead) {\n                status += `${status.length === 0 ? '' : separator}${Strings.pluralize('commit', state.ahead)} ahead`;\n            }\n            return `${prefix}${status}${suffix}`;\n        }\n\n        return `${prefix}${state.behind}${GlyphChars.ArrowDown}${separator}${state.ahead}${GlyphChars.ArrowUp}${suffix}`;\n    }\n}\n\nexport class GitStatusFile implements GitFile {\n    constructor(\n        public readonly repoPath: string,\n        public readonly indexStatus: GitFileStatus | undefined,\n        public readonly workingTreeStatus: GitFileStatus | undefined,\n        public readonly fileName: string,\n        public readonly originalFileName?: string\n    ) {}\n\n    get status(): GitFileStatus {\n        return (this.indexStatus || this.workingTreeStatus || '?') as GitFileStatus;\n    }\n\n    get staged() {\n        return this.indexStatus !== undefined;\n    }\n\n    @memoize()\n    get uri(): Uri {\n        return GitUri.resolveToUri(this.fileName, this.repoPath);\n    }\n\n    getFormattedDirectory(includeOriginal: boolean = false): string {\n        return GitFile.getFormattedDirectory(this, includeOriginal);\n    }\n\n    getFormattedPath(options: { relativeTo?: string; separator?: string; suffix?: string } = {}): string {\n        return GitFile.getFormattedPath(this, options);\n    }\n\n    getOcticon() {\n        return GitFile.getStatusOcticon(this.status);\n    }\n\n    getStatusText(): string {\n        return GitFile.getStatusText(this.status);\n    }\n\n    with(changes: {\n        indexStatus?: GitFileStatus | null;\n        workTreeStatus?: GitFileStatus | null;\n        fileName?: string;\n        originalFileName?: string | null;\n    }): GitStatusFile {\n        return new GitStatusFile(\n            this.repoPath,\n            this.getChangedValue(changes.indexStatus, this.indexStatus) as GitFileStatus,\n            this.getChangedValue(changes.workTreeStatus, this.workingTreeStatus) as GitFileStatus,\n            changes.fileName || this.fileName,\n            this.getChangedValue(changes.originalFileName, this.originalFileName)\n        );\n    }\n\n    protected getChangedValue<T>(change: T | null | undefined, original: T | undefined): T | undefined {\n        if (change === undefined) return original;\n        return change !== null ? change : undefined;\n    }\n}\n","'use strict';\nimport { GitDiff, GitDiffHunk, GitDiffHunkLine, GitDiffLine, GitDiffShortStat, GitFile, GitFileStatus } from '../git';\nimport { debug, Strings } from '../../system';\n\nconst nameStatusDiffRegex = /^(.*?)\\t(.*?)(?:\\t(.*?))?$/gm;\nconst shortStatDiffRegex = /^\\s*(\\d+)\\sfiles? changed(?:,\\s+(\\d+)\\s+insertions?\\(\\+\\))?(?:,\\s+(\\d+)\\s+deletions?\\(-\\))?/;\nconst unifiedDiffRegex = /^@@ -([\\d]+)(?:,([\\d]+))? \\+([\\d]+)(?:,([\\d]+))? @@(?:.*?)\\n([\\s\\S]*?)(?=^@@)/gm;\n\nexport class GitDiffParser {\n    @debug({ args: false, singleLine: true })\n    static parse(data: string, debug: boolean = false): GitDiff | undefined {\n        if (!data) return undefined;\n\n        const hunks: GitDiffHunk[] = [];\n\n        let previousStart;\n        let previousCount;\n        let currentStart;\n        let currentCount;\n        let hunk;\n\n        let match: RegExpExecArray | null;\n        do {\n            match = unifiedDiffRegex.exec(`${data}\\n@@`);\n            if (match == null) break;\n\n            [, previousStart, previousCount, currentStart, currentCount, hunk] = match;\n\n            previousStart = Number(previousStart) || 0;\n            currentStart = Number(currentStart) || 0;\n\n            hunks.push(\n                new GitDiffHunk(\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${hunk}`.substr(1),\n                    {\n                        start: currentStart,\n                        end: currentStart + (Number(currentCount) || 0)\n                    },\n                    {\n                        start: previousStart,\n                        end: previousStart + (Number(previousCount) || 0)\n                    }\n                )\n            );\n        } while (match != null);\n\n        if (!hunks.length) return undefined;\n\n        const diff: GitDiff = {\n            diff: debug ? data : undefined,\n            hunks: hunks\n        };\n        return diff;\n    }\n\n    @debug({ args: false, singleLine: true })\n    static parseHunk(hunk: GitDiffHunk): GitDiffHunkLine[] {\n        const currentLines: (GitDiffLine | undefined)[] = [];\n        const previousLines: (GitDiffLine | undefined)[] = [];\n\n        let removed = 0;\n        for (const l of Strings.lines(hunk.diff)) {\n            switch (l[0]) {\n                case '+':\n                    currentLines.push({\n                        line: ` ${l.substring(1)}`,\n                        state: 'added'\n                    });\n\n                    if (removed > 0) {\n                        removed--;\n                    }\n                    else {\n                        previousLines.push(undefined);\n                    }\n\n                    break;\n\n                case '-':\n                    removed++;\n\n                    previousLines.push({\n                        line: ` ${l.substring(1)}`,\n                        state: 'removed'\n                    });\n\n                    break;\n\n                default:\n                    while (removed > 0) {\n                        removed--;\n                        currentLines.push(undefined);\n                    }\n\n                    currentLines.push({ line: l, state: 'unchanged' });\n                    previousLines.push({ line: l, state: 'unchanged' });\n\n                    break;\n            }\n        }\n\n        while (removed > 0) {\n            removed--;\n            currentLines.push(undefined);\n        }\n\n        const hunkLines: GitDiffHunkLine[] = [];\n\n        for (let i = 0; i < currentLines.length; i++) {\n            hunkLines.push({\n                hunk: hunk,\n                current: currentLines[i],\n                previous: previousLines[i]\n            });\n        }\n\n        return hunkLines;\n    }\n\n    @debug({ args: false, singleLine: true })\n    static parseNameStatus(data: string, repoPath: string): GitFile[] | undefined {\n        if (!data) return undefined;\n\n        const files: GitFile[] = [];\n\n        let status: string;\n        let fileName: string;\n        let originalFileName: string;\n\n        let match: RegExpExecArray | null;\n        do {\n            match = nameStatusDiffRegex.exec(data);\n            if (match == null) break;\n\n            [, status, fileName, originalFileName] = match;\n\n            files.push({\n                repoPath: repoPath,\n                status: (status[0] !== '.' ? status[0].trim() : '?') as GitFileStatus,\n                indexStatus: undefined,\n                workingTreeStatus: undefined,\n                // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                fileName: ` ${fileName}`.substr(1),\n                // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                originalFileName:\n                    originalFileName == null || originalFileName.length === 0\n                        ? undefined\n                        : ` ${originalFileName}`.substr(1)\n            });\n        } while (match != null);\n\n        return files;\n    }\n\n    @debug({ args: false, singleLine: true })\n    static parseShortStat(data: string): GitDiffShortStat | undefined {\n        if (!data) return undefined;\n\n        const match = shortStatDiffRegex.exec(data);\n        if (match == null) return undefined;\n\n        const [, files, insertions, deletions] = match;\n\n        const diffShortStat: GitDiffShortStat = {\n            files: files == null ? 0 : parseInt(files, 10),\n            insertions: insertions == null ? 0 : parseInt(insertions, 10),\n            deletions: deletions == null ? 0 : parseInt(deletions, 10)\n        };\n\n        return diffShortStat;\n    }\n}\n","'use strict';\nimport { Dates, memoize } from '../../system';\nimport { CommitFormatting, Git } from '../git';\nimport { DateStyle } from '../../config';\n\nexport interface GitReflog {\n    readonly repoPath: string;\n    readonly records: GitReflogRecord[];\n\n    readonly count: number;\n    readonly maxCount: number | undefined;\n    readonly truncated: boolean;\n}\n\nexport class GitReflogRecord {\n    private _previousSha: string | undefined;\n\n    constructor(\n        public readonly repoPath: string,\n        public readonly sha: string,\n        private _selector: string,\n        public readonly date: Date,\n        public readonly command: string,\n        public readonly commandArgs: string | undefined,\n        public readonly details: string | undefined\n    ) {}\n\n    @memoize<GitReflogRecord['formatDate']>(format => (format == null ? 'MMMM Do, YYYY h:mma' : format))\n    formatDate(format?: string | null) {\n        if (format == null) {\n            format = 'MMMM Do, YYYY h:mma';\n        }\n\n        return this.dateFormatter.format(format);\n    }\n\n    formatDateFromNow() {\n        return this.dateFormatter.fromNow();\n    }\n\n    get formattedDate(): string {\n        return CommitFormatting.dateStyle === DateStyle.Absolute\n            ? this.formatDate(CommitFormatting.dateFormat)\n            : this.formatDateFromNow();\n    }\n\n    @memoize()\n    get HEAD() {\n        if (this._selector == null || this._selector.length === 0) return '';\n\n        if (this._selector.startsWith('refs/heads')) {\n            return this._selector.substr(11);\n        }\n\n        if (this._selector.startsWith('refs/remotes')) {\n            return this._selector.substr(13);\n        }\n\n        return this._selector;\n    }\n\n    get previousSha() {\n        return this._previousSha;\n    }\n\n    @memoize()\n    get previousShortSha() {\n        return Git.shortenSha(this._previousSha);\n    }\n\n    get selector() {\n        return this._selector;\n    }\n\n    @memoize()\n    get shortSha() {\n        return Git.shortenSha(this.sha);\n    }\n\n    update(previousSha?: string, selector?: string) {\n        if (previousSha !== undefined) {\n            this._previousSha = previousSha;\n        }\n        if (selector !== undefined) {\n            this._selector = selector;\n        }\n    }\n\n    @memoize()\n    private get dateFormatter(): Dates.DateFormatter {\n        return Dates.getFormatter(this.date);\n    }\n}\n","'use strict';\nimport { Uri } from 'vscode';\nimport { memoize, Strings } from '../../system';\nimport { GitUri } from '../gitUri';\nimport { GitCommit, GitCommitType } from './commit';\nimport { GitFile, GitFileStatus } from './file';\n\nconst emptyStats = Object.freeze({\n    added: 0,\n    deleted: 0,\n    changed: 0\n});\n\nexport interface GitLogCommitLine {\n    from: {\n        line: number;\n        count: number;\n    };\n    to: {\n        line: number;\n        count: number;\n    };\n}\n\nexport class GitLogCommit extends GitCommit {\n    static is(commit: any): commit is GitLogCommit {\n        return (\n            commit instanceof GitLogCommit\n            // || (commit.repoPath !== undefined &&\n            //     commit.sha !== undefined &&\n            //     (commit.type === GitCommitType.Log || commit.type === GitCommitType.LogFile))\n        );\n    }\n\n    nextSha?: string;\n    nextFileName?: string;\n\n    constructor(\n        type: GitCommitType,\n        repoPath: string,\n        sha: string,\n        author: string,\n        email: string | undefined,\n        authorDate: Date,\n        committerDate: Date,\n        message: string,\n        fileName: string,\n        public readonly files: GitFile[],\n        public readonly status?: GitFileStatus | undefined,\n        originalFileName?: string | undefined,\n        previousSha?: string | undefined,\n        previousFileName?: string | undefined,\n        private readonly _fileStats?:\n            | {\n                  insertions: number;\n                  deletions: number;\n              }\n            | undefined,\n        public readonly parentShas?: string[],\n        public readonly line?: GitLogCommitLine\n    ) {\n        super(\n            type,\n            repoPath,\n            sha,\n            author,\n            email,\n            authorDate,\n            committerDate,\n            message,\n            fileName,\n            originalFileName,\n            previousSha || `${sha}^`,\n            previousFileName\n        );\n    }\n\n    get isMerge() {\n        return this.parentShas && this.parentShas.length > 1;\n    }\n\n    get nextUri(): Uri {\n        return this.nextFileName ? GitUri.resolveToUri(this.nextFileName, this.repoPath) : this.uri;\n    }\n\n    get previousFileSha(): string {\n        return this.isFile ? this.previousSha! : `${this.sha}^`;\n    }\n\n    @memoize()\n    getDiffStatus() {\n        if (this._fileStats !== undefined) {\n            return {\n                added: this._fileStats.insertions,\n                deleted: this._fileStats.deletions,\n                changed: 0\n            };\n        }\n\n        if (this.isFile || this.files.length === 0) return emptyStats;\n\n        const diff = {\n            added: 0,\n            deleted: 0,\n            changed: 0\n        };\n        for (const f of this.files) {\n            switch (f.status) {\n                case 'A':\n                case '?':\n                    diff.added++;\n                    break;\n                case 'D':\n                    diff.deleted++;\n                    break;\n                default:\n                    diff.changed++;\n                    break;\n            }\n        }\n\n        return diff;\n    }\n\n    getFormattedDiffStatus({\n        compact,\n        empty,\n        expand,\n        prefix = '',\n        separator = ' ',\n        suffix = ''\n    }: {\n        compact?: boolean;\n        empty?: string;\n        expand?: boolean;\n        prefix?: string;\n        separator?: string;\n        suffix?: string;\n    } = {}): string {\n        const { added, changed, deleted } = this.getDiffStatus();\n        if (added === 0 && changed === 0 && deleted === 0) return empty || '';\n\n        if (expand) {\n            const type = this.isFile ? 'line' : 'file';\n\n            let status = '';\n            if (added) {\n                status += `${Strings.pluralize(type, added)} added`;\n            }\n            if (changed) {\n                status += `${status.length === 0 ? '' : separator}${Strings.pluralize(type, changed)} changed`;\n            }\n            if (deleted) {\n                status += `${status.length === 0 ? '' : separator}${Strings.pluralize(type, deleted)} deleted`;\n            }\n            return `${prefix}${status}${suffix}`;\n        }\n\n        // When `isFile` we are getting line changes -- and we can't get changed lines (only inserts and deletes)\n        return `${prefix}${compact && added === 0 ? '' : `+${added}${separator}`}${\n            (compact || this.isFile) && changed === 0 ? '' : `~${changed}${separator}`\n        }${compact && deleted === 0 ? '' : `-${deleted}`}${suffix}`;\n    }\n\n    toFileCommit(fileName: string): GitLogCommit | undefined;\n    toFileCommit(file: GitFile): GitLogCommit;\n    toFileCommit(fileNameOrFile: string | GitFile): GitLogCommit | undefined {\n        const fileName =\n            typeof fileNameOrFile === 'string'\n                ? GitUri.relativeTo(fileNameOrFile, this.repoPath)\n                : fileNameOrFile.fileName;\n        const file = this.files.find(f => f.fileName === fileName);\n        if (file === undefined) return undefined;\n\n        let sha;\n        // If this is a stash commit with an untracked file\n        if (this.type === GitCommitType.Stash && file.status === '?') {\n            sha = `${this.sha}^3`;\n        }\n\n        // If this isn't a single-file commit, we can't trust the previousSha\n        const previousSha = this.isFile ? this.previousSha : `${this.sha}^`;\n\n        return this.with({\n            type: this.isStash ? GitCommitType.StashFile : GitCommitType.LogFile,\n            sha: sha,\n            fileName: file.fileName,\n            originalFileName: file.originalFileName,\n            previousSha: previousSha,\n            previousFileName: file.originalFileName || file.fileName,\n            status: file.status,\n            files: [file]\n        });\n    }\n\n    with(changes: {\n        type?: GitCommitType;\n        sha?: string | null;\n        fileName?: string;\n        author?: string;\n        email?: string;\n        authorDate?: Date;\n        committedDate?: Date;\n        message?: string;\n        originalFileName?: string | null;\n        previousFileName?: string | null;\n        previousSha?: string | null;\n        status?: GitFileStatus;\n        files?: GitFile[] | null;\n    }): GitLogCommit {\n        return new GitLogCommit(\n            changes.type || this.type,\n            this.repoPath,\n            this.getChangedValue(changes.sha, this.sha)!,\n            changes.author || this.author,\n            changes.email || this.email,\n            changes.authorDate || this.authorDate,\n            changes.committedDate || this.committerDate,\n            changes.message || this.message,\n            changes.fileName || this.fileName,\n            this.getChangedValue(changes.files, this.files) || [],\n            changes.status || this.status,\n            this.getChangedValue(changes.originalFileName, this.originalFileName),\n            this.getChangedValue(changes.previousSha, this.previousSha),\n            this.getChangedValue(changes.previousFileName, this.previousFileName),\n            this._fileStats,\n            this.parentShas,\n            this.line\n        );\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { Command, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Commands, DiffWithCommandArgs } from '../../commands';\nimport { Container } from '../../container';\nimport { GitFile, GitUri, StatusFileFormatter } from '../../git/gitService';\nimport { View } from '../viewBase';\nimport { ResourceType, ViewNode, ViewRefFileNode } from './viewNode';\n\nexport class ResultsFileNode extends ViewRefFileNode {\n    constructor(\n        view: View,\n        parent: ViewNode,\n        repoPath: string,\n        public readonly file: GitFile,\n        public readonly ref1: string,\n        public readonly ref2: string\n    ) {\n        super(GitUri.fromFile(file, repoPath, ref1 || ref2), view, parent);\n    }\n\n    get fileName(): string {\n        return this.file.fileName;\n    }\n\n    get ref() {\n        return this.ref1 || this.ref2;\n    }\n\n    getChildren(): ViewNode[] {\n        return [];\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem(this.label, TreeItemCollapsibleState.None);\n        item.contextValue = ResourceType.ResultsFile;\n        item.description = this.description;\n        item.tooltip = StatusFileFormatter.fromTemplate(\n            // eslint-disable-next-line no-template-curly-in-string\n            '${file}\\n${directory}/\\n\\n${status}${ (originalPath)}',\n            this.file\n        );\n\n        const statusIcon = GitFile.getStatusIcon(this.file.status);\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath(paths.join('images', 'dark', statusIcon)),\n            light: Container.context.asAbsolutePath(paths.join('images', 'light', statusIcon))\n        };\n\n        item.command = this.getCommand();\n        return item;\n    }\n\n    private _description: string | undefined;\n    get description() {\n        if (this._description === undefined) {\n            this._description = StatusFileFormatter.fromTemplate(\n                this.view.config.commitFileDescriptionFormat,\n                this.file,\n                {\n                    relativePath: this.relativePath\n                }\n            );\n        }\n        return this._description;\n    }\n\n    private _folderName: string | undefined;\n    get folderName() {\n        if (this._folderName === undefined) {\n            this._folderName = paths.dirname(this.uri.relativePath);\n        }\n        return this._folderName;\n    }\n\n    private _label: string | undefined;\n    get label() {\n        if (this._label === undefined) {\n            // eslint-disable-next-line no-template-curly-in-string\n            this._label = StatusFileFormatter.fromTemplate('${file}', this.file, {\n                relativePath: this.relativePath\n            });\n        }\n        return this._label;\n    }\n\n    private _relativePath: string | undefined;\n    get relativePath(): string | undefined {\n        return this._relativePath;\n    }\n    set relativePath(value: string | undefined) {\n        this._relativePath = value;\n        this._label = undefined;\n        this._description = undefined;\n    }\n\n    get priority(): number {\n        return 0;\n    }\n\n    getCommand(): Command | undefined {\n        const commandArgs: DiffWithCommandArgs = {\n            lhs: {\n                sha: this.ref1,\n                uri: this.uri\n            },\n            rhs: {\n                sha: this.ref2,\n                uri:\n                    this.file.status === 'R'\n                        ? GitUri.fromFile(this.file, this.uri.repoPath!, this.ref2, true)\n                        : this.uri\n            },\n            repoPath: this.uri.repoPath!,\n\n            line: 0,\n            showOptions: {\n                preserveFocus: true,\n                preview: true\n            }\n        };\n        return {\n            title: 'Open Changes',\n            command: Commands.DiffWith,\n            arguments: [this.uri, commandArgs]\n        };\n    }\n}\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","import toNumber from './toNumber.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nexport default toFinite;\n","import toFinite from './toFinite.js';\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nexport default toInteger;\n","import toInteger from './toInteger.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that invokes `func`, with the `this` binding and arguments\n * of the created function, while it's called less than `n` times. Subsequent\n * calls to the created function return the result of the last `func` invocation.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {number} n The number of calls at which `func` is no longer invoked.\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * jQuery(element).on('click', _.before(5, addContactToList));\n * // => Allows adding up to 4 contacts to the list.\n */\nfunction before(n, func) {\n  var result;\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  n = toInteger(n);\n  return function() {\n    if (--n > 0) {\n      result = func.apply(this, arguments);\n    }\n    if (n <= 1) {\n      func = undefined;\n    }\n    return result;\n  };\n}\n\nexport default before;\n","import before from './before.js';\n\n/**\n * Creates a function that is restricted to invoking `func` once. Repeat calls\n * to the function return the value of the first invocation. The `func` is\n * invoked with the `this` binding and arguments of the created function.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * var initialize = _.once(createApplication);\n * initialize();\n * initialize();\n * // => `createApplication` is invoked once\n */\nfunction once(func) {\n  return before(2, func);\n}\n\nexport default once;\n","'use strict';\nimport { debounce as _debounce, once as _once } from 'lodash-es';\nimport { Disposable } from 'vscode';\n\nexport interface Deferrable {\n    cancel(): void;\n    flush(...args: any[]): void;\n    pending?(): boolean;\n}\n\ninterface PropOfValue {\n    (): any;\n    value: string | undefined;\n}\n\nexport namespace Functions {\n    export function cachedOnce<T>(fn: (...args: any[]) => Promise<T>, seed: T): (...args: any[]) => Promise<T> {\n        let cached: T | undefined = seed;\n        return (...args: any[]) => {\n            if (cached !== undefined) {\n                const promise = Promise.resolve(cached);\n                cached = undefined;\n\n                return promise;\n            }\n            return fn(...args);\n        };\n    }\n\n    export interface DebounceOptions {\n        leading?: boolean;\n        maxWait?: number;\n        track?: boolean;\n        trailing?: boolean;\n    }\n\n    export function debounce<T extends (...args: any[]) => any>(\n        fn: T,\n        wait?: number,\n        options?: DebounceOptions\n    ): T & Deferrable {\n        const { track, ...opts }: DebounceOptions = {\n            track: false,\n            ...(options || {})\n        };\n\n        if (track !== true) return _debounce(fn, wait, opts);\n\n        let pending = false;\n\n        const debounced = _debounce(\n            (function(this: any, ...args: any[]) {\n                pending = false;\n                return fn.apply(this, args);\n            } as any) as T,\n            wait,\n            options\n        ) as T & Deferrable;\n\n        const tracked = (function(this: any, ...args: any[]) {\n            pending = true;\n            return debounced.apply(this, args);\n        } as any) as T & Deferrable;\n\n        tracked.pending = function() {\n            return pending;\n        };\n        tracked.cancel = function() {\n            return debounced.cancel.apply(debounced);\n        };\n        tracked.flush = function(...args: any[]) {\n            // eslint-disable-next-line prefer-spread\n            return debounced.flush.apply(debounced, args);\n        };\n\n        return tracked;\n    }\n\n    const comma = ',';\n    const emptyStr = '';\n    const equals = '=';\n    const openBrace = '{';\n    const openParen = '(';\n    const closeParen = ')';\n\n    const fnBodyRegex = /\\(([\\s\\S]*)\\)/;\n    const fnBodyStripCommentsRegex = /(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/gm;\n    const fnBodyStripParamDefaultValueRegex = /\\s?=.*$/;\n\n    export function getParameters(fn: Function): string[] {\n        if (typeof fn !== 'function') throw new Error('Not supported');\n\n        if (fn.length === 0) return [];\n\n        let fnBody: string = Function.prototype.toString.call(fn);\n        fnBody = fnBody.replace(fnBodyStripCommentsRegex, emptyStr) || fnBody;\n        fnBody = fnBody.slice(0, fnBody.indexOf(openBrace));\n\n        let open = fnBody.indexOf(openParen);\n        let close = fnBody.indexOf(closeParen);\n\n        open = open >= 0 ? open + 1 : 0;\n        close = close > 0 ? close : fnBody.indexOf(equals);\n\n        fnBody = fnBody.slice(open, close);\n        fnBody = `(${fnBody})`;\n\n        const match = fnBody.match(fnBodyRegex);\n        return match != null\n            ? match[1].split(comma).map(param => param.trim().replace(fnBodyStripParamDefaultValueRegex, emptyStr))\n            : [];\n    }\n\n    export function is<T extends object>(o: object, prop: keyof T, value?: any): o is T;\n    export function is<T extends object>(o: object, matcher: (o: object) => boolean): o is T;\n    export function is<T extends object>(\n        o: object,\n        propOrMatcher: keyof T | ((o: any) => boolean),\n        value?: any\n    ): o is T {\n        if (typeof propOrMatcher === 'function') {\n            return propOrMatcher(o);\n        }\n\n        return value === undefined ? (o as any)[propOrMatcher] !== undefined : (o as any)[propOrMatcher] === value;\n    }\n\n    export function once<T extends (...args: any[]) => any>(fn: T): T {\n        return _once(fn);\n    }\n\n    export function propOf<T, K extends Extract<keyof T, string>>(o: T, key: K) {\n        const propOfCore = <T, K extends Extract<keyof T, string>>(o: T, key: K) => {\n            const value: string =\n                (propOfCore as PropOfValue).value === undefined ? key : `${(propOfCore as PropOfValue).value}.${key}`;\n            (propOfCore as PropOfValue).value = value;\n            const fn = <Y extends Extract<keyof T[K], string>>(k: Y) => propOfCore(o[key], k);\n            return Object.assign(fn, { value: value });\n        };\n        return propOfCore(o, key);\n    }\n\n    export function interval(fn: (...args: any[]) => void, ms: number): Disposable {\n        let timer: NodeJS.Timer | undefined;\n        const disposable = {\n            dispose: () => {\n                if (timer !== undefined) {\n                    clearInterval(timer);\n                    timer = undefined;\n                }\n            }\n        };\n        timer = setInterval(fn, ms);\n\n        return disposable;\n    }\n\n    export async function wait(ms: number) {\n        await new Promise(resolve => setTimeout(resolve, ms));\n    }\n\n    export async function waitUntil(fn: (...args: any[]) => boolean, timeout: number): Promise<boolean> {\n        const max = Math.round(timeout / 100);\n        let counter = 0;\n        while (true) {\n            if (fn()) return true;\n            if (counter > max) return false;\n\n            await wait(100);\n            counter++;\n        }\n    }\n}\n","'use strict';\nimport { Strings } from '../../system';\n\nconst emptyStr = '';\n\nexport interface FormatOptions {\n    dateFormat?: string | null;\n    tokenOptions?: { [id: string]: Strings.TokenOptions | undefined };\n}\n\ntype Constructor<T = {}> = new (...args: any[]) => T;\n\nconst spaceReplacementRegex = / /g;\n\ndeclare type RequiredTokenOptions<TOptions extends FormatOptions> = TOptions & Required<Pick<TOptions, 'tokenOptions'>>;\n\nexport abstract class Formatter<TItem = any, TOptions extends FormatOptions = FormatOptions> {\n    protected _item!: TItem;\n    protected _options!: RequiredTokenOptions<TOptions>;\n\n    constructor(item: TItem, options?: TOptions) {\n        this.reset(item, options);\n    }\n\n    reset(item: TItem, options?: TOptions) {\n        this._item = item;\n\n        if (options === undefined && this._options !== undefined) return;\n\n        if (options === undefined) {\n            // eslint-disable-next-line @typescript-eslint/no-object-literal-type-assertion\n            options = {} as TOptions;\n        }\n\n        if (options.dateFormat == null) {\n            options.dateFormat = 'MMMM Do, YYYY h:mma';\n        }\n\n        if (options.tokenOptions == null) {\n            options.tokenOptions = {};\n        }\n\n        this._options = options as RequiredTokenOptions<TOptions>;\n    }\n\n    private collapsableWhitespace: number = 0;\n\n    protected _padOrTruncate(s: string, options: Strings.TokenOptions | undefined) {\n        if (s == null || s.length === 0) return s;\n\n        // NOTE: the collapsable whitespace logic relies on the javascript template evaluation to be left to right\n        if (options === undefined) {\n            options = {\n                collapseWhitespace: false,\n                padDirection: 'left',\n                prefix: undefined,\n                suffix: undefined,\n                truncateTo: undefined\n            };\n        }\n\n        let max = options.truncateTo;\n        if (max === undefined) {\n            this.collapsableWhitespace = 0;\n        }\n        else {\n            max += this.collapsableWhitespace;\n            this.collapsableWhitespace = 0;\n\n            const width = Strings.getWidth(s);\n            const diff = max - width;\n            if (diff > 0) {\n                if (options.collapseWhitespace) {\n                    this.collapsableWhitespace = diff;\n                }\n\n                if (options.padDirection === 'left') {\n                    s = Strings.padLeft(s, max, undefined, width);\n                }\n                else {\n                    if (options.collapseWhitespace) {\n                        max -= diff;\n                    }\n                    s = Strings.padRight(s, max, undefined, width);\n                }\n            }\n            else if (diff < 0) {\n                s = Strings.truncate(s, max, undefined, width);\n            }\n        }\n\n        if (options.prefix || options.suffix) {\n            s = `${options.prefix || emptyStr}${s}${options.suffix || emptyStr}`;\n        }\n\n        return s;\n    }\n\n    private static _formatter: Formatter | undefined = undefined;\n\n    protected static fromTemplateCore<\n        TFormatter extends Formatter<TItem, TOptions>,\n        TItem,\n        TOptions extends FormatOptions\n    >(\n        formatter: TFormatter | Constructor<TFormatter>,\n        template: string,\n        item: TItem,\n        dateFormatOrOptions?: string | null | TOptions\n    ): string {\n        // Preserve spaces\n        template = template.replace(spaceReplacementRegex, '\\u00a0');\n        if (formatter instanceof Formatter) return Strings.interpolate(template, formatter);\n\n        let options: TOptions | undefined = undefined;\n        if (dateFormatOrOptions == null || typeof dateFormatOrOptions === 'string') {\n            // eslint-disable-next-line @typescript-eslint/no-object-literal-type-assertion\n            options = {\n                dateFormat: dateFormatOrOptions\n            } as TOptions;\n        }\n        else {\n            options = dateFormatOrOptions;\n        }\n\n        if (options.tokenOptions == null) {\n            const tokenOptions = Strings.getTokensFromTemplate(template).reduce<{\n                [token: string]: Strings.TokenOptions | undefined;\n            }>((map, token) => {\n                map[token.key] = token.options;\n                return map;\n            }, Object.create(null));\n\n            options.tokenOptions = tokenOptions;\n        }\n\n        if (this._formatter === undefined) {\n            this._formatter = new formatter(item, options);\n        }\n        else {\n            this._formatter.reset(item, options);\n        }\n\n        return Strings.interpolate(template, this._formatter);\n    }\n}\n","'use strict';\nimport {\n    DiffWithCommand,\n    InviteToLiveShareCommand,\n    OpenCommitInRemoteCommand,\n    OpenFileRevisionCommand,\n    ShowQuickCommitDetailsCommand,\n    ShowQuickCommitFileDetailsCommand\n} from '../../commands';\nimport { DateStyle, FileAnnotationType } from '../../configuration';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { GitCommit, GitLogCommit, GitRemote, GitService, GitUri } from '../gitService';\nimport { Strings } from '../../system';\nimport { FormatOptions, Formatter } from './formatter';\nimport { ContactPresence } from '../../vsls/vsls';\nimport { getPresenceDataUri } from '../../avatars';\nimport { emojify } from '../../emojis';\n\nconst emptyStr = '';\n\nconst escapeMarkdownRegex = /[`>#*_\\-+.]/g;\n// const sampleMarkdown = '## message `not code` *not important* _no underline_ \\n> don\\'t quote me \\n- don\\'t list me \\n+ don\\'t list me \\n1. don\\'t list me \\nnot h1 \\n=== \\nnot h2 \\n---\\n***\\n---\\n___';\nconst markdownHeaderReplacement = `${GlyphChars.ZeroWidthSpace}===`;\nconst hasTokenRegexMap = new Map<string, RegExp>();\n\nexport interface CommitFormatOptions extends FormatOptions {\n    annotationType?: FileAnnotationType;\n    dateStyle?: DateStyle;\n    getBranchAndTagTips?: (sha: string) => string | undefined;\n    line?: number;\n    markdown?: boolean;\n    presence?: ContactPresence;\n    previousLineDiffUris?: { current: GitUri; previous: GitUri | undefined };\n    remotes?: GitRemote[];\n    truncateMessageAtNewLine?: boolean;\n\n    tokenOptions?: {\n        ago?: Strings.TokenOptions;\n        agoOrDate?: Strings.TokenOptions;\n        author?: Strings.TokenOptions;\n        authorAgo?: Strings.TokenOptions;\n        authorAgoOrDate?: Strings.TokenOptions;\n        authorDate?: Strings.TokenOptions;\n        changes?: Strings.TokenOptions;\n        changesShort?: Strings.TokenOptions;\n        committerAgo?: Strings.TokenOptions;\n        committerAgoOrDate?: Strings.TokenOptions;\n        committerDate?: Strings.TokenOptions;\n        date?: Strings.TokenOptions;\n        email?: Strings.TokenOptions;\n        id?: Strings.TokenOptions;\n        message?: Strings.TokenOptions;\n        tips?: Strings.TokenOptions;\n    };\n}\n\nexport class CommitFormatter extends Formatter<GitCommit, CommitFormatOptions> {\n    private get _authorDate() {\n        return this._item.formatAuthorDate(this._options.dateFormat);\n    }\n\n    private get _authorDateAgo() {\n        return this._item.formatAuthorDateFromNow();\n    }\n\n    private get _authorDateOrAgo() {\n        const dateStyle =\n            this._options.dateStyle !== undefined ? this._options.dateStyle : Container.config.defaultDateStyle;\n        return dateStyle === DateStyle.Absolute ? this._authorDate : this._authorDateAgo;\n    }\n\n    private get _committerDate() {\n        return this._item.formatCommitterDate(this._options.dateFormat);\n    }\n\n    private get _committerDateAgo() {\n        return this._item.formatCommitterDateFromNow();\n    }\n\n    private get _committerDateOrAgo() {\n        const dateStyle =\n            this._options.dateStyle !== undefined ? this._options.dateStyle : Container.config.defaultDateStyle;\n        return dateStyle === DateStyle.Absolute ? this._committerDate : this._committerDateAgo;\n    }\n\n    private get _date() {\n        return this._item.formatDate(this._options.dateFormat);\n    }\n\n    private get _dateAgo() {\n        return this._item.formatDateFromNow();\n    }\n\n    private get _dateOrAgo() {\n        const dateStyle =\n            this._options.dateStyle !== undefined ? this._options.dateStyle : Container.config.defaultDateStyle;\n        return dateStyle === DateStyle.Absolute ? this._date : this._dateAgo;\n    }\n\n    get ago() {\n        return this._padOrTruncate(this._dateAgo, this._options.tokenOptions.ago);\n    }\n\n    get agoOrDate() {\n        return this._padOrTruncate(this._dateOrAgo, this._options.tokenOptions.agoOrDate);\n    }\n\n    get author() {\n        const author = this._padOrTruncate(this._item.author, this._options.tokenOptions.author);\n        if (!this._options.markdown) {\n            return author;\n        }\n\n        return `[${author}](mailto:${this._item.email} \"Email ${this._item.author} (${this._item.email})\")`;\n    }\n\n    get authorAgo() {\n        return this._padOrTruncate(this._authorDateAgo, this._options.tokenOptions.authorAgo);\n    }\n\n    get authorAgoOrDate() {\n        return this._padOrTruncate(this._authorDateOrAgo, this._options.tokenOptions.authorAgoOrDate);\n    }\n\n    get authorDate() {\n        return this._padOrTruncate(this._authorDate, this._options.tokenOptions.authorDate);\n    }\n\n    get avatar() {\n        if (!this._options.markdown || !Container.config.hovers.avatars) {\n            return emptyStr;\n        }\n\n        let avatar = `![](${this._item.getGravatarUri(Container.config.defaultGravatarsStyle).toString(true)})`;\n\n        const presence = this._options.presence;\n        if (presence != null) {\n            const title = `${this._item.author} ${this._item.author === 'You' ? 'are' : 'is'} ${\n                presence.status === 'dnd' ? 'in ' : ''\n            }${presence.statusText.toLocaleLowerCase()}`;\n\n            avatar += `![${title}](${getPresenceDataUri(presence.status)})`;\n            avatar = `[${avatar}](# \"${title}\")`;\n        }\n\n        return avatar;\n    }\n\n    get changes() {\n        return this._padOrTruncate(\n            GitLogCommit.is(this._item) ? this._item.getFormattedDiffStatus() : emptyStr,\n            this._options.tokenOptions.changes\n        );\n    }\n\n    get changesShort() {\n        return this._padOrTruncate(\n            GitLogCommit.is(this._item)\n                ? this._item.getFormattedDiffStatus({ compact: true, separator: emptyStr })\n                : emptyStr,\n            this._options.tokenOptions.changesShort\n        );\n    }\n\n    get commands() {\n        if (!this._options.markdown) return emptyStr;\n\n        let commands;\n        if (this._item.isUncommitted) {\n            const { previousLineDiffUris: diffUris } = this._options;\n            if (diffUris !== undefined && diffUris.previous !== undefined) {\n                commands = `\\`${this._padOrTruncate(\n                    GitService.shortenSha(\n                        GitService.isUncommittedStaged(diffUris.current.sha)\n                            ? diffUris.current.sha\n                            : GitService.uncommittedSha\n                    )!,\n                    this._options.tokenOptions.id\n                )}\\``;\n\n                commands += ` **[\\`${GlyphChars.MuchLessThan}\\`](${DiffWithCommand.getMarkdownCommandArgs({\n                    lhs: {\n                        sha: diffUris.previous.sha || '',\n                        uri: diffUris.previous.documentUri()\n                    },\n                    rhs: {\n                        sha: diffUris.current.sha || '',\n                        uri: diffUris.current.documentUri()\n                    },\n                    repoPath: this._item.repoPath,\n                    line: this._options.line\n                })} \"Open Changes\")** `;\n            }\n            else {\n                commands = `\\`${this._padOrTruncate(\n                    GitService.shortenSha(\n                        this._item.isUncommittedStaged ? GitService.uncommittedStagedSha : GitService.uncommittedSha\n                    )!,\n                    this._options.tokenOptions.id\n                )}\\``;\n            }\n\n            return commands;\n        }\n\n        commands = `[\\`${this.id}\\`](${ShowQuickCommitDetailsCommand.getMarkdownCommandArgs(\n            this._item.sha\n        )} \"Show Commit Details\") `;\n\n        commands += `**[\\`${GlyphChars.MuchLessThan}\\`](${DiffWithCommand.getMarkdownCommandArgs(\n            this._item,\n            this._options.line\n        )} \"Open Changes\")** `;\n\n        if (this._item.previousSha !== undefined) {\n            let annotationType = this._options.annotationType;\n            if (annotationType === FileAnnotationType.RecentChanges) {\n                annotationType = FileAnnotationType.Blame;\n            }\n\n            const uri = GitUri.toRevisionUri(\n                this._item.previousSha,\n                this._item.previousUri.fsPath,\n                this._item.repoPath\n            );\n            commands += `**[\\` ${GlyphChars.EqualsTriple} \\`](${OpenFileRevisionCommand.getMarkdownCommandArgs(\n                uri,\n                annotationType || FileAnnotationType.Blame,\n                this._options.line\n            )} \"Blame Previous Revision\")** `;\n        }\n\n        if (this._options.remotes !== undefined && this._options.remotes.length !== 0) {\n            commands += `**[\\` ${GlyphChars.ArrowUpRight} \\`](${OpenCommitInRemoteCommand.getMarkdownCommandArgs(\n                this._item.sha\n            )} \"Open in Remote\")** `;\n        }\n\n        if (this._item.author !== 'You') {\n            const presence = this._options.presence;\n            if (presence != null) {\n                commands += `[\\` ${GlyphChars.Envelope}+ \\`](${InviteToLiveShareCommand.getMarkdownCommandArgs(\n                    this._item.email\n                )} \"Invite ${this._item.author} (${presence.statusText}) to a Live Share Session\") `;\n            }\n        }\n\n        commands += `[\\`${GlyphChars.MiddleEllipsis}\\`](${ShowQuickCommitFileDetailsCommand.getMarkdownCommandArgs({\n            revisionUri: GitUri.toRevisionUri(this._item.toGitUri()).toString(true)\n        })} \"Show More Actions\")`;\n\n        return commands;\n    }\n\n    get committerAgo() {\n        return this._padOrTruncate(this._committerDateAgo, this._options.tokenOptions.committerAgo);\n    }\n\n    get committerAgoOrDate() {\n        return this._padOrTruncate(this._committerDateOrAgo, this._options.tokenOptions.committerAgoOrDate);\n    }\n\n    get committerDate() {\n        return this._padOrTruncate(this._committerDate, this._options.tokenOptions.committerDate);\n    }\n\n    get date() {\n        return this._padOrTruncate(this._date, this._options.tokenOptions.date);\n    }\n\n    get email() {\n        return this._padOrTruncate(this._item.email || emptyStr, this._options.tokenOptions.email);\n    }\n\n    get id() {\n        return this._padOrTruncate(this._item.shortSha || emptyStr, this._options.tokenOptions.id);\n    }\n\n    get message() {\n        let message: string;\n        if (this._item.isUncommitted) {\n            if (\n                this._item.isUncommittedStaged ||\n                (this._options.previousLineDiffUris !== undefined &&\n                    this._options.previousLineDiffUris.current.isUncommittedStaged)\n            ) {\n                message = 'Staged changes';\n            }\n            else {\n                message = 'Uncommitted changes';\n            }\n        }\n        else {\n            if (this._options.truncateMessageAtNewLine) {\n                const index = this._item.message.indexOf('\\n');\n                message =\n                    index === -1\n                        ? this._item.message\n                        : `${this._item.message.substring(0, index)}${GlyphChars.Space}${GlyphChars.Ellipsis}`;\n            }\n            else {\n                message = this._item.message;\n            }\n\n            message = emojify(message);\n        }\n\n        message = this._padOrTruncate(message, this._options.tokenOptions.message);\n\n        if (!this._options.markdown) {\n            return message;\n        }\n\n        if (this._options.remotes !== undefined) {\n            for (const r of this._options.remotes) {\n                if (r.provider === undefined) continue;\n\n                message = r.provider.enrichMessage(message);\n                break;\n            }\n        }\n\n        return `\\n> ${message\n            // Escape markdown\n            .replace(escapeMarkdownRegex, '\\\\$&')\n            // Escape markdown header (since the above regex won't match it)\n            .replace(/^===/gm, markdownHeaderReplacement)\n            // Keep under the same block-quote but with line breaks\n            .replace(/\\n/g, '\\t\\n>  ')}`;\n    }\n\n    get sha() {\n        return this.id;\n    }\n\n    get tips() {\n        const branchAndTagTips = this._options.getBranchAndTagTips && this._options.getBranchAndTagTips(this._item.sha);\n        if (branchAndTagTips === undefined) return emptyStr;\n\n        return this._padOrTruncate(branchAndTagTips, this._options.tokenOptions.tips);\n    }\n\n    static fromTemplate(template: string, commit: GitCommit, dateFormat: string | null): string;\n    static fromTemplate(template: string, commit: GitCommit, options?: CommitFormatOptions): string;\n    static fromTemplate(\n        template: string,\n        commit: GitCommit,\n        dateFormatOrOptions?: string | null | CommitFormatOptions\n    ): string;\n    static fromTemplate(\n        template: string,\n        commit: GitCommit,\n        dateFormatOrOptions?: string | null | CommitFormatOptions\n    ): string {\n        return super.fromTemplateCore(this, template, commit, dateFormatOrOptions);\n    }\n\n    static has(format: string, token: string) {\n        let regex = hasTokenRegexMap.get(token);\n        if (regex === undefined) {\n            regex = new RegExp(`\\\\b${token}\\\\b`);\n            hasTokenRegexMap.set(token, regex);\n        }\n\n        return regex.test(format);\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { GlyphChars } from '../../constants';\nimport { Strings } from '../../system';\nimport { GitFile, GitFileWithCommit } from '../models/file';\nimport { FormatOptions, Formatter } from './formatter';\n\nexport interface StatusFormatOptions extends FormatOptions {\n    relativePath?: string;\n\n    tokenOptions?: {\n        directory?: Strings.TokenOptions;\n        file?: Strings.TokenOptions;\n        filePath?: Strings.TokenOptions;\n        originalPath?: Strings.TokenOptions;\n        path?: Strings.TokenOptions;\n        status?: Strings.TokenOptions;\n        working?: Strings.TokenOptions;\n    };\n}\n\nexport class StatusFileFormatter extends Formatter<GitFile, StatusFormatOptions> {\n    get directory() {\n        const directory = GitFile.getFormattedDirectory(this._item, false, this._options.relativePath);\n        return this._padOrTruncate(directory, this._options.tokenOptions.directory);\n    }\n\n    get file() {\n        const file = paths.basename(this._item.fileName);\n        return this._padOrTruncate(file, this._options.tokenOptions.file);\n    }\n\n    get filePath() {\n        const filePath = GitFile.getFormattedPath(this._item, { relativeTo: this._options.relativePath });\n        return this._padOrTruncate(filePath, this._options.tokenOptions.filePath);\n    }\n\n    get originalPath() {\n        // if (\n        //     // this._item.status !== 'R' ||\n        //     this._item.originalFileName == null ||\n        //     this._item.originalFileName.length === 0\n        // ) {\n        //     return '';\n        // }\n\n        const originalPath = GitFile.getOriginalRelativePath(this._item, this._options.relativePath);\n        return this._padOrTruncate(originalPath, this._options.tokenOptions.originalPath);\n    }\n\n    get path() {\n        const directory = GitFile.getRelativePath(this._item, this._options.relativePath);\n        return this._padOrTruncate(directory, this._options.tokenOptions.path);\n    }\n\n    get status() {\n        const status = GitFile.getStatusText(this._item.status);\n        return this._padOrTruncate(status, this._options.tokenOptions.status);\n    }\n\n    get working() {\n        const commit = (this._item as GitFileWithCommit).commit;\n        const statusFile = commit === undefined ? this._item : commit.files[0];\n\n        let icon;\n        if (statusFile.workingTreeStatus !== undefined && statusFile.indexStatus !== undefined) {\n            icon = `${GlyphChars.Pencil}${GlyphChars.Space}${GlyphChars.SpaceThinnest}${GlyphChars.Check}`;\n        }\n        else if (statusFile.workingTreeStatus !== undefined) {\n            icon = `${GlyphChars.Pencil}${GlyphChars.SpaceThin}${GlyphChars.SpaceThinnest}${GlyphChars.EnDash}${GlyphChars.Space}`;\n        }\n        else if (statusFile.indexStatus !== undefined) {\n            icon = `${GlyphChars.Space}${GlyphChars.EnDash}${GlyphChars.Space.repeat(2)}${GlyphChars.Check}`;\n        }\n        else {\n            icon = '';\n        }\n        return this._padOrTruncate(icon, this._options.tokenOptions.working);\n    }\n\n    static fromTemplate(template: string, file: GitFile | GitFileWithCommit, dateFormat: string | null): string;\n    static fromTemplate(template: string, file: GitFile | GitFileWithCommit, options?: StatusFormatOptions): string;\n    static fromTemplate(\n        template: string,\n        file: GitFile,\n        dateFormatOrOptions?: string | null | StatusFormatOptions\n    ): string;\n    static fromTemplate(\n        template: string,\n        file: GitFile,\n        dateFormatOrOptions?: string | null | StatusFormatOptions\n    ): string {\n        return super.fromTemplateCore(this, template, file, dateFormatOrOptions);\n    }\n}\n","'use strict';\n\nexport * from './commitFormatter';\nexport * from './statusFormatter';\n","'use strict';\nimport { GitCommandOptions } from '../git/git';\n\nexport class RequestType<TRequest, TResponse> {\n    constructor(public readonly name: string) {}\n}\n\nexport interface GitCommandRequest {\n    options: GitCommandOptions;\n    args: any[];\n}\n\nexport interface GitCommandResponse {\n    data: string;\n    isBuffer?: boolean;\n}\n\nexport const GitCommandRequestType = new RequestType<GitCommandRequest, GitCommandResponse>('git');\n\nexport interface RepositoryProxy {\n    folderUri: string;\n    path: string;\n    root: boolean;\n    closed: boolean;\n}\n\nexport interface RepositoriesInFolderRequest {\n    folderUri: string;\n}\n\nexport interface RepositoriesInFolderResponse {\n    repositories: RepositoryProxy[];\n}\n\nexport const RepositoriesInFolderRequestType = new RequestType<\n    RepositoriesInFolderRequest,\n    RepositoriesInFolderResponse\n>('repositories/inFolder');\n","'use strict';\nimport { CancellationToken, Disposable, Uri, workspace, WorkspaceFoldersChangeEvent } from 'vscode';\nimport { LiveShare, SharedService } from 'vsls';\nimport { Container } from '../container';\nimport { git } from '../git/git';\nimport { GitUri } from '../git/gitUri';\nimport { Logger } from '../logger';\nimport { debug, Iterables, log, Strings } from '../system';\nimport {\n    GitCommandRequest,\n    GitCommandRequestType,\n    GitCommandResponse,\n    RepositoriesInFolderRequest,\n    RepositoriesInFolderRequestType,\n    RepositoriesInFolderResponse,\n    RequestType\n} from './protocol';\nimport { vslsUriRootRegex } from './vsls';\n\nconst defaultWhitelistFn = () => true;\nconst gitWhitelist = new Map<string, (args: any[]) => boolean>([\n    ['blame', defaultWhitelistFn],\n    ['branch', args => args[1] === '--contains'],\n    ['cat-file', defaultWhitelistFn],\n    ['check-mailmap', defaultWhitelistFn],\n    ['config', args => args[1] === '--get' || args[1] === '--get-regex'],\n    ['diff', defaultWhitelistFn],\n    ['difftool', defaultWhitelistFn],\n    ['for-each-ref', defaultWhitelistFn],\n    ['log', defaultWhitelistFn],\n    ['ls-files', defaultWhitelistFn],\n    ['ls-tree', defaultWhitelistFn],\n    ['merge-base', defaultWhitelistFn],\n    ['remote', args => args[1] === '-v' || args[1] === 'get-url'],\n    ['rev-list', defaultWhitelistFn],\n    ['rev-parse', defaultWhitelistFn],\n    ['shortlog', defaultWhitelistFn],\n    ['show', defaultWhitelistFn],\n    ['show-ref', defaultWhitelistFn],\n    ['stash', args => args[1] === 'list'],\n    ['status', defaultWhitelistFn],\n    ['symbolic-ref', defaultWhitelistFn],\n    ['tag', args => args[1] === '-l']\n]);\n\nconst leadingSlashRegex = /^[/|\\\\]/;\n\nexport class VslsHostService implements Disposable {\n    static ServiceId = 'proxy';\n\n    @log()\n    static async share(api: LiveShare) {\n        const service = await api.shareService(this.ServiceId);\n        if (service == null) {\n            throw new Error('Failed to share host service');\n        }\n\n        return new VslsHostService(api, service);\n    }\n\n    private readonly _disposable: Disposable;\n    private _localPathsRegex: RegExp | undefined;\n    private _localToSharedPaths = new Map<string, string>();\n    private _sharedPathsRegex: RegExp | undefined;\n    private _sharedToLocalPaths = new Map<string, string>();\n\n    constructor(private readonly _api: LiveShare, private readonly _service: SharedService) {\n        _service.onDidChangeIsServiceAvailable(this.onAvailabilityChanged.bind(this));\n\n        this._disposable = Disposable.from(workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged, this));\n\n        this.onRequest(GitCommandRequestType, this.onGitCommandRequest.bind(this));\n        this.onRequest(RepositoriesInFolderRequestType, this.onRepositoriesInFolderRequest.bind(this));\n\n        void this.onWorkspaceFoldersChanged();\n    }\n\n    dispose() {\n        this._disposable.dispose();\n        void this._api.unshareService(VslsHostService.ServiceId);\n    }\n\n    private onRequest<TRequest, TResponse>(\n        requestType: RequestType<TRequest, TResponse>,\n        handler: (request: TRequest, cancellation: CancellationToken) => Promise<TResponse>\n    ) {\n        this._service.onRequest(requestType.name, (args: any[], cancellation: CancellationToken) =>\n            handler(args[0], cancellation)\n        );\n    }\n\n    @log()\n    private onAvailabilityChanged(available: boolean) {\n        // TODO\n    }\n\n    @debug()\n    private onWorkspaceFoldersChanged(e?: WorkspaceFoldersChangeEvent) {\n        if (workspace.workspaceFolders === undefined || workspace.workspaceFolders.length === 0) return;\n\n        const cc = Logger.getCorrelationContext();\n\n        this._localToSharedPaths.clear();\n        this._sharedToLocalPaths.clear();\n\n        let localPath;\n        let sharedPath;\n        for (const f of workspace.workspaceFolders) {\n            localPath = Strings.normalizePath(f.uri.fsPath);\n            sharedPath = Strings.normalizePath(this.convertLocalUriToShared(f.uri).fsPath);\n\n            Logger.debug(cc, `shared='${sharedPath}' \\u2194 local='${localPath}'`);\n            this._localToSharedPaths.set(localPath, sharedPath);\n            this._sharedToLocalPaths.set(sharedPath, localPath);\n        }\n\n        let localPaths = Iterables.join(this._sharedToLocalPaths.values(), '|');\n        localPaths = localPaths.replace(/(\\/|\\\\)/g, '[\\\\\\\\/|\\\\\\\\]');\n        this._localPathsRegex = new RegExp(`(${localPaths})`, 'gi');\n\n        let sharedPaths = Iterables.join(this._localToSharedPaths.values(), '|');\n        sharedPaths = sharedPaths.replace(/(\\/|\\\\)/g, '[\\\\\\\\/|\\\\\\\\]');\n        this._sharedPathsRegex = new RegExp(`^(${sharedPaths})`, 'i');\n    }\n\n    @log()\n    private async onGitCommandRequest(\n        request: GitCommandRequest,\n        cancellation: CancellationToken\n    ): Promise<GitCommandResponse> {\n        const { options, args } = request;\n\n        const fn = gitWhitelist.get(request.args[0]);\n        if (fn === undefined || !fn(request.args)) throw new Error(`Git ${request.args[0]} command is not allowed`);\n\n        let isRootWorkspace = false;\n        if (options.cwd !== undefined && options.cwd.length > 0 && this._sharedToLocalPaths !== undefined) {\n            // This is all so ugly, but basically we are converting shared paths to local paths\n            if (this._sharedPathsRegex !== undefined && this._sharedPathsRegex.test(options.cwd)) {\n                options.cwd = Strings.normalizePath(options.cwd).replace(this._sharedPathsRegex, (match, shared) => {\n                    if (!isRootWorkspace) {\n                        isRootWorkspace = shared === '/~0';\n                    }\n\n                    const local = this._sharedToLocalPaths.get(shared);\n                    return local != null ? local : shared;\n                });\n            }\n            else if (leadingSlashRegex.test(options.cwd)) {\n                const localCwd = this._sharedToLocalPaths.get('/~0');\n                if (localCwd !== undefined) {\n                    isRootWorkspace = true;\n                    options.cwd = GitUri.resolve(options.cwd, localCwd);\n                }\n            }\n        }\n\n        let files = false;\n        let i = -1;\n        for (const arg of args) {\n            i++;\n            if (arg === '--') {\n                files = true;\n                continue;\n            }\n\n            if (!files) continue;\n\n            if (typeof arg === 'string') {\n                // If we are the \"root\" workspace, then we need to remove the leading slash off the path (otherwise it will not be treated as a relative path)\n                if (isRootWorkspace && leadingSlashRegex.test(arg[0])) {\n                    args.splice(i, 1, arg.substr(1));\n                }\n\n                if (this._sharedPathsRegex !== undefined && this._sharedPathsRegex.test(arg)) {\n                    args.splice(\n                        i,\n                        1,\n                        Strings.normalizePath(arg).replace(this._sharedPathsRegex, (match, shared) => {\n                            const local = this._sharedToLocalPaths.get(shared);\n                            return local != null ? local : shared;\n                        })\n                    );\n                }\n            }\n        }\n\n        let data = await git(options, ...args);\n        if (typeof data === 'string') {\n            // And then we convert local paths to shared paths\n            if (this._localPathsRegex !== undefined && data.length > 0) {\n                data = data.replace(this._localPathsRegex, (match, local) => {\n                    const shared = this._localToSharedPaths.get(local);\n                    return shared != null ? shared : local;\n                });\n            }\n\n            return { data: data };\n        }\n\n        return { data: data.toString('binary'), isBuffer: true };\n    }\n\n    @log()\n    private async onRepositoriesInFolderRequest(\n        request: RepositoriesInFolderRequest,\n        cancellation: CancellationToken\n    ): Promise<RepositoriesInFolderResponse> {\n        const uri = this.convertSharedUriToLocal(Uri.parse(request.folderUri));\n        const normalized = Strings.normalizePath(uri.fsPath, { stripTrailingSlash: true }).toLowerCase();\n\n        const repos = [\n            ...Iterables.filterMap(await Container.git.getRepositories(), r => {\n                if (!r.normalizedPath.startsWith(normalized)) return undefined;\n\n                const vslsUri = this.convertLocalUriToShared(r.folder.uri);\n                return {\n                    folderUri: vslsUri.toString(true),\n                    path: vslsUri.path,\n                    root: r.root,\n                    closed: r.closed\n                };\n            })\n        ];\n\n        return {\n            repositories: repos\n        };\n    }\n\n    @debug({\n        exit: result => `returned ${result.toString(true)}`\n    })\n    private convertLocalUriToShared(localUri: Uri) {\n        const cc = Logger.getCorrelationContext();\n\n        let sharedUri = this._api.convertLocalUriToShared(localUri);\n        Logger.debug(\n            cc,\n            `LiveShare.convertLocalUriToShared(${localUri.toString(true)}) returned ${sharedUri.toString(true)}`\n        );\n\n        const localPath = localUri.path;\n        let sharedPath = sharedUri.path;\n        if (sharedUri.authority.length > 0) {\n            sharedPath = `/${sharedUri.authority}${sharedPath}`;\n        }\n\n        if (new RegExp(`${localPath}$`, 'i').test(sharedPath)) {\n            if (sharedPath.length === localPath.length) {\n                const folder = workspace.getWorkspaceFolder(localUri)!;\n                sharedUri = sharedUri.with({ path: `/~${folder.index}` });\n            }\n            else {\n                sharedUri = sharedUri.with({ path: sharedPath.substr(0, sharedPath.length - localPath.length) });\n            }\n        }\n        else if (!sharedPath.startsWith('/~')) {\n            const folder = workspace.getWorkspaceFolder(localUri)!;\n            sharedUri = sharedUri.with({ path: `/~${folder.index}${sharedPath}` });\n        }\n\n        return sharedUri;\n    }\n\n    private convertSharedUriToLocal(sharedUri: Uri) {\n        if (vslsUriRootRegex.test(sharedUri.path)) {\n            sharedUri = sharedUri.with({ path: `${sharedUri.path}/` });\n        }\n\n        const localUri = this._api.convertSharedUriToLocal(sharedUri);\n\n        const localPath = localUri.path;\n        const sharedPath = sharedUri.path;\n        if (localPath.endsWith(sharedPath)) {\n            return localUri.with({ path: localPath.substr(0, localPath.length - sharedPath.length) });\n        }\n        return localUri;\n    }\n}\n","'use strict';\nimport { CancellationToken, Disposable, window, WorkspaceFolder } from 'vscode';\nimport { LiveShare, SharedServiceProxy } from 'vsls';\nimport { CommandContext, setCommandContext } from '../constants';\nimport { GitCommandOptions, Repository, RepositoryChange } from '../git/git';\nimport { Logger } from '../logger';\nimport { debug, log } from '../system';\nimport { VslsHostService } from './host';\nimport { GitCommandRequestType, RepositoriesInFolderRequestType, RepositoryProxy, RequestType } from './protocol';\n\nexport class VslsGuestService implements Disposable {\n    @log()\n    static async connect(api: LiveShare) {\n        const cc = Logger.getCorrelationContext();\n\n        try {\n            const service = await api.getSharedService(VslsHostService.ServiceId);\n            if (service == null) {\n                throw new Error('Failed to connect to host service');\n            }\n\n            return new VslsGuestService(api, service);\n        }\n        catch (ex) {\n            Logger.error(ex, cc);\n            return undefined;\n        }\n    }\n\n    constructor(private readonly _api: LiveShare, private readonly _service: SharedServiceProxy) {\n        _service.onDidChangeIsServiceAvailable(this.onAvailabilityChanged.bind(this));\n        this.onAvailabilityChanged(_service.isServiceAvailable);\n    }\n\n    dispose() {\n        // nothing to dispose\n    }\n\n    @log()\n    private onAvailabilityChanged(available: boolean) {\n        if (available) {\n            void setCommandContext(CommandContext.Enabled, true);\n            return;\n        }\n\n        void setCommandContext(CommandContext.Enabled, false);\n        void window.showWarningMessage(\n            'GitLens features will be unavailable. Unable to connect to the host GitLens service. The host may have disabled GitLens guest access or may not have GitLens installed.'\n        );\n    }\n\n    @log()\n    async git<TOut extends string | Buffer>(options: GitCommandOptions, ...args: any[]) {\n        const response = await this.sendRequest(GitCommandRequestType, { options: options, args: args });\n\n        if (response.isBuffer) {\n            return new Buffer(response.data, 'binary') as TOut;\n        }\n        return response.data as TOut;\n    }\n\n    @log()\n    async getRepositoriesInFolder(\n        folder: WorkspaceFolder,\n        onAnyRepositoryChanged: (repo: Repository, reason: RepositoryChange) => void\n    ): Promise<Repository[]> {\n        const response = await this.sendRequest(RepositoriesInFolderRequestType, {\n            folderUri: folder.uri.toString(true)\n        });\n\n        return response.repositories.map(\n            (r: RepositoryProxy) => new Repository(folder, r.path, r.root, onAnyRepositoryChanged, false, r.closed)\n        );\n    }\n\n    @debug()\n    private sendRequest<TRequest, TResponse>(\n        requestType: RequestType<TRequest, TResponse>,\n        request: TRequest,\n        cancellation?: CancellationToken\n    ): Promise<TResponse> {\n        return this._service.request(requestType.name, [request]);\n    }\n}\n","'use strict';\nimport { Disposable, workspace } from 'vscode';\nimport { getApi, LiveShare, Role, SessionChangeEvent } from 'vsls';\nimport { CommandContext, DocumentSchemes, setCommandContext } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { VslsGuestService } from './guest';\nimport { VslsHostService } from './host';\n\nexport const vslsUriPrefixRegex = /^[/|\\\\]~(?:\\d+?|external)(?:[/|\\\\]|$)/;\nexport const vslsUriRootRegex = /^[/|\\\\]~(?:\\d+?|external)$/;\n\nexport interface ContactPresence {\n    status: ContactPresenceStatus;\n    statusText: string;\n}\nexport type ContactPresenceStatus = 'online' | 'away' | 'busy' | 'dnd' | 'offline';\n\nexport class VslsController implements Disposable {\n    private _disposable: Disposable | undefined;\n    private _guest: VslsGuestService | undefined;\n    private _host: VslsHostService | undefined;\n\n    private _onReady: (() => void) | undefined;\n    private _waitForReady: Promise<void> | undefined;\n\n    private _api: Promise<LiveShare | null> | undefined;\n\n    constructor() {\n        void this.initialize();\n    }\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n        if (this._host !== undefined) {\n            this._host.dispose();\n        }\n\n        if (this._guest !== undefined) {\n            this._guest.dispose();\n        }\n    }\n\n    private async initialize() {\n        try {\n            // If we have a vsls: workspace open, we might be a guest, so wait until live share transitions into a mode\n            if (\n                workspace.workspaceFolders !== undefined &&\n                workspace.workspaceFolders.some(f => f.uri.scheme === DocumentSchemes.Vsls)\n            ) {\n                setCommandContext(CommandContext.Readonly, true);\n                this._waitForReady = new Promise(resolve => (this._onReady = resolve));\n            }\n\n            this._api = getApi();\n            const api = await this._api;\n            if (api == null) {\n                setCommandContext(CommandContext.Vsls, false);\n                // Tear it down if we can't talk to live share\n                if (this._onReady !== undefined) {\n                    this._onReady();\n                    this._waitForReady = undefined;\n                }\n\n                return;\n            }\n\n            setCommandContext(CommandContext.Vsls, true);\n\n            this._disposable = Disposable.from(\n                api.onDidChangeSession(e => this.onLiveShareSessionChanged(api, e), this)\n            );\n        }\n        catch (ex) {\n            Logger.error(ex);\n        }\n    }\n\n    get isMaybeGuest() {\n        return this._guest !== undefined || this._waitForReady !== undefined;\n    }\n\n    async getContact(email: string | undefined) {\n        if (email === undefined) return undefined;\n\n        const api = await this._api;\n        if (api == null) return undefined;\n\n        const contacts = await api.getContacts([email]);\n        return contacts.contacts[email];\n    }\n\n    async getContactPresence(email: string | undefined): Promise<ContactPresence | undefined> {\n        const contact = await this.getContact(email);\n        if (contact == null) return undefined;\n\n        switch (contact.status) {\n            case 'available':\n                return { status: 'online', statusText: 'Available' };\n            case 'away':\n                return { status: 'away', statusText: 'Away' };\n            case 'busy':\n                return { status: 'busy', statusText: 'Busy' };\n            case 'doNotDisturb':\n                return { status: 'dnd', statusText: 'DND' };\n            default:\n                return { status: 'offline', statusText: 'Offline' };\n        }\n    }\n\n    async invite(email: string | undefined) {\n        if (email == null) return undefined;\n\n        const contact = await this.getContact(email);\n        if (contact == null) return undefined;\n\n        return contact.invite();\n    }\n\n    async startSession() {\n        const api = await this._api;\n        if (api == null) return undefined;\n\n        return api.share();\n    }\n\n    async guest() {\n        if (this._waitForReady !== undefined) {\n            await this._waitForReady;\n            this._waitForReady = undefined;\n        }\n\n        return this._guest;\n    }\n\n    host() {\n        return this._host;\n    }\n\n    private async onLiveShareSessionChanged(api: LiveShare, e: SessionChangeEvent) {\n        if (this._host !== undefined) {\n            this._host.dispose();\n        }\n\n        if (this._guest !== undefined) {\n            this._guest.dispose();\n        }\n\n        switch (e.session.role) {\n            case Role.Host:\n                setCommandContext(CommandContext.Readonly, undefined);\n                setCommandContext(CommandContext.Vsls, 'host');\n                if (Container.config.liveshare.allowGuestAccess) {\n                    this._host = await VslsHostService.share(api);\n                }\n                break;\n            case Role.Guest:\n                setCommandContext(CommandContext.Readonly, true);\n                setCommandContext(CommandContext.Vsls, 'guest');\n                this._guest = await VslsGuestService.connect(api);\n                break;\n\n            default:\n                setCommandContext(CommandContext.Readonly, undefined);\n                setCommandContext(CommandContext.Vsls, true);\n                break;\n        }\n\n        if (this._onReady !== undefined) {\n            this._onReady();\n            this._onReady = undefined;\n        }\n    }\n}\n","!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define(n):t.dayjs=n()}(this,function(){\"use strict\";var t=\"millisecond\",n=\"second\",e=\"minute\",r=\"hour\",i=\"day\",s=\"week\",u=\"month\",o=\"quarter\",a=\"year\",h=/^(\\d{4})-?(\\d{1,2})-?(\\d{0,2})[^0-9]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?.?(\\d{1,3})?$/,f=/\\[([^\\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=function(t,n,e){var r=String(t);return!r||r.length>=n?t:\"\"+Array(n+1-r.length).join(e)+t},d={s:c,z:function(t){var n=-t.utcOffset(),e=Math.abs(n),r=Math.floor(e/60),i=e%60;return(n<=0?\"+\":\"-\")+c(r,2,\"0\")+\":\"+c(i,2,\"0\")},m:function(t,n){var e=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(e,u),i=n-r<0,s=t.clone().add(e+(i?-1:1),u);return Number(-(e+(n-r)/(i?r-s:s-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(h){return{M:u,y:a,w:s,d:i,h:r,m:e,s:n,ms:t,Q:o}[h]||String(h||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},$={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},l=\"en\",m={};m[l]=$;var y=function(t){return t instanceof v},M=function(t,n,e){var r;if(!t)return l;if(\"string\"==typeof t)m[t]&&(r=t),n&&(m[t]=n,r=t);else{var i=t.name;m[i]=t,r=i}return e||(l=r),r},g=function(t,n,e){if(y(t))return t.clone();var r=n?\"string\"==typeof n?{format:n,pl:e}:n:{};return r.date=t,new v(r)},D=d;D.l=M,D.i=y,D.w=function(t,n){return g(t,{locale:n.$L,utc:n.$u})};var v=function(){function c(t){this.$L=this.$L||M(t.locale,null,!0),this.parse(t)}var d=c.prototype;return d.parse=function(t){this.$d=function(t){var n=t.date,e=t.utc;if(null===n)return new Date(NaN);if(D.u(n))return new Date;if(n instanceof Date)return new Date(n);if(\"string\"==typeof n&&!/Z$/i.test(n)){var r=n.match(h);if(r)return e?new Date(Date.UTC(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)):new Date(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)}return new Date(n)}(t),this.init()},d.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},d.$utils=function(){return D},d.isValid=function(){return!(\"Invalid Date\"===this.$d.toString())},d.isSame=function(t,n){var e=g(t);return this.startOf(n)<=e&&e<=this.endOf(n)},d.isAfter=function(t,n){return g(t)<this.startOf(n)},d.isBefore=function(t,n){return this.endOf(n)<g(t)},d.$g=function(t,n,e){return D.u(t)?this[n]:this.set(e,t)},d.year=function(t){return this.$g(t,\"$y\",a)},d.month=function(t){return this.$g(t,\"$M\",u)},d.day=function(t){return this.$g(t,\"$W\",i)},d.date=function(t){return this.$g(t,\"$D\",\"date\")},d.hour=function(t){return this.$g(t,\"$H\",r)},d.minute=function(t){return this.$g(t,\"$m\",e)},d.second=function(t){return this.$g(t,\"$s\",n)},d.millisecond=function(n){return this.$g(n,\"$ms\",t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,o){var h=this,f=!!D.u(o)||o,c=D.p(t),d=function(t,n){var e=D.w(h.$u?Date.UTC(h.$y,n,t):new Date(h.$y,n,t),h);return f?e:e.endOf(i)},$=function(t,n){return D.w(h.toDate()[t].apply(h.toDate(),(f?[0,0,0,0]:[23,59,59,999]).slice(n)),h)},l=this.$W,m=this.$M,y=this.$D,M=\"set\"+(this.$u?\"UTC\":\"\");switch(c){case a:return f?d(1,0):d(31,11);case u:return f?d(1,m):d(0,m+1);case s:var g=this.$locale().weekStart||0,v=(l<g?l+7:l)-g;return d(f?y-v:y+(6-v),m);case i:case\"date\":return $(M+\"Hours\",0);case r:return $(M+\"Minutes\",1);case e:return $(M+\"Seconds\",2);case n:return $(M+\"Milliseconds\",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(s,o){var h,f=D.p(s),c=\"set\"+(this.$u?\"UTC\":\"\"),d=(h={},h[i]=c+\"Date\",h.date=c+\"Date\",h[u]=c+\"Month\",h[a]=c+\"FullYear\",h[r]=c+\"Hours\",h[e]=c+\"Minutes\",h[n]=c+\"Seconds\",h[t]=c+\"Milliseconds\",h)[f],$=f===i?this.$D+(o-this.$W):o;if(f===u||f===a){var l=this.clone().set(\"date\",1);l.$d[d]($),l.init(),this.$d=l.set(\"date\",Math.min(this.$D,l.daysInMonth())).toDate()}else d&&this.$d[d]($);return this.init(),this},d.set=function(t,n){return this.clone().$set(t,n)},d.get=function(t){return this[D.p(t)]()},d.add=function(t,o){var h,f=this;t=Number(t);var c=D.p(o),d=function(n){var e=g(f);return D.w(e.date(e.date()+Math.round(n*t)),f)};if(c===u)return this.set(u,this.$M+t);if(c===a)return this.set(a,this.$y+t);if(c===i)return d(1);if(c===s)return d(7);var $=(h={},h[e]=6e4,h[r]=36e5,h[n]=1e3,h)[c]||1,l=this.valueOf()+t*$;return D.w(l,this)},d.subtract=function(t,n){return this.add(-1*t,n)},d.format=function(t){var n=this;if(!this.isValid())return\"Invalid Date\";var e=t||\"YYYY-MM-DDTHH:mm:ssZ\",r=D.z(this),i=this.$locale(),s=this.$H,u=this.$m,o=this.$M,a=i.weekdays,h=i.months,c=function(t,r,i,s){return t&&(t[r]||t(n,e))||i[r].substr(0,s)},d=function(t){return D.s(s%12||12,t,\"0\")},$=i.meridiem||function(t,n,e){var r=t<12?\"AM\":\"PM\";return e?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:D.s(o+1,2,\"0\"),MMM:c(i.monthsShort,o,h,3),MMMM:h[o]||h(this,e),D:this.$D,DD:D.s(this.$D,2,\"0\"),d:String(this.$W),dd:c(i.weekdaysMin,this.$W,a,2),ddd:c(i.weekdaysShort,this.$W,a,3),dddd:a[this.$W],H:String(s),HH:D.s(s,2,\"0\"),h:d(1),hh:d(2),a:$(s,u,!0),A:$(s,u,!1),m:String(u),mm:D.s(u,2,\"0\"),s:String(this.$s),ss:D.s(this.$s,2,\"0\"),SSS:D.s(this.$ms,3,\"0\"),Z:r};return e.replace(f,function(t,n){return n||l[t]||r.replace(\":\",\"\")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(t,h,f){var c,d=D.p(h),$=g(t),l=6e4*($.utcOffset()-this.utcOffset()),m=this-$,y=D.m(this,$);return y=(c={},c[a]=y/12,c[u]=y,c[o]=y/3,c[s]=(m-l)/6048e5,c[i]=(m-l)/864e5,c[r]=m/36e5,c[e]=m/6e4,c[n]=m/1e3,c)[d]||m,f?y:D.a(y)},d.daysInMonth=function(){return this.endOf(u).$D},d.$locale=function(){return m[this.$L]},d.locale=function(t,n){if(!t)return this.$L;var e=this.clone();return e.$L=M(t,n,!0),e},d.clone=function(){return D.w(this.toDate(),this)},d.toDate=function(){return new Date(this.$d)},d.toJSON=function(){return this.toISOString()},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},c}();return g.prototype=v.prototype,g.extend=function(t,n){return t(n,v,g),g},g.locale=M,g.isDayjs=y,g.unix=function(t){return g(1e3*t)},g.en=m[l],g.Ls=m,g});\n","//\n//  Copyright (c) Microsoft Corporation. All rights reserved.\n//\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Entrypoint and type definitions for Live Share for VS Code extension API\n */\nconst vscode = require(\"vscode\");\nconst liveShareApiVersion = require('./package.json').version;\n/**\n * Extension ID of the Live Share extension for VS Code.\n */\nexports.extensionId = 'ms-vsliveshare.vsliveshare';\n/**\n * Entrypoint for access to the Live Share API.\n *\n * @returns an instance of the Live Share API, or `null` if the Live Share extension\n * is not installed or failed to activate.\n *\n * @example To access the Live Share API from another extension:\n *\n *     import * as vsls from 'vsls/vscode';\n *     const liveshare = await vsls.getApi();\n */\nasync function getApi() {\n    const liveshareExtension = vscode.extensions.getExtension(exports.extensionId);\n    if (!liveshareExtension) {\n        // The extension is not installed.\n        return null;\n    }\n    const extensionApi = liveshareExtension.isActive ?\n        liveshareExtension.exports : await liveshareExtension.activate();\n    if (!extensionApi) {\n        // The extensibility API is not enabled.\n        return null;\n    }\n    // Support deprecated function name to preserve compatibility with older versions of VSLS.\n    if (!extensionApi.getApi)\n        return extensionApi.getApiAsync(liveShareApiVersion);\n    return extensionApi.getApi(liveShareApiVersion);\n}\nexports.getApi = getApi;\n/** @deprecated */\nfunction getApiAsync() { return getApi(); }\nexports.getApiAsync = getApiAsync;\nvar Role;\n(function (Role) {\n    Role[Role[\"None\"] = 0] = \"None\";\n    Role[Role[\"Host\"] = 1] = \"Host\";\n    Role[Role[\"Guest\"] = 2] = \"Guest\";\n})(Role = exports.Role || (exports.Role = {}));\n/** This is just a placeholder for a richer access control model to be added later. */\nvar Access;\n(function (Access) {\n    Access[Access[\"None\"] = 0] = \"None\";\n    Access[Access[\"ReadOnly\"] = 1] = \"ReadOnly\";\n    Access[Access[\"ReadWrite\"] = 3] = \"ReadWrite\";\n    Access[Access[\"Owner\"] = 255] = \"Owner\";\n})(Access = exports.Access || (exports.Access = {}));\n/**\n * Identifiers for Live Share tree views. These identifiers may be used by other extensions\n * to extend Live Share tree views with additional nodes via the `registerTreeDataProvider()`\n * API.\n */\nvar View;\n(function (View) {\n    View[\"Session\"] = \"liveshare.session\";\n    View[\"ExplorerSession\"] = \"liveshare.session.explorer\";\n    View[\"Contacts\"] = \"liveshare.contacts\";\n    View[\"Help\"] = \"liveshare.help\";\n})(View = exports.View || (exports.View = {}));\n/**\n * Identifiers for Live Share tree view items. These identifiers may be used by other\n * extensions to extend Live Share tree items with additional commands using conditional\n * expressions in the `view/item/context` section of their own package.json.\n */\nvar ViewItem;\n(function (ViewItem) {\n    // session item groups\n    ViewItem[\"Participants\"] = \"participants\";\n    ViewItem[\"Servers\"] = \"servers\";\n    ViewItem[\"Terminals\"] = \"terminals\";\n    // participants\n    ViewItem[\"CurrentUser\"] = \"participants.currentuser\";\n    ViewItem[\"Guest\"] = \"participants.guest\";\n    ViewItem[\"FollowedGuest\"] = \"participants.guest.followed\";\n    ViewItem[\"Participant\"] = \"participants.participant\";\n    ViewItem[\"FollowedParticipant\"] = \"participants.participant.followed\";\n    ViewItem[\"GuestAnonymous\"] = \"participants.guest.anonymous\";\n    ViewItem[\"FollowedGuestAnonymous\"] = \"participants.guest.followed.anonymous\";\n    ViewItem[\"GuestElevated\"] = \"participants.guest.elevated\";\n    ViewItem[\"FollowedGuestElevated\"] = \"participants.guest.followed.elevated\";\n    // servers\n    ViewItem[\"LocalServer\"] = \"servers.local\";\n    ViewItem[\"RemoteServer\"] = \"servers.remote\";\n    // terminals\n    ViewItem[\"LocalTerminalReadOnly\"] = \"terminals.local.readonly\";\n    ViewItem[\"LocalTerminalReadWrite\"] = \"terminals.local.readwrite\";\n    ViewItem[\"RemoteTerminal\"] = \"terminals.remote\";\n    // contacts\n    ViewItem[\"SuggestedContacts\"] = \"contacts.suggested\";\n    ViewItem[\"AvailableContacts\"] = \"contacts.available\";\n    ViewItem[\"ContactsProvider\"] = \"contacts.provider\";\n    ViewItem[\"SelfContact\"] = \"contacts.selfContact\";\n    ViewItem[\"Contact\"] = \"contacts.contact\";\n    ViewItem[\"ContactOffline\"] = \"contacts.contact.offline\";\n    ViewItem[\"RecentContact\"] = \"contacts.recentContact\";\n    ViewItem[\"RecentContactOffline\"] = \"contacts.recentContact.offline\";\n    ViewItem[\"NoContact\"] = \"contacts.noContact\";\n    ViewItem[\"RecentContacts\"] = \"contacts.RecentContacts\";\n    ViewItem[\"NoSuggestedContacts\"] = \"contacts.NoSuggestedUsers\";\n    ViewItem[\"NoRecentContacts\"] = \"contacts.NoRecentContacts\";\n    ViewItem[\"InvitedContact\"] = \"contacts.invited\";\n    // help\n    ViewItem[\"SessionFeedbackQuestion\"] = \"help.sessionFeedback\";\n    ViewItem[\"ReportAProblem\"] = \"help.reportAProblem\";\n    ViewItem[\"TweetUsYourFeedback\"] = \"help.tweetUsYourFeedback\";\n    ViewItem[\"Survey\"] = \"help.survey\";\n    ViewItem[\"GoodFeedback\"] = \"help.goodFeedback\";\n    ViewItem[\"BadFeedback\"] = \"help.badFeedback\";\n    ViewItem[\"DontAskAgain\"] = \"help.dontAskAgain\";\n    ViewItem[\"Thankyou\"] = \"help.thankyou\";\n    ViewItem[\"MoreInfo\"] = \"help.moreinfo\";\n    // Shown while session sharing / joining is in progress\n    ViewItem[\"Loading\"] = \"loading\";\n    // Other / unspecified item type\n    ViewItem[\"Other\"] = \"other\";\n})(ViewItem = exports.ViewItem || (exports.ViewItem = {}));\n\n//# sourceMappingURL=liveShare.js.map\n","module.exports = require(\"stream\");","module.exports = require(\"crypto\");","/**\n * @license\n * Lodash <https://lodash.com/>\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n;(function() {\n\n  /** Used as a safe reference for `undefined` in pre-ES5 environments. */\n  var undefined;\n\n  /** Used as the semantic version number. */\n  var VERSION = '4.17.15';\n\n  /** Used as the size to enable large array optimizations. */\n  var LARGE_ARRAY_SIZE = 200;\n\n  /** Error message constants. */\n  var CORE_ERROR_TEXT = 'Unsupported core-js use. Try https://npms.io/search?q=ponyfill.',\n      FUNC_ERROR_TEXT = 'Expected a function';\n\n  /** Used to stand-in for `undefined` hash values. */\n  var HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n  /** Used as the maximum memoize cache size. */\n  var MAX_MEMOIZE_SIZE = 500;\n\n  /** Used as the internal argument placeholder. */\n  var PLACEHOLDER = '__lodash_placeholder__';\n\n  /** Used to compose bitmasks for cloning. */\n  var CLONE_DEEP_FLAG = 1,\n      CLONE_FLAT_FLAG = 2,\n      CLONE_SYMBOLS_FLAG = 4;\n\n  /** Used to compose bitmasks for value comparisons. */\n  var COMPARE_PARTIAL_FLAG = 1,\n      COMPARE_UNORDERED_FLAG = 2;\n\n  /** Used to compose bitmasks for function metadata. */\n  var WRAP_BIND_FLAG = 1,\n      WRAP_BIND_KEY_FLAG = 2,\n      WRAP_CURRY_BOUND_FLAG = 4,\n      WRAP_CURRY_FLAG = 8,\n      WRAP_CURRY_RIGHT_FLAG = 16,\n      WRAP_PARTIAL_FLAG = 32,\n      WRAP_PARTIAL_RIGHT_FLAG = 64,\n      WRAP_ARY_FLAG = 128,\n      WRAP_REARG_FLAG = 256,\n      WRAP_FLIP_FLAG = 512;\n\n  /** Used as default options for `_.truncate`. */\n  var DEFAULT_TRUNC_LENGTH = 30,\n      DEFAULT_TRUNC_OMISSION = '...';\n\n  /** Used to detect hot functions by number of calls within a span of milliseconds. */\n  var HOT_COUNT = 800,\n      HOT_SPAN = 16;\n\n  /** Used to indicate the type of lazy iteratees. */\n  var LAZY_FILTER_FLAG = 1,\n      LAZY_MAP_FLAG = 2,\n      LAZY_WHILE_FLAG = 3;\n\n  /** Used as references for various `Number` constants. */\n  var INFINITY = 1 / 0,\n      MAX_SAFE_INTEGER = 9007199254740991,\n      MAX_INTEGER = 1.7976931348623157e+308,\n      NAN = 0 / 0;\n\n  /** Used as references for the maximum length and index of an array. */\n  var MAX_ARRAY_LENGTH = 4294967295,\n      MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,\n      HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n  /** Used to associate wrap methods with their bit flags. */\n  var wrapFlags = [\n    ['ary', WRAP_ARY_FLAG],\n    ['bind', WRAP_BIND_FLAG],\n    ['bindKey', WRAP_BIND_KEY_FLAG],\n    ['curry', WRAP_CURRY_FLAG],\n    ['curryRight', WRAP_CURRY_RIGHT_FLAG],\n    ['flip', WRAP_FLIP_FLAG],\n    ['partial', WRAP_PARTIAL_FLAG],\n    ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],\n    ['rearg', WRAP_REARG_FLAG]\n  ];\n\n  /** `Object#toString` result references. */\n  var argsTag = '[object Arguments]',\n      arrayTag = '[object Array]',\n      asyncTag = '[object AsyncFunction]',\n      boolTag = '[object Boolean]',\n      dateTag = '[object Date]',\n      domExcTag = '[object DOMException]',\n      errorTag = '[object Error]',\n      funcTag = '[object Function]',\n      genTag = '[object GeneratorFunction]',\n      mapTag = '[object Map]',\n      numberTag = '[object Number]',\n      nullTag = '[object Null]',\n      objectTag = '[object Object]',\n      promiseTag = '[object Promise]',\n      proxyTag = '[object Proxy]',\n      regexpTag = '[object RegExp]',\n      setTag = '[object Set]',\n      stringTag = '[object String]',\n      symbolTag = '[object Symbol]',\n      undefinedTag = '[object Undefined]',\n      weakMapTag = '[object WeakMap]',\n      weakSetTag = '[object WeakSet]';\n\n  var arrayBufferTag = '[object ArrayBuffer]',\n      dataViewTag = '[object DataView]',\n      float32Tag = '[object Float32Array]',\n      float64Tag = '[object Float64Array]',\n      int8Tag = '[object Int8Array]',\n      int16Tag = '[object Int16Array]',\n      int32Tag = '[object Int32Array]',\n      uint8Tag = '[object Uint8Array]',\n      uint8ClampedTag = '[object Uint8ClampedArray]',\n      uint16Tag = '[object Uint16Array]',\n      uint32Tag = '[object Uint32Array]';\n\n  /** Used to match empty string literals in compiled template source. */\n  var reEmptyStringLeading = /\\b__p \\+= '';/g,\n      reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n      reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n  /** Used to match HTML entities and HTML characters. */\n  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,\n      reUnescapedHtml = /[&<>\"']/g,\n      reHasEscapedHtml = RegExp(reEscapedHtml.source),\n      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n  /** Used to match template delimiters. */\n  var reEscape = /<%-([\\s\\S]+?)%>/g,\n      reEvaluate = /<%([\\s\\S]+?)%>/g,\n      reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\n  /** Used to match property names within property paths. */\n  var reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n      reIsPlainProp = /^\\w*$/,\n      rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n  /**\n   * Used to match `RegExp`\n   * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n   */\n  var reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g,\n      reHasRegExpChar = RegExp(reRegExpChar.source);\n\n  /** Used to match leading and trailing whitespace. */\n  var reTrim = /^\\s+|\\s+$/g,\n      reTrimStart = /^\\s+/,\n      reTrimEnd = /\\s+$/;\n\n  /** Used to match wrap detail comments. */\n  var reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,\n      reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,\n      reSplitDetails = /,? & /;\n\n  /** Used to match words composed of alphanumeric characters. */\n  var reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n  /** Used to match backslashes in property paths. */\n  var reEscapeChar = /\\\\(\\\\)?/g;\n\n  /**\n   * Used to match\n   * [ES template delimiters](http://ecma-international.org/ecma-262/7.0/#sec-template-literal-lexical-components).\n   */\n  var reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n  /** Used to match `RegExp` flags from their coerced string values. */\n  var reFlags = /\\w*$/;\n\n  /** Used to detect bad signed hexadecimal string values. */\n  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n  /** Used to detect binary string values. */\n  var reIsBinary = /^0b[01]+$/i;\n\n  /** Used to detect host constructors (Safari). */\n  var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n  /** Used to detect octal string values. */\n  var reIsOctal = /^0o[0-7]+$/i;\n\n  /** Used to detect unsigned integer values. */\n  var reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n  /** Used to match Latin Unicode letters (excluding mathematical operators). */\n  var reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n  /** Used to ensure capturing order of template delimiters. */\n  var reNoMatch = /($^)/;\n\n  /** Used to match unescaped characters in compiled string literals. */\n  var reUnescapedString = /['\\n\\r\\u2028\\u2029\\\\]/g;\n\n  /** Used to compose unicode character classes. */\n  var rsAstralRange = '\\\\ud800-\\\\udfff',\n      rsComboMarksRange = '\\\\u0300-\\\\u036f',\n      reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n      rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n      rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n      rsDingbatRange = '\\\\u2700-\\\\u27bf',\n      rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n      rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n      rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n      rsPunctuationRange = '\\\\u2000-\\\\u206f',\n      rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n      rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n      rsVarRange = '\\\\ufe0e\\\\ufe0f',\n      rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n  /** Used to compose unicode capture groups. */\n  var rsApos = \"['\\u2019]\",\n      rsAstral = '[' + rsAstralRange + ']',\n      rsBreak = '[' + rsBreakRange + ']',\n      rsCombo = '[' + rsComboRange + ']',\n      rsDigits = '\\\\d+',\n      rsDingbat = '[' + rsDingbatRange + ']',\n      rsLower = '[' + rsLowerRange + ']',\n      rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n      rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n      rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n      rsNonAstral = '[^' + rsAstralRange + ']',\n      rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n      rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n      rsUpper = '[' + rsUpperRange + ']',\n      rsZWJ = '\\\\u200d';\n\n  /** Used to compose unicode regexes. */\n  var rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n      rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n      rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n      rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n      reOptMod = rsModifier + '?',\n      rsOptVar = '[' + rsVarRange + ']?',\n      rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n      rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n      rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n      rsSeq = rsOptVar + reOptMod + rsOptJoin,\n      rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq,\n      rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n  /** Used to match apostrophes. */\n  var reApos = RegExp(rsApos, 'g');\n\n  /**\n   * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n   * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n   */\n  var reComboMark = RegExp(rsCombo, 'g');\n\n  /** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\n  var reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n  /** Used to match complex or compound words. */\n  var reUnicodeWord = RegExp([\n    rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n    rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n    rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n    rsUpper + '+' + rsOptContrUpper,\n    rsOrdUpper,\n    rsOrdLower,\n    rsDigits,\n    rsEmoji\n  ].join('|'), 'g');\n\n  /** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\n  var reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n  /** Used to detect strings that need a more robust regexp to match words. */\n  var reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n  /** Used to assign default `context` object properties. */\n  var contextProps = [\n    'Array', 'Buffer', 'DataView', 'Date', 'Error', 'Float32Array', 'Float64Array',\n    'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Map', 'Math', 'Object',\n    'Promise', 'RegExp', 'Set', 'String', 'Symbol', 'TypeError', 'Uint8Array',\n    'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap',\n    '_', 'clearTimeout', 'isFinite', 'parseInt', 'setTimeout'\n  ];\n\n  /** Used to make template sourceURLs easier to identify. */\n  var templateCounter = -1;\n\n  /** Used to identify `toStringTag` values of typed arrays. */\n  var typedArrayTags = {};\n  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\n  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\n  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\n  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\n  typedArrayTags[uint32Tag] = true;\n  typedArrayTags[argsTag] = typedArrayTags[arrayTag] =\n  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\n  typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\n  typedArrayTags[errorTag] = typedArrayTags[funcTag] =\n  typedArrayTags[mapTag] = typedArrayTags[numberTag] =\n  typedArrayTags[objectTag] = typedArrayTags[regexpTag] =\n  typedArrayTags[setTag] = typedArrayTags[stringTag] =\n  typedArrayTags[weakMapTag] = false;\n\n  /** Used to identify `toStringTag` values supported by `_.clone`. */\n  var cloneableTags = {};\n  cloneableTags[argsTag] = cloneableTags[arrayTag] =\n  cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\n  cloneableTags[boolTag] = cloneableTags[dateTag] =\n  cloneableTags[float32Tag] = cloneableTags[float64Tag] =\n  cloneableTags[int8Tag] = cloneableTags[int16Tag] =\n  cloneableTags[int32Tag] = cloneableTags[mapTag] =\n  cloneableTags[numberTag] = cloneableTags[objectTag] =\n  cloneableTags[regexpTag] = cloneableTags[setTag] =\n  cloneableTags[stringTag] = cloneableTags[symbolTag] =\n  cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\n  cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\n  cloneableTags[errorTag] = cloneableTags[funcTag] =\n  cloneableTags[weakMapTag] = false;\n\n  /** Used to map Latin Unicode letters to basic Latin letters. */\n  var deburredLetters = {\n    // Latin-1 Supplement block.\n    '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n    '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n    '\\xc7': 'C',  '\\xe7': 'c',\n    '\\xd0': 'D',  '\\xf0': 'd',\n    '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n    '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n    '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n    '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n    '\\xd1': 'N',  '\\xf1': 'n',\n    '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n    '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n    '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n    '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n    '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n    '\\xc6': 'Ae', '\\xe6': 'ae',\n    '\\xde': 'Th', '\\xfe': 'th',\n    '\\xdf': 'ss',\n    // Latin Extended-A block.\n    '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n    '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n    '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n    '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n    '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n    '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n    '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n    '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n    '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n    '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n    '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n    '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n    '\\u0134': 'J',  '\\u0135': 'j',\n    '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n    '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n    '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n    '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n    '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n    '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n    '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n    '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n    '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n    '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n    '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n    '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n    '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n    '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n    '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n    '\\u0174': 'W',  '\\u0175': 'w',\n    '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n    '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n    '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n    '\\u0132': 'IJ', '\\u0133': 'ij',\n    '\\u0152': 'Oe', '\\u0153': 'oe',\n    '\\u0149': \"'n\", '\\u017f': 's'\n  };\n\n  /** Used to map characters to HTML entities. */\n  var htmlEscapes = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  /** Used to map HTML entities to characters. */\n  var htmlUnescapes = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#39;': \"'\"\n  };\n\n  /** Used to escape characters for inclusion in compiled string literals. */\n  var stringEscapes = {\n    '\\\\': '\\\\',\n    \"'\": \"'\",\n    '\\n': 'n',\n    '\\r': 'r',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  /** Built-in method references without a dependency on `root`. */\n  var freeParseFloat = parseFloat,\n      freeParseInt = parseInt;\n\n  /** Detect free variable `global` from Node.js. */\n  var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n  /** Detect free variable `self`. */\n  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n  /** Used as a reference to the global object. */\n  var root = freeGlobal || freeSelf || Function('return this')();\n\n  /** Detect free variable `exports`. */\n  var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n  /** Detect the popular CommonJS extension `module.exports`. */\n  var moduleExports = freeModule && freeModule.exports === freeExports;\n\n  /** Detect free variable `process` from Node.js. */\n  var freeProcess = moduleExports && freeGlobal.process;\n\n  /** Used to access faster Node.js helpers. */\n  var nodeUtil = (function() {\n    try {\n      // Use `util.types` for Node.js 10+.\n      var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n      if (types) {\n        return types;\n      }\n\n      // Legacy `process.binding('util')` for Node.js < 10.\n      return freeProcess && freeProcess.binding && freeProcess.binding('util');\n    } catch (e) {}\n  }());\n\n  /* Node.js helper references. */\n  var nodeIsArrayBuffer = nodeUtil && nodeUtil.isArrayBuffer,\n      nodeIsDate = nodeUtil && nodeUtil.isDate,\n      nodeIsMap = nodeUtil && nodeUtil.isMap,\n      nodeIsRegExp = nodeUtil && nodeUtil.isRegExp,\n      nodeIsSet = nodeUtil && nodeUtil.isSet,\n      nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * A faster alternative to `Function#apply`, this function invokes `func`\n   * with the `this` binding of `thisArg` and the arguments of `args`.\n   *\n   * @private\n   * @param {Function} func The function to invoke.\n   * @param {*} thisArg The `this` binding of `func`.\n   * @param {Array} args The arguments to invoke `func` with.\n   * @returns {*} Returns the result of `func`.\n   */\n  function apply(func, thisArg, args) {\n    switch (args.length) {\n      case 0: return func.call(thisArg);\n      case 1: return func.call(thisArg, args[0]);\n      case 2: return func.call(thisArg, args[0], args[1]);\n      case 3: return func.call(thisArg, args[0], args[1], args[2]);\n    }\n    return func.apply(thisArg, args);\n  }\n\n  /**\n   * A specialized version of `baseAggregator` for arrays.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} setter The function to set `accumulator` values.\n   * @param {Function} iteratee The iteratee to transform keys.\n   * @param {Object} accumulator The initial aggregated object.\n   * @returns {Function} Returns `accumulator`.\n   */\n  function arrayAggregator(array, setter, iteratee, accumulator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      var value = array[index];\n      setter(accumulator, value, iteratee(value), array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.forEach` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEach(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (iteratee(array[index], index, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.forEachRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEachRight(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n\n    while (length--) {\n      if (iteratee(array[length], length, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.every` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if all elements pass the predicate check,\n   *  else `false`.\n   */\n  function arrayEvery(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (!predicate(array[index], index, array)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * A specialized version of `_.filter` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {Array} Returns the new filtered array.\n   */\n  function arrayFilter(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (predicate(value, index, array)) {\n        result[resIndex++] = value;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.includes` for arrays without support for\n   * specifying an index to search from.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludes(array, value) {\n    var length = array == null ? 0 : array.length;\n    return !!length && baseIndexOf(array, value, 0) > -1;\n  }\n\n  /**\n   * This function is like `arrayIncludes` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludesWith(array, value, comparator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (comparator(value, array[index])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * A specialized version of `_.map` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the new mapped array.\n   */\n  function arrayMap(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        result = Array(length);\n\n    while (++index < length) {\n      result[index] = iteratee(array[index], index, array);\n    }\n    return result;\n  }\n\n  /**\n   * Appends the elements of `values` to `array`.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {Array} values The values to append.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayPush(array, values) {\n    var index = -1,\n        length = values.length,\n        offset = array.length;\n\n    while (++index < length) {\n      array[offset + index] = values[index];\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.reduce` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the first element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduce(array, iteratee, accumulator, initAccum) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    if (initAccum && length) {\n      accumulator = array[++index];\n    }\n    while (++index < length) {\n      accumulator = iteratee(accumulator, array[index], index, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.reduceRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the last element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduceRight(array, iteratee, accumulator, initAccum) {\n    var length = array == null ? 0 : array.length;\n    if (initAccum && length) {\n      accumulator = array[--length];\n    }\n    while (length--) {\n      accumulator = iteratee(accumulator, array[length], length, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.some` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if any element passes the predicate check,\n   *  else `false`.\n   */\n  function arraySome(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (predicate(array[index], index, array)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Gets the size of an ASCII `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  var asciiSize = baseProperty('length');\n\n  /**\n   * Converts an ASCII `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function asciiToArray(string) {\n    return string.split('');\n  }\n\n  /**\n   * Splits an ASCII `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function asciiWords(string) {\n    return string.match(reAsciiWord) || [];\n  }\n\n  /**\n   * The base implementation of methods like `_.findKey` and `_.findLastKey`,\n   * without support for iteratee shorthands, which iterates over `collection`\n   * using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the found element or its key, else `undefined`.\n   */\n  function baseFindKey(collection, predicate, eachFunc) {\n    var result;\n    eachFunc(collection, function(value, key, collection) {\n      if (predicate(value, key, collection)) {\n        result = key;\n        return false;\n      }\n    });\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.findIndex` and `_.findLastIndex` without\n   * support for iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {number} fromIndex The index to search from.\n   * @param {boolean} [fromRight] Specify iterating from right to left.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseFindIndex(array, predicate, fromIndex, fromRight) {\n    var length = array.length,\n        index = fromIndex + (fromRight ? 1 : -1);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (predicate(array[index], index, array)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOf(array, value, fromIndex) {\n    return value === value\n      ? strictIndexOf(array, value, fromIndex)\n      : baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n\n  /**\n   * This function is like `baseIndexOf` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOfWith(array, value, fromIndex, comparator) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (comparator(array[index], value)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.isNaN` without support for number objects.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n   */\n  function baseIsNaN(value) {\n    return value !== value;\n  }\n\n  /**\n   * The base implementation of `_.mean` and `_.meanBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the mean.\n   */\n  function baseMean(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n    return length ? (baseSum(array, iteratee) / length) : NAN;\n  }\n\n  /**\n   * The base implementation of `_.property` without support for deep paths.\n   *\n   * @private\n   * @param {string} key The key of the property to get.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function baseProperty(key) {\n    return function(object) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.propertyOf` without support for deep paths.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function basePropertyOf(object) {\n    return function(key) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.reduce` and `_.reduceRight`, without support\n   * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} accumulator The initial value.\n   * @param {boolean} initAccum Specify using the first or last element of\n   *  `collection` as the initial value.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the accumulated value.\n   */\n  function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n    eachFunc(collection, function(value, index, collection) {\n      accumulator = initAccum\n        ? (initAccum = false, value)\n        : iteratee(accumulator, value, index, collection);\n    });\n    return accumulator;\n  }\n\n  /**\n   * The base implementation of `_.sortBy` which uses `comparer` to define the\n   * sort order of `array` and replaces criteria objects with their corresponding\n   * values.\n   *\n   * @private\n   * @param {Array} array The array to sort.\n   * @param {Function} comparer The function to define sort order.\n   * @returns {Array} Returns `array`.\n   */\n  function baseSortBy(array, comparer) {\n    var length = array.length;\n\n    array.sort(comparer);\n    while (length--) {\n      array[length] = array[length].value;\n    }\n    return array;\n  }\n\n  /**\n   * The base implementation of `_.sum` and `_.sumBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the sum.\n   */\n  function baseSum(array, iteratee) {\n    var result,\n        index = -1,\n        length = array.length;\n\n    while (++index < length) {\n      var current = iteratee(array[index]);\n      if (current !== undefined) {\n        result = result === undefined ? current : (result + current);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.times` without support for iteratee shorthands\n   * or max array length checks.\n   *\n   * @private\n   * @param {number} n The number of times to invoke `iteratee`.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the array of results.\n   */\n  function baseTimes(n, iteratee) {\n    var index = -1,\n        result = Array(n);\n\n    while (++index < n) {\n      result[index] = iteratee(index);\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.toPairs` and `_.toPairsIn` which creates an array\n   * of key-value pairs for `object` corresponding to the property names of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the key-value pairs.\n   */\n  function baseToPairs(object, props) {\n    return arrayMap(props, function(key) {\n      return [key, object[key]];\n    });\n  }\n\n  /**\n   * The base implementation of `_.unary` without support for storing metadata.\n   *\n   * @private\n   * @param {Function} func The function to cap arguments for.\n   * @returns {Function} Returns the new capped function.\n   */\n  function baseUnary(func) {\n    return function(value) {\n      return func(value);\n    };\n  }\n\n  /**\n   * The base implementation of `_.values` and `_.valuesIn` which creates an\n   * array of `object` property values corresponding to the property names\n   * of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the array of property values.\n   */\n  function baseValues(object, props) {\n    return arrayMap(props, function(key) {\n      return object[key];\n    });\n  }\n\n  /**\n   * Checks if a `cache` value for `key` exists.\n   *\n   * @private\n   * @param {Object} cache The cache to query.\n   * @param {string} key The key of the entry to check.\n   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n   */\n  function cacheHas(cache, key) {\n    return cache.has(key);\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the first unmatched string symbol.\n   */\n  function charsStartIndex(strSymbols, chrSymbols) {\n    var index = -1,\n        length = strSymbols.length;\n\n    while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the last unmatched string symbol.\n   */\n  function charsEndIndex(strSymbols, chrSymbols) {\n    var index = strSymbols.length;\n\n    while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Gets the number of `placeholder` occurrences in `array`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} placeholder The placeholder to search for.\n   * @returns {number} Returns the placeholder count.\n   */\n  function countHolders(array, placeholder) {\n    var length = array.length,\n        result = 0;\n\n    while (length--) {\n      if (array[length] === placeholder) {\n        ++result;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n   * letters to basic Latin letters.\n   *\n   * @private\n   * @param {string} letter The matched letter to deburr.\n   * @returns {string} Returns the deburred letter.\n   */\n  var deburrLetter = basePropertyOf(deburredLetters);\n\n  /**\n   * Used by `_.escape` to convert characters to HTML entities.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  var escapeHtmlChar = basePropertyOf(htmlEscapes);\n\n  /**\n   * Used by `_.template` to escape characters for inclusion in compiled string literals.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeStringChar(chr) {\n    return '\\\\' + stringEscapes[chr];\n  }\n\n  /**\n   * Gets the value at `key` of `object`.\n   *\n   * @private\n   * @param {Object} [object] The object to query.\n   * @param {string} key The key of the property to get.\n   * @returns {*} Returns the property value.\n   */\n  function getValue(object, key) {\n    return object == null ? undefined : object[key];\n  }\n\n  /**\n   * Checks if `string` contains Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n   */\n  function hasUnicode(string) {\n    return reHasUnicode.test(string);\n  }\n\n  /**\n   * Checks if `string` contains a word composed of Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a word is found, else `false`.\n   */\n  function hasUnicodeWord(string) {\n    return reHasUnicodeWord.test(string);\n  }\n\n  /**\n   * Converts `iterator` to an array.\n   *\n   * @private\n   * @param {Object} iterator The iterator to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function iteratorToArray(iterator) {\n    var data,\n        result = [];\n\n    while (!(data = iterator.next()).done) {\n      result.push(data.value);\n    }\n    return result;\n  }\n\n  /**\n   * Converts `map` to its key-value pairs.\n   *\n   * @private\n   * @param {Object} map The map to convert.\n   * @returns {Array} Returns the key-value pairs.\n   */\n  function mapToArray(map) {\n    var index = -1,\n        result = Array(map.size);\n\n    map.forEach(function(value, key) {\n      result[++index] = [key, value];\n    });\n    return result;\n  }\n\n  /**\n   * Creates a unary function that invokes `func` with its argument transformed.\n   *\n   * @private\n   * @param {Function} func The function to wrap.\n   * @param {Function} transform The argument transform.\n   * @returns {Function} Returns the new function.\n   */\n  function overArg(func, transform) {\n    return function(arg) {\n      return func(transform(arg));\n    };\n  }\n\n  /**\n   * Replaces all `placeholder` elements in `array` with an internal placeholder\n   * and returns an array of their indexes.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {*} placeholder The placeholder to replace.\n   * @returns {Array} Returns the new array of placeholder indexes.\n   */\n  function replaceHolders(array, placeholder) {\n    var index = -1,\n        length = array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (value === placeholder || value === PLACEHOLDER) {\n        array[index] = PLACEHOLDER;\n        result[resIndex++] = index;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Converts `set` to an array of its values.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the values.\n   */\n  function setToArray(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = value;\n    });\n    return result;\n  }\n\n  /**\n   * Converts `set` to its value-value pairs.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the value-value pairs.\n   */\n  function setToPairs(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = [value, value];\n    });\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.indexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictIndexOf(array, value, fromIndex) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * A specialized version of `_.lastIndexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictLastIndexOf(array, value, fromIndex) {\n    var index = fromIndex + 1;\n    while (index--) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return index;\n  }\n\n  /**\n   * Gets the number of symbols in `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the string size.\n   */\n  function stringSize(string) {\n    return hasUnicode(string)\n      ? unicodeSize(string)\n      : asciiSize(string);\n  }\n\n  /**\n   * Converts `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function stringToArray(string) {\n    return hasUnicode(string)\n      ? unicodeToArray(string)\n      : asciiToArray(string);\n  }\n\n  /**\n   * Used by `_.unescape` to convert HTML entities to characters.\n   *\n   * @private\n   * @param {string} chr The matched character to unescape.\n   * @returns {string} Returns the unescaped character.\n   */\n  var unescapeHtmlChar = basePropertyOf(htmlUnescapes);\n\n  /**\n   * Gets the size of a Unicode `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  function unicodeSize(string) {\n    var result = reUnicode.lastIndex = 0;\n    while (reUnicode.test(string)) {\n      ++result;\n    }\n    return result;\n  }\n\n  /**\n   * Converts a Unicode `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function unicodeToArray(string) {\n    return string.match(reUnicode) || [];\n  }\n\n  /**\n   * Splits a Unicode `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function unicodeWords(string) {\n    return string.match(reUnicodeWord) || [];\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Create a new pristine `lodash` function using the `context` object.\n   *\n   * @static\n   * @memberOf _\n   * @since 1.1.0\n   * @category Util\n   * @param {Object} [context=root] The context object.\n   * @returns {Function} Returns a new `lodash` function.\n   * @example\n   *\n   * _.mixin({ 'foo': _.constant('foo') });\n   *\n   * var lodash = _.runInContext();\n   * lodash.mixin({ 'bar': lodash.constant('bar') });\n   *\n   * _.isFunction(_.foo);\n   * // => true\n   * _.isFunction(_.bar);\n   * // => false\n   *\n   * lodash.isFunction(lodash.foo);\n   * // => false\n   * lodash.isFunction(lodash.bar);\n   * // => true\n   *\n   * // Create a suped-up `defer` in Node.js.\n   * var defer = _.runInContext({ 'setTimeout': setImmediate }).defer;\n   */\n  var runInContext = (function runInContext(context) {\n    context = context == null ? root : _.defaults(root.Object(), context, _.pick(root, contextProps));\n\n    /** Built-in constructor references. */\n    var Array = context.Array,\n        Date = context.Date,\n        Error = context.Error,\n        Function = context.Function,\n        Math = context.Math,\n        Object = context.Object,\n        RegExp = context.RegExp,\n        String = context.String,\n        TypeError = context.TypeError;\n\n    /** Used for built-in method references. */\n    var arrayProto = Array.prototype,\n        funcProto = Function.prototype,\n        objectProto = Object.prototype;\n\n    /** Used to detect overreaching core-js shims. */\n    var coreJsData = context['__core-js_shared__'];\n\n    /** Used to resolve the decompiled source of functions. */\n    var funcToString = funcProto.toString;\n\n    /** Used to check objects for own properties. */\n    var hasOwnProperty = objectProto.hasOwnProperty;\n\n    /** Used to generate unique IDs. */\n    var idCounter = 0;\n\n    /** Used to detect methods masquerading as native. */\n    var maskSrcKey = (function() {\n      var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n      return uid ? ('Symbol(src)_1.' + uid) : '';\n    }());\n\n    /**\n     * Used to resolve the\n     * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n     * of values.\n     */\n    var nativeObjectToString = objectProto.toString;\n\n    /** Used to infer the `Object` constructor. */\n    var objectCtorString = funcToString.call(Object);\n\n    /** Used to restore the original `_` reference in `_.noConflict`. */\n    var oldDash = root._;\n\n    /** Used to detect if a method is native. */\n    var reIsNative = RegExp('^' +\n      funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n      .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n    );\n\n    /** Built-in value references. */\n    var Buffer = moduleExports ? context.Buffer : undefined,\n        Symbol = context.Symbol,\n        Uint8Array = context.Uint8Array,\n        allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,\n        getPrototype = overArg(Object.getPrototypeOf, Object),\n        objectCreate = Object.create,\n        propertyIsEnumerable = objectProto.propertyIsEnumerable,\n        splice = arrayProto.splice,\n        spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined,\n        symIterator = Symbol ? Symbol.iterator : undefined,\n        symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n    var defineProperty = (function() {\n      try {\n        var func = getNative(Object, 'defineProperty');\n        func({}, '', {});\n        return func;\n      } catch (e) {}\n    }());\n\n    /** Mocked built-ins. */\n    var ctxClearTimeout = context.clearTimeout !== root.clearTimeout && context.clearTimeout,\n        ctxNow = Date && Date.now !== root.Date.now && Date.now,\n        ctxSetTimeout = context.setTimeout !== root.setTimeout && context.setTimeout;\n\n    /* Built-in method references for those with the same name as other `lodash` methods. */\n    var nativeCeil = Math.ceil,\n        nativeFloor = Math.floor,\n        nativeGetSymbols = Object.getOwnPropertySymbols,\n        nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n        nativeIsFinite = context.isFinite,\n        nativeJoin = arrayProto.join,\n        nativeKeys = overArg(Object.keys, Object),\n        nativeMax = Math.max,\n        nativeMin = Math.min,\n        nativeNow = Date.now,\n        nativeParseInt = context.parseInt,\n        nativeRandom = Math.random,\n        nativeReverse = arrayProto.reverse;\n\n    /* Built-in method references that are verified to be native. */\n    var DataView = getNative(context, 'DataView'),\n        Map = getNative(context, 'Map'),\n        Promise = getNative(context, 'Promise'),\n        Set = getNative(context, 'Set'),\n        WeakMap = getNative(context, 'WeakMap'),\n        nativeCreate = getNative(Object, 'create');\n\n    /** Used to store function metadata. */\n    var metaMap = WeakMap && new WeakMap;\n\n    /** Used to lookup unminified function names. */\n    var realNames = {};\n\n    /** Used to detect maps, sets, and weakmaps. */\n    var dataViewCtorString = toSource(DataView),\n        mapCtorString = toSource(Map),\n        promiseCtorString = toSource(Promise),\n        setCtorString = toSource(Set),\n        weakMapCtorString = toSource(WeakMap);\n\n    /** Used to convert symbols to primitives and strings. */\n    var symbolProto = Symbol ? Symbol.prototype : undefined,\n        symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,\n        symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object which wraps `value` to enable implicit method\n     * chain sequences. Methods that operate on and return arrays, collections,\n     * and functions can be chained together. Methods that retrieve a single value\n     * or may return a primitive value will automatically end the chain sequence\n     * and return the unwrapped value. Otherwise, the value must be unwrapped\n     * with `_#value`.\n     *\n     * Explicit chain sequences, which must be unwrapped with `_#value`, may be\n     * enabled using `_.chain`.\n     *\n     * The execution of chained methods is lazy, that is, it's deferred until\n     * `_#value` is implicitly or explicitly called.\n     *\n     * Lazy evaluation allows several methods to support shortcut fusion.\n     * Shortcut fusion is an optimization to merge iteratee calls; this avoids\n     * the creation of intermediate arrays and can greatly reduce the number of\n     * iteratee executions. Sections of a chain sequence qualify for shortcut\n     * fusion if the section is applied to an array and iteratees accept only\n     * one argument. The heuristic for whether a section qualifies for shortcut\n     * fusion is subject to change.\n     *\n     * Chaining is supported in custom builds as long as the `_#value` method is\n     * directly or indirectly included in the build.\n     *\n     * In addition to lodash methods, wrappers have `Array` and `String` methods.\n     *\n     * The wrapper `Array` methods are:\n     * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`\n     *\n     * The wrapper `String` methods are:\n     * `replace` and `split`\n     *\n     * The wrapper methods that support shortcut fusion are:\n     * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,\n     * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,\n     * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`\n     *\n     * The chainable wrapper methods are:\n     * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,\n     * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,\n     * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,\n     * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,\n     * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,\n     * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,\n     * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,\n     * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,\n     * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,\n     * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,\n     * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\n     * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,\n     * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,\n     * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,\n     * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,\n     * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,\n     * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,\n     * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,\n     * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,\n     * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,\n     * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,\n     * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,\n     * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,\n     * `zipObject`, `zipObjectDeep`, and `zipWith`\n     *\n     * The wrapper methods that are **not** chainable by default are:\n     * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,\n     * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,\n     * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,\n     * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,\n     * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,\n     * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,\n     * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,\n     * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,\n     * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,\n     * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,\n     * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,\n     * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,\n     * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,\n     * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,\n     * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,\n     * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,\n     * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,\n     * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,\n     * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,\n     * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,\n     * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,\n     * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,\n     * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,\n     * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,\n     * `upperFirst`, `value`, and `words`\n     *\n     * @name _\n     * @constructor\n     * @category Seq\n     * @param {*} value The value to wrap in a `lodash` instance.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2, 3]);\n     *\n     * // Returns an unwrapped value.\n     * wrapped.reduce(_.add);\n     * // => 6\n     *\n     * // Returns a wrapped value.\n     * var squares = wrapped.map(square);\n     *\n     * _.isArray(squares);\n     * // => false\n     *\n     * _.isArray(squares.value());\n     * // => true\n     */\n    function lodash(value) {\n      if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n        if (value instanceof LodashWrapper) {\n          return value;\n        }\n        if (hasOwnProperty.call(value, '__wrapped__')) {\n          return wrapperClone(value);\n        }\n      }\n      return new LodashWrapper(value);\n    }\n\n    /**\n     * The base implementation of `_.create` without support for assigning\n     * properties to the created object.\n     *\n     * @private\n     * @param {Object} proto The object to inherit from.\n     * @returns {Object} Returns the new object.\n     */\n    var baseCreate = (function() {\n      function object() {}\n      return function(proto) {\n        if (!isObject(proto)) {\n          return {};\n        }\n        if (objectCreate) {\n          return objectCreate(proto);\n        }\n        object.prototype = proto;\n        var result = new object;\n        object.prototype = undefined;\n        return result;\n      };\n    }());\n\n    /**\n     * The function whose prototype chain sequence wrappers inherit from.\n     *\n     * @private\n     */\n    function baseLodash() {\n      // No operation performed.\n    }\n\n    /**\n     * The base constructor for creating `lodash` wrapper objects.\n     *\n     * @private\n     * @param {*} value The value to wrap.\n     * @param {boolean} [chainAll] Enable explicit method chain sequences.\n     */\n    function LodashWrapper(value, chainAll) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__chain__ = !!chainAll;\n      this.__index__ = 0;\n      this.__values__ = undefined;\n    }\n\n    /**\n     * By default, the template delimiters used by lodash are like those in\n     * embedded Ruby (ERB) as well as ES2015 template strings. Change the\n     * following template settings to use alternative delimiters.\n     *\n     * @static\n     * @memberOf _\n     * @type {Object}\n     */\n    lodash.templateSettings = {\n\n      /**\n       * Used to detect `data` property values to be HTML-escaped.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'escape': reEscape,\n\n      /**\n       * Used to detect code to be evaluated.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'evaluate': reEvaluate,\n\n      /**\n       * Used to detect `data` property values to inject.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'interpolate': reInterpolate,\n\n      /**\n       * Used to reference the data object in the template text.\n       *\n       * @memberOf _.templateSettings\n       * @type {string}\n       */\n      'variable': '',\n\n      /**\n       * Used to import variables into the compiled template.\n       *\n       * @memberOf _.templateSettings\n       * @type {Object}\n       */\n      'imports': {\n\n        /**\n         * A reference to the `lodash` function.\n         *\n         * @memberOf _.templateSettings.imports\n         * @type {Function}\n         */\n        '_': lodash\n      }\n    };\n\n    // Ensure wrappers are instances of `baseLodash`.\n    lodash.prototype = baseLodash.prototype;\n    lodash.prototype.constructor = lodash;\n\n    LodashWrapper.prototype = baseCreate(baseLodash.prototype);\n    LodashWrapper.prototype.constructor = LodashWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n     *\n     * @private\n     * @constructor\n     * @param {*} value The value to wrap.\n     */\n    function LazyWrapper(value) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__dir__ = 1;\n      this.__filtered__ = false;\n      this.__iteratees__ = [];\n      this.__takeCount__ = MAX_ARRAY_LENGTH;\n      this.__views__ = [];\n    }\n\n    /**\n     * Creates a clone of the lazy wrapper object.\n     *\n     * @private\n     * @name clone\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the cloned `LazyWrapper` object.\n     */\n    function lazyClone() {\n      var result = new LazyWrapper(this.__wrapped__);\n      result.__actions__ = copyArray(this.__actions__);\n      result.__dir__ = this.__dir__;\n      result.__filtered__ = this.__filtered__;\n      result.__iteratees__ = copyArray(this.__iteratees__);\n      result.__takeCount__ = this.__takeCount__;\n      result.__views__ = copyArray(this.__views__);\n      return result;\n    }\n\n    /**\n     * Reverses the direction of lazy iteration.\n     *\n     * @private\n     * @name reverse\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the new reversed `LazyWrapper` object.\n     */\n    function lazyReverse() {\n      if (this.__filtered__) {\n        var result = new LazyWrapper(this);\n        result.__dir__ = -1;\n        result.__filtered__ = true;\n      } else {\n        result = this.clone();\n        result.__dir__ *= -1;\n      }\n      return result;\n    }\n\n    /**\n     * Extracts the unwrapped value from its lazy wrapper.\n     *\n     * @private\n     * @name value\n     * @memberOf LazyWrapper\n     * @returns {*} Returns the unwrapped value.\n     */\n    function lazyValue() {\n      var array = this.__wrapped__.value(),\n          dir = this.__dir__,\n          isArr = isArray(array),\n          isRight = dir < 0,\n          arrLength = isArr ? array.length : 0,\n          view = getView(0, arrLength, this.__views__),\n          start = view.start,\n          end = view.end,\n          length = end - start,\n          index = isRight ? end : (start - 1),\n          iteratees = this.__iteratees__,\n          iterLength = iteratees.length,\n          resIndex = 0,\n          takeCount = nativeMin(length, this.__takeCount__);\n\n      if (!isArr || (!isRight && arrLength == length && takeCount == length)) {\n        return baseWrapperValue(array, this.__actions__);\n      }\n      var result = [];\n\n      outer:\n      while (length-- && resIndex < takeCount) {\n        index += dir;\n\n        var iterIndex = -1,\n            value = array[index];\n\n        while (++iterIndex < iterLength) {\n          var data = iteratees[iterIndex],\n              iteratee = data.iteratee,\n              type = data.type,\n              computed = iteratee(value);\n\n          if (type == LAZY_MAP_FLAG) {\n            value = computed;\n          } else if (!computed) {\n            if (type == LAZY_FILTER_FLAG) {\n              continue outer;\n            } else {\n              break outer;\n            }\n          }\n        }\n        result[resIndex++] = value;\n      }\n      return result;\n    }\n\n    // Ensure `LazyWrapper` is an instance of `baseLodash`.\n    LazyWrapper.prototype = baseCreate(baseLodash.prototype);\n    LazyWrapper.prototype.constructor = LazyWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a hash object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Hash(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the hash.\n     *\n     * @private\n     * @name clear\n     * @memberOf Hash\n     */\n    function hashClear() {\n      this.__data__ = nativeCreate ? nativeCreate(null) : {};\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the hash.\n     *\n     * @private\n     * @name delete\n     * @memberOf Hash\n     * @param {Object} hash The hash to modify.\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function hashDelete(key) {\n      var result = this.has(key) && delete this.__data__[key];\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the hash value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Hash\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function hashGet(key) {\n      var data = this.__data__;\n      if (nativeCreate) {\n        var result = data[key];\n        return result === HASH_UNDEFINED ? undefined : result;\n      }\n      return hasOwnProperty.call(data, key) ? data[key] : undefined;\n    }\n\n    /**\n     * Checks if a hash value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Hash\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function hashHas(key) {\n      var data = this.__data__;\n      return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n    }\n\n    /**\n     * Sets the hash `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Hash\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the hash instance.\n     */\n    function hashSet(key, value) {\n      var data = this.__data__;\n      this.size += this.has(key) ? 0 : 1;\n      data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n      return this;\n    }\n\n    // Add methods to `Hash`.\n    Hash.prototype.clear = hashClear;\n    Hash.prototype['delete'] = hashDelete;\n    Hash.prototype.get = hashGet;\n    Hash.prototype.has = hashHas;\n    Hash.prototype.set = hashSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an list cache object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function ListCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the list cache.\n     *\n     * @private\n     * @name clear\n     * @memberOf ListCache\n     */\n    function listCacheClear() {\n      this.__data__ = [];\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the list cache.\n     *\n     * @private\n     * @name delete\n     * @memberOf ListCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function listCacheDelete(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        return false;\n      }\n      var lastIndex = data.length - 1;\n      if (index == lastIndex) {\n        data.pop();\n      } else {\n        splice.call(data, index, 1);\n      }\n      --this.size;\n      return true;\n    }\n\n    /**\n     * Gets the list cache value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf ListCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function listCacheGet(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      return index < 0 ? undefined : data[index][1];\n    }\n\n    /**\n     * Checks if a list cache value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf ListCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function listCacheHas(key) {\n      return assocIndexOf(this.__data__, key) > -1;\n    }\n\n    /**\n     * Sets the list cache `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf ListCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the list cache instance.\n     */\n    function listCacheSet(key, value) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        ++this.size;\n        data.push([key, value]);\n      } else {\n        data[index][1] = value;\n      }\n      return this;\n    }\n\n    // Add methods to `ListCache`.\n    ListCache.prototype.clear = listCacheClear;\n    ListCache.prototype['delete'] = listCacheDelete;\n    ListCache.prototype.get = listCacheGet;\n    ListCache.prototype.has = listCacheHas;\n    ListCache.prototype.set = listCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a map cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function MapCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the map.\n     *\n     * @private\n     * @name clear\n     * @memberOf MapCache\n     */\n    function mapCacheClear() {\n      this.size = 0;\n      this.__data__ = {\n        'hash': new Hash,\n        'map': new (Map || ListCache),\n        'string': new Hash\n      };\n    }\n\n    /**\n     * Removes `key` and its value from the map.\n     *\n     * @private\n     * @name delete\n     * @memberOf MapCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function mapCacheDelete(key) {\n      var result = getMapData(this, key)['delete'](key);\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the map value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf MapCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function mapCacheGet(key) {\n      return getMapData(this, key).get(key);\n    }\n\n    /**\n     * Checks if a map value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf MapCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function mapCacheHas(key) {\n      return getMapData(this, key).has(key);\n    }\n\n    /**\n     * Sets the map `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf MapCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the map cache instance.\n     */\n    function mapCacheSet(key, value) {\n      var data = getMapData(this, key),\n          size = data.size;\n\n      data.set(key, value);\n      this.size += data.size == size ? 0 : 1;\n      return this;\n    }\n\n    // Add methods to `MapCache`.\n    MapCache.prototype.clear = mapCacheClear;\n    MapCache.prototype['delete'] = mapCacheDelete;\n    MapCache.prototype.get = mapCacheGet;\n    MapCache.prototype.has = mapCacheHas;\n    MapCache.prototype.set = mapCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     *\n     * Creates an array cache object to store unique values.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [values] The values to cache.\n     */\n    function SetCache(values) {\n      var index = -1,\n          length = values == null ? 0 : values.length;\n\n      this.__data__ = new MapCache;\n      while (++index < length) {\n        this.add(values[index]);\n      }\n    }\n\n    /**\n     * Adds `value` to the array cache.\n     *\n     * @private\n     * @name add\n     * @memberOf SetCache\n     * @alias push\n     * @param {*} value The value to cache.\n     * @returns {Object} Returns the cache instance.\n     */\n    function setCacheAdd(value) {\n      this.__data__.set(value, HASH_UNDEFINED);\n      return this;\n    }\n\n    /**\n     * Checks if `value` is in the array cache.\n     *\n     * @private\n     * @name has\n     * @memberOf SetCache\n     * @param {*} value The value to search for.\n     * @returns {number} Returns `true` if `value` is found, else `false`.\n     */\n    function setCacheHas(value) {\n      return this.__data__.has(value);\n    }\n\n    // Add methods to `SetCache`.\n    SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\n    SetCache.prototype.has = setCacheHas;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a stack cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Stack(entries) {\n      var data = this.__data__ = new ListCache(entries);\n      this.size = data.size;\n    }\n\n    /**\n     * Removes all key-value entries from the stack.\n     *\n     * @private\n     * @name clear\n     * @memberOf Stack\n     */\n    function stackClear() {\n      this.__data__ = new ListCache;\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the stack.\n     *\n     * @private\n     * @name delete\n     * @memberOf Stack\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function stackDelete(key) {\n      var data = this.__data__,\n          result = data['delete'](key);\n\n      this.size = data.size;\n      return result;\n    }\n\n    /**\n     * Gets the stack value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Stack\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function stackGet(key) {\n      return this.__data__.get(key);\n    }\n\n    /**\n     * Checks if a stack value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Stack\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function stackHas(key) {\n      return this.__data__.has(key);\n    }\n\n    /**\n     * Sets the stack `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Stack\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the stack cache instance.\n     */\n    function stackSet(key, value) {\n      var data = this.__data__;\n      if (data instanceof ListCache) {\n        var pairs = data.__data__;\n        if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n          pairs.push([key, value]);\n          this.size = ++data.size;\n          return this;\n        }\n        data = this.__data__ = new MapCache(pairs);\n      }\n      data.set(key, value);\n      this.size = data.size;\n      return this;\n    }\n\n    // Add methods to `Stack`.\n    Stack.prototype.clear = stackClear;\n    Stack.prototype['delete'] = stackDelete;\n    Stack.prototype.get = stackGet;\n    Stack.prototype.has = stackHas;\n    Stack.prototype.set = stackSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of the enumerable property names of the array-like `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @param {boolean} inherited Specify returning inherited property names.\n     * @returns {Array} Returns the array of property names.\n     */\n    function arrayLikeKeys(value, inherited) {\n      var isArr = isArray(value),\n          isArg = !isArr && isArguments(value),\n          isBuff = !isArr && !isArg && isBuffer(value),\n          isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n          skipIndexes = isArr || isArg || isBuff || isType,\n          result = skipIndexes ? baseTimes(value.length, String) : [],\n          length = result.length;\n\n      for (var key in value) {\n        if ((inherited || hasOwnProperty.call(value, key)) &&\n            !(skipIndexes && (\n               // Safari 9 has enumerable `arguments.length` in strict mode.\n               key == 'length' ||\n               // Node.js 0.10 has enumerable non-index properties on buffers.\n               (isBuff && (key == 'offset' || key == 'parent')) ||\n               // PhantomJS 2 has enumerable non-index properties on typed arrays.\n               (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n               // Skip index properties.\n               isIndex(key, length)\n            ))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `_.sample` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @returns {*} Returns the random element.\n     */\n    function arraySample(array) {\n      var length = array.length;\n      return length ? array[baseRandom(0, length - 1)] : undefined;\n    }\n\n    /**\n     * A specialized version of `_.sampleSize` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function arraySampleSize(array, n) {\n      return shuffleSelf(copyArray(array), baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * A specialized version of `_.shuffle` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function arrayShuffle(array) {\n      return shuffleSelf(copyArray(array));\n    }\n\n    /**\n     * This function is like `assignValue` except that it doesn't assign\n     * `undefined` values.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignMergeValue(object, key, value) {\n      if ((value !== undefined && !eq(object[key], value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Assigns `value` to `key` of `object` if the existing value is not equivalent\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignValue(object, key, value) {\n      var objValue = object[key];\n      if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Gets the index at which the `key` is found in `array` of key-value pairs.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {*} key The key to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     */\n    function assocIndexOf(array, key) {\n      var length = array.length;\n      while (length--) {\n        if (eq(array[length][0], key)) {\n          return length;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Aggregates elements of `collection` on `accumulator` with keys transformed\n     * by `iteratee` and values set by `setter`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform keys.\n     * @param {Object} accumulator The initial aggregated object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseAggregator(collection, setter, iteratee, accumulator) {\n      baseEach(collection, function(value, key, collection) {\n        setter(accumulator, value, iteratee(value), collection);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.assign` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssign(object, source) {\n      return object && copyObject(source, keys(source), object);\n    }\n\n    /**\n     * The base implementation of `_.assignIn` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssignIn(object, source) {\n      return object && copyObject(source, keysIn(source), object);\n    }\n\n    /**\n     * The base implementation of `assignValue` and `assignMergeValue` without\n     * value checks.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function baseAssignValue(object, key, value) {\n      if (key == '__proto__' && defineProperty) {\n        defineProperty(object, key, {\n          'configurable': true,\n          'enumerable': true,\n          'value': value,\n          'writable': true\n        });\n      } else {\n        object[key] = value;\n      }\n    }\n\n    /**\n     * The base implementation of `_.at` without support for individual paths.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Array} Returns the picked elements.\n     */\n    function baseAt(object, paths) {\n      var index = -1,\n          length = paths.length,\n          result = Array(length),\n          skip = object == null;\n\n      while (++index < length) {\n        result[index] = skip ? undefined : get(object, paths[index]);\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.clamp` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     */\n    function baseClamp(number, lower, upper) {\n      if (number === number) {\n        if (upper !== undefined) {\n          number = number <= upper ? number : upper;\n        }\n        if (lower !== undefined) {\n          number = number >= lower ? number : lower;\n        }\n      }\n      return number;\n    }\n\n    /**\n     * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n     * traversed objects.\n     *\n     * @private\n     * @param {*} value The value to clone.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Deep clone\n     *  2 - Flatten inherited properties\n     *  4 - Clone symbols\n     * @param {Function} [customizer] The function to customize cloning.\n     * @param {string} [key] The key of `value`.\n     * @param {Object} [object] The parent object of `value`.\n     * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n     * @returns {*} Returns the cloned value.\n     */\n    function baseClone(value, bitmask, customizer, key, object, stack) {\n      var result,\n          isDeep = bitmask & CLONE_DEEP_FLAG,\n          isFlat = bitmask & CLONE_FLAT_FLAG,\n          isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n      if (customizer) {\n        result = object ? customizer(value, key, object, stack) : customizer(value);\n      }\n      if (result !== undefined) {\n        return result;\n      }\n      if (!isObject(value)) {\n        return value;\n      }\n      var isArr = isArray(value);\n      if (isArr) {\n        result = initCloneArray(value);\n        if (!isDeep) {\n          return copyArray(value, result);\n        }\n      } else {\n        var tag = getTag(value),\n            isFunc = tag == funcTag || tag == genTag;\n\n        if (isBuffer(value)) {\n          return cloneBuffer(value, isDeep);\n        }\n        if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n          result = (isFlat || isFunc) ? {} : initCloneObject(value);\n          if (!isDeep) {\n            return isFlat\n              ? copySymbolsIn(value, baseAssignIn(result, value))\n              : copySymbols(value, baseAssign(result, value));\n          }\n        } else {\n          if (!cloneableTags[tag]) {\n            return object ? value : {};\n          }\n          result = initCloneByTag(value, tag, isDeep);\n        }\n      }\n      // Check for circular references and return its corresponding clone.\n      stack || (stack = new Stack);\n      var stacked = stack.get(value);\n      if (stacked) {\n        return stacked;\n      }\n      stack.set(value, result);\n\n      if (isSet(value)) {\n        value.forEach(function(subValue) {\n          result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n        });\n      } else if (isMap(value)) {\n        value.forEach(function(subValue, key) {\n          result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n        });\n      }\n\n      var keysFunc = isFull\n        ? (isFlat ? getAllKeysIn : getAllKeys)\n        : (isFlat ? keysIn : keys);\n\n      var props = isArr ? undefined : keysFunc(value);\n      arrayEach(props || value, function(subValue, key) {\n        if (props) {\n          key = subValue;\n          subValue = value[key];\n        }\n        // Recursively populate clone (susceptible to call stack limits).\n        assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.conforms` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseConforms(source) {\n      var props = keys(source);\n      return function(object) {\n        return baseConformsTo(object, source, props);\n      };\n    }\n\n    /**\n     * The base implementation of `_.conformsTo` which accepts `props` to check.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     */\n    function baseConformsTo(object, source, props) {\n      var length = props.length;\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (length--) {\n        var key = props[length],\n            predicate = source[key],\n            value = object[key];\n\n        if ((value === undefined && !(key in object)) || !predicate(value)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.delay` and `_.defer` which accepts `args`\n     * to provide to `func`.\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {Array} args The arguments to provide to `func`.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    function baseDelay(func, wait, args) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return setTimeout(function() { func.apply(undefined, args); }, wait);\n    }\n\n    /**\n     * The base implementation of methods like `_.difference` without support\n     * for excluding multiple arrays or iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Array} values The values to exclude.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     */\n    function baseDifference(array, values, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          isCommon = true,\n          length = array.length,\n          result = [],\n          valuesLength = values.length;\n\n      if (!length) {\n        return result;\n      }\n      if (iteratee) {\n        values = arrayMap(values, baseUnary(iteratee));\n      }\n      if (comparator) {\n        includes = arrayIncludesWith;\n        isCommon = false;\n      }\n      else if (values.length >= LARGE_ARRAY_SIZE) {\n        includes = cacheHas;\n        isCommon = false;\n        values = new SetCache(values);\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee == null ? value : iteratee(value);\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var valuesIndex = valuesLength;\n          while (valuesIndex--) {\n            if (values[valuesIndex] === computed) {\n              continue outer;\n            }\n          }\n          result.push(value);\n        }\n        else if (!includes(values, computed, comparator)) {\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.forEach` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEach = createBaseEach(baseForOwn);\n\n    /**\n     * The base implementation of `_.forEachRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEachRight = createBaseEach(baseForOwnRight, true);\n\n    /**\n     * The base implementation of `_.every` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`\n     */\n    function baseEvery(collection, predicate) {\n      var result = true;\n      baseEach(collection, function(value, index, collection) {\n        result = !!predicate(value, index, collection);\n        return result;\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of methods like `_.max` and `_.min` which accepts a\n     * `comparator` to determine the extremum value.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The iteratee invoked per iteration.\n     * @param {Function} comparator The comparator used to compare values.\n     * @returns {*} Returns the extremum value.\n     */\n    function baseExtremum(array, iteratee, comparator) {\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        var value = array[index],\n            current = iteratee(value);\n\n        if (current != null && (computed === undefined\n              ? (current === current && !isSymbol(current))\n              : comparator(current, computed)\n            )) {\n          var computed = current,\n              result = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.fill` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     */\n    function baseFill(array, value, start, end) {\n      var length = array.length;\n\n      start = toInteger(start);\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = (end === undefined || end > length) ? length : toInteger(end);\n      if (end < 0) {\n        end += length;\n      }\n      end = start > end ? 0 : toLength(end);\n      while (start < end) {\n        array[start++] = value;\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.filter` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     */\n    function baseFilter(collection, predicate) {\n      var result = [];\n      baseEach(collection, function(value, index, collection) {\n        if (predicate(value, index, collection)) {\n          result.push(value);\n        }\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.flatten` with support for restricting flattening.\n     *\n     * @private\n     * @param {Array} array The array to flatten.\n     * @param {number} depth The maximum recursion depth.\n     * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n     * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n     * @param {Array} [result=[]] The initial result value.\n     * @returns {Array} Returns the new flattened array.\n     */\n    function baseFlatten(array, depth, predicate, isStrict, result) {\n      var index = -1,\n          length = array.length;\n\n      predicate || (predicate = isFlattenable);\n      result || (result = []);\n\n      while (++index < length) {\n        var value = array[index];\n        if (depth > 0 && predicate(value)) {\n          if (depth > 1) {\n            // Recursively flatten arrays (susceptible to call stack limits).\n            baseFlatten(value, depth - 1, predicate, isStrict, result);\n          } else {\n            arrayPush(result, value);\n          }\n        } else if (!isStrict) {\n          result[result.length] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `baseForOwn` which iterates over `object`\n     * properties returned by `keysFunc` and invokes `iteratee` for each property.\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseFor = createBaseFor();\n\n    /**\n     * This function is like `baseFor` except that it iterates over properties\n     * in the opposite order.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseForRight = createBaseFor(true);\n\n    /**\n     * The base implementation of `_.forOwn` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwn(object, iteratee) {\n      return object && baseFor(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.forOwnRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwnRight(object, iteratee) {\n      return object && baseForRight(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.functions` which creates an array of\n     * `object` function property names filtered from `props`.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Array} props The property names to filter.\n     * @returns {Array} Returns the function names.\n     */\n    function baseFunctions(object, props) {\n      return arrayFilter(props, function(key) {\n        return isFunction(object[key]);\n      });\n    }\n\n    /**\n     * The base implementation of `_.get` without support for default values.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseGet(object, path) {\n      path = castPath(path, object);\n\n      var index = 0,\n          length = path.length;\n\n      while (object != null && index < length) {\n        object = object[toKey(path[index++])];\n      }\n      return (index && index == length) ? object : undefined;\n    }\n\n    /**\n     * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n     * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @param {Function} symbolsFunc The function to get the symbols of `object`.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function baseGetAllKeys(object, keysFunc, symbolsFunc) {\n      var result = keysFunc(object);\n      return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n    }\n\n    /**\n     * The base implementation of `getTag` without fallbacks for buggy environments.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    function baseGetTag(value) {\n      if (value == null) {\n        return value === undefined ? undefinedTag : nullTag;\n      }\n      return (symToStringTag && symToStringTag in Object(value))\n        ? getRawTag(value)\n        : objectToString(value);\n    }\n\n    /**\n     * The base implementation of `_.gt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     */\n    function baseGt(value, other) {\n      return value > other;\n    }\n\n    /**\n     * The base implementation of `_.has` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHas(object, key) {\n      return object != null && hasOwnProperty.call(object, key);\n    }\n\n    /**\n     * The base implementation of `_.hasIn` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHasIn(object, key) {\n      return object != null && key in Object(object);\n    }\n\n    /**\n     * The base implementation of `_.inRange` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to check.\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     */\n    function baseInRange(number, start, end) {\n      return number >= nativeMin(start, end) && number < nativeMax(start, end);\n    }\n\n    /**\n     * The base implementation of methods like `_.intersection`, without support\n     * for iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of shared values.\n     */\n    function baseIntersection(arrays, iteratee, comparator) {\n      var includes = comparator ? arrayIncludesWith : arrayIncludes,\n          length = arrays[0].length,\n          othLength = arrays.length,\n          othIndex = othLength,\n          caches = Array(othLength),\n          maxLength = Infinity,\n          result = [];\n\n      while (othIndex--) {\n        var array = arrays[othIndex];\n        if (othIndex && iteratee) {\n          array = arrayMap(array, baseUnary(iteratee));\n        }\n        maxLength = nativeMin(array.length, maxLength);\n        caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n          ? new SetCache(othIndex && array)\n          : undefined;\n      }\n      array = arrays[0];\n\n      var index = -1,\n          seen = caches[0];\n\n      outer:\n      while (++index < length && result.length < maxLength) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (!(seen\n              ? cacheHas(seen, computed)\n              : includes(result, computed, comparator)\n            )) {\n          othIndex = othLength;\n          while (--othIndex) {\n            var cache = caches[othIndex];\n            if (!(cache\n                  ? cacheHas(cache, computed)\n                  : includes(arrays[othIndex], computed, comparator))\n                ) {\n              continue outer;\n            }\n          }\n          if (seen) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.invert` and `_.invertBy` which inverts\n     * `object` with values transformed by `iteratee` and set by `setter`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform values.\n     * @param {Object} accumulator The initial inverted object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseInverter(object, setter, iteratee, accumulator) {\n      baseForOwn(object, function(value, key, object) {\n        setter(accumulator, iteratee(value), key, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.invoke` without support for individual\n     * method arguments.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {Array} args The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     */\n    function baseInvoke(object, path, args) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      var func = object == null ? object : object[toKey(last(path))];\n      return func == null ? undefined : apply(func, object, args);\n    }\n\n    /**\n     * The base implementation of `_.isArguments`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     */\n    function baseIsArguments(value) {\n      return isObjectLike(value) && baseGetTag(value) == argsTag;\n    }\n\n    /**\n     * The base implementation of `_.isArrayBuffer` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     */\n    function baseIsArrayBuffer(value) {\n      return isObjectLike(value) && baseGetTag(value) == arrayBufferTag;\n    }\n\n    /**\n     * The base implementation of `_.isDate` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     */\n    function baseIsDate(value) {\n      return isObjectLike(value) && baseGetTag(value) == dateTag;\n    }\n\n    /**\n     * The base implementation of `_.isEqual` which supports partial comparisons\n     * and tracks traversed objects.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Unordered comparison\n     *  2 - Partial comparison\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     */\n    function baseIsEqual(value, other, bitmask, customizer, stack) {\n      if (value === other) {\n        return true;\n      }\n      if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n        return value !== value && other !== other;\n      }\n      return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n    }\n\n    /**\n     * A specialized version of `baseIsEqual` for arrays and objects which performs\n     * deep comparisons and tracks traversed objects enabling objects with circular\n     * references to be compared.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n      var objIsArr = isArray(object),\n          othIsArr = isArray(other),\n          objTag = objIsArr ? arrayTag : getTag(object),\n          othTag = othIsArr ? arrayTag : getTag(other);\n\n      objTag = objTag == argsTag ? objectTag : objTag;\n      othTag = othTag == argsTag ? objectTag : othTag;\n\n      var objIsObj = objTag == objectTag,\n          othIsObj = othTag == objectTag,\n          isSameTag = objTag == othTag;\n\n      if (isSameTag && isBuffer(object)) {\n        if (!isBuffer(other)) {\n          return false;\n        }\n        objIsArr = true;\n        objIsObj = false;\n      }\n      if (isSameTag && !objIsObj) {\n        stack || (stack = new Stack);\n        return (objIsArr || isTypedArray(object))\n          ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n          : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n      }\n      if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n        var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n        if (objIsWrapped || othIsWrapped) {\n          var objUnwrapped = objIsWrapped ? object.value() : object,\n              othUnwrapped = othIsWrapped ? other.value() : other;\n\n          stack || (stack = new Stack);\n          return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n        }\n      }\n      if (!isSameTag) {\n        return false;\n      }\n      stack || (stack = new Stack);\n      return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n    }\n\n    /**\n     * The base implementation of `_.isMap` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     */\n    function baseIsMap(value) {\n      return isObjectLike(value) && getTag(value) == mapTag;\n    }\n\n    /**\n     * The base implementation of `_.isMatch` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Array} matchData The property names, values, and compare flags to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     */\n    function baseIsMatch(object, source, matchData, customizer) {\n      var index = matchData.length,\n          length = index,\n          noCustomizer = !customizer;\n\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (index--) {\n        var data = matchData[index];\n        if ((noCustomizer && data[2])\n              ? data[1] !== object[data[0]]\n              : !(data[0] in object)\n            ) {\n          return false;\n        }\n      }\n      while (++index < length) {\n        data = matchData[index];\n        var key = data[0],\n            objValue = object[key],\n            srcValue = data[1];\n\n        if (noCustomizer && data[2]) {\n          if (objValue === undefined && !(key in object)) {\n            return false;\n          }\n        } else {\n          var stack = new Stack;\n          if (customizer) {\n            var result = customizer(objValue, srcValue, key, object, source, stack);\n          }\n          if (!(result === undefined\n                ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n                : result\n              )) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.isNative` without bad shim checks.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     */\n    function baseIsNative(value) {\n      if (!isObject(value) || isMasked(value)) {\n        return false;\n      }\n      var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n      return pattern.test(toSource(value));\n    }\n\n    /**\n     * The base implementation of `_.isRegExp` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     */\n    function baseIsRegExp(value) {\n      return isObjectLike(value) && baseGetTag(value) == regexpTag;\n    }\n\n    /**\n     * The base implementation of `_.isSet` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     */\n    function baseIsSet(value) {\n      return isObjectLike(value) && getTag(value) == setTag;\n    }\n\n    /**\n     * The base implementation of `_.isTypedArray` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     */\n    function baseIsTypedArray(value) {\n      return isObjectLike(value) &&\n        isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n    }\n\n    /**\n     * The base implementation of `_.iteratee`.\n     *\n     * @private\n     * @param {*} [value=_.identity] The value to convert to an iteratee.\n     * @returns {Function} Returns the iteratee.\n     */\n    function baseIteratee(value) {\n      // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n      // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n      if (typeof value == 'function') {\n        return value;\n      }\n      if (value == null) {\n        return identity;\n      }\n      if (typeof value == 'object') {\n        return isArray(value)\n          ? baseMatchesProperty(value[0], value[1])\n          : baseMatches(value);\n      }\n      return property(value);\n    }\n\n    /**\n     * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeys(object) {\n      if (!isPrototype(object)) {\n        return nativeKeys(object);\n      }\n      var result = [];\n      for (var key in Object(object)) {\n        if (hasOwnProperty.call(object, key) && key != 'constructor') {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeysIn(object) {\n      if (!isObject(object)) {\n        return nativeKeysIn(object);\n      }\n      var isProto = isPrototype(object),\n          result = [];\n\n      for (var key in object) {\n        if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.lt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     */\n    function baseLt(value, other) {\n      return value < other;\n    }\n\n    /**\n     * The base implementation of `_.map` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     */\n    function baseMap(collection, iteratee) {\n      var index = -1,\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value, key, collection) {\n        result[++index] = iteratee(value, key, collection);\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.matches` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatches(source) {\n      var matchData = getMatchData(source);\n      if (matchData.length == 1 && matchData[0][2]) {\n        return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n      }\n      return function(object) {\n        return object === source || baseIsMatch(object, source, matchData);\n      };\n    }\n\n    /**\n     * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n     *\n     * @private\n     * @param {string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatchesProperty(path, srcValue) {\n      if (isKey(path) && isStrictComparable(srcValue)) {\n        return matchesStrictComparable(toKey(path), srcValue);\n      }\n      return function(object) {\n        var objValue = get(object, path);\n        return (objValue === undefined && objValue === srcValue)\n          ? hasIn(object, path)\n          : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n      };\n    }\n\n    /**\n     * The base implementation of `_.merge` without support for multiple sources.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} [customizer] The function to customize merged values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMerge(object, source, srcIndex, customizer, stack) {\n      if (object === source) {\n        return;\n      }\n      baseFor(source, function(srcValue, key) {\n        stack || (stack = new Stack);\n        if (isObject(srcValue)) {\n          baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n        }\n        else {\n          var newValue = customizer\n            ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n            : undefined;\n\n          if (newValue === undefined) {\n            newValue = srcValue;\n          }\n          assignMergeValue(object, key, newValue);\n        }\n      }, keysIn);\n    }\n\n    /**\n     * A specialized version of `baseMerge` for arrays and objects which performs\n     * deep merges and tracks traversed objects enabling objects with circular\n     * references to be merged.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {string} key The key of the value to merge.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} mergeFunc The function to merge values.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n      var objValue = safeGet(object, key),\n          srcValue = safeGet(source, key),\n          stacked = stack.get(srcValue);\n\n      if (stacked) {\n        assignMergeValue(object, key, stacked);\n        return;\n      }\n      var newValue = customizer\n        ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      var isCommon = newValue === undefined;\n\n      if (isCommon) {\n        var isArr = isArray(srcValue),\n            isBuff = !isArr && isBuffer(srcValue),\n            isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n        newValue = srcValue;\n        if (isArr || isBuff || isTyped) {\n          if (isArray(objValue)) {\n            newValue = objValue;\n          }\n          else if (isArrayLikeObject(objValue)) {\n            newValue = copyArray(objValue);\n          }\n          else if (isBuff) {\n            isCommon = false;\n            newValue = cloneBuffer(srcValue, true);\n          }\n          else if (isTyped) {\n            isCommon = false;\n            newValue = cloneTypedArray(srcValue, true);\n          }\n          else {\n            newValue = [];\n          }\n        }\n        else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n          newValue = objValue;\n          if (isArguments(objValue)) {\n            newValue = toPlainObject(objValue);\n          }\n          else if (!isObject(objValue) || isFunction(objValue)) {\n            newValue = initCloneObject(srcValue);\n          }\n        }\n        else {\n          isCommon = false;\n        }\n      }\n      if (isCommon) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, newValue);\n        mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n        stack['delete'](srcValue);\n      }\n      assignMergeValue(object, key, newValue);\n    }\n\n    /**\n     * The base implementation of `_.nth` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {number} n The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     */\n    function baseNth(array, n) {\n      var length = array.length;\n      if (!length) {\n        return;\n      }\n      n += n < 0 ? length : 0;\n      return isIndex(n, length) ? array[n] : undefined;\n    }\n\n    /**\n     * The base implementation of `_.orderBy` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n     * @param {string[]} orders The sort orders of `iteratees`.\n     * @returns {Array} Returns the new sorted array.\n     */\n    function baseOrderBy(collection, iteratees, orders) {\n      var index = -1;\n      iteratees = arrayMap(iteratees.length ? iteratees : [identity], baseUnary(getIteratee()));\n\n      var result = baseMap(collection, function(value, key, collection) {\n        var criteria = arrayMap(iteratees, function(iteratee) {\n          return iteratee(value);\n        });\n        return { 'criteria': criteria, 'index': ++index, 'value': value };\n      });\n\n      return baseSortBy(result, function(object, other) {\n        return compareMultiple(object, other, orders);\n      });\n    }\n\n    /**\n     * The base implementation of `_.pick` without support for individual\n     * property identifiers.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Object} Returns the new object.\n     */\n    function basePick(object, paths) {\n      return basePickBy(object, paths, function(value, path) {\n        return hasIn(object, path);\n      });\n    }\n\n    /**\n     * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @param {Function} predicate The function invoked per property.\n     * @returns {Object} Returns the new object.\n     */\n    function basePickBy(object, paths, predicate) {\n      var index = -1,\n          length = paths.length,\n          result = {};\n\n      while (++index < length) {\n        var path = paths[index],\n            value = baseGet(object, path);\n\n        if (predicate(value, path)) {\n          baseSet(result, castPath(path, object), value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseProperty` which supports deep paths.\n     *\n     * @private\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     */\n    function basePropertyDeep(path) {\n      return function(object) {\n        return baseGet(object, path);\n      };\n    }\n\n    /**\n     * The base implementation of `_.pullAllBy` without support for iteratee\n     * shorthands.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAll(array, values, iteratee, comparator) {\n      var indexOf = comparator ? baseIndexOfWith : baseIndexOf,\n          index = -1,\n          length = values.length,\n          seen = array;\n\n      if (array === values) {\n        values = copyArray(values);\n      }\n      if (iteratee) {\n        seen = arrayMap(array, baseUnary(iteratee));\n      }\n      while (++index < length) {\n        var fromIndex = 0,\n            value = values[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {\n          if (seen !== array) {\n            splice.call(seen, fromIndex, 1);\n          }\n          splice.call(array, fromIndex, 1);\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.pullAt` without support for individual\n     * indexes or capturing the removed elements.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {number[]} indexes The indexes of elements to remove.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAt(array, indexes) {\n      var length = array ? indexes.length : 0,\n          lastIndex = length - 1;\n\n      while (length--) {\n        var index = indexes[length];\n        if (length == lastIndex || index !== previous) {\n          var previous = index;\n          if (isIndex(index)) {\n            splice.call(array, index, 1);\n          } else {\n            baseUnset(array, index);\n          }\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.random` without support for returning\n     * floating-point numbers.\n     *\n     * @private\n     * @param {number} lower The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the random number.\n     */\n    function baseRandom(lower, upper) {\n      return lower + nativeFloor(nativeRandom() * (upper - lower + 1));\n    }\n\n    /**\n     * The base implementation of `_.range` and `_.rangeRight` which doesn't\n     * coerce arguments.\n     *\n     * @private\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} step The value to increment or decrement by.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the range of numbers.\n     */\n    function baseRange(start, end, step, fromRight) {\n      var index = -1,\n          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n          result = Array(length);\n\n      while (length--) {\n        result[fromRight ? length : ++index] = start;\n        start += step;\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.repeat` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {string} string The string to repeat.\n     * @param {number} n The number of times to repeat the string.\n     * @returns {string} Returns the repeated string.\n     */\n    function baseRepeat(string, n) {\n      var result = '';\n      if (!string || n < 1 || n > MAX_SAFE_INTEGER) {\n        return result;\n      }\n      // Leverage the exponentiation by squaring algorithm for a faster repeat.\n      // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.\n      do {\n        if (n % 2) {\n          result += string;\n        }\n        n = nativeFloor(n / 2);\n        if (n) {\n          string += string;\n        }\n      } while (n);\n\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     */\n    function baseRest(func, start) {\n      return setToString(overRest(func, start, identity), func + '');\n    }\n\n    /**\n     * The base implementation of `_.sample`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     */\n    function baseSample(collection) {\n      return arraySample(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.sampleSize` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function baseSampleSize(collection, n) {\n      var array = values(collection);\n      return shuffleSelf(array, baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * The base implementation of `_.set`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseSet(object, path, value, customizer) {\n      if (!isObject(object)) {\n        return object;\n      }\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          lastIndex = length - 1,\n          nested = object;\n\n      while (nested != null && ++index < length) {\n        var key = toKey(path[index]),\n            newValue = value;\n\n        if (index != lastIndex) {\n          var objValue = nested[key];\n          newValue = customizer ? customizer(objValue, key, nested) : undefined;\n          if (newValue === undefined) {\n            newValue = isObject(objValue)\n              ? objValue\n              : (isIndex(path[index + 1]) ? [] : {});\n          }\n        }\n        assignValue(nested, key, newValue);\n        nested = nested[key];\n      }\n      return object;\n    }\n\n    /**\n     * The base implementation of `setData` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetData = !metaMap ? identity : function(func, data) {\n      metaMap.set(func, data);\n      return func;\n    };\n\n    /**\n     * The base implementation of `setToString` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetToString = !defineProperty ? identity : function(func, string) {\n      return defineProperty(func, 'toString', {\n        'configurable': true,\n        'enumerable': false,\n        'value': constant(string),\n        'writable': true\n      });\n    };\n\n    /**\n     * The base implementation of `_.shuffle`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function baseShuffle(collection) {\n      return shuffleSelf(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.slice` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseSlice(array, start, end) {\n      var index = -1,\n          length = array.length;\n\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = end > length ? length : end;\n      if (end < 0) {\n        end += length;\n      }\n      length = start > end ? 0 : ((end - start) >>> 0);\n      start >>>= 0;\n\n      var result = Array(length);\n      while (++index < length) {\n        result[index] = array[index + start];\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.some` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     */\n    function baseSome(collection, predicate) {\n      var result;\n\n      baseEach(collection, function(value, index, collection) {\n        result = predicate(value, index, collection);\n        return !result;\n      });\n      return !!result;\n    }\n\n    /**\n     * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which\n     * performs a binary search of `array` to determine the index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndex(array, value, retHighest) {\n      var low = 0,\n          high = array == null ? low : array.length;\n\n      if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n        while (low < high) {\n          var mid = (low + high) >>> 1,\n              computed = array[mid];\n\n          if (computed !== null && !isSymbol(computed) &&\n              (retHighest ? (computed <= value) : (computed < value))) {\n            low = mid + 1;\n          } else {\n            high = mid;\n          }\n        }\n        return high;\n      }\n      return baseSortedIndexBy(array, value, identity, retHighest);\n    }\n\n    /**\n     * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`\n     * which invokes `iteratee` for `value` and each element of `array` to compute\n     * their sort ranking. The iteratee is invoked with one argument; (value).\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} iteratee The iteratee invoked per element.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndexBy(array, value, iteratee, retHighest) {\n      value = iteratee(value);\n\n      var low = 0,\n          high = array == null ? 0 : array.length,\n          valIsNaN = value !== value,\n          valIsNull = value === null,\n          valIsSymbol = isSymbol(value),\n          valIsUndefined = value === undefined;\n\n      while (low < high) {\n        var mid = nativeFloor((low + high) / 2),\n            computed = iteratee(array[mid]),\n            othIsDefined = computed !== undefined,\n            othIsNull = computed === null,\n            othIsReflexive = computed === computed,\n            othIsSymbol = isSymbol(computed);\n\n        if (valIsNaN) {\n          var setLow = retHighest || othIsReflexive;\n        } else if (valIsUndefined) {\n          setLow = othIsReflexive && (retHighest || othIsDefined);\n        } else if (valIsNull) {\n          setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);\n        } else if (valIsSymbol) {\n          setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);\n        } else if (othIsNull || othIsSymbol) {\n          setLow = false;\n        } else {\n          setLow = retHighest ? (computed <= value) : (computed < value);\n        }\n        if (setLow) {\n          low = mid + 1;\n        } else {\n          high = mid;\n        }\n      }\n      return nativeMin(high, MAX_ARRAY_INDEX);\n    }\n\n    /**\n     * The base implementation of `_.sortedUniq` and `_.sortedUniqBy` without\n     * support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseSortedUniq(array, iteratee) {\n      var index = -1,\n          length = array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        if (!index || !eq(computed, seen)) {\n          var seen = computed;\n          result[resIndex++] = value === 0 ? 0 : value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.toNumber` which doesn't ensure correct\n     * conversions of binary, hexadecimal, or octal string values.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     */\n    function baseToNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      return +value;\n    }\n\n    /**\n     * The base implementation of `_.toString` which doesn't convert nullish\n     * values to empty strings.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {string} Returns the string.\n     */\n    function baseToString(value) {\n      // Exit early for strings to avoid a performance hit in some environments.\n      if (typeof value == 'string') {\n        return value;\n      }\n      if (isArray(value)) {\n        // Recursively convert values (susceptible to call stack limits).\n        return arrayMap(value, baseToString) + '';\n      }\n      if (isSymbol(value)) {\n        return symbolToString ? symbolToString.call(value) : '';\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseUniq(array, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          length = array.length,\n          isCommon = true,\n          result = [],\n          seen = result;\n\n      if (comparator) {\n        isCommon = false;\n        includes = arrayIncludesWith;\n      }\n      else if (length >= LARGE_ARRAY_SIZE) {\n        var set = iteratee ? null : createSet(array);\n        if (set) {\n          return setToArray(set);\n        }\n        isCommon = false;\n        includes = cacheHas;\n        seen = new SetCache;\n      }\n      else {\n        seen = iteratee ? [] : result;\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var seenIndex = seen.length;\n          while (seenIndex--) {\n            if (seen[seenIndex] === computed) {\n              continue outer;\n            }\n          }\n          if (iteratee) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n        else if (!includes(seen, computed, comparator)) {\n          if (seen !== result) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.unset`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The property path to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     */\n    function baseUnset(object, path) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      return object == null || delete object[toKey(last(path))];\n    }\n\n    /**\n     * The base implementation of `_.update`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to update.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseUpdate(object, path, updater, customizer) {\n      return baseSet(object, path, updater(baseGet(object, path)), customizer);\n    }\n\n    /**\n     * The base implementation of methods like `_.dropWhile` and `_.takeWhile`\n     * without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {Function} predicate The function invoked per iteration.\n     * @param {boolean} [isDrop] Specify dropping elements instead of taking them.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseWhile(array, predicate, isDrop, fromRight) {\n      var length = array.length,\n          index = fromRight ? length : -1;\n\n      while ((fromRight ? index-- : ++index < length) &&\n        predicate(array[index], index, array)) {}\n\n      return isDrop\n        ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))\n        : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));\n    }\n\n    /**\n     * The base implementation of `wrapperValue` which returns the result of\n     * performing a sequence of actions on the unwrapped `value`, where each\n     * successive action is supplied the return value of the previous.\n     *\n     * @private\n     * @param {*} value The unwrapped value.\n     * @param {Array} actions Actions to perform to resolve the unwrapped value.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseWrapperValue(value, actions) {\n      var result = value;\n      if (result instanceof LazyWrapper) {\n        result = result.value();\n      }\n      return arrayReduce(actions, function(result, action) {\n        return action.func.apply(action.thisArg, arrayPush([result], action.args));\n      }, result);\n    }\n\n    /**\n     * The base implementation of methods like `_.xor`, without support for\n     * iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of values.\n     */\n    function baseXor(arrays, iteratee, comparator) {\n      var length = arrays.length;\n      if (length < 2) {\n        return length ? baseUniq(arrays[0]) : [];\n      }\n      var index = -1,\n          result = Array(length);\n\n      while (++index < length) {\n        var array = arrays[index],\n            othIndex = -1;\n\n        while (++othIndex < length) {\n          if (othIndex != index) {\n            result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);\n          }\n        }\n      }\n      return baseUniq(baseFlatten(result, 1), iteratee, comparator);\n    }\n\n    /**\n     * This base implementation of `_.zipObject` which assigns values using `assignFunc`.\n     *\n     * @private\n     * @param {Array} props The property identifiers.\n     * @param {Array} values The property values.\n     * @param {Function} assignFunc The function to assign values.\n     * @returns {Object} Returns the new object.\n     */\n    function baseZipObject(props, values, assignFunc) {\n      var index = -1,\n          length = props.length,\n          valsLength = values.length,\n          result = {};\n\n      while (++index < length) {\n        var value = index < valsLength ? values[index] : undefined;\n        assignFunc(result, props[index], value);\n      }\n      return result;\n    }\n\n    /**\n     * Casts `value` to an empty array if it's not an array like object.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Array|Object} Returns the cast array-like object.\n     */\n    function castArrayLikeObject(value) {\n      return isArrayLikeObject(value) ? value : [];\n    }\n\n    /**\n     * Casts `value` to `identity` if it's not a function.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Function} Returns cast function.\n     */\n    function castFunction(value) {\n      return typeof value == 'function' ? value : identity;\n    }\n\n    /**\n     * Casts `value` to a path array if it's not one.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {Array} Returns the cast property path array.\n     */\n    function castPath(value, object) {\n      if (isArray(value)) {\n        return value;\n      }\n      return isKey(value, object) ? [value] : stringToPath(toString(value));\n    }\n\n    /**\n     * A `baseRest` alias which can be replaced with `identity` by module\n     * replacement plugins.\n     *\n     * @private\n     * @type {Function}\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    var castRest = baseRest;\n\n    /**\n     * Casts `array` to a slice if it's needed.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {number} start The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the cast slice.\n     */\n    function castSlice(array, start, end) {\n      var length = array.length;\n      end = end === undefined ? length : end;\n      return (!start && end >= length) ? array : baseSlice(array, start, end);\n    }\n\n    /**\n     * A simple wrapper around the global [`clearTimeout`](https://mdn.io/clearTimeout).\n     *\n     * @private\n     * @param {number|Object} id The timer id or timeout object of the timer to clear.\n     */\n    var clearTimeout = ctxClearTimeout || function(id) {\n      return root.clearTimeout(id);\n    };\n\n    /**\n     * Creates a clone of  `buffer`.\n     *\n     * @private\n     * @param {Buffer} buffer The buffer to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Buffer} Returns the cloned buffer.\n     */\n    function cloneBuffer(buffer, isDeep) {\n      if (isDeep) {\n        return buffer.slice();\n      }\n      var length = buffer.length,\n          result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n      buffer.copy(result);\n      return result;\n    }\n\n    /**\n     * Creates a clone of `arrayBuffer`.\n     *\n     * @private\n     * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n     * @returns {ArrayBuffer} Returns the cloned array buffer.\n     */\n    function cloneArrayBuffer(arrayBuffer) {\n      var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n      new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n      return result;\n    }\n\n    /**\n     * Creates a clone of `dataView`.\n     *\n     * @private\n     * @param {Object} dataView The data view to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned data view.\n     */\n    function cloneDataView(dataView, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n      return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n    }\n\n    /**\n     * Creates a clone of `regexp`.\n     *\n     * @private\n     * @param {Object} regexp The regexp to clone.\n     * @returns {Object} Returns the cloned regexp.\n     */\n    function cloneRegExp(regexp) {\n      var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n      result.lastIndex = regexp.lastIndex;\n      return result;\n    }\n\n    /**\n     * Creates a clone of the `symbol` object.\n     *\n     * @private\n     * @param {Object} symbol The symbol object to clone.\n     * @returns {Object} Returns the cloned symbol object.\n     */\n    function cloneSymbol(symbol) {\n      return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n    }\n\n    /**\n     * Creates a clone of `typedArray`.\n     *\n     * @private\n     * @param {Object} typedArray The typed array to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned typed array.\n     */\n    function cloneTypedArray(typedArray, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n      return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n    }\n\n    /**\n     * Compares values to sort them in ascending order.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {number} Returns the sort order indicator for `value`.\n     */\n    function compareAscending(value, other) {\n      if (value !== other) {\n        var valIsDefined = value !== undefined,\n            valIsNull = value === null,\n            valIsReflexive = value === value,\n            valIsSymbol = isSymbol(value);\n\n        var othIsDefined = other !== undefined,\n            othIsNull = other === null,\n            othIsReflexive = other === other,\n            othIsSymbol = isSymbol(other);\n\n        if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n            (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n            (valIsNull && othIsDefined && othIsReflexive) ||\n            (!valIsDefined && othIsReflexive) ||\n            !valIsReflexive) {\n          return 1;\n        }\n        if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n            (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n            (othIsNull && valIsDefined && valIsReflexive) ||\n            (!othIsDefined && valIsReflexive) ||\n            !othIsReflexive) {\n          return -1;\n        }\n      }\n      return 0;\n    }\n\n    /**\n     * Used by `_.orderBy` to compare multiple properties of a value to another\n     * and stable sort them.\n     *\n     * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n     * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n     * of corresponding values.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {boolean[]|string[]} orders The order to sort by for each property.\n     * @returns {number} Returns the sort order indicator for `object`.\n     */\n    function compareMultiple(object, other, orders) {\n      var index = -1,\n          objCriteria = object.criteria,\n          othCriteria = other.criteria,\n          length = objCriteria.length,\n          ordersLength = orders.length;\n\n      while (++index < length) {\n        var result = compareAscending(objCriteria[index], othCriteria[index]);\n        if (result) {\n          if (index >= ordersLength) {\n            return result;\n          }\n          var order = orders[index];\n          return result * (order == 'desc' ? -1 : 1);\n        }\n      }\n      // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n      // that causes it, under certain circumstances, to provide the same value for\n      // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n      // for more details.\n      //\n      // This also ensures a stable sort in V8 and other engines.\n      // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n      return object.index - other.index;\n    }\n\n    /**\n     * Creates an array that is the composition of partially applied arguments,\n     * placeholders, and provided arguments into a single array of arguments.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to prepend to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgs(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersLength = holders.length,\n          leftIndex = -1,\n          leftLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(leftLength + rangeLength),\n          isUncurried = !isCurried;\n\n      while (++leftIndex < leftLength) {\n        result[leftIndex] = partials[leftIndex];\n      }\n      while (++argsIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[holders[argsIndex]] = args[argsIndex];\n        }\n      }\n      while (rangeLength--) {\n        result[leftIndex++] = args[argsIndex++];\n      }\n      return result;\n    }\n\n    /**\n     * This function is like `composeArgs` except that the arguments composition\n     * is tailored for `_.partialRight`.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to append to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgsRight(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersIndex = -1,\n          holdersLength = holders.length,\n          rightIndex = -1,\n          rightLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(rangeLength + rightLength),\n          isUncurried = !isCurried;\n\n      while (++argsIndex < rangeLength) {\n        result[argsIndex] = args[argsIndex];\n      }\n      var offset = argsIndex;\n      while (++rightIndex < rightLength) {\n        result[offset + rightIndex] = partials[rightIndex];\n      }\n      while (++holdersIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[offset + holders[holdersIndex]] = args[argsIndex++];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Copies the values of `source` to `array`.\n     *\n     * @private\n     * @param {Array} source The array to copy values from.\n     * @param {Array} [array=[]] The array to copy values to.\n     * @returns {Array} Returns `array`.\n     */\n    function copyArray(source, array) {\n      var index = -1,\n          length = source.length;\n\n      array || (array = Array(length));\n      while (++index < length) {\n        array[index] = source[index];\n      }\n      return array;\n    }\n\n    /**\n     * Copies properties of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy properties from.\n     * @param {Array} props The property identifiers to copy.\n     * @param {Object} [object={}] The object to copy properties to.\n     * @param {Function} [customizer] The function to customize copied values.\n     * @returns {Object} Returns `object`.\n     */\n    function copyObject(source, props, object, customizer) {\n      var isNew = !object;\n      object || (object = {});\n\n      var index = -1,\n          length = props.length;\n\n      while (++index < length) {\n        var key = props[index];\n\n        var newValue = customizer\n          ? customizer(object[key], source[key], key, object, source)\n          : undefined;\n\n        if (newValue === undefined) {\n          newValue = source[key];\n        }\n        if (isNew) {\n          baseAssignValue(object, key, newValue);\n        } else {\n          assignValue(object, key, newValue);\n        }\n      }\n      return object;\n    }\n\n    /**\n     * Copies own symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbols(source, object) {\n      return copyObject(source, getSymbols(source), object);\n    }\n\n    /**\n     * Copies own and inherited symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbolsIn(source, object) {\n      return copyObject(source, getSymbolsIn(source), object);\n    }\n\n    /**\n     * Creates a function like `_.groupBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} [initializer] The accumulator object initializer.\n     * @returns {Function} Returns the new aggregator function.\n     */\n    function createAggregator(setter, initializer) {\n      return function(collection, iteratee) {\n        var func = isArray(collection) ? arrayAggregator : baseAggregator,\n            accumulator = initializer ? initializer() : {};\n\n        return func(collection, setter, getIteratee(iteratee, 2), accumulator);\n      };\n    }\n\n    /**\n     * Creates a function like `_.assign`.\n     *\n     * @private\n     * @param {Function} assigner The function to assign values.\n     * @returns {Function} Returns the new assigner function.\n     */\n    function createAssigner(assigner) {\n      return baseRest(function(object, sources) {\n        var index = -1,\n            length = sources.length,\n            customizer = length > 1 ? sources[length - 1] : undefined,\n            guard = length > 2 ? sources[2] : undefined;\n\n        customizer = (assigner.length > 3 && typeof customizer == 'function')\n          ? (length--, customizer)\n          : undefined;\n\n        if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n          customizer = length < 3 ? undefined : customizer;\n          length = 1;\n        }\n        object = Object(object);\n        while (++index < length) {\n          var source = sources[index];\n          if (source) {\n            assigner(object, source, index, customizer);\n          }\n        }\n        return object;\n      });\n    }\n\n    /**\n     * Creates a `baseEach` or `baseEachRight` function.\n     *\n     * @private\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseEach(eachFunc, fromRight) {\n      return function(collection, iteratee) {\n        if (collection == null) {\n          return collection;\n        }\n        if (!isArrayLike(collection)) {\n          return eachFunc(collection, iteratee);\n        }\n        var length = collection.length,\n            index = fromRight ? length : -1,\n            iterable = Object(collection);\n\n        while ((fromRight ? index-- : ++index < length)) {\n          if (iteratee(iterable[index], index, iterable) === false) {\n            break;\n          }\n        }\n        return collection;\n      };\n    }\n\n    /**\n     * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseFor(fromRight) {\n      return function(object, iteratee, keysFunc) {\n        var index = -1,\n            iterable = Object(object),\n            props = keysFunc(object),\n            length = props.length;\n\n        while (length--) {\n          var key = props[fromRight ? length : ++index];\n          if (iteratee(iterable[key], key, iterable) === false) {\n            break;\n          }\n        }\n        return object;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the optional `this`\n     * binding of `thisArg`.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createBind(func, bitmask, thisArg) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return fn.apply(isBind ? thisArg : this, arguments);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.lowerFirst`.\n     *\n     * @private\n     * @param {string} methodName The name of the `String` case method to use.\n     * @returns {Function} Returns the new case function.\n     */\n    function createCaseFirst(methodName) {\n      return function(string) {\n        string = toString(string);\n\n        var strSymbols = hasUnicode(string)\n          ? stringToArray(string)\n          : undefined;\n\n        var chr = strSymbols\n          ? strSymbols[0]\n          : string.charAt(0);\n\n        var trailing = strSymbols\n          ? castSlice(strSymbols, 1).join('')\n          : string.slice(1);\n\n        return chr[methodName]() + trailing;\n      };\n    }\n\n    /**\n     * Creates a function like `_.camelCase`.\n     *\n     * @private\n     * @param {Function} callback The function to combine each word.\n     * @returns {Function} Returns the new compounder function.\n     */\n    function createCompounder(callback) {\n      return function(string) {\n        return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n      };\n    }\n\n    /**\n     * Creates a function that produces an instance of `Ctor` regardless of\n     * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n     *\n     * @private\n     * @param {Function} Ctor The constructor to wrap.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCtor(Ctor) {\n      return function() {\n        // Use a `switch` statement to work with class constructors. See\n        // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n        // for more details.\n        var args = arguments;\n        switch (args.length) {\n          case 0: return new Ctor;\n          case 1: return new Ctor(args[0]);\n          case 2: return new Ctor(args[0], args[1]);\n          case 3: return new Ctor(args[0], args[1], args[2]);\n          case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n          case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n          case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n          case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n        }\n        var thisBinding = baseCreate(Ctor.prototype),\n            result = Ctor.apply(thisBinding, args);\n\n        // Mimic the constructor's `return` behavior.\n        // See https://es5.github.io/#x13.2.2 for more details.\n        return isObject(result) ? result : thisBinding;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to enable currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {number} arity The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCurry(func, bitmask, arity) {\n      var Ctor = createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length,\n            placeholder = getHolder(wrapper);\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n          ? []\n          : replaceHolders(args, placeholder);\n\n        length -= holders.length;\n        if (length < arity) {\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, undefined,\n            args, holders, undefined, undefined, arity - length);\n        }\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return apply(fn, this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.find` or `_.findLast` function.\n     *\n     * @private\n     * @param {Function} findIndexFunc The function to find the collection index.\n     * @returns {Function} Returns the new find function.\n     */\n    function createFind(findIndexFunc) {\n      return function(collection, predicate, fromIndex) {\n        var iterable = Object(collection);\n        if (!isArrayLike(collection)) {\n          var iteratee = getIteratee(predicate, 3);\n          collection = keys(collection);\n          predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n        }\n        var index = findIndexFunc(collection, predicate, fromIndex);\n        return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n      };\n    }\n\n    /**\n     * Creates a `_.flow` or `_.flowRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new flow function.\n     */\n    function createFlow(fromRight) {\n      return flatRest(function(funcs) {\n        var length = funcs.length,\n            index = length,\n            prereq = LodashWrapper.prototype.thru;\n\n        if (fromRight) {\n          funcs.reverse();\n        }\n        while (index--) {\n          var func = funcs[index];\n          if (typeof func != 'function') {\n            throw new TypeError(FUNC_ERROR_TEXT);\n          }\n          if (prereq && !wrapper && getFuncName(func) == 'wrapper') {\n            var wrapper = new LodashWrapper([], true);\n          }\n        }\n        index = wrapper ? index : length;\n        while (++index < length) {\n          func = funcs[index];\n\n          var funcName = getFuncName(func),\n              data = funcName == 'wrapper' ? getData(func) : undefined;\n\n          if (data && isLaziable(data[0]) &&\n                data[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) &&\n                !data[4].length && data[9] == 1\n              ) {\n            wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);\n          } else {\n            wrapper = (func.length == 1 && isLaziable(func))\n              ? wrapper[funcName]()\n              : wrapper.thru(func);\n          }\n        }\n        return function() {\n          var args = arguments,\n              value = args[0];\n\n          if (wrapper && args.length == 1 && isArray(value)) {\n            return wrapper.plant(value).value();\n          }\n          var index = 0,\n              result = length ? funcs[index].apply(this, args) : value;\n\n          while (++index < length) {\n            result = funcs[index].call(this, result);\n          }\n          return result;\n        };\n      });\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with optional `this`\n     * binding of `thisArg`, partial application, and currying.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [partialsRight] The arguments to append to those provided\n     *  to the new function.\n     * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n      var isAry = bitmask & WRAP_ARY_FLAG,\n          isBind = bitmask & WRAP_BIND_FLAG,\n          isBindKey = bitmask & WRAP_BIND_KEY_FLAG,\n          isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n          isFlip = bitmask & WRAP_FLIP_FLAG,\n          Ctor = isBindKey ? undefined : createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length;\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        if (isCurried) {\n          var placeholder = getHolder(wrapper),\n              holdersCount = countHolders(args, placeholder);\n        }\n        if (partials) {\n          args = composeArgs(args, partials, holders, isCurried);\n        }\n        if (partialsRight) {\n          args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n        }\n        length -= holdersCount;\n        if (isCurried && length < arity) {\n          var newHolders = replaceHolders(args, placeholder);\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n            args, newHolders, argPos, ary, arity - length\n          );\n        }\n        var thisBinding = isBind ? thisArg : this,\n            fn = isBindKey ? thisBinding[func] : func;\n\n        length = args.length;\n        if (argPos) {\n          args = reorder(args, argPos);\n        } else if (isFlip && length > 1) {\n          args.reverse();\n        }\n        if (isAry && ary < length) {\n          args.length = ary;\n        }\n        if (this && this !== root && this instanceof wrapper) {\n          fn = Ctor || createCtor(fn);\n        }\n        return fn.apply(thisBinding, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.invertBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} toIteratee The function to resolve iteratees.\n     * @returns {Function} Returns the new inverter function.\n     */\n    function createInverter(setter, toIteratee) {\n      return function(object, iteratee) {\n        return baseInverter(object, setter, toIteratee(iteratee), {});\n      };\n    }\n\n    /**\n     * Creates a function that performs a mathematical operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @param {number} [defaultValue] The value used for `undefined` arguments.\n     * @returns {Function} Returns the new mathematical operation function.\n     */\n    function createMathOperation(operator, defaultValue) {\n      return function(value, other) {\n        var result;\n        if (value === undefined && other === undefined) {\n          return defaultValue;\n        }\n        if (value !== undefined) {\n          result = value;\n        }\n        if (other !== undefined) {\n          if (result === undefined) {\n            return other;\n          }\n          if (typeof value == 'string' || typeof other == 'string') {\n            value = baseToString(value);\n            other = baseToString(other);\n          } else {\n            value = baseToNumber(value);\n            other = baseToNumber(other);\n          }\n          result = operator(value, other);\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function like `_.over`.\n     *\n     * @private\n     * @param {Function} arrayFunc The function to iterate over iteratees.\n     * @returns {Function} Returns the new over function.\n     */\n    function createOver(arrayFunc) {\n      return flatRest(function(iteratees) {\n        iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n        return baseRest(function(args) {\n          var thisArg = this;\n          return arrayFunc(iteratees, function(iteratee) {\n            return apply(iteratee, thisArg, args);\n          });\n        });\n      });\n    }\n\n    /**\n     * Creates the padding for `string` based on `length`. The `chars` string\n     * is truncated if the number of characters exceeds `length`.\n     *\n     * @private\n     * @param {number} length The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padding for `string`.\n     */\n    function createPadding(length, chars) {\n      chars = chars === undefined ? ' ' : baseToString(chars);\n\n      var charsLength = chars.length;\n      if (charsLength < 2) {\n        return charsLength ? baseRepeat(chars, length) : chars;\n      }\n      var result = baseRepeat(chars, nativeCeil(length / stringSize(chars)));\n      return hasUnicode(chars)\n        ? castSlice(stringToArray(result), 0, length).join('')\n        : result.slice(0, length);\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the `this` binding\n     * of `thisArg` and `partials` prepended to the arguments it receives.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {Array} partials The arguments to prepend to those provided to\n     *  the new function.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createPartial(func, bitmask, thisArg, partials) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var argsIndex = -1,\n            argsLength = arguments.length,\n            leftIndex = -1,\n            leftLength = partials.length,\n            args = Array(leftLength + argsLength),\n            fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n        while (++leftIndex < leftLength) {\n          args[leftIndex] = partials[leftIndex];\n        }\n        while (argsLength--) {\n          args[leftIndex++] = arguments[++argsIndex];\n        }\n        return apply(fn, isBind ? thisArg : this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.range` or `_.rangeRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new range function.\n     */\n    function createRange(fromRight) {\n      return function(start, end, step) {\n        if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n          end = step = undefined;\n        }\n        // Ensure the sign of `-0` is preserved.\n        start = toFinite(start);\n        if (end === undefined) {\n          end = start;\n          start = 0;\n        } else {\n          end = toFinite(end);\n        }\n        step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n        return baseRange(start, end, step, fromRight);\n      };\n    }\n\n    /**\n     * Creates a function that performs a relational operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @returns {Function} Returns the new relational operation function.\n     */\n    function createRelationalOperation(operator) {\n      return function(value, other) {\n        if (!(typeof value == 'string' && typeof other == 'string')) {\n          value = toNumber(value);\n          other = toNumber(other);\n        }\n        return operator(value, other);\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to continue currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {Function} wrapFunc The function to create the `func` wrapper.\n     * @param {*} placeholder The placeholder value.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n      var isCurry = bitmask & WRAP_CURRY_FLAG,\n          newHolders = isCurry ? holders : undefined,\n          newHoldersRight = isCurry ? undefined : holders,\n          newPartials = isCurry ? partials : undefined,\n          newPartialsRight = isCurry ? undefined : partials;\n\n      bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);\n      bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n\n      if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n        bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n      }\n      var newData = [\n        func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,\n        newHoldersRight, argPos, ary, arity\n      ];\n\n      var result = wrapFunc.apply(undefined, newData);\n      if (isLaziable(func)) {\n        setData(result, newData);\n      }\n      result.placeholder = placeholder;\n      return setWrapToString(result, func, bitmask);\n    }\n\n    /**\n     * Creates a function like `_.round`.\n     *\n     * @private\n     * @param {string} methodName The name of the `Math` method to use when rounding.\n     * @returns {Function} Returns the new round function.\n     */\n    function createRound(methodName) {\n      var func = Math[methodName];\n      return function(number, precision) {\n        number = toNumber(number);\n        precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);\n        if (precision && nativeIsFinite(number)) {\n          // Shift with exponential notation to avoid floating-point issues.\n          // See [MDN](https://mdn.io/round#Examples) for more details.\n          var pair = (toString(number) + 'e').split('e'),\n              value = func(pair[0] + 'e' + (+pair[1] + precision));\n\n          pair = (toString(value) + 'e').split('e');\n          return +(pair[0] + 'e' + (+pair[1] - precision));\n        }\n        return func(number);\n      };\n    }\n\n    /**\n     * Creates a set object of `values`.\n     *\n     * @private\n     * @param {Array} values The values to add to the set.\n     * @returns {Object} Returns the new set.\n     */\n    var createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n      return new Set(values);\n    };\n\n    /**\n     * Creates a `_.toPairs` or `_.toPairsIn` function.\n     *\n     * @private\n     * @param {Function} keysFunc The function to get the keys of a given object.\n     * @returns {Function} Returns the new pairs function.\n     */\n    function createToPairs(keysFunc) {\n      return function(object) {\n        var tag = getTag(object);\n        if (tag == mapTag) {\n          return mapToArray(object);\n        }\n        if (tag == setTag) {\n          return setToPairs(object);\n        }\n        return baseToPairs(object, keysFunc(object));\n      };\n    }\n\n    /**\n     * Creates a function that either curries or invokes `func` with optional\n     * `this` binding and partially applied arguments.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags.\n     *    1 - `_.bind`\n     *    2 - `_.bindKey`\n     *    4 - `_.curry` or `_.curryRight` of a bound function\n     *    8 - `_.curry`\n     *   16 - `_.curryRight`\n     *   32 - `_.partial`\n     *   64 - `_.partialRight`\n     *  128 - `_.rearg`\n     *  256 - `_.ary`\n     *  512 - `_.flip`\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to be partially applied.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n      var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n      if (!isBindKey && typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var length = partials ? partials.length : 0;\n      if (!length) {\n        bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n        partials = holders = undefined;\n      }\n      ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n      arity = arity === undefined ? arity : toInteger(arity);\n      length -= holders ? holders.length : 0;\n\n      if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n        var partialsRight = partials,\n            holdersRight = holders;\n\n        partials = holders = undefined;\n      }\n      var data = isBindKey ? undefined : getData(func);\n\n      var newData = [\n        func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n        argPos, ary, arity\n      ];\n\n      if (data) {\n        mergeData(newData, data);\n      }\n      func = newData[0];\n      bitmask = newData[1];\n      thisArg = newData[2];\n      partials = newData[3];\n      holders = newData[4];\n      arity = newData[9] = newData[9] === undefined\n        ? (isBindKey ? 0 : func.length)\n        : nativeMax(newData[9] - length, 0);\n\n      if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n        bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n      }\n      if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n        var result = createBind(func, bitmask, thisArg);\n      } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n        result = createCurry(func, bitmask, arity);\n      } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n        result = createPartial(func, bitmask, thisArg, partials);\n      } else {\n        result = createHybrid.apply(undefined, newData);\n      }\n      var setter = data ? baseSetData : setData;\n      return setWrapToString(setter(result, newData), func, bitmask);\n    }\n\n    /**\n     * Used by `_.defaults` to customize its `_.assignIn` use to assign properties\n     * of source objects to the destination object for all destination properties\n     * that resolve to `undefined`.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to assign.\n     * @param {Object} object The parent object of `objValue`.\n     * @returns {*} Returns the value to assign.\n     */\n    function customDefaultsAssignIn(objValue, srcValue, key, object) {\n      if (objValue === undefined ||\n          (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        return srcValue;\n      }\n      return objValue;\n    }\n\n    /**\n     * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n     * objects into destination objects that are passed thru.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to merge.\n     * @param {Object} object The parent object of `objValue`.\n     * @param {Object} source The parent object of `srcValue`.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     * @returns {*} Returns the value to assign.\n     */\n    function customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n      if (isObject(objValue) && isObject(srcValue)) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, objValue);\n        baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n        stack['delete'](srcValue);\n      }\n      return objValue;\n    }\n\n    /**\n     * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain\n     * objects.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {string} key The key of the property to inspect.\n     * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.\n     */\n    function customOmitClone(value) {\n      return isPlainObject(value) ? undefined : value;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for arrays with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Array} array The array to compare.\n     * @param {Array} other The other array to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `array` and `other` objects.\n     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n     */\n    function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          arrLength = array.length,\n          othLength = other.length;\n\n      if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(array);\n      if (stacked && stack.get(other)) {\n        return stacked == other;\n      }\n      var index = -1,\n          result = true,\n          seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n      stack.set(array, other);\n      stack.set(other, array);\n\n      // Ignore non-index properties.\n      while (++index < arrLength) {\n        var arrValue = array[index],\n            othValue = other[index];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, arrValue, index, other, array, stack)\n            : customizer(arrValue, othValue, index, array, other, stack);\n        }\n        if (compared !== undefined) {\n          if (compared) {\n            continue;\n          }\n          result = false;\n          break;\n        }\n        // Recursively compare arrays (susceptible to call stack limits).\n        if (seen) {\n          if (!arraySome(other, function(othValue, othIndex) {\n                if (!cacheHas(seen, othIndex) &&\n                    (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n                  return seen.push(othIndex);\n                }\n              })) {\n            result = false;\n            break;\n          }\n        } else if (!(\n              arrValue === othValue ||\n                equalFunc(arrValue, othValue, bitmask, customizer, stack)\n            )) {\n          result = false;\n          break;\n        }\n      }\n      stack['delete'](array);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for comparing objects of\n     * the same `toStringTag`.\n     *\n     * **Note:** This function only supports comparing values with tags of\n     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {string} tag The `toStringTag` of the objects to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n      switch (tag) {\n        case dataViewTag:\n          if ((object.byteLength != other.byteLength) ||\n              (object.byteOffset != other.byteOffset)) {\n            return false;\n          }\n          object = object.buffer;\n          other = other.buffer;\n\n        case arrayBufferTag:\n          if ((object.byteLength != other.byteLength) ||\n              !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n            return false;\n          }\n          return true;\n\n        case boolTag:\n        case dateTag:\n        case numberTag:\n          // Coerce booleans to `1` or `0` and dates to milliseconds.\n          // Invalid dates are coerced to `NaN`.\n          return eq(+object, +other);\n\n        case errorTag:\n          return object.name == other.name && object.message == other.message;\n\n        case regexpTag:\n        case stringTag:\n          // Coerce regexes to strings and treat strings, primitives and objects,\n          // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n          // for more details.\n          return object == (other + '');\n\n        case mapTag:\n          var convert = mapToArray;\n\n        case setTag:\n          var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n          convert || (convert = setToArray);\n\n          if (object.size != other.size && !isPartial) {\n            return false;\n          }\n          // Assume cyclic values are equal.\n          var stacked = stack.get(object);\n          if (stacked) {\n            return stacked == other;\n          }\n          bitmask |= COMPARE_UNORDERED_FLAG;\n\n          // Recursively compare objects (susceptible to call stack limits).\n          stack.set(object, other);\n          var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n          stack['delete'](object);\n          return result;\n\n        case symbolTag:\n          if (symbolValueOf) {\n            return symbolValueOf.call(object) == symbolValueOf.call(other);\n          }\n      }\n      return false;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for objects with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          objProps = getAllKeys(object),\n          objLength = objProps.length,\n          othProps = getAllKeys(other),\n          othLength = othProps.length;\n\n      if (objLength != othLength && !isPartial) {\n        return false;\n      }\n      var index = objLength;\n      while (index--) {\n        var key = objProps[index];\n        if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n          return false;\n        }\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked && stack.get(other)) {\n        return stacked == other;\n      }\n      var result = true;\n      stack.set(object, other);\n      stack.set(other, object);\n\n      var skipCtor = isPartial;\n      while (++index < objLength) {\n        key = objProps[index];\n        var objValue = object[key],\n            othValue = other[key];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, objValue, key, other, object, stack)\n            : customizer(objValue, othValue, key, object, other, stack);\n        }\n        // Recursively compare objects (susceptible to call stack limits).\n        if (!(compared === undefined\n              ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n              : compared\n            )) {\n          result = false;\n          break;\n        }\n        skipCtor || (skipCtor = key == 'constructor');\n      }\n      if (result && !skipCtor) {\n        var objCtor = object.constructor,\n            othCtor = other.constructor;\n\n        // Non `Object` object instances with different constructors are not equal.\n        if (objCtor != othCtor &&\n            ('constructor' in object && 'constructor' in other) &&\n            !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n              typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n          result = false;\n        }\n      }\n      stack['delete'](object);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseRest` which flattens the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    function flatRest(func) {\n      return setToString(overRest(func, undefined, flatten), func + '');\n    }\n\n    /**\n     * Creates an array of own enumerable property names and symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeys(object) {\n      return baseGetAllKeys(object, keys, getSymbols);\n    }\n\n    /**\n     * Creates an array of own and inherited enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeysIn(object) {\n      return baseGetAllKeys(object, keysIn, getSymbolsIn);\n    }\n\n    /**\n     * Gets metadata for `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {*} Returns the metadata for `func`.\n     */\n    var getData = !metaMap ? noop : function(func) {\n      return metaMap.get(func);\n    };\n\n    /**\n     * Gets the name of `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {string} Returns the function name.\n     */\n    function getFuncName(func) {\n      var result = (func.name + ''),\n          array = realNames[result],\n          length = hasOwnProperty.call(realNames, result) ? array.length : 0;\n\n      while (length--) {\n        var data = array[length],\n            otherFunc = data.func;\n        if (otherFunc == null || otherFunc == func) {\n          return data.name;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Gets the argument placeholder value for `func`.\n     *\n     * @private\n     * @param {Function} func The function to inspect.\n     * @returns {*} Returns the placeholder value.\n     */\n    function getHolder(func) {\n      var object = hasOwnProperty.call(lodash, 'placeholder') ? lodash : func;\n      return object.placeholder;\n    }\n\n    /**\n     * Gets the appropriate \"iteratee\" function. If `_.iteratee` is customized,\n     * this function returns the custom method, otherwise it returns `baseIteratee`.\n     * If arguments are provided, the chosen function is invoked with them and\n     * its result is returned.\n     *\n     * @private\n     * @param {*} [value] The value to convert to an iteratee.\n     * @param {number} [arity] The arity of the created iteratee.\n     * @returns {Function} Returns the chosen function or its result.\n     */\n    function getIteratee() {\n      var result = lodash.iteratee || iteratee;\n      result = result === iteratee ? baseIteratee : result;\n      return arguments.length ? result(arguments[0], arguments[1]) : result;\n    }\n\n    /**\n     * Gets the data for `map`.\n     *\n     * @private\n     * @param {Object} map The map to query.\n     * @param {string} key The reference key.\n     * @returns {*} Returns the map data.\n     */\n    function getMapData(map, key) {\n      var data = map.__data__;\n      return isKeyable(key)\n        ? data[typeof key == 'string' ? 'string' : 'hash']\n        : data.map;\n    }\n\n    /**\n     * Gets the property names, values, and compare flags of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the match data of `object`.\n     */\n    function getMatchData(object) {\n      var result = keys(object),\n          length = result.length;\n\n      while (length--) {\n        var key = result[length],\n            value = object[key];\n\n        result[length] = [key, value, isStrictComparable(value)];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the native function at `key` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the method to get.\n     * @returns {*} Returns the function if it's native, else `undefined`.\n     */\n    function getNative(object, key) {\n      var value = getValue(object, key);\n      return baseIsNative(value) ? value : undefined;\n    }\n\n    /**\n     * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the raw `toStringTag`.\n     */\n    function getRawTag(value) {\n      var isOwn = hasOwnProperty.call(value, symToStringTag),\n          tag = value[symToStringTag];\n\n      try {\n        value[symToStringTag] = undefined;\n        var unmasked = true;\n      } catch (e) {}\n\n      var result = nativeObjectToString.call(value);\n      if (unmasked) {\n        if (isOwn) {\n          value[symToStringTag] = tag;\n        } else {\n          delete value[symToStringTag];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array of the own enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n      if (object == null) {\n        return [];\n      }\n      object = Object(object);\n      return arrayFilter(nativeGetSymbols(object), function(symbol) {\n        return propertyIsEnumerable.call(object, symbol);\n      });\n    };\n\n    /**\n     * Creates an array of the own and inherited enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n      var result = [];\n      while (object) {\n        arrayPush(result, getSymbols(object));\n        object = getPrototype(object);\n      }\n      return result;\n    };\n\n    /**\n     * Gets the `toStringTag` of `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    var getTag = baseGetTag;\n\n    // Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\n    if ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n        (Map && getTag(new Map) != mapTag) ||\n        (Promise && getTag(Promise.resolve()) != promiseTag) ||\n        (Set && getTag(new Set) != setTag) ||\n        (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n      getTag = function(value) {\n        var result = baseGetTag(value),\n            Ctor = result == objectTag ? value.constructor : undefined,\n            ctorString = Ctor ? toSource(Ctor) : '';\n\n        if (ctorString) {\n          switch (ctorString) {\n            case dataViewCtorString: return dataViewTag;\n            case mapCtorString: return mapTag;\n            case promiseCtorString: return promiseTag;\n            case setCtorString: return setTag;\n            case weakMapCtorString: return weakMapTag;\n          }\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Gets the view, applying any `transforms` to the `start` and `end` positions.\n     *\n     * @private\n     * @param {number} start The start of the view.\n     * @param {number} end The end of the view.\n     * @param {Array} transforms The transformations to apply to the view.\n     * @returns {Object} Returns an object containing the `start` and `end`\n     *  positions of the view.\n     */\n    function getView(start, end, transforms) {\n      var index = -1,\n          length = transforms.length;\n\n      while (++index < length) {\n        var data = transforms[index],\n            size = data.size;\n\n        switch (data.type) {\n          case 'drop':      start += size; break;\n          case 'dropRight': end -= size; break;\n          case 'take':      end = nativeMin(end, start + size); break;\n          case 'takeRight': start = nativeMax(start, end - size); break;\n        }\n      }\n      return { 'start': start, 'end': end };\n    }\n\n    /**\n     * Extracts wrapper details from the `source` body comment.\n     *\n     * @private\n     * @param {string} source The source to inspect.\n     * @returns {Array} Returns the wrapper details.\n     */\n    function getWrapDetails(source) {\n      var match = source.match(reWrapDetails);\n      return match ? match[1].split(reSplitDetails) : [];\n    }\n\n    /**\n     * Checks if `path` exists on `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @param {Function} hasFunc The function to check properties.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     */\n    function hasPath(object, path, hasFunc) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          result = false;\n\n      while (++index < length) {\n        var key = toKey(path[index]);\n        if (!(result = object != null && hasFunc(object, key))) {\n          break;\n        }\n        object = object[key];\n      }\n      if (result || ++index != length) {\n        return result;\n      }\n      length = object == null ? 0 : object.length;\n      return !!length && isLength(length) && isIndex(key, length) &&\n        (isArray(object) || isArguments(object));\n    }\n\n    /**\n     * Initializes an array clone.\n     *\n     * @private\n     * @param {Array} array The array to clone.\n     * @returns {Array} Returns the initialized clone.\n     */\n    function initCloneArray(array) {\n      var length = array.length,\n          result = new array.constructor(length);\n\n      // Add properties assigned by `RegExp#exec`.\n      if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n        result.index = array.index;\n        result.input = array.input;\n      }\n      return result;\n    }\n\n    /**\n     * Initializes an object clone.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneObject(object) {\n      return (typeof object.constructor == 'function' && !isPrototype(object))\n        ? baseCreate(getPrototype(object))\n        : {};\n    }\n\n    /**\n     * Initializes an object clone based on its `toStringTag`.\n     *\n     * **Note:** This function only supports cloning values with tags of\n     * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @param {string} tag The `toStringTag` of the object to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneByTag(object, tag, isDeep) {\n      var Ctor = object.constructor;\n      switch (tag) {\n        case arrayBufferTag:\n          return cloneArrayBuffer(object);\n\n        case boolTag:\n        case dateTag:\n          return new Ctor(+object);\n\n        case dataViewTag:\n          return cloneDataView(object, isDeep);\n\n        case float32Tag: case float64Tag:\n        case int8Tag: case int16Tag: case int32Tag:\n        case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n          return cloneTypedArray(object, isDeep);\n\n        case mapTag:\n          return new Ctor;\n\n        case numberTag:\n        case stringTag:\n          return new Ctor(object);\n\n        case regexpTag:\n          return cloneRegExp(object);\n\n        case setTag:\n          return new Ctor;\n\n        case symbolTag:\n          return cloneSymbol(object);\n      }\n    }\n\n    /**\n     * Inserts wrapper `details` in a comment at the top of the `source` body.\n     *\n     * @private\n     * @param {string} source The source to modify.\n     * @returns {Array} details The details to insert.\n     * @returns {string} Returns the modified source.\n     */\n    function insertWrapDetails(source, details) {\n      var length = details.length;\n      if (!length) {\n        return source;\n      }\n      var lastIndex = length - 1;\n      details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n      details = details.join(length > 2 ? ', ' : ' ');\n      return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n    }\n\n    /**\n     * Checks if `value` is a flattenable `arguments` object or array.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n     */\n    function isFlattenable(value) {\n      return isArray(value) || isArguments(value) ||\n        !!(spreadableSymbol && value && value[spreadableSymbol]);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like index.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n     */\n    function isIndex(value, length) {\n      var type = typeof value;\n      length = length == null ? MAX_SAFE_INTEGER : length;\n\n      return !!length &&\n        (type == 'number' ||\n          (type != 'symbol' && reIsUint.test(value))) &&\n            (value > -1 && value % 1 == 0 && value < length);\n    }\n\n    /**\n     * Checks if the given arguments are from an iteratee call.\n     *\n     * @private\n     * @param {*} value The potential iteratee value argument.\n     * @param {*} index The potential iteratee index or key argument.\n     * @param {*} object The potential iteratee object argument.\n     * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n     *  else `false`.\n     */\n    function isIterateeCall(value, index, object) {\n      if (!isObject(object)) {\n        return false;\n      }\n      var type = typeof index;\n      if (type == 'number'\n            ? (isArrayLike(object) && isIndex(index, object.length))\n            : (type == 'string' && index in object)\n          ) {\n        return eq(object[index], value);\n      }\n      return false;\n    }\n\n    /**\n     * Checks if `value` is a property name and not a property path.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n     */\n    function isKey(value, object) {\n      if (isArray(value)) {\n        return false;\n      }\n      var type = typeof value;\n      if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n          value == null || isSymbol(value)) {\n        return true;\n      }\n      return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n        (object != null && value in Object(object));\n    }\n\n    /**\n     * Checks if `value` is suitable for use as unique object key.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n     */\n    function isKeyable(value) {\n      var type = typeof value;\n      return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n        ? (value !== '__proto__')\n        : (value === null);\n    }\n\n    /**\n     * Checks if `func` has a lazy counterpart.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` has a lazy counterpart,\n     *  else `false`.\n     */\n    function isLaziable(func) {\n      var funcName = getFuncName(func),\n          other = lodash[funcName];\n\n      if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {\n        return false;\n      }\n      if (func === other) {\n        return true;\n      }\n      var data = getData(other);\n      return !!data && func === data[0];\n    }\n\n    /**\n     * Checks if `func` has its source masked.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n     */\n    function isMasked(func) {\n      return !!maskSrcKey && (maskSrcKey in func);\n    }\n\n    /**\n     * Checks if `func` is capable of being masked.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `func` is maskable, else `false`.\n     */\n    var isMaskable = coreJsData ? isFunction : stubFalse;\n\n    /**\n     * Checks if `value` is likely a prototype object.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n     */\n    function isPrototype(value) {\n      var Ctor = value && value.constructor,\n          proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n      return value === proto;\n    }\n\n    /**\n     * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` if suitable for strict\n     *  equality comparisons, else `false`.\n     */\n    function isStrictComparable(value) {\n      return value === value && !isObject(value);\n    }\n\n    /**\n     * A specialized version of `matchesProperty` for source values suitable\n     * for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {string} key The key of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function matchesStrictComparable(key, srcValue) {\n      return function(object) {\n        if (object == null) {\n          return false;\n        }\n        return object[key] === srcValue &&\n          (srcValue !== undefined || (key in Object(object)));\n      };\n    }\n\n    /**\n     * A specialized version of `_.memoize` which clears the memoized function's\n     * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n     *\n     * @private\n     * @param {Function} func The function to have its output memoized.\n     * @returns {Function} Returns the new memoized function.\n     */\n    function memoizeCapped(func) {\n      var result = memoize(func, function(key) {\n        if (cache.size === MAX_MEMOIZE_SIZE) {\n          cache.clear();\n        }\n        return key;\n      });\n\n      var cache = result.cache;\n      return result;\n    }\n\n    /**\n     * Merges the function metadata of `source` into `data`.\n     *\n     * Merging metadata reduces the number of wrappers used to invoke a function.\n     * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n     * may be applied regardless of execution order. Methods like `_.ary` and\n     * `_.rearg` modify function arguments, making the order in which they are\n     * executed important, preventing the merging of metadata. However, we make\n     * an exception for a safe combined case where curried functions have `_.ary`\n     * and or `_.rearg` applied.\n     *\n     * @private\n     * @param {Array} data The destination metadata.\n     * @param {Array} source The source metadata.\n     * @returns {Array} Returns `data`.\n     */\n    function mergeData(data, source) {\n      var bitmask = data[1],\n          srcBitmask = source[1],\n          newBitmask = bitmask | srcBitmask,\n          isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n\n      var isCombo =\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||\n        ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));\n\n      // Exit early if metadata can't be merged.\n      if (!(isCommon || isCombo)) {\n        return data;\n      }\n      // Use source `thisArg` if available.\n      if (srcBitmask & WRAP_BIND_FLAG) {\n        data[2] = source[2];\n        // Set when currying a bound function.\n        newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n      }\n      // Compose partial arguments.\n      var value = source[3];\n      if (value) {\n        var partials = data[3];\n        data[3] = partials ? composeArgs(partials, value, source[4]) : value;\n        data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];\n      }\n      // Compose partial right arguments.\n      value = source[5];\n      if (value) {\n        partials = data[5];\n        data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;\n        data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];\n      }\n      // Use source `argPos` if available.\n      value = source[7];\n      if (value) {\n        data[7] = value;\n      }\n      // Use source `ary` if it's smaller.\n      if (srcBitmask & WRAP_ARY_FLAG) {\n        data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n      }\n      // Use source `arity` if one is not provided.\n      if (data[9] == null) {\n        data[9] = source[9];\n      }\n      // Use source `func` and merge bitmasks.\n      data[0] = source[0];\n      data[1] = newBitmask;\n\n      return data;\n    }\n\n    /**\n     * This function is like\n     * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * except that it includes inherited enumerable properties.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function nativeKeysIn(object) {\n      var result = [];\n      if (object != null) {\n        for (var key in Object(object)) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a string using `Object.prototype.toString`.\n     *\n     * @private\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     */\n    function objectToString(value) {\n      return nativeObjectToString.call(value);\n    }\n\n    /**\n     * A specialized version of `baseRest` which transforms the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @param {Function} transform The rest array transform.\n     * @returns {Function} Returns the new function.\n     */\n    function overRest(func, start, transform) {\n      start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n      return function() {\n        var args = arguments,\n            index = -1,\n            length = nativeMax(args.length - start, 0),\n            array = Array(length);\n\n        while (++index < length) {\n          array[index] = args[start + index];\n        }\n        index = -1;\n        var otherArgs = Array(start + 1);\n        while (++index < start) {\n          otherArgs[index] = args[index];\n        }\n        otherArgs[start] = transform(array);\n        return apply(func, this, otherArgs);\n      };\n    }\n\n    /**\n     * Gets the parent value at `path` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array} path The path to get the parent value of.\n     * @returns {*} Returns the parent value.\n     */\n    function parent(object, path) {\n      return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n    }\n\n    /**\n     * Reorder `array` according to the specified indexes where the element at\n     * the first index is assigned as the first element, the element at\n     * the second index is assigned as the second element, and so on.\n     *\n     * @private\n     * @param {Array} array The array to reorder.\n     * @param {Array} indexes The arranged array indexes.\n     * @returns {Array} Returns `array`.\n     */\n    function reorder(array, indexes) {\n      var arrLength = array.length,\n          length = nativeMin(indexes.length, arrLength),\n          oldArray = copyArray(array);\n\n      while (length--) {\n        var index = indexes[length];\n        array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n      }\n      return array;\n    }\n\n    /**\n     * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the property to get.\n     * @returns {*} Returns the property value.\n     */\n    function safeGet(object, key) {\n      if (key === 'constructor' && typeof object[key] === 'function') {\n        return;\n      }\n\n      if (key == '__proto__') {\n        return;\n      }\n\n      return object[key];\n    }\n\n    /**\n     * Sets metadata for `func`.\n     *\n     * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n     * period of time, it will trip its breaker and transition to an identity\n     * function to avoid garbage collection pauses in V8. See\n     * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)\n     * for more details.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var setData = shortOut(baseSetData);\n\n    /**\n     * A simple wrapper around the global [`setTimeout`](https://mdn.io/setTimeout).\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    var setTimeout = ctxSetTimeout || function(func, wait) {\n      return root.setTimeout(func, wait);\n    };\n\n    /**\n     * Sets the `toString` method of `func` to return `string`.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var setToString = shortOut(baseSetToString);\n\n    /**\n     * Sets the `toString` method of `wrapper` to mimic the source of `reference`\n     * with wrapper details in a comment at the top of the source body.\n     *\n     * @private\n     * @param {Function} wrapper The function to modify.\n     * @param {Function} reference The reference function.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Function} Returns `wrapper`.\n     */\n    function setWrapToString(wrapper, reference, bitmask) {\n      var source = (reference + '');\n      return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));\n    }\n\n    /**\n     * Creates a function that'll short out and invoke `identity` instead\n     * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n     * milliseconds.\n     *\n     * @private\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new shortable function.\n     */\n    function shortOut(func) {\n      var count = 0,\n          lastCalled = 0;\n\n      return function() {\n        var stamp = nativeNow(),\n            remaining = HOT_SPAN - (stamp - lastCalled);\n\n        lastCalled = stamp;\n        if (remaining > 0) {\n          if (++count >= HOT_COUNT) {\n            return arguments[0];\n          }\n        } else {\n          count = 0;\n        }\n        return func.apply(undefined, arguments);\n      };\n    }\n\n    /**\n     * A specialized version of `_.shuffle` which mutates and sets the size of `array`.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @param {number} [size=array.length] The size of `array`.\n     * @returns {Array} Returns `array`.\n     */\n    function shuffleSelf(array, size) {\n      var index = -1,\n          length = array.length,\n          lastIndex = length - 1;\n\n      size = size === undefined ? length : size;\n      while (++index < size) {\n        var rand = baseRandom(index, lastIndex),\n            value = array[rand];\n\n        array[rand] = array[index];\n        array[index] = value;\n      }\n      array.length = size;\n      return array;\n    }\n\n    /**\n     * Converts `string` to a property path array.\n     *\n     * @private\n     * @param {string} string The string to convert.\n     * @returns {Array} Returns the property path array.\n     */\n    var stringToPath = memoizeCapped(function(string) {\n      var result = [];\n      if (string.charCodeAt(0) === 46 /* . */) {\n        result.push('');\n      }\n      string.replace(rePropName, function(match, number, quote, subString) {\n        result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n      });\n      return result;\n    });\n\n    /**\n     * Converts `value` to a string key if it's not a string or symbol.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {string|symbol} Returns the key.\n     */\n    function toKey(value) {\n      if (typeof value == 'string' || isSymbol(value)) {\n        return value;\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * Converts `func` to its source code.\n     *\n     * @private\n     * @param {Function} func The function to convert.\n     * @returns {string} Returns the source code.\n     */\n    function toSource(func) {\n      if (func != null) {\n        try {\n          return funcToString.call(func);\n        } catch (e) {}\n        try {\n          return (func + '');\n        } catch (e) {}\n      }\n      return '';\n    }\n\n    /**\n     * Updates wrapper `details` based on `bitmask` flags.\n     *\n     * @private\n     * @returns {Array} details The details to modify.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Array} Returns `details`.\n     */\n    function updateWrapDetails(details, bitmask) {\n      arrayEach(wrapFlags, function(pair) {\n        var value = '_.' + pair[0];\n        if ((bitmask & pair[1]) && !arrayIncludes(details, value)) {\n          details.push(value);\n        }\n      });\n      return details.sort();\n    }\n\n    /**\n     * Creates a clone of `wrapper`.\n     *\n     * @private\n     * @param {Object} wrapper The wrapper to clone.\n     * @returns {Object} Returns the cloned wrapper.\n     */\n    function wrapperClone(wrapper) {\n      if (wrapper instanceof LazyWrapper) {\n        return wrapper.clone();\n      }\n      var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);\n      result.__actions__ = copyArray(wrapper.__actions__);\n      result.__index__  = wrapper.__index__;\n      result.__values__ = wrapper.__values__;\n      return result;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of elements split into groups the length of `size`.\n     * If `array` can't be split evenly, the final chunk will be the remaining\n     * elements.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to process.\n     * @param {number} [size=1] The length of each chunk\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the new array of chunks.\n     * @example\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 2);\n     * // => [['a', 'b'], ['c', 'd']]\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 3);\n     * // => [['a', 'b', 'c'], ['d']]\n     */\n    function chunk(array, size, guard) {\n      if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {\n        size = 1;\n      } else {\n        size = nativeMax(toInteger(size), 0);\n      }\n      var length = array == null ? 0 : array.length;\n      if (!length || size < 1) {\n        return [];\n      }\n      var index = 0,\n          resIndex = 0,\n          result = Array(nativeCeil(length / size));\n\n      while (index < length) {\n        result[resIndex++] = baseSlice(array, index, (index += size));\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array with all falsey values removed. The values `false`, `null`,\n     * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to compact.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.compact([0, 1, false, 2, '', 3]);\n     * // => [1, 2, 3]\n     */\n    function compact(array) {\n      var index = -1,\n          length = array == null ? 0 : array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (value) {\n          result[resIndex++] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates a new array concatenating `array` with any additional arrays\n     * and/or values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to concatenate.\n     * @param {...*} [values] The values to concatenate.\n     * @returns {Array} Returns the new concatenated array.\n     * @example\n     *\n     * var array = [1];\n     * var other = _.concat(array, 2, [3], [[4]]);\n     *\n     * console.log(other);\n     * // => [1, 2, 3, [4]]\n     *\n     * console.log(array);\n     * // => [1]\n     */\n    function concat() {\n      var length = arguments.length;\n      if (!length) {\n        return [];\n      }\n      var args = Array(length - 1),\n          array = arguments[0],\n          index = length;\n\n      while (index--) {\n        args[index - 1] = arguments[index];\n      }\n      return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));\n    }\n\n    /**\n     * Creates an array of `array` values not included in the other given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * **Note:** Unlike `_.pullAll`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.without, _.xor\n     * @example\n     *\n     * _.difference([2, 1], [2, 3]);\n     * // => [1]\n     */\n    var difference = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `iteratee` which\n     * is invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * **Note:** Unlike `_.pullAllBy`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var differenceBy = baseRest(function(array, values) {\n      var iteratee = last(values);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `comparator`\n     * which is invoked to compare elements of `array` to `values`. The order and\n     * references of result values are determined by the first array. The comparator\n     * is invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.pullAllWith`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     *\n     * _.differenceWith(objects, [{ 'x': 1, 'y': 2 }], _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }]\n     */\n    var differenceWith = baseRest(function(array, values) {\n      var comparator = last(values);\n      if (isArrayLikeObject(comparator)) {\n        comparator = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.drop([1, 2, 3]);\n     * // => [2, 3]\n     *\n     * _.drop([1, 2, 3], 2);\n     * // => [3]\n     *\n     * _.drop([1, 2, 3], 5);\n     * // => []\n     *\n     * _.drop([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function drop(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.dropRight([1, 2, 3]);\n     * // => [1, 2]\n     *\n     * _.dropRight([1, 2, 3], 2);\n     * // => [1]\n     *\n     * _.dropRight([1, 2, 3], 5);\n     * // => []\n     *\n     * _.dropRight([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function dropRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the end.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.dropRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropRightWhile(users, ['active', false]);\n     * // => objects for ['barney']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropRightWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the beginning.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.dropWhile(users, function(o) { return !o.active; });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropWhile(users, ['active', false]);\n     * // => objects for ['pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true)\n        : [];\n    }\n\n    /**\n     * Fills elements of `array` with `value` from `start` up to, but not\n     * including, `end`.\n     *\n     * **Note:** This method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Array\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.fill(array, 'a');\n     * console.log(array);\n     * // => ['a', 'a', 'a']\n     *\n     * _.fill(Array(3), 2);\n     * // => [2, 2, 2]\n     *\n     * _.fill([4, 6, 8, 10], '*', 1, 3);\n     * // => [4, '*', '*', 10]\n     */\n    function fill(array, value, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {\n        start = 0;\n        end = length;\n      }\n      return baseFill(array, value, start, end);\n    }\n\n    /**\n     * This method is like `_.find` except that it returns the index of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.findIndex(users, function(o) { return o.user == 'barney'; });\n     * // => 0\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findIndex(users, { 'user': 'fred', 'active': false });\n     * // => 1\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findIndex(users, ['active', false]);\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findIndex(users, 'active');\n     * // => 2\n     */\n    function findIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index);\n    }\n\n    /**\n     * This method is like `_.findIndex` except that it iterates over elements\n     * of `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n     * // => 2\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n     * // => 0\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastIndex(users, ['active', false]);\n     * // => 2\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastIndex(users, 'active');\n     * // => 0\n     */\n    function findLastIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length - 1;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = fromIndex < 0\n          ? nativeMax(length + index, 0)\n          : nativeMin(index, length - 1);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index, true);\n    }\n\n    /**\n     * Flattens `array` a single level deep.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flatten([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, [3, [4]], 5]\n     */\n    function flatten(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, 1) : [];\n    }\n\n    /**\n     * Recursively flattens `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flattenDeep([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, 3, 4, 5]\n     */\n    function flattenDeep(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, INFINITY) : [];\n    }\n\n    /**\n     * Recursively flatten `array` up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * var array = [1, [2, [3, [4]], 5]];\n     *\n     * _.flattenDepth(array, 1);\n     * // => [1, 2, [3, [4]], 5]\n     *\n     * _.flattenDepth(array, 2);\n     * // => [1, 2, 3, [4], 5]\n     */\n    function flattenDepth(array, depth) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(array, depth);\n    }\n\n    /**\n     * The inverse of `_.toPairs`; this method returns an object composed\n     * from key-value `pairs`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} pairs The key-value pairs.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.fromPairs([['a', 1], ['b', 2]]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function fromPairs(pairs) {\n      var index = -1,\n          length = pairs == null ? 0 : pairs.length,\n          result = {};\n\n      while (++index < length) {\n        var pair = pairs[index];\n        result[pair[0]] = pair[1];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias first\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the first element of `array`.\n     * @example\n     *\n     * _.head([1, 2, 3]);\n     * // => 1\n     *\n     * _.head([]);\n     * // => undefined\n     */\n    function head(array) {\n      return (array && array.length) ? array[0] : undefined;\n    }\n\n    /**\n     * Gets the index at which the first occurrence of `value` is found in `array`\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. If `fromIndex` is negative, it's used as the\n     * offset from the end of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.indexOf([1, 2, 1, 2], 2);\n     * // => 1\n     *\n     * // Search from the `fromIndex`.\n     * _.indexOf([1, 2, 1, 2], 2, 2);\n     * // => 3\n     */\n    function indexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseIndexOf(array, value, index);\n    }\n\n    /**\n     * Gets all but the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.initial([1, 2, 3]);\n     * // => [1, 2]\n     */\n    function initial(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 0, -1) : [];\n    }\n\n    /**\n     * Creates an array of unique values that are included in all given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersection([2, 1], [2, 3]);\n     * // => [2]\n     */\n    var intersection = baseRest(function(arrays) {\n      var mapped = arrayMap(arrays, castArrayLikeObject);\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped)\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `iteratee`\n     * which is invoked for each element of each `arrays` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersectionBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [2.1]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.intersectionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }]\n     */\n    var intersectionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      if (iteratee === last(mapped)) {\n        iteratee = undefined;\n      } else {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `comparator`\n     * which is invoked to compare elements of `arrays`. The order and references\n     * of result values are determined by the first array. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.intersectionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }]\n     */\n    var intersectionWith = baseRest(function(arrays) {\n      var comparator = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      if (comparator) {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Converts all elements in `array` into a string separated by `separator`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to convert.\n     * @param {string} [separator=','] The element separator.\n     * @returns {string} Returns the joined string.\n     * @example\n     *\n     * _.join(['a', 'b', 'c'], '~');\n     * // => 'a~b~c'\n     */\n    function join(array, separator) {\n      return array == null ? '' : nativeJoin.call(array, separator);\n    }\n\n    /**\n     * Gets the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the last element of `array`.\n     * @example\n     *\n     * _.last([1, 2, 3]);\n     * // => 3\n     */\n    function last(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? array[length - 1] : undefined;\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it iterates over elements of\n     * `array` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.lastIndexOf([1, 2, 1, 2], 2);\n     * // => 3\n     *\n     * // Search from the `fromIndex`.\n     * _.lastIndexOf([1, 2, 1, 2], 2, 2);\n     * // => 1\n     */\n    function lastIndexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = index < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);\n      }\n      return value === value\n        ? strictLastIndexOf(array, value, index)\n        : baseFindIndex(array, baseIsNaN, index, true);\n    }\n\n    /**\n     * Gets the element at index `n` of `array`. If `n` is negative, the nth\n     * element from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.11.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=0] The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     *\n     * _.nth(array, 1);\n     * // => 'b'\n     *\n     * _.nth(array, -2);\n     * // => 'c';\n     */\n    function nth(array, n) {\n      return (array && array.length) ? baseNth(array, toInteger(n)) : undefined;\n    }\n\n    /**\n     * Removes all given values from `array` using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`\n     * to remove elements from an array by predicate.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...*} [values] The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pull(array, 'a', 'c');\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    var pull = baseRest(pullAll);\n\n    /**\n     * This method is like `_.pull` except that it accepts an array of values to remove.\n     *\n     * **Note:** Unlike `_.difference`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pullAll(array, ['a', 'c']);\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    function pullAll(array, values) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values)\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `iteratee` which is\n     * invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The iteratee is invoked with one argument: (value).\n     *\n     * **Note:** Unlike `_.differenceBy`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1 }, { 'x': 2 }, { 'x': 3 }, { 'x': 1 }];\n     *\n     * _.pullAllBy(array, [{ 'x': 1 }, { 'x': 3 }], 'x');\n     * console.log(array);\n     * // => [{ 'x': 2 }]\n     */\n    function pullAllBy(array, values, iteratee) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, getIteratee(iteratee, 2))\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `comparator` which\n     * is invoked to compare elements of `array` to `values`. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.differenceWith`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1, 'y': 2 }, { 'x': 3, 'y': 4 }, { 'x': 5, 'y': 6 }];\n     *\n     * _.pullAllWith(array, [{ 'x': 3, 'y': 4 }], _.isEqual);\n     * console.log(array);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 5, 'y': 6 }]\n     */\n    function pullAllWith(array, values, comparator) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, undefined, comparator)\n        : array;\n    }\n\n    /**\n     * Removes elements from `array` corresponding to `indexes` and returns an\n     * array of removed elements.\n     *\n     * **Note:** Unlike `_.at`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...(number|number[])} [indexes] The indexes of elements to remove.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     * var pulled = _.pullAt(array, [1, 3]);\n     *\n     * console.log(array);\n     * // => ['a', 'c']\n     *\n     * console.log(pulled);\n     * // => ['b', 'd']\n     */\n    var pullAt = flatRest(function(array, indexes) {\n      var length = array == null ? 0 : array.length,\n          result = baseAt(array, indexes);\n\n      basePullAt(array, arrayMap(indexes, function(index) {\n        return isIndex(index, length) ? +index : index;\n      }).sort(compareAscending));\n\n      return result;\n    });\n\n    /**\n     * Removes all elements from `array` that `predicate` returns truthy for\n     * and returns an array of the removed elements. The predicate is invoked\n     * with three arguments: (value, index, array).\n     *\n     * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`\n     * to pull elements from an array by value.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = [1, 2, 3, 4];\n     * var evens = _.remove(array, function(n) {\n     *   return n % 2 == 0;\n     * });\n     *\n     * console.log(array);\n     * // => [1, 3]\n     *\n     * console.log(evens);\n     * // => [2, 4]\n     */\n    function remove(array, predicate) {\n      var result = [];\n      if (!(array && array.length)) {\n        return result;\n      }\n      var index = -1,\n          indexes = [],\n          length = array.length;\n\n      predicate = getIteratee(predicate, 3);\n      while (++index < length) {\n        var value = array[index];\n        if (predicate(value, index, array)) {\n          result.push(value);\n          indexes.push(index);\n        }\n      }\n      basePullAt(array, indexes);\n      return result;\n    }\n\n    /**\n     * Reverses `array` so that the first element becomes the last, the second\n     * element becomes the second to last, and so on.\n     *\n     * **Note:** This method mutates `array` and is based on\n     * [`Array#reverse`](https://mdn.io/Array/reverse).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.reverse(array);\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function reverse(array) {\n      return array == null ? array : nativeReverse.call(array);\n    }\n\n    /**\n     * Creates a slice of `array` from `start` up to, but not including, `end`.\n     *\n     * **Note:** This method is used instead of\n     * [`Array#slice`](https://mdn.io/Array/slice) to ensure dense arrays are\n     * returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function slice(array, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {\n        start = 0;\n        end = length;\n      }\n      else {\n        start = start == null ? 0 : toInteger(start);\n        end = end === undefined ? length : toInteger(end);\n      }\n      return baseSlice(array, start, end);\n    }\n\n    /**\n     * Uses a binary search to determine the lowest index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedIndex([30, 50], 40);\n     * // => 1\n     */\n    function sortedIndex(array, value) {\n      return baseSortedIndex(array, value);\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 0\n     */\n    function sortedIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 1\n     */\n    function sortedIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value);\n        if (index < length && eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it returns the highest\n     * index at which `value` should be inserted into `array` in order to\n     * maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedLastIndex([4, 5, 5, 5, 6], 5);\n     * // => 4\n     */\n    function sortedLastIndex(array, value) {\n      return baseSortedIndex(array, value, true);\n    }\n\n    /**\n     * This method is like `_.sortedLastIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 1\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 1\n     */\n    function sortedLastIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2), true);\n    }\n\n    /**\n     * This method is like `_.lastIndexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedLastIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 3\n     */\n    function sortedLastIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value, true) - 1;\n        if (eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.uniq` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniq([1, 1, 2]);\n     * // => [1, 2]\n     */\n    function sortedUniq(array) {\n      return (array && array.length)\n        ? baseSortedUniq(array)\n        : [];\n    }\n\n    /**\n     * This method is like `_.uniqBy` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniqBy([1.1, 1.2, 2.3, 2.4], Math.floor);\n     * // => [1.1, 2.3]\n     */\n    function sortedUniqBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSortedUniq(array, getIteratee(iteratee, 2))\n        : [];\n    }\n\n    /**\n     * Gets all but the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.tail([1, 2, 3]);\n     * // => [2, 3]\n     */\n    function tail(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 1, length) : [];\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.take([1, 2, 3]);\n     * // => [1]\n     *\n     * _.take([1, 2, 3], 2);\n     * // => [1, 2]\n     *\n     * _.take([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.take([1, 2, 3], 0);\n     * // => []\n     */\n    function take(array, n, guard) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.takeRight([1, 2, 3]);\n     * // => [3]\n     *\n     * _.takeRight([1, 2, 3], 2);\n     * // => [2, 3]\n     *\n     * _.takeRight([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.takeRight([1, 2, 3], 0);\n     * // => []\n     */\n    function takeRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the end. Elements are\n     * taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.takeRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeRightWhile(users, ['active', false]);\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeRightWhile(users, 'active');\n     * // => []\n     */\n    function takeRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), false, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the beginning. Elements\n     * are taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.takeWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeWhile(users, ['active', false]);\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeWhile(users, 'active');\n     * // => []\n     */\n    function takeWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3))\n        : [];\n    }\n\n    /**\n     * Creates an array of unique values, in order, from all given arrays using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.union([2], [1, 2]);\n     * // => [2, 1]\n     */\n    var union = baseRest(function(arrays) {\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which uniqueness is computed. Result values are chosen from the first\n     * array in which the value occurs. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.unionBy([2.1], [1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.unionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    var unionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `comparator` which\n     * is invoked to compare elements of `arrays`. Result values are chosen from\n     * the first array in which the value occurs. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.unionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var unionWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined, comparator);\n    });\n\n    /**\n     * Creates a duplicate-free version of an array, using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons, in which only the first occurrence of each element\n     * is kept. The order of result values is determined by the order they occur\n     * in the array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniq([2, 1, 2]);\n     * // => [2, 1]\n     */\n    function uniq(array) {\n      return (array && array.length) ? baseUniq(array) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * uniqueness is computed. The order of result values is determined by the\n     * order they occur in the array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniqBy([2.1, 1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    function uniqBy(array, iteratee) {\n      return (array && array.length) ? baseUniq(array, getIteratee(iteratee, 2)) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `comparator` which\n     * is invoked to compare elements of `array`. The order of result values is\n     * determined by the order they occur in the array.The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.uniqWith(objects, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]\n     */\n    function uniqWith(array, comparator) {\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return (array && array.length) ? baseUniq(array, undefined, comparator) : [];\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts an array of grouped\n     * elements and creates an array regrouping the elements to their pre-zip\n     * configuration.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.2.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     *\n     * _.unzip(zipped);\n     * // => [['a', 'b'], [1, 2], [true, false]]\n     */\n    function unzip(array) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var length = 0;\n      array = arrayFilter(array, function(group) {\n        if (isArrayLikeObject(group)) {\n          length = nativeMax(group.length, length);\n          return true;\n        }\n      });\n      return baseTimes(length, function(index) {\n        return arrayMap(array, baseProperty(index));\n      });\n    }\n\n    /**\n     * This method is like `_.unzip` except that it accepts `iteratee` to specify\n     * how regrouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  regrouped values.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip([1, 2], [10, 20], [100, 200]);\n     * // => [[1, 10, 100], [2, 20, 200]]\n     *\n     * _.unzipWith(zipped, _.add);\n     * // => [3, 30, 300]\n     */\n    function unzipWith(array, iteratee) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var result = unzip(array);\n      if (iteratee == null) {\n        return result;\n      }\n      return arrayMap(result, function(group) {\n        return apply(iteratee, undefined, group);\n      });\n    }\n\n    /**\n     * Creates an array excluding all given values using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.pull`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...*} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.xor\n     * @example\n     *\n     * _.without([2, 1, 2, 3], 1, 2);\n     * // => [3]\n     */\n    var without = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, values)\n        : [];\n    });\n\n    /**\n     * Creates an array of unique values that is the\n     * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n     * of the given arrays. The order of result values is determined by the order\n     * they occur in the arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.without\n     * @example\n     *\n     * _.xor([2, 1], [2, 3]);\n     * // => [1, 3]\n     */\n    var xor = baseRest(function(arrays) {\n      return baseXor(arrayFilter(arrays, isArrayLikeObject));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which by which they're compared. The order of result values is determined\n     * by the order they occur in the arrays. The iteratee is invoked with one\n     * argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.xorBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2, 3.4]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.xorBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var xorBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `comparator` which is\n     * invoked to compare elements of `arrays`. The order of result values is\n     * determined by the order they occur in the arrays. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.xorWith(objects, others, _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var xorWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined, comparator);\n    });\n\n    /**\n     * Creates an array of grouped elements, the first of which contains the\n     * first elements of the given arrays, the second of which contains the\n     * second elements of the given arrays, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     */\n    var zip = baseRest(unzip);\n\n    /**\n     * This method is like `_.fromPairs` except that it accepts two arrays,\n     * one of property identifiers and one of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.4.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObject(['a', 'b'], [1, 2]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function zipObject(props, values) {\n      return baseZipObject(props || [], values || [], assignValue);\n    }\n\n    /**\n     * This method is like `_.zipObject` except that it supports property paths.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObjectDeep(['a.b[0].c', 'a.b[1].d'], [1, 2]);\n     * // => { 'a': { 'b': [{ 'c': 1 }, { 'd': 2 }] } }\n     */\n    function zipObjectDeep(props, values) {\n      return baseZipObject(props || [], values || [], baseSet);\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts `iteratee` to specify\n     * how grouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  grouped values.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zipWith([1, 2], [10, 20], [100, 200], function(a, b, c) {\n     *   return a + b + c;\n     * });\n     * // => [111, 222]\n     */\n    var zipWith = baseRest(function(arrays) {\n      var length = arrays.length,\n          iteratee = length > 1 ? arrays[length - 1] : undefined;\n\n      iteratee = typeof iteratee == 'function' ? (arrays.pop(), iteratee) : undefined;\n      return unzipWith(arrays, iteratee);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` wrapper instance that wraps `value` with explicit method\n     * chain sequences enabled. The result of such sequences must be unwrapped\n     * with `_#value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Seq\n     * @param {*} value The value to wrap.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36 },\n     *   { 'user': 'fred',    'age': 40 },\n     *   { 'user': 'pebbles', 'age': 1 }\n     * ];\n     *\n     * var youngest = _\n     *   .chain(users)\n     *   .sortBy('age')\n     *   .map(function(o) {\n     *     return o.user + ' is ' + o.age;\n     *   })\n     *   .head()\n     *   .value();\n     * // => 'pebbles is 1'\n     */\n    function chain(value) {\n      var result = lodash(value);\n      result.__chain__ = true;\n      return result;\n    }\n\n    /**\n     * This method invokes `interceptor` and returns `value`. The interceptor\n     * is invoked with one argument; (value). The purpose of this method is to\n     * \"tap into\" a method chain sequence in order to modify intermediate results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * _([1, 2, 3])\n     *  .tap(function(array) {\n     *    // Mutate input array.\n     *    array.pop();\n     *  })\n     *  .reverse()\n     *  .value();\n     * // => [2, 1]\n     */\n    function tap(value, interceptor) {\n      interceptor(value);\n      return value;\n    }\n\n    /**\n     * This method is like `_.tap` except that it returns the result of `interceptor`.\n     * The purpose of this method is to \"pass thru\" values replacing intermediate\n     * results in a method chain sequence.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns the result of `interceptor`.\n     * @example\n     *\n     * _('  abc  ')\n     *  .chain()\n     *  .trim()\n     *  .thru(function(value) {\n     *    return [value];\n     *  })\n     *  .value();\n     * // => ['abc']\n     */\n    function thru(value, interceptor) {\n      return interceptor(value);\n    }\n\n    /**\n     * This method is the wrapper version of `_.at`.\n     *\n     * @name at\n     * @memberOf _\n     * @since 1.0.0\n     * @category Seq\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _(object).at(['a[0].b.c', 'a[1]']).value();\n     * // => [3, 4]\n     */\n    var wrapperAt = flatRest(function(paths) {\n      var length = paths.length,\n          start = length ? paths[0] : 0,\n          value = this.__wrapped__,\n          interceptor = function(object) { return baseAt(object, paths); };\n\n      if (length > 1 || this.__actions__.length ||\n          !(value instanceof LazyWrapper) || !isIndex(start)) {\n        return this.thru(interceptor);\n      }\n      value = value.slice(start, +start + (length ? 1 : 0));\n      value.__actions__.push({\n        'func': thru,\n        'args': [interceptor],\n        'thisArg': undefined\n      });\n      return new LodashWrapper(value, this.__chain__).thru(function(array) {\n        if (length && !array.length) {\n          array.push(undefined);\n        }\n        return array;\n      });\n    });\n\n    /**\n     * Creates a `lodash` wrapper instance with explicit method chain sequences enabled.\n     *\n     * @name chain\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * // A sequence without explicit chaining.\n     * _(users).head();\n     * // => { 'user': 'barney', 'age': 36 }\n     *\n     * // A sequence with explicit chaining.\n     * _(users)\n     *   .chain()\n     *   .head()\n     *   .pick('user')\n     *   .value();\n     * // => { 'user': 'barney' }\n     */\n    function wrapperChain() {\n      return chain(this);\n    }\n\n    /**\n     * Executes the chain sequence and returns the wrapped result.\n     *\n     * @name commit\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2];\n     * var wrapped = _(array).push(3);\n     *\n     * console.log(array);\n     * // => [1, 2]\n     *\n     * wrapped = wrapped.commit();\n     * console.log(array);\n     * // => [1, 2, 3]\n     *\n     * wrapped.last();\n     * // => 3\n     *\n     * console.log(array);\n     * // => [1, 2, 3]\n     */\n    function wrapperCommit() {\n      return new LodashWrapper(this.value(), this.__chain__);\n    }\n\n    /**\n     * Gets the next value on a wrapped object following the\n     * [iterator protocol](https://mdn.io/iteration_protocols#iterator).\n     *\n     * @name next\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the next iterator value.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 1 }\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 2 }\n     *\n     * wrapped.next();\n     * // => { 'done': true, 'value': undefined }\n     */\n    function wrapperNext() {\n      if (this.__values__ === undefined) {\n        this.__values__ = toArray(this.value());\n      }\n      var done = this.__index__ >= this.__values__.length,\n          value = done ? undefined : this.__values__[this.__index__++];\n\n      return { 'done': done, 'value': value };\n    }\n\n    /**\n     * Enables the wrapper to be iterable.\n     *\n     * @name Symbol.iterator\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the wrapper object.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped[Symbol.iterator]() === wrapped;\n     * // => true\n     *\n     * Array.from(wrapped);\n     * // => [1, 2]\n     */\n    function wrapperToIterator() {\n      return this;\n    }\n\n    /**\n     * Creates a clone of the chain sequence planting `value` as the wrapped value.\n     *\n     * @name plant\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @param {*} value The value to plant.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2]).map(square);\n     * var other = wrapped.plant([3, 4]);\n     *\n     * other.value();\n     * // => [9, 16]\n     *\n     * wrapped.value();\n     * // => [1, 4]\n     */\n    function wrapperPlant(value) {\n      var result,\n          parent = this;\n\n      while (parent instanceof baseLodash) {\n        var clone = wrapperClone(parent);\n        clone.__index__ = 0;\n        clone.__values__ = undefined;\n        if (result) {\n          previous.__wrapped__ = clone;\n        } else {\n          result = clone;\n        }\n        var previous = clone;\n        parent = parent.__wrapped__;\n      }\n      previous.__wrapped__ = value;\n      return result;\n    }\n\n    /**\n     * This method is the wrapper version of `_.reverse`.\n     *\n     * **Note:** This method mutates the wrapped array.\n     *\n     * @name reverse\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _(array).reverse().value()\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function wrapperReverse() {\n      var value = this.__wrapped__;\n      if (value instanceof LazyWrapper) {\n        var wrapped = value;\n        if (this.__actions__.length) {\n          wrapped = new LazyWrapper(this);\n        }\n        wrapped = wrapped.reverse();\n        wrapped.__actions__.push({\n          'func': thru,\n          'args': [reverse],\n          'thisArg': undefined\n        });\n        return new LodashWrapper(wrapped, this.__chain__);\n      }\n      return this.thru(reverse);\n    }\n\n    /**\n     * Executes the chain sequence to resolve the unwrapped value.\n     *\n     * @name value\n     * @memberOf _\n     * @since 0.1.0\n     * @alias toJSON, valueOf\n     * @category Seq\n     * @returns {*} Returns the resolved unwrapped value.\n     * @example\n     *\n     * _([1, 2, 3]).value();\n     * // => [1, 2, 3]\n     */\n    function wrapperValue() {\n      return baseWrapperValue(this.__wrapped__, this.__actions__);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the number of times the key was returned by `iteratee`. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.countBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': 1, '6': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.countBy(['one', 'two', 'three'], 'length');\n     * // => { '3': 2, '5': 1 }\n     */\n    var countBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        ++result[key];\n      } else {\n        baseAssignValue(result, key, 1);\n      }\n    });\n\n    /**\n     * Checks if `predicate` returns truthy for **all** elements of `collection`.\n     * Iteration is stopped once `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * **Note:** This method returns `true` for\n     * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because\n     * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of\n     * elements of empty collections.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.every([true, 1, null, 'yes'], Boolean);\n     * // => false\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.every(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.every(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.every(users, 'active');\n     * // => false\n     */\n    function every(collection, predicate, guard) {\n      var func = isArray(collection) ? arrayEvery : baseEvery;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning an array of all elements\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * **Note:** Unlike `_.remove`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.reject\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * _.filter(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, { 'age': 36, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.filter(users, 'active');\n     * // => objects for ['barney']\n     */\n    function filter(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning the first element\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': true },\n     *   { 'user': 'fred',    'age': 40, 'active': false },\n     *   { 'user': 'pebbles', 'age': 1,  'active': true }\n     * ];\n     *\n     * _.find(users, function(o) { return o.age < 40; });\n     * // => object for 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.find(users, { 'age': 1, 'active': true });\n     * // => object for 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.find(users, ['active', false]);\n     * // => object for 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.find(users, 'active');\n     * // => object for 'barney'\n     */\n    var find = createFind(findIndex);\n\n    /**\n     * This method is like `_.find` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=collection.length-1] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * _.findLast([1, 2, 3, 4], function(n) {\n     *   return n % 2 == 1;\n     * });\n     * // => 3\n     */\n    var findLast = createFind(findLastIndex);\n\n    /**\n     * Creates a flattened array of values by running each element in `collection`\n     * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n     * with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [n, n];\n     * }\n     *\n     * _.flatMap([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMap(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), 1);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDeep([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMapDeep(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), INFINITY);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDepth([1, 2], duplicate, 2);\n     * // => [[1, 1], [2, 2]]\n     */\n    function flatMapDepth(collection, iteratee, depth) {\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(map(collection, iteratee), depth);\n    }\n\n    /**\n     * Iterates over elements of `collection` and invokes `iteratee` for each element.\n     * The iteratee is invoked with three arguments: (value, index|key, collection).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n     * property are iterated like arrays. To avoid this behavior use `_.forIn`\n     * or `_.forOwn` for object iteration.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias each\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEachRight\n     * @example\n     *\n     * _.forEach([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `1` then `2`.\n     *\n     * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forEach(collection, iteratee) {\n      var func = isArray(collection) ? arrayEach : baseEach;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forEach` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @alias eachRight\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEach\n     * @example\n     *\n     * _.forEachRight([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `2` then `1`.\n     */\n    function forEachRight(collection, iteratee) {\n      var func = isArray(collection) ? arrayEachRight : baseEachRight;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The order of grouped values\n     * is determined by the order they occur in `collection`. The corresponding\n     * value of each key is an array of elements responsible for generating the\n     * key. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': [4.2], '6': [6.1, 6.3] }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.groupBy(['one', 'two', 'three'], 'length');\n     * // => { '3': ['one', 'two'], '5': ['three'] }\n     */\n    var groupBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        result[key].push(value);\n      } else {\n        baseAssignValue(result, key, [value]);\n      }\n    });\n\n    /**\n     * Checks if `value` is in `collection`. If `collection` is a string, it's\n     * checked for a substring of `value`, otherwise\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * is used for equality comparisons. If `fromIndex` is negative, it's used as\n     * the offset from the end of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {boolean} Returns `true` if `value` is found, else `false`.\n     * @example\n     *\n     * _.includes([1, 2, 3], 1);\n     * // => true\n     *\n     * _.includes([1, 2, 3], 1, 2);\n     * // => false\n     *\n     * _.includes({ 'a': 1, 'b': 2 }, 1);\n     * // => true\n     *\n     * _.includes('abcd', 'bc');\n     * // => true\n     */\n    function includes(collection, value, fromIndex, guard) {\n      collection = isArrayLike(collection) ? collection : values(collection);\n      fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n      var length = collection.length;\n      if (fromIndex < 0) {\n        fromIndex = nativeMax(length + fromIndex, 0);\n      }\n      return isString(collection)\n        ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n        : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n    }\n\n    /**\n     * Invokes the method at `path` of each element in `collection`, returning\n     * an array of the results of each invoked method. Any additional arguments\n     * are provided to each invoked method. If `path` is a function, it's invoked\n     * for, and `this` bound to, each element in `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array|Function|string} path The path of the method to invoke or\n     *  the function invoked per iteration.\n     * @param {...*} [args] The arguments to invoke each method with.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.invokeMap([[5, 1, 7], [3, 2, 1]], 'sort');\n     * // => [[1, 5, 7], [1, 2, 3]]\n     *\n     * _.invokeMap([123, 456], String.prototype.split, '');\n     * // => [['1', '2', '3'], ['4', '5', '6']]\n     */\n    var invokeMap = baseRest(function(collection, path, args) {\n      var index = -1,\n          isFunc = typeof path == 'function',\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value) {\n        result[++index] = isFunc ? apply(path, value, args) : baseInvoke(value, path, args);\n      });\n      return result;\n    });\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the last element responsible for generating the key. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * var array = [\n     *   { 'dir': 'left', 'code': 97 },\n     *   { 'dir': 'right', 'code': 100 }\n     * ];\n     *\n     * _.keyBy(array, function(o) {\n     *   return String.fromCharCode(o.code);\n     * });\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.keyBy(array, 'dir');\n     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n     */\n    var keyBy = createAggregator(function(result, value, key) {\n      baseAssignValue(result, key, value);\n    });\n\n    /**\n     * Creates an array of values by running each element in `collection` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n     *\n     * The guarded methods are:\n     * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n     * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n     * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n     * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * _.map([4, 8], square);\n     * // => [16, 64]\n     *\n     * _.map({ 'a': 4, 'b': 8 }, square);\n     * // => [16, 64] (iteration order is not guaranteed)\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, 'user');\n     * // => ['barney', 'fred']\n     */\n    function map(collection, iteratee) {\n      var func = isArray(collection) ? arrayMap : baseMap;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.sortBy` except that it allows specifying the sort\n     * orders of the iteratees to sort by. If `orders` is unspecified, all values\n     * are sorted in ascending order. Otherwise, specify an order of \"desc\" for\n     * descending or \"asc\" for ascending sort order of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @param {string[]} [orders] The sort orders of `iteratees`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 34 },\n     *   { 'user': 'fred',   'age': 40 },\n     *   { 'user': 'barney', 'age': 36 }\n     * ];\n     *\n     * // Sort by `user` in ascending order and by `age` in descending order.\n     * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n     */\n    function orderBy(collection, iteratees, orders, guard) {\n      if (collection == null) {\n        return [];\n      }\n      if (!isArray(iteratees)) {\n        iteratees = iteratees == null ? [] : [iteratees];\n      }\n      orders = guard ? undefined : orders;\n      if (!isArray(orders)) {\n        orders = orders == null ? [] : [orders];\n      }\n      return baseOrderBy(collection, iteratees, orders);\n    }\n\n    /**\n     * Creates an array of elements split into two groups, the first of which\n     * contains elements `predicate` returns truthy for, the second of which\n     * contains elements `predicate` returns falsey for. The predicate is\n     * invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of grouped elements.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': false },\n     *   { 'user': 'fred',    'age': 40, 'active': true },\n     *   { 'user': 'pebbles', 'age': 1,  'active': false }\n     * ];\n     *\n     * _.partition(users, function(o) { return o.active; });\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.partition(users, { 'age': 1, 'active': false });\n     * // => objects for [['pebbles'], ['barney', 'fred']]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.partition(users, ['active', false]);\n     * // => objects for [['barney', 'pebbles'], ['fred']]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.partition(users, 'active');\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     */\n    var partition = createAggregator(function(result, value, key) {\n      result[key ? 0 : 1].push(value);\n    }, function() { return [[], []]; });\n\n    /**\n     * Reduces `collection` to a value which is the accumulated result of running\n     * each element in `collection` thru `iteratee`, where each successive\n     * invocation is supplied the return value of the previous. If `accumulator`\n     * is not given, the first element of `collection` is used as the initial\n     * value. The iteratee is invoked with four arguments:\n     * (accumulator, value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.reduce`, `_.reduceRight`, and `_.transform`.\n     *\n     * The guarded methods are:\n     * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n     * and `sortBy`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduceRight\n     * @example\n     *\n     * _.reduce([1, 2], function(sum, n) {\n     *   return sum + n;\n     * }, 0);\n     * // => 3\n     *\n     * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     *   return result;\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n     */\n    function reduce(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduce : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n    }\n\n    /**\n     * This method is like `_.reduce` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduce\n     * @example\n     *\n     * var array = [[0, 1], [2, 3], [4, 5]];\n     *\n     * _.reduceRight(array, function(flattened, other) {\n     *   return flattened.concat(other);\n     * }, []);\n     * // => [4, 5, 2, 3, 0, 1]\n     */\n    function reduceRight(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduceRight : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEachRight);\n    }\n\n    /**\n     * The opposite of `_.filter`; this method returns the elements of `collection`\n     * that `predicate` does **not** return truthy for.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.filter\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': true }\n     * ];\n     *\n     * _.reject(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.reject(users, { 'age': 40, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.reject(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.reject(users, 'active');\n     * // => objects for ['barney']\n     */\n    function reject(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, negate(getIteratee(predicate, 3)));\n    }\n\n    /**\n     * Gets a random element from `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     * @example\n     *\n     * _.sample([1, 2, 3, 4]);\n     * // => 2\n     */\n    function sample(collection) {\n      var func = isArray(collection) ? arraySample : baseSample;\n      return func(collection);\n    }\n\n    /**\n     * Gets `n` random elements at unique keys from `collection` up to the\n     * size of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} [n=1] The number of elements to sample.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the random elements.\n     * @example\n     *\n     * _.sampleSize([1, 2, 3], 2);\n     * // => [3, 1]\n     *\n     * _.sampleSize([1, 2, 3], 4);\n     * // => [2, 3, 1]\n     */\n    function sampleSize(collection, n, guard) {\n      if ((guard ? isIterateeCall(collection, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      var func = isArray(collection) ? arraySampleSize : baseSampleSize;\n      return func(collection, n);\n    }\n\n    /**\n     * Creates an array of shuffled values, using a version of the\n     * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     * @example\n     *\n     * _.shuffle([1, 2, 3, 4]);\n     * // => [4, 1, 3, 2]\n     */\n    function shuffle(collection) {\n      var func = isArray(collection) ? arrayShuffle : baseShuffle;\n      return func(collection);\n    }\n\n    /**\n     * Gets the size of `collection` by returning its length for array-like\n     * values or the number of own enumerable string keyed properties for objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @returns {number} Returns the collection size.\n     * @example\n     *\n     * _.size([1, 2, 3]);\n     * // => 3\n     *\n     * _.size({ 'a': 1, 'b': 2 });\n     * // => 2\n     *\n     * _.size('pebbles');\n     * // => 7\n     */\n    function size(collection) {\n      if (collection == null) {\n        return 0;\n      }\n      if (isArrayLike(collection)) {\n        return isString(collection) ? stringSize(collection) : collection.length;\n      }\n      var tag = getTag(collection);\n      if (tag == mapTag || tag == setTag) {\n        return collection.size;\n      }\n      return baseKeys(collection).length;\n    }\n\n    /**\n     * Checks if `predicate` returns truthy for **any** element of `collection`.\n     * Iteration is stopped once `predicate` returns truthy. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.some([null, 0, 'yes', false], Boolean);\n     * // => true\n     *\n     * var users = [\n     *   { 'user': 'barney', 'active': true },\n     *   { 'user': 'fred',   'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.some(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.some(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.some(users, 'active');\n     * // => true\n     */\n    function some(collection, predicate, guard) {\n      var func = isArray(collection) ? arraySome : baseSome;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Creates an array of elements, sorted in ascending order by the results of\n     * running each element in a collection thru each iteratee. This method\n     * performs a stable sort, that is, it preserves the original sort order of\n     * equal elements. The iteratees are invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 },\n     *   { 'user': 'barney', 'age': 34 }\n     * ];\n     *\n     * _.sortBy(users, [function(o) { return o.user; }]);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n     *\n     * _.sortBy(users, ['user', 'age']);\n     * // => objects for [['barney', 34], ['barney', 36], ['fred', 40], ['fred', 48]]\n     */\n    var sortBy = baseRest(function(collection, iteratees) {\n      if (collection == null) {\n        return [];\n      }\n      var length = iteratees.length;\n      if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n        iteratees = [];\n      } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n        iteratees = [iteratees[0]];\n      }\n      return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Gets the timestamp of the number of milliseconds that have elapsed since\n     * the Unix epoch (1 January 1970 00:00:00 UTC).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Date\n     * @returns {number} Returns the timestamp.\n     * @example\n     *\n     * _.defer(function(stamp) {\n     *   console.log(_.now() - stamp);\n     * }, _.now());\n     * // => Logs the number of milliseconds it took for the deferred invocation.\n     */\n    var now = ctxNow || function() {\n      return root.Date.now();\n    };\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The opposite of `_.before`; this method creates a function that invokes\n     * `func` once it's called `n` or more times.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {number} n The number of calls before `func` is invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var saves = ['profile', 'settings'];\n     *\n     * var done = _.after(saves.length, function() {\n     *   console.log('done saving!');\n     * });\n     *\n     * _.forEach(saves, function(type) {\n     *   asyncSave({ 'type': type, 'complete': done });\n     * });\n     * // => Logs 'done saving!' after the two async saves have completed.\n     */\n    function after(n, func) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n < 1) {\n          return func.apply(this, arguments);\n        }\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func`, with up to `n` arguments,\n     * ignoring any additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @param {number} [n=func.length] The arity cap.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.ary(parseInt, 1));\n     * // => [6, 8, 10]\n     */\n    function ary(func, n, guard) {\n      n = guard ? undefined : n;\n      n = (func && n == null) ? func.length : n;\n      return createWrap(func, WRAP_ARY_FLAG, undefined, undefined, undefined, undefined, n);\n    }\n\n    /**\n     * Creates a function that invokes `func`, with the `this` binding and arguments\n     * of the created function, while it's called less than `n` times. Subsequent\n     * calls to the created function return the result of the last `func` invocation.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {number} n The number of calls at which `func` is no longer invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * jQuery(element).on('click', _.before(5, addContactToList));\n     * // => Allows adding up to 4 contacts to the list.\n     */\n    function before(n, func) {\n      var result;\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n > 0) {\n          result = func.apply(this, arguments);\n        }\n        if (n <= 1) {\n          func = undefined;\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of `thisArg`\n     * and `partials` prepended to the arguments it receives.\n     *\n     * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** Unlike native `Function#bind`, this method doesn't set the \"length\"\n     * property of bound functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to bind.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * function greet(greeting, punctuation) {\n     *   return greeting + ' ' + this.user + punctuation;\n     * }\n     *\n     * var object = { 'user': 'fred' };\n     *\n     * var bound = _.bind(greet, object, 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bind(greet, object, _, '!');\n     * bound('hi');\n     * // => 'hi fred!'\n     */\n    var bind = baseRest(function(func, thisArg, partials) {\n      var bitmask = WRAP_BIND_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bind));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(func, bitmask, thisArg, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes the method at `object[key]` with `partials`\n     * prepended to the arguments it receives.\n     *\n     * This method differs from `_.bind` by allowing bound functions to reference\n     * methods that may be redefined or don't yet exist. See\n     * [Peter Michaux's article](http://peter.michaux.ca/articles/lazy-function-definition-pattern)\n     * for more details.\n     *\n     * The `_.bindKey.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Function\n     * @param {Object} object The object to invoke the method on.\n     * @param {string} key The key of the method.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var object = {\n     *   'user': 'fred',\n     *   'greet': function(greeting, punctuation) {\n     *     return greeting + ' ' + this.user + punctuation;\n     *   }\n     * };\n     *\n     * var bound = _.bindKey(object, 'greet', 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * object.greet = function(greeting, punctuation) {\n     *   return greeting + 'ya ' + this.user + punctuation;\n     * };\n     *\n     * bound('!');\n     * // => 'hiya fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bindKey(object, 'greet', _, '!');\n     * bound('hi');\n     * // => 'hiya fred!'\n     */\n    var bindKey = baseRest(function(object, key, partials) {\n      var bitmask = WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bindKey));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(key, bitmask, object, partials, holders);\n    });\n\n    /**\n     * Creates a function that accepts arguments of `func` and either invokes\n     * `func` returning its result, if at least `arity` number of arguments have\n     * been provided, or returns a function that accepts the remaining `func`\n     * arguments, and so on. The arity of `func` may be specified if `func.length`\n     * is not sufficient.\n     *\n     * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curry(abc);\n     *\n     * curried(1)(2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(1)(_, 3)(2);\n     * // => [1, 2, 3]\n     */\n    function curry(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curry.placeholder;\n      return result;\n    }\n\n    /**\n     * This method is like `_.curry` except that arguments are applied to `func`\n     * in the manner of `_.partialRight` instead of `_.partial`.\n     *\n     * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curryRight(abc);\n     *\n     * curried(3)(2)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(2, 3)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(3)(1, _)(2);\n     * // => [1, 2, 3]\n     */\n    function curryRight(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curryRight.placeholder;\n      return result;\n    }\n\n    /**\n     * Creates a debounced function that delays invoking `func` until after `wait`\n     * milliseconds have elapsed since the last time the debounced function was\n     * invoked. The debounced function comes with a `cancel` method to cancel\n     * delayed `func` invocations and a `flush` method to immediately invoke them.\n     * Provide `options` to indicate whether `func` should be invoked on the\n     * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n     * with the last arguments provided to the debounced function. Subsequent\n     * calls to the debounced function return the result of the last `func`\n     * invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the debounced function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.debounce` and `_.throttle`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to debounce.\n     * @param {number} [wait=0] The number of milliseconds to delay.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=false]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {number} [options.maxWait]\n     *  The maximum time `func` is allowed to be delayed before it's invoked.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new debounced function.\n     * @example\n     *\n     * // Avoid costly calculations while the window size is in flux.\n     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n     *\n     * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n     * jQuery(element).on('click', _.debounce(sendMail, 300, {\n     *   'leading': true,\n     *   'trailing': false\n     * }));\n     *\n     * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n     * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n     * var source = new EventSource('/stream');\n     * jQuery(source).on('message', debounced);\n     *\n     * // Cancel the trailing debounced invocation.\n     * jQuery(window).on('popstate', debounced.cancel);\n     */\n    function debounce(func, wait, options) {\n      var lastArgs,\n          lastThis,\n          maxWait,\n          result,\n          timerId,\n          lastCallTime,\n          lastInvokeTime = 0,\n          leading = false,\n          maxing = false,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = toNumber(wait) || 0;\n      if (isObject(options)) {\n        leading = !!options.leading;\n        maxing = 'maxWait' in options;\n        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n\n      function invokeFunc(time) {\n        var args = lastArgs,\n            thisArg = lastThis;\n\n        lastArgs = lastThis = undefined;\n        lastInvokeTime = time;\n        result = func.apply(thisArg, args);\n        return result;\n      }\n\n      function leadingEdge(time) {\n        // Reset any `maxWait` timer.\n        lastInvokeTime = time;\n        // Start the timer for the trailing edge.\n        timerId = setTimeout(timerExpired, wait);\n        // Invoke the leading edge.\n        return leading ? invokeFunc(time) : result;\n      }\n\n      function remainingWait(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime,\n            timeWaiting = wait - timeSinceLastCall;\n\n        return maxing\n          ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n          : timeWaiting;\n      }\n\n      function shouldInvoke(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime;\n\n        // Either this is the first call, activity has stopped and we're at the\n        // trailing edge, the system time has gone backwards and we're treating\n        // it as the trailing edge, or we've hit the `maxWait` limit.\n        return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n          (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n      }\n\n      function timerExpired() {\n        var time = now();\n        if (shouldInvoke(time)) {\n          return trailingEdge(time);\n        }\n        // Restart the timer.\n        timerId = setTimeout(timerExpired, remainingWait(time));\n      }\n\n      function trailingEdge(time) {\n        timerId = undefined;\n\n        // Only invoke if we have `lastArgs` which means `func` has been\n        // debounced at least once.\n        if (trailing && lastArgs) {\n          return invokeFunc(time);\n        }\n        lastArgs = lastThis = undefined;\n        return result;\n      }\n\n      function cancel() {\n        if (timerId !== undefined) {\n          clearTimeout(timerId);\n        }\n        lastInvokeTime = 0;\n        lastArgs = lastCallTime = lastThis = timerId = undefined;\n      }\n\n      function flush() {\n        return timerId === undefined ? result : trailingEdge(now());\n      }\n\n      function debounced() {\n        var time = now(),\n            isInvoking = shouldInvoke(time);\n\n        lastArgs = arguments;\n        lastThis = this;\n        lastCallTime = time;\n\n        if (isInvoking) {\n          if (timerId === undefined) {\n            return leadingEdge(lastCallTime);\n          }\n          if (maxing) {\n            // Handle invocations in a tight loop.\n            clearTimeout(timerId);\n            timerId = setTimeout(timerExpired, wait);\n            return invokeFunc(lastCallTime);\n          }\n        }\n        if (timerId === undefined) {\n          timerId = setTimeout(timerExpired, wait);\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      debounced.flush = flush;\n      return debounced;\n    }\n\n    /**\n     * Defers invoking the `func` until the current call stack has cleared. Any\n     * additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to defer.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.defer(function(text) {\n     *   console.log(text);\n     * }, 'deferred');\n     * // => Logs 'deferred' after one millisecond.\n     */\n    var defer = baseRest(function(func, args) {\n      return baseDelay(func, 1, args);\n    });\n\n    /**\n     * Invokes `func` after `wait` milliseconds. Any additional arguments are\n     * provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.delay(function(text) {\n     *   console.log(text);\n     * }, 1000, 'later');\n     * // => Logs 'later' after one second.\n     */\n    var delay = baseRest(function(func, wait, args) {\n      return baseDelay(func, toNumber(wait) || 0, args);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments reversed.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to flip arguments for.\n     * @returns {Function} Returns the new flipped function.\n     * @example\n     *\n     * var flipped = _.flip(function() {\n     *   return _.toArray(arguments);\n     * });\n     *\n     * flipped('a', 'b', 'c', 'd');\n     * // => ['d', 'c', 'b', 'a']\n     */\n    function flip(func) {\n      return createWrap(func, WRAP_FLIP_FLAG);\n    }\n\n    /**\n     * Creates a function that memoizes the result of `func`. If `resolver` is\n     * provided, it determines the cache key for storing the result based on the\n     * arguments provided to the memoized function. By default, the first argument\n     * provided to the memoized function is used as the map cache key. The `func`\n     * is invoked with the `this` binding of the memoized function.\n     *\n     * **Note:** The cache is exposed as the `cache` property on the memoized\n     * function. Its creation may be customized by replacing the `_.memoize.Cache`\n     * constructor with one whose instances implement the\n     * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n     * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to have its output memoized.\n     * @param {Function} [resolver] The function to resolve the cache key.\n     * @returns {Function} Returns the new memoized function.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     * var other = { 'c': 3, 'd': 4 };\n     *\n     * var values = _.memoize(_.values);\n     * values(object);\n     * // => [1, 2]\n     *\n     * values(other);\n     * // => [3, 4]\n     *\n     * object.a = 2;\n     * values(object);\n     * // => [1, 2]\n     *\n     * // Modify the result cache.\n     * values.cache.set(object, ['a', 'b']);\n     * values(object);\n     * // => ['a', 'b']\n     *\n     * // Replace `_.memoize.Cache`.\n     * _.memoize.Cache = WeakMap;\n     */\n    function memoize(func, resolver) {\n      if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var memoized = function() {\n        var args = arguments,\n            key = resolver ? resolver.apply(this, args) : args[0],\n            cache = memoized.cache;\n\n        if (cache.has(key)) {\n          return cache.get(key);\n        }\n        var result = func.apply(this, args);\n        memoized.cache = cache.set(key, result) || cache;\n        return result;\n      };\n      memoized.cache = new (memoize.Cache || MapCache);\n      return memoized;\n    }\n\n    // Expose `MapCache`.\n    memoize.Cache = MapCache;\n\n    /**\n     * Creates a function that negates the result of the predicate `func`. The\n     * `func` predicate is invoked with the `this` binding and arguments of the\n     * created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} predicate The predicate to negate.\n     * @returns {Function} Returns the new negated function.\n     * @example\n     *\n     * function isEven(n) {\n     *   return n % 2 == 0;\n     * }\n     *\n     * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n     * // => [1, 3, 5]\n     */\n    function negate(predicate) {\n      if (typeof predicate != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return function() {\n        var args = arguments;\n        switch (args.length) {\n          case 0: return !predicate.call(this);\n          case 1: return !predicate.call(this, args[0]);\n          case 2: return !predicate.call(this, args[0], args[1]);\n          case 3: return !predicate.call(this, args[0], args[1], args[2]);\n        }\n        return !predicate.apply(this, args);\n      };\n    }\n\n    /**\n     * Creates a function that is restricted to invoking `func` once. Repeat calls\n     * to the function return the value of the first invocation. The `func` is\n     * invoked with the `this` binding and arguments of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var initialize = _.once(createApplication);\n     * initialize();\n     * initialize();\n     * // => `createApplication` is invoked once\n     */\n    function once(func) {\n      return before(2, func);\n    }\n\n    /**\n     * Creates a function that invokes `func` with its arguments transformed.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to wrap.\n     * @param {...(Function|Function[])} [transforms=[_.identity]]\n     *  The argument transforms.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function doubled(n) {\n     *   return n * 2;\n     * }\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var func = _.overArgs(function(x, y) {\n     *   return [x, y];\n     * }, [square, doubled]);\n     *\n     * func(9, 3);\n     * // => [81, 6]\n     *\n     * func(10, 5);\n     * // => [100, 10]\n     */\n    var overArgs = castRest(function(func, transforms) {\n      transforms = (transforms.length == 1 && isArray(transforms[0]))\n        ? arrayMap(transforms[0], baseUnary(getIteratee()))\n        : arrayMap(baseFlatten(transforms, 1), baseUnary(getIteratee()));\n\n      var funcsLength = transforms.length;\n      return baseRest(function(args) {\n        var index = -1,\n            length = nativeMin(args.length, funcsLength);\n\n        while (++index < length) {\n          args[index] = transforms[index].call(this, args[index]);\n        }\n        return apply(func, this, args);\n      });\n    });\n\n    /**\n     * Creates a function that invokes `func` with `partials` prepended to the\n     * arguments it receives. This method is like `_.bind` except it does **not**\n     * alter the `this` binding.\n     *\n     * The `_.partial.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.2.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var sayHelloTo = _.partial(greet, 'hello');\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     *\n     * // Partially applied with placeholders.\n     * var greetFred = _.partial(greet, _, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     */\n    var partial = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partial));\n      return createWrap(func, WRAP_PARTIAL_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * This method is like `_.partial` except that partially applied arguments\n     * are appended to the arguments it receives.\n     *\n     * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var greetFred = _.partialRight(greet, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     *\n     * // Partially applied with placeholders.\n     * var sayHelloTo = _.partialRight(greet, 'hello', _);\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     */\n    var partialRight = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partialRight));\n      return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments arranged according\n     * to the specified `indexes` where the argument value at the first index is\n     * provided as the first argument, the argument value at the second index is\n     * provided as the second argument, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to rearrange arguments for.\n     * @param {...(number|number[])} indexes The arranged argument indexes.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var rearged = _.rearg(function(a, b, c) {\n     *   return [a, b, c];\n     * }, [2, 0, 1]);\n     *\n     * rearged('b', 'c', 'a')\n     * // => ['a', 'b', 'c']\n     */\n    var rearg = flatRest(function(func, indexes) {\n      return createWrap(func, WRAP_REARG_FLAG, undefined, undefined, undefined, indexes);\n    });\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * created function and arguments from `start` and beyond provided as\n     * an array.\n     *\n     * **Note:** This method is based on the\n     * [rest parameter](https://mdn.io/rest_parameters).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.rest(function(what, names) {\n     *   return what + ' ' + _.initial(names).join(', ') +\n     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n     * });\n     *\n     * say('hello', 'fred', 'barney', 'pebbles');\n     * // => 'hello fred, barney, & pebbles'\n     */\n    function rest(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start === undefined ? start : toInteger(start);\n      return baseRest(func, start);\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * create function and an array of arguments much like\n     * [`Function#apply`](http://www.ecma-international.org/ecma-262/7.0/#sec-function.prototype.apply).\n     *\n     * **Note:** This method is based on the\n     * [spread operator](https://mdn.io/spread_operator).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Function\n     * @param {Function} func The function to spread arguments over.\n     * @param {number} [start=0] The start position of the spread.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.spread(function(who, what) {\n     *   return who + ' says ' + what;\n     * });\n     *\n     * say(['fred', 'hello']);\n     * // => 'fred says hello'\n     *\n     * var numbers = Promise.all([\n     *   Promise.resolve(40),\n     *   Promise.resolve(36)\n     * ]);\n     *\n     * numbers.then(_.spread(function(x, y) {\n     *   return x + y;\n     * }));\n     * // => a Promise of 76\n     */\n    function spread(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start == null ? 0 : nativeMax(toInteger(start), 0);\n      return baseRest(function(args) {\n        var array = args[start],\n            otherArgs = castSlice(args, 0, start);\n\n        if (array) {\n          arrayPush(otherArgs, array);\n        }\n        return apply(func, this, otherArgs);\n      });\n    }\n\n    /**\n     * Creates a throttled function that only invokes `func` at most once per\n     * every `wait` milliseconds. The throttled function comes with a `cancel`\n     * method to cancel delayed `func` invocations and a `flush` method to\n     * immediately invoke them. Provide `options` to indicate whether `func`\n     * should be invoked on the leading and/or trailing edge of the `wait`\n     * timeout. The `func` is invoked with the last arguments provided to the\n     * throttled function. Subsequent calls to the throttled function return the\n     * result of the last `func` invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the throttled function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.throttle` and `_.debounce`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to throttle.\n     * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=true]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new throttled function.\n     * @example\n     *\n     * // Avoid excessively updating the position while scrolling.\n     * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n     *\n     * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n     * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n     * jQuery(element).on('click', throttled);\n     *\n     * // Cancel the trailing throttled invocation.\n     * jQuery(window).on('popstate', throttled.cancel);\n     */\n    function throttle(func, wait, options) {\n      var leading = true,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (isObject(options)) {\n        leading = 'leading' in options ? !!options.leading : leading;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n      return debounce(func, wait, {\n        'leading': leading,\n        'maxWait': wait,\n        'trailing': trailing\n      });\n    }\n\n    /**\n     * Creates a function that accepts up to one argument, ignoring any\n     * additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.unary(parseInt));\n     * // => [6, 8, 10]\n     */\n    function unary(func) {\n      return ary(func, 1);\n    }\n\n    /**\n     * Creates a function that provides `value` to `wrapper` as its first\n     * argument. Any additional arguments provided to the function are appended\n     * to those provided to the `wrapper`. The wrapper is invoked with the `this`\n     * binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {*} value The value to wrap.\n     * @param {Function} [wrapper=identity] The wrapper function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var p = _.wrap(_.escape, function(func, text) {\n     *   return '<p>' + func(text) + '</p>';\n     * });\n     *\n     * p('fred, barney, & pebbles');\n     * // => '<p>fred, barney, &amp; pebbles</p>'\n     */\n    function wrap(value, wrapper) {\n      return partial(castFunction(wrapper), value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Casts `value` as an array if it's not one.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Lang\n     * @param {*} value The value to inspect.\n     * @returns {Array} Returns the cast array.\n     * @example\n     *\n     * _.castArray(1);\n     * // => [1]\n     *\n     * _.castArray({ 'a': 1 });\n     * // => [{ 'a': 1 }]\n     *\n     * _.castArray('abc');\n     * // => ['abc']\n     *\n     * _.castArray(null);\n     * // => [null]\n     *\n     * _.castArray(undefined);\n     * // => [undefined]\n     *\n     * _.castArray();\n     * // => []\n     *\n     * var array = [1, 2, 3];\n     * console.log(_.castArray(array) === array);\n     * // => true\n     */\n    function castArray() {\n      if (!arguments.length) {\n        return [];\n      }\n      var value = arguments[0];\n      return isArray(value) ? value : [value];\n    }\n\n    /**\n     * Creates a shallow clone of `value`.\n     *\n     * **Note:** This method is loosely based on the\n     * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n     * and supports cloning arrays, array buffers, booleans, date objects, maps,\n     * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n     * arrays. The own enumerable properties of `arguments` objects are cloned\n     * as plain objects. An empty object is returned for uncloneable values such\n     * as error objects, functions, DOM nodes, and WeakMaps.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeep\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var shallow = _.clone(objects);\n     * console.log(shallow[0] === objects[0]);\n     * // => true\n     */\n    function clone(value) {\n      return baseClone(value, CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.clone` except that it accepts `customizer` which\n     * is invoked to produce the cloned value. If `customizer` returns `undefined`,\n     * cloning is handled by the method instead. The `customizer` is invoked with\n     * up to four arguments; (value [, index|key, object, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeepWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(false);\n     *   }\n     * }\n     *\n     * var el = _.cloneWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 0\n     */\n    function cloneWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * This method is like `_.clone` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.clone\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var deep = _.cloneDeep(objects);\n     * console.log(deep[0] === objects[0]);\n     * // => false\n     */\n    function cloneDeep(value) {\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.cloneWith` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.cloneWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(true);\n     *   }\n     * }\n     *\n     * var el = _.cloneDeepWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 20\n     */\n    function cloneDeepWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * Checks if `object` conforms to `source` by invoking the predicate\n     * properties of `source` with the corresponding property values of `object`.\n     *\n     * **Note:** This method is equivalent to `_.conforms` when `source` is\n     * partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 1; } });\n     * // => true\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 2; } });\n     * // => false\n     */\n    function conformsTo(object, source) {\n      return source == null || baseConformsTo(object, source, keys(source));\n    }\n\n    /**\n     * Performs a\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * comparison between two values to determine if they are equivalent.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.eq(object, object);\n     * // => true\n     *\n     * _.eq(object, other);\n     * // => false\n     *\n     * _.eq('a', 'a');\n     * // => true\n     *\n     * _.eq('a', Object('a'));\n     * // => false\n     *\n     * _.eq(NaN, NaN);\n     * // => true\n     */\n    function eq(value, other) {\n      return value === other || (value !== value && other !== other);\n    }\n\n    /**\n     * Checks if `value` is greater than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     * @see _.lt\n     * @example\n     *\n     * _.gt(3, 1);\n     * // => true\n     *\n     * _.gt(3, 3);\n     * // => false\n     *\n     * _.gt(1, 3);\n     * // => false\n     */\n    var gt = createRelationalOperation(baseGt);\n\n    /**\n     * Checks if `value` is greater than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than or equal to\n     *  `other`, else `false`.\n     * @see _.lte\n     * @example\n     *\n     * _.gte(3, 1);\n     * // => true\n     *\n     * _.gte(3, 3);\n     * // => true\n     *\n     * _.gte(1, 3);\n     * // => false\n     */\n    var gte = createRelationalOperation(function(value, other) {\n      return value >= other;\n    });\n\n    /**\n     * Checks if `value` is likely an `arguments` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArguments(function() { return arguments; }());\n     * // => true\n     *\n     * _.isArguments([1, 2, 3]);\n     * // => false\n     */\n    var isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n      return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n        !propertyIsEnumerable.call(value, 'callee');\n    };\n\n    /**\n     * Checks if `value` is classified as an `Array` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n     * @example\n     *\n     * _.isArray([1, 2, 3]);\n     * // => true\n     *\n     * _.isArray(document.body.children);\n     * // => false\n     *\n     * _.isArray('abc');\n     * // => false\n     *\n     * _.isArray(_.noop);\n     * // => false\n     */\n    var isArray = Array.isArray;\n\n    /**\n     * Checks if `value` is classified as an `ArrayBuffer` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     * @example\n     *\n     * _.isArrayBuffer(new ArrayBuffer(2));\n     * // => true\n     *\n     * _.isArrayBuffer(new Array(2));\n     * // => false\n     */\n    var isArrayBuffer = nodeIsArrayBuffer ? baseUnary(nodeIsArrayBuffer) : baseIsArrayBuffer;\n\n    /**\n     * Checks if `value` is array-like. A value is considered array-like if it's\n     * not a function and has a `value.length` that's an integer greater than or\n     * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n     * @example\n     *\n     * _.isArrayLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLike(document.body.children);\n     * // => true\n     *\n     * _.isArrayLike('abc');\n     * // => true\n     *\n     * _.isArrayLike(_.noop);\n     * // => false\n     */\n    function isArrayLike(value) {\n      return value != null && isLength(value.length) && !isFunction(value);\n    }\n\n    /**\n     * This method is like `_.isArrayLike` except that it also checks if `value`\n     * is an object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array-like object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArrayLikeObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLikeObject(document.body.children);\n     * // => true\n     *\n     * _.isArrayLikeObject('abc');\n     * // => false\n     *\n     * _.isArrayLikeObject(_.noop);\n     * // => false\n     */\n    function isArrayLikeObject(value) {\n      return isObjectLike(value) && isArrayLike(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a boolean primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n     * @example\n     *\n     * _.isBoolean(false);\n     * // => true\n     *\n     * _.isBoolean(null);\n     * // => false\n     */\n    function isBoolean(value) {\n      return value === true || value === false ||\n        (isObjectLike(value) && baseGetTag(value) == boolTag);\n    }\n\n    /**\n     * Checks if `value` is a buffer.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n     * @example\n     *\n     * _.isBuffer(new Buffer(2));\n     * // => true\n     *\n     * _.isBuffer(new Uint8Array(2));\n     * // => false\n     */\n    var isBuffer = nativeIsBuffer || stubFalse;\n\n    /**\n     * Checks if `value` is classified as a `Date` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     * @example\n     *\n     * _.isDate(new Date);\n     * // => true\n     *\n     * _.isDate('Mon April 23 2012');\n     * // => false\n     */\n    var isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;\n\n    /**\n     * Checks if `value` is likely a DOM element.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n     * @example\n     *\n     * _.isElement(document.body);\n     * // => true\n     *\n     * _.isElement('<body>');\n     * // => false\n     */\n    function isElement(value) {\n      return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n    }\n\n    /**\n     * Checks if `value` is an empty object, collection, map, or set.\n     *\n     * Objects are considered empty if they have no own enumerable string keyed\n     * properties.\n     *\n     * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n     * jQuery-like collections are considered empty if they have a `length` of `0`.\n     * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n     * @example\n     *\n     * _.isEmpty(null);\n     * // => true\n     *\n     * _.isEmpty(true);\n     * // => true\n     *\n     * _.isEmpty(1);\n     * // => true\n     *\n     * _.isEmpty([1, 2, 3]);\n     * // => false\n     *\n     * _.isEmpty({ 'a': 1 });\n     * // => false\n     */\n    function isEmpty(value) {\n      if (value == null) {\n        return true;\n      }\n      if (isArrayLike(value) &&\n          (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n            isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n        return !value.length;\n      }\n      var tag = getTag(value);\n      if (tag == mapTag || tag == setTag) {\n        return !value.size;\n      }\n      if (isPrototype(value)) {\n        return !baseKeys(value).length;\n      }\n      for (var key in value) {\n        if (hasOwnProperty.call(value, key)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * Performs a deep comparison between two values to determine if they are\n     * equivalent.\n     *\n     * **Note:** This method supports comparing arrays, array buffers, booleans,\n     * date objects, error objects, maps, numbers, `Object` objects, regexes,\n     * sets, strings, symbols, and typed arrays. `Object` objects are compared\n     * by their own, not inherited, enumerable properties. Functions and DOM\n     * nodes are compared by strict equality, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.isEqual(object, other);\n     * // => true\n     *\n     * object === other;\n     * // => false\n     */\n    function isEqual(value, other) {\n      return baseIsEqual(value, other);\n    }\n\n    /**\n     * This method is like `_.isEqual` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with up to\n     * six arguments: (objValue, othValue [, index|key, object, other, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, othValue) {\n     *   if (isGreeting(objValue) && isGreeting(othValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var array = ['hello', 'goodbye'];\n     * var other = ['hi', 'goodbye'];\n     *\n     * _.isEqualWith(array, other, customizer);\n     * // => true\n     */\n    function isEqualWith(value, other, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      var result = customizer ? customizer(value, other) : undefined;\n      return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;\n    }\n\n    /**\n     * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,\n     * `SyntaxError`, `TypeError`, or `URIError` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an error object, else `false`.\n     * @example\n     *\n     * _.isError(new Error);\n     * // => true\n     *\n     * _.isError(Error);\n     * // => false\n     */\n    function isError(value) {\n      if (!isObjectLike(value)) {\n        return false;\n      }\n      var tag = baseGetTag(value);\n      return tag == errorTag || tag == domExcTag ||\n        (typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value));\n    }\n\n    /**\n     * Checks if `value` is a finite primitive number.\n     *\n     * **Note:** This method is based on\n     * [`Number.isFinite`](https://mdn.io/Number/isFinite).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.\n     * @example\n     *\n     * _.isFinite(3);\n     * // => true\n     *\n     * _.isFinite(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isFinite(Infinity);\n     * // => false\n     *\n     * _.isFinite('3');\n     * // => false\n     */\n    function isFinite(value) {\n      return typeof value == 'number' && nativeIsFinite(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Function` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n     * @example\n     *\n     * _.isFunction(_);\n     * // => true\n     *\n     * _.isFunction(/abc/);\n     * // => false\n     */\n    function isFunction(value) {\n      if (!isObject(value)) {\n        return false;\n      }\n      // The use of `Object#toString` avoids issues with the `typeof` operator\n      // in Safari 9 which returns 'object' for typed arrays and other constructors.\n      var tag = baseGetTag(value);\n      return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n    }\n\n    /**\n     * Checks if `value` is an integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isInteger`](https://mdn.io/Number/isInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an integer, else `false`.\n     * @example\n     *\n     * _.isInteger(3);\n     * // => true\n     *\n     * _.isInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isInteger(Infinity);\n     * // => false\n     *\n     * _.isInteger('3');\n     * // => false\n     */\n    function isInteger(value) {\n      return typeof value == 'number' && value == toInteger(value);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like length.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n     * @example\n     *\n     * _.isLength(3);\n     * // => true\n     *\n     * _.isLength(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isLength(Infinity);\n     * // => false\n     *\n     * _.isLength('3');\n     * // => false\n     */\n    function isLength(value) {\n      return typeof value == 'number' &&\n        value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is the\n     * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n     * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(_.noop);\n     * // => true\n     *\n     * _.isObject(null);\n     * // => false\n     */\n    function isObject(value) {\n      var type = typeof value;\n      return value != null && (type == 'object' || type == 'function');\n    }\n\n    /**\n     * Checks if `value` is object-like. A value is object-like if it's not `null`\n     * and has a `typeof` result of \"object\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n     * @example\n     *\n     * _.isObjectLike({});\n     * // => true\n     *\n     * _.isObjectLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isObjectLike(_.noop);\n     * // => false\n     *\n     * _.isObjectLike(null);\n     * // => false\n     */\n    function isObjectLike(value) {\n      return value != null && typeof value == 'object';\n    }\n\n    /**\n     * Checks if `value` is classified as a `Map` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     * @example\n     *\n     * _.isMap(new Map);\n     * // => true\n     *\n     * _.isMap(new WeakMap);\n     * // => false\n     */\n    var isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\n    /**\n     * Performs a partial deep comparison between `object` and `source` to\n     * determine if `object` contains equivalent property values.\n     *\n     * **Note:** This method is equivalent to `_.matches` when `source` is\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.isMatch(object, { 'b': 2 });\n     * // => true\n     *\n     * _.isMatch(object, { 'b': 1 });\n     * // => false\n     */\n    function isMatch(object, source) {\n      return object === source || baseIsMatch(object, source, getMatchData(source));\n    }\n\n    /**\n     * This method is like `_.isMatch` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with five\n     * arguments: (objValue, srcValue, index|key, object, source).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (isGreeting(objValue) && isGreeting(srcValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var object = { 'greeting': 'hello' };\n     * var source = { 'greeting': 'hi' };\n     *\n     * _.isMatchWith(object, source, customizer);\n     * // => true\n     */\n    function isMatchWith(object, source, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseIsMatch(object, source, getMatchData(source), customizer);\n    }\n\n    /**\n     * Checks if `value` is `NaN`.\n     *\n     * **Note:** This method is based on\n     * [`Number.isNaN`](https://mdn.io/Number/isNaN) and is not the same as\n     * global [`isNaN`](https://mdn.io/isNaN) which returns `true` for\n     * `undefined` and other non-number values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n     * @example\n     *\n     * _.isNaN(NaN);\n     * // => true\n     *\n     * _.isNaN(new Number(NaN));\n     * // => true\n     *\n     * isNaN(undefined);\n     * // => true\n     *\n     * _.isNaN(undefined);\n     * // => false\n     */\n    function isNaN(value) {\n      // An `NaN` primitive is the only value that is not equal to itself.\n      // Perform the `toStringTag` check first to avoid errors with some\n      // ActiveX objects in IE.\n      return isNumber(value) && value != +value;\n    }\n\n    /**\n     * Checks if `value` is a pristine native function.\n     *\n     * **Note:** This method can't reliably detect native functions in the presence\n     * of the core-js package because core-js circumvents this kind of detection.\n     * Despite multiple requests, the core-js maintainer has made it clear: any\n     * attempt to fix the detection will be obstructed. As a result, we're left\n     * with little choice but to throw an error. Unfortunately, this also affects\n     * packages, like [babel-polyfill](https://www.npmjs.com/package/babel-polyfill),\n     * which rely on core-js.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     * @example\n     *\n     * _.isNative(Array.prototype.push);\n     * // => true\n     *\n     * _.isNative(_);\n     * // => false\n     */\n    function isNative(value) {\n      if (isMaskable(value)) {\n        throw new Error(CORE_ERROR_TEXT);\n      }\n      return baseIsNative(value);\n    }\n\n    /**\n     * Checks if `value` is `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `null`, else `false`.\n     * @example\n     *\n     * _.isNull(null);\n     * // => true\n     *\n     * _.isNull(void 0);\n     * // => false\n     */\n    function isNull(value) {\n      return value === null;\n    }\n\n    /**\n     * Checks if `value` is `null` or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is nullish, else `false`.\n     * @example\n     *\n     * _.isNil(null);\n     * // => true\n     *\n     * _.isNil(void 0);\n     * // => true\n     *\n     * _.isNil(NaN);\n     * // => false\n     */\n    function isNil(value) {\n      return value == null;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Number` primitive or object.\n     *\n     * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n     * classified as numbers, use the `_.isFinite` method.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n     * @example\n     *\n     * _.isNumber(3);\n     * // => true\n     *\n     * _.isNumber(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isNumber(Infinity);\n     * // => true\n     *\n     * _.isNumber('3');\n     * // => false\n     */\n    function isNumber(value) {\n      return typeof value == 'number' ||\n        (isObjectLike(value) && baseGetTag(value) == numberTag);\n    }\n\n    /**\n     * Checks if `value` is a plain object, that is, an object created by the\n     * `Object` constructor or one with a `[[Prototype]]` of `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.8.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * _.isPlainObject(new Foo);\n     * // => false\n     *\n     * _.isPlainObject([1, 2, 3]);\n     * // => false\n     *\n     * _.isPlainObject({ 'x': 0, 'y': 0 });\n     * // => true\n     *\n     * _.isPlainObject(Object.create(null));\n     * // => true\n     */\n    function isPlainObject(value) {\n      if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n        return false;\n      }\n      var proto = getPrototype(value);\n      if (proto === null) {\n        return true;\n      }\n      var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n      return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n        funcToString.call(Ctor) == objectCtorString;\n    }\n\n    /**\n     * Checks if `value` is classified as a `RegExp` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     * @example\n     *\n     * _.isRegExp(/abc/);\n     * // => true\n     *\n     * _.isRegExp('/abc/');\n     * // => false\n     */\n    var isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;\n\n    /**\n     * Checks if `value` is a safe integer. An integer is safe if it's an IEEE-754\n     * double precision number which isn't the result of a rounded unsafe integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isSafeInteger`](https://mdn.io/Number/isSafeInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a safe integer, else `false`.\n     * @example\n     *\n     * _.isSafeInteger(3);\n     * // => true\n     *\n     * _.isSafeInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isSafeInteger(Infinity);\n     * // => false\n     *\n     * _.isSafeInteger('3');\n     * // => false\n     */\n    function isSafeInteger(value) {\n      return isInteger(value) && value >= -MAX_SAFE_INTEGER && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Set` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     * @example\n     *\n     * _.isSet(new Set);\n     * // => true\n     *\n     * _.isSet(new WeakSet);\n     * // => false\n     */\n    var isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\n    /**\n     * Checks if `value` is classified as a `String` primitive or object.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n     * @example\n     *\n     * _.isString('abc');\n     * // => true\n     *\n     * _.isString(1);\n     * // => false\n     */\n    function isString(value) {\n      return typeof value == 'string' ||\n        (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Symbol` primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n     * @example\n     *\n     * _.isSymbol(Symbol.iterator);\n     * // => true\n     *\n     * _.isSymbol('abc');\n     * // => false\n     */\n    function isSymbol(value) {\n      return typeof value == 'symbol' ||\n        (isObjectLike(value) && baseGetTag(value) == symbolTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a typed array.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     * @example\n     *\n     * _.isTypedArray(new Uint8Array);\n     * // => true\n     *\n     * _.isTypedArray([]);\n     * // => false\n     */\n    var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n    /**\n     * Checks if `value` is `undefined`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n     * @example\n     *\n     * _.isUndefined(void 0);\n     * // => true\n     *\n     * _.isUndefined(null);\n     * // => false\n     */\n    function isUndefined(value) {\n      return value === undefined;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakMap` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak map, else `false`.\n     * @example\n     *\n     * _.isWeakMap(new WeakMap);\n     * // => true\n     *\n     * _.isWeakMap(new Map);\n     * // => false\n     */\n    function isWeakMap(value) {\n      return isObjectLike(value) && getTag(value) == weakMapTag;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakSet` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak set, else `false`.\n     * @example\n     *\n     * _.isWeakSet(new WeakSet);\n     * // => true\n     *\n     * _.isWeakSet(new Set);\n     * // => false\n     */\n    function isWeakSet(value) {\n      return isObjectLike(value) && baseGetTag(value) == weakSetTag;\n    }\n\n    /**\n     * Checks if `value` is less than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     * @see _.gt\n     * @example\n     *\n     * _.lt(1, 3);\n     * // => true\n     *\n     * _.lt(3, 3);\n     * // => false\n     *\n     * _.lt(3, 1);\n     * // => false\n     */\n    var lt = createRelationalOperation(baseLt);\n\n    /**\n     * Checks if `value` is less than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than or equal to\n     *  `other`, else `false`.\n     * @see _.gte\n     * @example\n     *\n     * _.lte(1, 3);\n     * // => true\n     *\n     * _.lte(3, 3);\n     * // => true\n     *\n     * _.lte(3, 1);\n     * // => false\n     */\n    var lte = createRelationalOperation(function(value, other) {\n      return value <= other;\n    });\n\n    /**\n     * Converts `value` to an array.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the converted array.\n     * @example\n     *\n     * _.toArray({ 'a': 1, 'b': 2 });\n     * // => [1, 2]\n     *\n     * _.toArray('abc');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toArray(1);\n     * // => []\n     *\n     * _.toArray(null);\n     * // => []\n     */\n    function toArray(value) {\n      if (!value) {\n        return [];\n      }\n      if (isArrayLike(value)) {\n        return isString(value) ? stringToArray(value) : copyArray(value);\n      }\n      if (symIterator && value[symIterator]) {\n        return iteratorToArray(value[symIterator]());\n      }\n      var tag = getTag(value),\n          func = tag == mapTag ? mapToArray : (tag == setTag ? setToArray : values);\n\n      return func(value);\n    }\n\n    /**\n     * Converts `value` to a finite number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.12.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted number.\n     * @example\n     *\n     * _.toFinite(3.2);\n     * // => 3.2\n     *\n     * _.toFinite(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toFinite(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toFinite('3.2');\n     * // => 3.2\n     */\n    function toFinite(value) {\n      if (!value) {\n        return value === 0 ? value : 0;\n      }\n      value = toNumber(value);\n      if (value === INFINITY || value === -INFINITY) {\n        var sign = (value < 0 ? -1 : 1);\n        return sign * MAX_INTEGER;\n      }\n      return value === value ? value : 0;\n    }\n\n    /**\n     * Converts `value` to an integer.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toInteger(3.2);\n     * // => 3\n     *\n     * _.toInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toInteger(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toInteger('3.2');\n     * // => 3\n     */\n    function toInteger(value) {\n      var result = toFinite(value),\n          remainder = result % 1;\n\n      return result === result ? (remainder ? result - remainder : result) : 0;\n    }\n\n    /**\n     * Converts `value` to an integer suitable for use as the length of an\n     * array-like object.\n     *\n     * **Note:** This method is based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toLength(3.2);\n     * // => 3\n     *\n     * _.toLength(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toLength(Infinity);\n     * // => 4294967295\n     *\n     * _.toLength('3.2');\n     * // => 3\n     */\n    function toLength(value) {\n      return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;\n    }\n\n    /**\n     * Converts `value` to a number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     * @example\n     *\n     * _.toNumber(3.2);\n     * // => 3.2\n     *\n     * _.toNumber(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toNumber(Infinity);\n     * // => Infinity\n     *\n     * _.toNumber('3.2');\n     * // => 3.2\n     */\n    function toNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      if (isObject(value)) {\n        var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n        value = isObject(other) ? (other + '') : other;\n      }\n      if (typeof value != 'string') {\n        return value === 0 ? value : +value;\n      }\n      value = value.replace(reTrim, '');\n      var isBinary = reIsBinary.test(value);\n      return (isBinary || reIsOctal.test(value))\n        ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n        : (reIsBadHex.test(value) ? NAN : +value);\n    }\n\n    /**\n     * Converts `value` to a plain object flattening inherited enumerable string\n     * keyed properties of `value` to own properties of the plain object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Object} Returns the converted plain object.\n     * @example\n     *\n     * function Foo() {\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.assign({ 'a': 1 }, new Foo);\n     * // => { 'a': 1, 'b': 2 }\n     *\n     * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n     * // => { 'a': 1, 'b': 2, 'c': 3 }\n     */\n    function toPlainObject(value) {\n      return copyObject(value, keysIn(value));\n    }\n\n    /**\n     * Converts `value` to a safe integer. A safe integer can be compared and\n     * represented correctly.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toSafeInteger(3.2);\n     * // => 3\n     *\n     * _.toSafeInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toSafeInteger(Infinity);\n     * // => 9007199254740991\n     *\n     * _.toSafeInteger('3.2');\n     * // => 3\n     */\n    function toSafeInteger(value) {\n      return value\n        ? baseClamp(toInteger(value), -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER)\n        : (value === 0 ? value : 0);\n    }\n\n    /**\n     * Converts `value` to a string. An empty string is returned for `null`\n     * and `undefined` values. The sign of `-0` is preserved.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.toString(null);\n     * // => ''\n     *\n     * _.toString(-0);\n     * // => '-0'\n     *\n     * _.toString([1, 2, 3]);\n     * // => '1,2,3'\n     */\n    function toString(value) {\n      return value == null ? '' : baseToString(value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Assigns own enumerable string keyed properties of source objects to the\n     * destination object. Source objects are applied from left to right.\n     * Subsequent sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object` and is loosely based on\n     * [`Object.assign`](https://mdn.io/Object/assign).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assignIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assign({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var assign = createAssigner(function(object, source) {\n      if (isPrototype(source) || isArrayLike(source)) {\n        copyObject(source, keys(source), object);\n        return;\n      }\n      for (var key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          assignValue(object, key, source[key]);\n        }\n      }\n    });\n\n    /**\n     * This method is like `_.assign` except that it iterates over own and\n     * inherited source properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extend\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assign\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n     */\n    var assignIn = createAssigner(function(object, source) {\n      copyObject(source, keysIn(source), object);\n    });\n\n    /**\n     * This method is like `_.assignIn` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extendWith\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignInWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignInWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keysIn(source), object, customizer);\n    });\n\n    /**\n     * This method is like `_.assign` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignInWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keys(source), object, customizer);\n    });\n\n    /**\n     * Creates an array of values corresponding to `paths` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Array} Returns the picked values.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _.at(object, ['a[0].b.c', 'a[1]']);\n     * // => [3, 4]\n     */\n    var at = flatRest(baseAt);\n\n    /**\n     * Creates an object that inherits from the `prototype` object. If a\n     * `properties` object is given, its own enumerable string keyed properties\n     * are assigned to the created object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Object\n     * @param {Object} prototype The object to inherit from.\n     * @param {Object} [properties] The properties to assign to the object.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * function Circle() {\n     *   Shape.call(this);\n     * }\n     *\n     * Circle.prototype = _.create(Shape.prototype, {\n     *   'constructor': Circle\n     * });\n     *\n     * var circle = new Circle;\n     * circle instanceof Circle;\n     * // => true\n     *\n     * circle instanceof Shape;\n     * // => true\n     */\n    function create(prototype, properties) {\n      var result = baseCreate(prototype);\n      return properties == null ? result : baseAssign(result, properties);\n    }\n\n    /**\n     * Assigns own and inherited enumerable string keyed properties of source\n     * objects to the destination object for all destination properties that\n     * resolve to `undefined`. Source objects are applied from left to right.\n     * Once a property is set, additional values of the same property are ignored.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaultsDeep\n     * @example\n     *\n     * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var defaults = baseRest(function(object, sources) {\n      object = Object(object);\n\n      var index = -1;\n      var length = sources.length;\n      var guard = length > 2 ? sources[2] : undefined;\n\n      if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n        length = 1;\n      }\n\n      while (++index < length) {\n        var source = sources[index];\n        var props = keysIn(source);\n        var propsIndex = -1;\n        var propsLength = props.length;\n\n        while (++propsIndex < propsLength) {\n          var key = props[propsIndex];\n          var value = object[key];\n\n          if (value === undefined ||\n              (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n            object[key] = source[key];\n          }\n        }\n      }\n\n      return object;\n    });\n\n    /**\n     * This method is like `_.defaults` except that it recursively assigns\n     * default properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaults\n     * @example\n     *\n     * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n     * // => { 'a': { 'b': 2, 'c': 3 } }\n     */\n    var defaultsDeep = baseRest(function(args) {\n      args.push(undefined, customDefaultsMerge);\n      return apply(mergeWith, undefined, args);\n    });\n\n    /**\n     * This method is like `_.find` except that it returns the key of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findKey(users, function(o) { return o.age < 40; });\n     * // => 'barney' (iteration order is not guaranteed)\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findKey(users, { 'age': 1, 'active': true });\n     * // => 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findKey(users, 'active');\n     * // => 'barney'\n     */\n    function findKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwn);\n    }\n\n    /**\n     * This method is like `_.findKey` except that it iterates over elements of\n     * a collection in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findLastKey(users, function(o) { return o.age < 40; });\n     * // => returns 'pebbles' assuming `_.findKey` returns 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastKey(users, { 'age': 36, 'active': true });\n     * // => 'barney'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastKey(users, 'active');\n     * // => 'pebbles'\n     */\n    function findLastKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwnRight);\n    }\n\n    /**\n     * Iterates over own and inherited enumerable string keyed properties of an\n     * object and invokes `iteratee` for each property. The iteratee is invoked\n     * with three arguments: (value, key, object). Iteratee functions may exit\n     * iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forInRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forIn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a', 'b', then 'c' (iteration order is not guaranteed).\n     */\n    function forIn(object, iteratee) {\n      return object == null\n        ? object\n        : baseFor(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * This method is like `_.forIn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forInRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'c', 'b', then 'a' assuming `_.forIn` logs 'a', 'b', then 'c'.\n     */\n    function forInRight(object, iteratee) {\n      return object == null\n        ? object\n        : baseForRight(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * Iterates over own enumerable string keyed properties of an object and\n     * invokes `iteratee` for each property. The iteratee is invoked with three\n     * arguments: (value, key, object). Iteratee functions may exit iteration\n     * early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwnRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forOwn(object, iteratee) {\n      return object && baseForOwn(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forOwn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwnRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'b' then 'a' assuming `_.forOwn` logs 'a' then 'b'.\n     */\n    function forOwnRight(object, iteratee) {\n      return object && baseForOwnRight(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an array of function property names from own enumerable properties\n     * of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functionsIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functions(new Foo);\n     * // => ['a', 'b']\n     */\n    function functions(object) {\n      return object == null ? [] : baseFunctions(object, keys(object));\n    }\n\n    /**\n     * Creates an array of function property names from own and inherited\n     * enumerable properties of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functions\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functionsIn(new Foo);\n     * // => ['a', 'b', 'c']\n     */\n    function functionsIn(object) {\n      return object == null ? [] : baseFunctions(object, keysIn(object));\n    }\n\n    /**\n     * Gets the value at `path` of `object`. If the resolved value is\n     * `undefined`, the `defaultValue` is returned in its place.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.get(object, 'a[0].b.c');\n     * // => 3\n     *\n     * _.get(object, ['a', '0', 'b', 'c']);\n     * // => 3\n     *\n     * _.get(object, 'a.b.c', 'default');\n     * // => 'default'\n     */\n    function get(object, path, defaultValue) {\n      var result = object == null ? undefined : baseGet(object, path);\n      return result === undefined ? defaultValue : result;\n    }\n\n    /**\n     * Checks if `path` is a direct property of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = { 'a': { 'b': 2 } };\n     * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.has(object, 'a');\n     * // => true\n     *\n     * _.has(object, 'a.b');\n     * // => true\n     *\n     * _.has(object, ['a', 'b']);\n     * // => true\n     *\n     * _.has(other, 'a');\n     * // => false\n     */\n    function has(object, path) {\n      return object != null && hasPath(object, path, baseHas);\n    }\n\n    /**\n     * Checks if `path` is a direct or inherited property of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.hasIn(object, 'a');\n     * // => true\n     *\n     * _.hasIn(object, 'a.b');\n     * // => true\n     *\n     * _.hasIn(object, ['a', 'b']);\n     * // => true\n     *\n     * _.hasIn(object, 'b');\n     * // => false\n     */\n    function hasIn(object, path) {\n      return object != null && hasPath(object, path, baseHasIn);\n    }\n\n    /**\n     * Creates an object composed of the inverted keys and values of `object`.\n     * If `object` contains duplicate values, subsequent values overwrite\n     * property assignments of previous values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invert(object);\n     * // => { '1': 'c', '2': 'b' }\n     */\n    var invert = createInverter(function(result, value, key) {\n      if (value != null &&\n          typeof value.toString != 'function') {\n        value = nativeObjectToString.call(value);\n      }\n\n      result[value] = key;\n    }, constant(identity));\n\n    /**\n     * This method is like `_.invert` except that the inverted object is generated\n     * from the results of running each element of `object` thru `iteratee`. The\n     * corresponding inverted value of each inverted key is an array of keys\n     * responsible for generating the inverted value. The iteratee is invoked\n     * with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invertBy(object);\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     *\n     * _.invertBy(object, function(value) {\n     *   return 'group' + value;\n     * });\n     * // => { 'group1': ['a', 'c'], 'group2': ['b'] }\n     */\n    var invertBy = createInverter(function(result, value, key) {\n      if (value != null &&\n          typeof value.toString != 'function') {\n        value = nativeObjectToString.call(value);\n      }\n\n      if (hasOwnProperty.call(result, value)) {\n        result[value].push(key);\n      } else {\n        result[value] = [key];\n      }\n    }, getIteratee);\n\n    /**\n     * Invokes the method at `path` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': [1, 2, 3, 4] } }] };\n     *\n     * _.invoke(object, 'a[0].b.c.slice', 1, 3);\n     * // => [2, 3]\n     */\n    var invoke = baseRest(baseInvoke);\n\n    /**\n     * Creates an array of the own enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects. See the\n     * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * for more details.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keys(new Foo);\n     * // => ['a', 'b'] (iteration order is not guaranteed)\n     *\n     * _.keys('hi');\n     * // => ['0', '1']\n     */\n    function keys(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keysIn(new Foo);\n     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n     */\n    function keysIn(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n    }\n\n    /**\n     * The opposite of `_.mapValues`; this method creates an object with the\n     * same values as `object` and keys generated by running each own enumerable\n     * string keyed property of `object` thru `iteratee`. The iteratee is invoked\n     * with three arguments: (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapValues\n     * @example\n     *\n     * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   return key + value;\n     * });\n     * // => { 'a1': 1, 'b2': 2 }\n     */\n    function mapKeys(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, iteratee(value, key, object), value);\n      });\n      return result;\n    }\n\n    /**\n     * Creates an object with the same keys as `object` and values generated\n     * by running each own enumerable string keyed property of `object` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapKeys\n     * @example\n     *\n     * var users = {\n     *   'fred':    { 'user': 'fred',    'age': 40 },\n     *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n     * };\n     *\n     * _.mapValues(users, function(o) { return o.age; });\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.mapValues(users, 'age');\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     */\n    function mapValues(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, key, iteratee(value, key, object));\n      });\n      return result;\n    }\n\n    /**\n     * This method is like `_.assign` except that it recursively merges own and\n     * inherited enumerable string keyed properties of source objects into the\n     * destination object. Source properties that resolve to `undefined` are\n     * skipped if a destination value exists. Array and plain object properties\n     * are merged recursively. Other objects and value types are overridden by\n     * assignment. Source objects are applied from left to right. Subsequent\n     * sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {\n     *   'a': [{ 'b': 2 }, { 'd': 4 }]\n     * };\n     *\n     * var other = {\n     *   'a': [{ 'c': 3 }, { 'e': 5 }]\n     * };\n     *\n     * _.merge(object, other);\n     * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n     */\n    var merge = createAssigner(function(object, source, srcIndex) {\n      baseMerge(object, source, srcIndex);\n    });\n\n    /**\n     * This method is like `_.merge` except that it accepts `customizer` which\n     * is invoked to produce the merged values of the destination and source\n     * properties. If `customizer` returns `undefined`, merging is handled by the\n     * method instead. The `customizer` is invoked with six arguments:\n     * (objValue, srcValue, key, object, source, stack).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} customizer The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (_.isArray(objValue)) {\n     *     return objValue.concat(srcValue);\n     *   }\n     * }\n     *\n     * var object = { 'a': [1], 'b': [2] };\n     * var other = { 'a': [3], 'b': [4] };\n     *\n     * _.mergeWith(object, other, customizer);\n     * // => { 'a': [1, 3], 'b': [2, 4] }\n     */\n    var mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n      baseMerge(object, source, srcIndex, customizer);\n    });\n\n    /**\n     * The opposite of `_.pick`; this method creates an object composed of the\n     * own and inherited enumerable property paths of `object` that are not omitted.\n     *\n     * **Note:** This method is considerably slower than `_.pick`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to omit.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omit(object, ['a', 'c']);\n     * // => { 'b': '2' }\n     */\n    var omit = flatRest(function(object, paths) {\n      var result = {};\n      if (object == null) {\n        return result;\n      }\n      var isDeep = false;\n      paths = arrayMap(paths, function(path) {\n        path = castPath(path, object);\n        isDeep || (isDeep = path.length > 1);\n        return path;\n      });\n      copyObject(object, getAllKeysIn(object), result);\n      if (isDeep) {\n        result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n      }\n      var length = paths.length;\n      while (length--) {\n        baseUnset(result, paths[length]);\n      }\n      return result;\n    });\n\n    /**\n     * The opposite of `_.pickBy`; this method creates an object composed of\n     * the own and inherited enumerable string keyed properties of `object` that\n     * `predicate` doesn't return truthy for. The predicate is invoked with two\n     * arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omitBy(object, _.isNumber);\n     * // => { 'b': '2' }\n     */\n    function omitBy(object, predicate) {\n      return pickBy(object, negate(getIteratee(predicate)));\n    }\n\n    /**\n     * Creates an object composed of the picked `object` properties.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pick(object, ['a', 'c']);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var pick = flatRest(function(object, paths) {\n      return object == null ? {} : basePick(object, paths);\n    });\n\n    /**\n     * Creates an object composed of the `object` properties `predicate` returns\n     * truthy for. The predicate is invoked with two arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pickBy(object, _.isNumber);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    function pickBy(object, predicate) {\n      if (object == null) {\n        return {};\n      }\n      var props = arrayMap(getAllKeysIn(object), function(prop) {\n        return [prop];\n      });\n      predicate = getIteratee(predicate);\n      return basePickBy(object, props, function(value, path) {\n        return predicate(value, path[0]);\n      });\n    }\n\n    /**\n     * This method is like `_.get` except that if the resolved value is a\n     * function it's invoked with the `this` binding of its parent object and\n     * its result is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to resolve.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\n     *\n     * _.result(object, 'a[0].b.c1');\n     * // => 3\n     *\n     * _.result(object, 'a[0].b.c2');\n     * // => 4\n     *\n     * _.result(object, 'a[0].b.c3', 'default');\n     * // => 'default'\n     *\n     * _.result(object, 'a[0].b.c3', _.constant('default'));\n     * // => 'default'\n     */\n    function result(object, path, defaultValue) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length;\n\n      // Ensure the loop is entered when path is empty.\n      if (!length) {\n        length = 1;\n        object = undefined;\n      }\n      while (++index < length) {\n        var value = object == null ? undefined : object[toKey(path[index])];\n        if (value === undefined) {\n          index = length;\n          value = defaultValue;\n        }\n        object = isFunction(value) ? value.call(object) : value;\n      }\n      return object;\n    }\n\n    /**\n     * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n     * it's created. Arrays are created for missing index properties while objects\n     * are created for all other missing properties. Use `_.setWith` to customize\n     * `path` creation.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.set(object, 'a[0].b.c', 4);\n     * console.log(object.a[0].b.c);\n     * // => 4\n     *\n     * _.set(object, ['x', '0', 'y', 'z'], 5);\n     * console.log(object.x[0].y.z);\n     * // => 5\n     */\n    function set(object, path, value) {\n      return object == null ? object : baseSet(object, path, value);\n    }\n\n    /**\n     * This method is like `_.set` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.setWith(object, '[0][1]', 'a', Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function setWith(object, path, value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseSet(object, path, value, customizer);\n    }\n\n    /**\n     * Creates an array of own enumerable string keyed-value pairs for `object`\n     * which can be consumed by `_.fromPairs`. If `object` is a map or set, its\n     * entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entries\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairs(new Foo);\n     * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)\n     */\n    var toPairs = createToPairs(keys);\n\n    /**\n     * Creates an array of own and inherited enumerable string keyed-value pairs\n     * for `object` which can be consumed by `_.fromPairs`. If `object` is a map\n     * or set, its entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entriesIn\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairsIn(new Foo);\n     * // => [['a', 1], ['b', 2], ['c', 3]] (iteration order is not guaranteed)\n     */\n    var toPairsIn = createToPairs(keysIn);\n\n    /**\n     * An alternative to `_.reduce`; this method transforms `object` to a new\n     * `accumulator` object which is the result of running each of its own\n     * enumerable string keyed properties thru `iteratee`, with each invocation\n     * potentially mutating the `accumulator` object. If `accumulator` is not\n     * provided, a new object with the same `[[Prototype]]` will be used. The\n     * iteratee is invoked with four arguments: (accumulator, value, key, object).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The custom accumulator value.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * _.transform([2, 3, 4], function(result, n) {\n     *   result.push(n *= n);\n     *   return n % 2 == 0;\n     * }, []);\n     * // => [4, 9]\n     *\n     * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     */\n    function transform(object, iteratee, accumulator) {\n      var isArr = isArray(object),\n          isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n      iteratee = getIteratee(iteratee, 4);\n      if (accumulator == null) {\n        var Ctor = object && object.constructor;\n        if (isArrLike) {\n          accumulator = isArr ? new Ctor : [];\n        }\n        else if (isObject(object)) {\n          accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n        }\n        else {\n          accumulator = {};\n        }\n      }\n      (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n        return iteratee(accumulator, value, index, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * Removes the property at `path` of `object`.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n     * _.unset(object, 'a[0].b.c');\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     *\n     * _.unset(object, ['a', '0', 'b', 'c']);\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     */\n    function unset(object, path) {\n      return object == null ? true : baseUnset(object, path);\n    }\n\n    /**\n     * This method is like `_.set` except that accepts `updater` to produce the\n     * value to set. Use `_.updateWith` to customize `path` creation. The `updater`\n     * is invoked with one argument: (value).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.update(object, 'a[0].b.c', function(n) { return n * n; });\n     * console.log(object.a[0].b.c);\n     * // => 9\n     *\n     * _.update(object, 'x[0].y.z', function(n) { return n ? n + 1 : 0; });\n     * console.log(object.x[0].y.z);\n     * // => 0\n     */\n    function update(object, path, updater) {\n      return object == null ? object : baseUpdate(object, path, castFunction(updater));\n    }\n\n    /**\n     * This method is like `_.update` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.updateWith(object, '[0][1]', _.constant('a'), Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function updateWith(object, path, updater, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseUpdate(object, path, castFunction(updater), customizer);\n    }\n\n    /**\n     * Creates an array of the own enumerable string keyed property values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.values(new Foo);\n     * // => [1, 2] (iteration order is not guaranteed)\n     *\n     * _.values('hi');\n     * // => ['h', 'i']\n     */\n    function values(object) {\n      return object == null ? [] : baseValues(object, keys(object));\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable string keyed property\n     * values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.valuesIn(new Foo);\n     * // => [1, 2, 3] (iteration order is not guaranteed)\n     */\n    function valuesIn(object) {\n      return object == null ? [] : baseValues(object, keysIn(object));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Clamps `number` within the inclusive `lower` and `upper` bounds.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Number\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     * @example\n     *\n     * _.clamp(-10, -5, 5);\n     * // => -5\n     *\n     * _.clamp(10, -5, 5);\n     * // => 5\n     */\n    function clamp(number, lower, upper) {\n      if (upper === undefined) {\n        upper = lower;\n        lower = undefined;\n      }\n      if (upper !== undefined) {\n        upper = toNumber(upper);\n        upper = upper === upper ? upper : 0;\n      }\n      if (lower !== undefined) {\n        lower = toNumber(lower);\n        lower = lower === lower ? lower : 0;\n      }\n      return baseClamp(toNumber(number), lower, upper);\n    }\n\n    /**\n     * Checks if `n` is between `start` and up to, but not including, `end`. If\n     * `end` is not specified, it's set to `start` with `start` then set to `0`.\n     * If `start` is greater than `end` the params are swapped to support\n     * negative ranges.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.3.0\n     * @category Number\n     * @param {number} number The number to check.\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     * @see _.range, _.rangeRight\n     * @example\n     *\n     * _.inRange(3, 2, 4);\n     * // => true\n     *\n     * _.inRange(4, 8);\n     * // => true\n     *\n     * _.inRange(4, 2);\n     * // => false\n     *\n     * _.inRange(2, 2);\n     * // => false\n     *\n     * _.inRange(1.2, 2);\n     * // => true\n     *\n     * _.inRange(5.2, 4);\n     * // => false\n     *\n     * _.inRange(-3, -2, -6);\n     * // => true\n     */\n    function inRange(number, start, end) {\n      start = toFinite(start);\n      if (end === undefined) {\n        end = start;\n        start = 0;\n      } else {\n        end = toFinite(end);\n      }\n      number = toNumber(number);\n      return baseInRange(number, start, end);\n    }\n\n    /**\n     * Produces a random number between the inclusive `lower` and `upper` bounds.\n     * If only one argument is provided a number between `0` and the given number\n     * is returned. If `floating` is `true`, or either `lower` or `upper` are\n     * floats, a floating-point number is returned instead of an integer.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Number\n     * @param {number} [lower=0] The lower bound.\n     * @param {number} [upper=1] The upper bound.\n     * @param {boolean} [floating] Specify returning a floating-point number.\n     * @returns {number} Returns the random number.\n     * @example\n     *\n     * _.random(0, 5);\n     * // => an integer between 0 and 5\n     *\n     * _.random(5);\n     * // => also an integer between 0 and 5\n     *\n     * _.random(5, true);\n     * // => a floating-point number between 0 and 5\n     *\n     * _.random(1.2, 5.2);\n     * // => a floating-point number between 1.2 and 5.2\n     */\n    function random(lower, upper, floating) {\n      if (floating && typeof floating != 'boolean' && isIterateeCall(lower, upper, floating)) {\n        upper = floating = undefined;\n      }\n      if (floating === undefined) {\n        if (typeof upper == 'boolean') {\n          floating = upper;\n          upper = undefined;\n        }\n        else if (typeof lower == 'boolean') {\n          floating = lower;\n          lower = undefined;\n        }\n      }\n      if (lower === undefined && upper === undefined) {\n        lower = 0;\n        upper = 1;\n      }\n      else {\n        lower = toFinite(lower);\n        if (upper === undefined) {\n          upper = lower;\n          lower = 0;\n        } else {\n          upper = toFinite(upper);\n        }\n      }\n      if (lower > upper) {\n        var temp = lower;\n        lower = upper;\n        upper = temp;\n      }\n      if (floating || lower % 1 || upper % 1) {\n        var rand = nativeRandom();\n        return nativeMin(lower + (rand * (upper - lower + freeParseFloat('1e-' + ((rand + '').length - 1)))), upper);\n      }\n      return baseRandom(lower, upper);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the camel cased string.\n     * @example\n     *\n     * _.camelCase('Foo Bar');\n     * // => 'fooBar'\n     *\n     * _.camelCase('--foo-bar--');\n     * // => 'fooBar'\n     *\n     * _.camelCase('__FOO_BAR__');\n     * // => 'fooBar'\n     */\n    var camelCase = createCompounder(function(result, word, index) {\n      word = word.toLowerCase();\n      return result + (index ? capitalize(word) : word);\n    });\n\n    /**\n     * Converts the first character of `string` to upper case and the remaining\n     * to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to capitalize.\n     * @returns {string} Returns the capitalized string.\n     * @example\n     *\n     * _.capitalize('FRED');\n     * // => 'Fred'\n     */\n    function capitalize(string) {\n      return upperFirst(toString(string).toLowerCase());\n    }\n\n    /**\n     * Deburrs `string` by converting\n     * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n     * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n     * letters to basic Latin letters and removing\n     * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to deburr.\n     * @returns {string} Returns the deburred string.\n     * @example\n     *\n     * _.deburr('dj vu');\n     * // => 'deja vu'\n     */\n    function deburr(string) {\n      string = toString(string);\n      return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n    }\n\n    /**\n     * Checks if `string` ends with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=string.length] The position to search up to.\n     * @returns {boolean} Returns `true` if `string` ends with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.endsWith('abc', 'c');\n     * // => true\n     *\n     * _.endsWith('abc', 'b');\n     * // => false\n     *\n     * _.endsWith('abc', 'b', 2);\n     * // => true\n     */\n    function endsWith(string, target, position) {\n      string = toString(string);\n      target = baseToString(target);\n\n      var length = string.length;\n      position = position === undefined\n        ? length\n        : baseClamp(toInteger(position), 0, length);\n\n      var end = position;\n      position -= target.length;\n      return position >= 0 && string.slice(position, end) == target;\n    }\n\n    /**\n     * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n     * corresponding HTML entities.\n     *\n     * **Note:** No other characters are escaped. To escape additional\n     * characters use a third-party library like [_he_](https://mths.be/he).\n     *\n     * Though the \">\" character is escaped for symmetry, characters like\n     * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n     * unless they're part of a tag or unquoted attribute value. See\n     * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n     * (under \"semi-related fun fact\") for more details.\n     *\n     * When working with HTML you should always\n     * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n     * XSS vectors.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escape('fred, barney, & pebbles');\n     * // => 'fred, barney, &amp; pebbles'\n     */\n    function escape(string) {\n      string = toString(string);\n      return (string && reHasUnescapedHtml.test(string))\n        ? string.replace(reUnescapedHtml, escapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Escapes the `RegExp` special characters \"^\", \"$\", \"\\\", \".\", \"*\", \"+\",\n     * \"?\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escapeRegExp('[lodash](https://lodash.com/)');\n     * // => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n     */\n    function escapeRegExp(string) {\n      string = toString(string);\n      return (string && reHasRegExpChar.test(string))\n        ? string.replace(reRegExpChar, '\\\\$&')\n        : string;\n    }\n\n    /**\n     * Converts `string` to\n     * [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the kebab cased string.\n     * @example\n     *\n     * _.kebabCase('Foo Bar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('fooBar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('__FOO_BAR__');\n     * // => 'foo-bar'\n     */\n    var kebabCase = createCompounder(function(result, word, index) {\n      return result + (index ? '-' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts `string`, as space separated words, to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.lowerCase('--Foo-Bar--');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('fooBar');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('__FOO_BAR__');\n     * // => 'foo bar'\n     */\n    var lowerCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts the first character of `string` to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.lowerFirst('Fred');\n     * // => 'fred'\n     *\n     * _.lowerFirst('FRED');\n     * // => 'fRED'\n     */\n    var lowerFirst = createCaseFirst('toLowerCase');\n\n    /**\n     * Pads `string` on the left and right sides if it's shorter than `length`.\n     * Padding characters are truncated if they can't be evenly divided by `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.pad('abc', 8);\n     * // => '  abc   '\n     *\n     * _.pad('abc', 8, '_-');\n     * // => '_-abc_-_'\n     *\n     * _.pad('abc', 3);\n     * // => 'abc'\n     */\n    function pad(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      if (!length || strLength >= length) {\n        return string;\n      }\n      var mid = (length - strLength) / 2;\n      return (\n        createPadding(nativeFloor(mid), chars) +\n        string +\n        createPadding(nativeCeil(mid), chars)\n      );\n    }\n\n    /**\n     * Pads `string` on the right side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padEnd('abc', 6);\n     * // => 'abc   '\n     *\n     * _.padEnd('abc', 6, '_-');\n     * // => 'abc_-_'\n     *\n     * _.padEnd('abc', 3);\n     * // => 'abc'\n     */\n    function padEnd(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (string + createPadding(length - strLength, chars))\n        : string;\n    }\n\n    /**\n     * Pads `string` on the left side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padStart('abc', 6);\n     * // => '   abc'\n     *\n     * _.padStart('abc', 6, '_-');\n     * // => '_-_abc'\n     *\n     * _.padStart('abc', 3);\n     * // => 'abc'\n     */\n    function padStart(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (createPadding(length - strLength, chars) + string)\n        : string;\n    }\n\n    /**\n     * Converts `string` to an integer of the specified radix. If `radix` is\n     * `undefined` or `0`, a `radix` of `10` is used unless `value` is a\n     * hexadecimal, in which case a `radix` of `16` is used.\n     *\n     * **Note:** This method aligns with the\n     * [ES5 implementation](https://es5.github.io/#x15.1.2.2) of `parseInt`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category String\n     * @param {string} string The string to convert.\n     * @param {number} [radix=10] The radix to interpret `value` by.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.parseInt('08');\n     * // => 8\n     *\n     * _.map(['6', '08', '10'], _.parseInt);\n     * // => [6, 8, 10]\n     */\n    function parseInt(string, radix, guard) {\n      if (guard || radix == null) {\n        radix = 0;\n      } else if (radix) {\n        radix = +radix;\n      }\n      return nativeParseInt(toString(string).replace(reTrimStart, ''), radix || 0);\n    }\n\n    /**\n     * Repeats the given string `n` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to repeat.\n     * @param {number} [n=1] The number of times to repeat the string.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the repeated string.\n     * @example\n     *\n     * _.repeat('*', 3);\n     * // => '***'\n     *\n     * _.repeat('abc', 2);\n     * // => 'abcabc'\n     *\n     * _.repeat('abc', 0);\n     * // => ''\n     */\n    function repeat(string, n, guard) {\n      if ((guard ? isIterateeCall(string, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      return baseRepeat(toString(string), n);\n    }\n\n    /**\n     * Replaces matches for `pattern` in `string` with `replacement`.\n     *\n     * **Note:** This method is based on\n     * [`String#replace`](https://mdn.io/String/replace).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to modify.\n     * @param {RegExp|string} pattern The pattern to replace.\n     * @param {Function|string} replacement The match replacement.\n     * @returns {string} Returns the modified string.\n     * @example\n     *\n     * _.replace('Hi Fred', 'Fred', 'Barney');\n     * // => 'Hi Barney'\n     */\n    function replace() {\n      var args = arguments,\n          string = toString(args[0]);\n\n      return args.length < 3 ? string : string.replace(args[1], args[2]);\n    }\n\n    /**\n     * Converts `string` to\n     * [snake case](https://en.wikipedia.org/wiki/Snake_case).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the snake cased string.\n     * @example\n     *\n     * _.snakeCase('Foo Bar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('fooBar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('--FOO-BAR--');\n     * // => 'foo_bar'\n     */\n    var snakeCase = createCompounder(function(result, word, index) {\n      return result + (index ? '_' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Splits `string` by `separator`.\n     *\n     * **Note:** This method is based on\n     * [`String#split`](https://mdn.io/String/split).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to split.\n     * @param {RegExp|string} separator The separator pattern to split by.\n     * @param {number} [limit] The length to truncate results to.\n     * @returns {Array} Returns the string segments.\n     * @example\n     *\n     * _.split('a-b-c', '-', 2);\n     * // => ['a', 'b']\n     */\n    function split(string, separator, limit) {\n      if (limit && typeof limit != 'number' && isIterateeCall(string, separator, limit)) {\n        separator = limit = undefined;\n      }\n      limit = limit === undefined ? MAX_ARRAY_LENGTH : limit >>> 0;\n      if (!limit) {\n        return [];\n      }\n      string = toString(string);\n      if (string && (\n            typeof separator == 'string' ||\n            (separator != null && !isRegExp(separator))\n          )) {\n        separator = baseToString(separator);\n        if (!separator && hasUnicode(string)) {\n          return castSlice(stringToArray(string), 0, limit);\n        }\n      }\n      return string.split(separator, limit);\n    }\n\n    /**\n     * Converts `string` to\n     * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.1.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the start cased string.\n     * @example\n     *\n     * _.startCase('--foo-bar--');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('fooBar');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('__FOO_BAR__');\n     * // => 'FOO BAR'\n     */\n    var startCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + upperFirst(word);\n    });\n\n    /**\n     * Checks if `string` starts with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=0] The position to search from.\n     * @returns {boolean} Returns `true` if `string` starts with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.startsWith('abc', 'a');\n     * // => true\n     *\n     * _.startsWith('abc', 'b');\n     * // => false\n     *\n     * _.startsWith('abc', 'b', 1);\n     * // => true\n     */\n    function startsWith(string, target, position) {\n      string = toString(string);\n      position = position == null\n        ? 0\n        : baseClamp(toInteger(position), 0, string.length);\n\n      target = baseToString(target);\n      return string.slice(position, position + target.length) == target;\n    }\n\n    /**\n     * Creates a compiled template function that can interpolate data properties\n     * in \"interpolate\" delimiters, HTML-escape interpolated data properties in\n     * \"escape\" delimiters, and execute JavaScript in \"evaluate\" delimiters. Data\n     * properties may be accessed as free variables in the template. If a setting\n     * object is given, it takes precedence over `_.templateSettings` values.\n     *\n     * **Note:** In the development build `_.template` utilizes\n     * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)\n     * for easier debugging.\n     *\n     * For more information on precompiling templates see\n     * [lodash's custom builds documentation](https://lodash.com/custom-builds).\n     *\n     * For more information on Chrome extension sandboxes see\n     * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The template string.\n     * @param {Object} [options={}] The options object.\n     * @param {RegExp} [options.escape=_.templateSettings.escape]\n     *  The HTML \"escape\" delimiter.\n     * @param {RegExp} [options.evaluate=_.templateSettings.evaluate]\n     *  The \"evaluate\" delimiter.\n     * @param {Object} [options.imports=_.templateSettings.imports]\n     *  An object to import into the template as free variables.\n     * @param {RegExp} [options.interpolate=_.templateSettings.interpolate]\n     *  The \"interpolate\" delimiter.\n     * @param {string} [options.sourceURL='lodash.templateSources[n]']\n     *  The sourceURL of the compiled template.\n     * @param {string} [options.variable='obj']\n     *  The data object variable name.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the compiled template function.\n     * @example\n     *\n     * // Use the \"interpolate\" delimiter to create a compiled template.\n     * var compiled = _.template('hello <%= user %>!');\n     * compiled({ 'user': 'fred' });\n     * // => 'hello fred!'\n     *\n     * // Use the HTML \"escape\" delimiter to escape data property values.\n     * var compiled = _.template('<b><%- value %></b>');\n     * compiled({ 'value': '<script>' });\n     * // => '<b>&lt;script&gt;</b>'\n     *\n     * // Use the \"evaluate\" delimiter to execute JavaScript and generate HTML.\n     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the internal `print` function in \"evaluate\" delimiters.\n     * var compiled = _.template('<% print(\"hello \" + user); %>!');\n     * compiled({ 'user': 'barney' });\n     * // => 'hello barney!'\n     *\n     * // Use the ES template literal delimiter as an \"interpolate\" delimiter.\n     * // Disable support by replacing the \"interpolate\" delimiter.\n     * var compiled = _.template('hello ${ user }!');\n     * compiled({ 'user': 'pebbles' });\n     * // => 'hello pebbles!'\n     *\n     * // Use backslashes to treat delimiters as plain text.\n     * var compiled = _.template('<%= \"\\\\<%- value %\\\\>\" %>');\n     * compiled({ 'value': 'ignored' });\n     * // => '<%- value %>'\n     *\n     * // Use the `imports` option to import `jQuery` as `jq`.\n     * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';\n     * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the `sourceURL` option to specify a custom sourceURL for the template.\n     * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });\n     * compiled(data);\n     * // => Find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector.\n     *\n     * // Use the `variable` option to ensure a with-statement isn't used in the compiled template.\n     * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });\n     * compiled.source;\n     * // => function(data) {\n     * //   var __t, __p = '';\n     * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';\n     * //   return __p;\n     * // }\n     *\n     * // Use custom template delimiters.\n     * _.templateSettings.interpolate = /{{([\\s\\S]+?)}}/g;\n     * var compiled = _.template('hello {{ user }}!');\n     * compiled({ 'user': 'mustache' });\n     * // => 'hello mustache!'\n     *\n     * // Use the `source` property to inline compiled templates for meaningful\n     * // line numbers in error messages and stack traces.\n     * fs.writeFileSync(path.join(process.cwd(), 'jst.js'), '\\\n     *   var JST = {\\\n     *     \"main\": ' + _.template(mainText).source + '\\\n     *   };\\\n     * ');\n     */\n    function template(string, options, guard) {\n      // Based on John Resig's `tmpl` implementation\n      // (http://ejohn.org/blog/javascript-micro-templating/)\n      // and Laura Doktorova's doT.js (https://github.com/olado/doT).\n      var settings = lodash.templateSettings;\n\n      if (guard && isIterateeCall(string, options, guard)) {\n        options = undefined;\n      }\n      string = toString(string);\n      options = assignInWith({}, options, settings, customDefaultsAssignIn);\n\n      var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn),\n          importsKeys = keys(imports),\n          importsValues = baseValues(imports, importsKeys);\n\n      var isEscaping,\n          isEvaluating,\n          index = 0,\n          interpolate = options.interpolate || reNoMatch,\n          source = \"__p += '\";\n\n      // Compile the regexp to match each delimiter.\n      var reDelimiters = RegExp(\n        (options.escape || reNoMatch).source + '|' +\n        interpolate.source + '|' +\n        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n        (options.evaluate || reNoMatch).source + '|$'\n      , 'g');\n\n      // Use a sourceURL for easier debugging.\n      // The sourceURL gets injected into the source that's eval-ed, so be careful\n      // with lookup (in case of e.g. prototype pollution), and strip newlines if any.\n      // A newline wouldn't be a valid sourceURL anyway, and it'd enable code injection.\n      var sourceURL = '//# sourceURL=' +\n        (hasOwnProperty.call(options, 'sourceURL')\n          ? (options.sourceURL + '').replace(/[\\r\\n]/g, ' ')\n          : ('lodash.templateSources[' + (++templateCounter) + ']')\n        ) + '\\n';\n\n      string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n        interpolateValue || (interpolateValue = esTemplateValue);\n\n        // Escape characters that can't be included in string literals.\n        source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n        // Replace delimiters with snippets.\n        if (escapeValue) {\n          isEscaping = true;\n          source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n        }\n        if (evaluateValue) {\n          isEvaluating = true;\n          source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n        }\n        if (interpolateValue) {\n          source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n        }\n        index = offset + match.length;\n\n        // The JS engine embedded in Adobe products needs `match` returned in\n        // order to produce the correct `offset` value.\n        return match;\n      });\n\n      source += \"';\\n\";\n\n      // If `variable` is not specified wrap a with-statement around the generated\n      // code to add the data object to the top of the scope chain.\n      // Like with sourceURL, we take care to not check the option's prototype,\n      // as this configuration is a code injection vector.\n      var variable = hasOwnProperty.call(options, 'variable') && options.variable;\n      if (!variable) {\n        source = 'with (obj) {\\n' + source + '\\n}\\n';\n      }\n      // Cleanup code by stripping empty strings.\n      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n        .replace(reEmptyStringMiddle, '$1')\n        .replace(reEmptyStringTrailing, '$1;');\n\n      // Frame code as the function body.\n      source = 'function(' + (variable || 'obj') + ') {\\n' +\n        (variable\n          ? ''\n          : 'obj || (obj = {});\\n'\n        ) +\n        \"var __t, __p = ''\" +\n        (isEscaping\n           ? ', __e = _.escape'\n           : ''\n        ) +\n        (isEvaluating\n          ? ', __j = Array.prototype.join;\\n' +\n            \"function print() { __p += __j.call(arguments, '') }\\n\"\n          : ';\\n'\n        ) +\n        source +\n        'return __p\\n}';\n\n      var result = attempt(function() {\n        return Function(importsKeys, sourceURL + 'return ' + source)\n          .apply(undefined, importsValues);\n      });\n\n      // Provide the compiled function's source by its `toString` method or\n      // the `source` property as a convenience for inlining compiled templates.\n      result.source = source;\n      if (isError(result)) {\n        throw result;\n      }\n      return result;\n    }\n\n    /**\n     * Converts `string`, as a whole, to lower case just like\n     * [String#toLowerCase](https://mdn.io/toLowerCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.toLower('--Foo-Bar--');\n     * // => '--foo-bar--'\n     *\n     * _.toLower('fooBar');\n     * // => 'foobar'\n     *\n     * _.toLower('__FOO_BAR__');\n     * // => '__foo_bar__'\n     */\n    function toLower(value) {\n      return toString(value).toLowerCase();\n    }\n\n    /**\n     * Converts `string`, as a whole, to upper case just like\n     * [String#toUpperCase](https://mdn.io/toUpperCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.toUpper('--foo-bar--');\n     * // => '--FOO-BAR--'\n     *\n     * _.toUpper('fooBar');\n     * // => 'FOOBAR'\n     *\n     * _.toUpper('__foo_bar__');\n     * // => '__FOO_BAR__'\n     */\n    function toUpper(value) {\n      return toString(value).toUpperCase();\n    }\n\n    /**\n     * Removes leading and trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trim('  abc  ');\n     * // => 'abc'\n     *\n     * _.trim('-_-abc-_-', '_-');\n     * // => 'abc'\n     *\n     * _.map(['  foo  ', '  bar  '], _.trim);\n     * // => ['foo', 'bar']\n     */\n    function trim(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.replace(reTrim, '');\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          chrSymbols = stringToArray(chars),\n          start = charsStartIndex(strSymbols, chrSymbols),\n          end = charsEndIndex(strSymbols, chrSymbols) + 1;\n\n      return castSlice(strSymbols, start, end).join('');\n    }\n\n    /**\n     * Removes trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimEnd('  abc  ');\n     * // => '  abc'\n     *\n     * _.trimEnd('-_-abc-_-', '_-');\n     * // => '-_-abc'\n     */\n    function trimEnd(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.replace(reTrimEnd, '');\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          end = charsEndIndex(strSymbols, stringToArray(chars)) + 1;\n\n      return castSlice(strSymbols, 0, end).join('');\n    }\n\n    /**\n     * Removes leading whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimStart('  abc  ');\n     * // => 'abc  '\n     *\n     * _.trimStart('-_-abc-_-', '_-');\n     * // => 'abc-_-'\n     */\n    function trimStart(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.replace(reTrimStart, '');\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          start = charsStartIndex(strSymbols, stringToArray(chars));\n\n      return castSlice(strSymbols, start).join('');\n    }\n\n    /**\n     * Truncates `string` if it's longer than the given maximum string length.\n     * The last characters of the truncated string are replaced with the omission\n     * string which defaults to \"...\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to truncate.\n     * @param {Object} [options={}] The options object.\n     * @param {number} [options.length=30] The maximum string length.\n     * @param {string} [options.omission='...'] The string to indicate text is omitted.\n     * @param {RegExp|string} [options.separator] The separator pattern to truncate to.\n     * @returns {string} Returns the truncated string.\n     * @example\n     *\n     * _.truncate('hi-diddly-ho there, neighborino');\n     * // => 'hi-diddly-ho there, neighbo...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': ' '\n     * });\n     * // => 'hi-diddly-ho there,...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': /,? +/\n     * });\n     * // => 'hi-diddly-ho there...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'omission': ' [...]'\n     * });\n     * // => 'hi-diddly-ho there, neig [...]'\n     */\n    function truncate(string, options) {\n      var length = DEFAULT_TRUNC_LENGTH,\n          omission = DEFAULT_TRUNC_OMISSION;\n\n      if (isObject(options)) {\n        var separator = 'separator' in options ? options.separator : separator;\n        length = 'length' in options ? toInteger(options.length) : length;\n        omission = 'omission' in options ? baseToString(options.omission) : omission;\n      }\n      string = toString(string);\n\n      var strLength = string.length;\n      if (hasUnicode(string)) {\n        var strSymbols = stringToArray(string);\n        strLength = strSymbols.length;\n      }\n      if (length >= strLength) {\n        return string;\n      }\n      var end = length - stringSize(omission);\n      if (end < 1) {\n        return omission;\n      }\n      var result = strSymbols\n        ? castSlice(strSymbols, 0, end).join('')\n        : string.slice(0, end);\n\n      if (separator === undefined) {\n        return result + omission;\n      }\n      if (strSymbols) {\n        end += (result.length - end);\n      }\n      if (isRegExp(separator)) {\n        if (string.slice(end).search(separator)) {\n          var match,\n              substring = result;\n\n          if (!separator.global) {\n            separator = RegExp(separator.source, toString(reFlags.exec(separator)) + 'g');\n          }\n          separator.lastIndex = 0;\n          while ((match = separator.exec(substring))) {\n            var newEnd = match.index;\n          }\n          result = result.slice(0, newEnd === undefined ? end : newEnd);\n        }\n      } else if (string.indexOf(baseToString(separator), end) != end) {\n        var index = result.lastIndexOf(separator);\n        if (index > -1) {\n          result = result.slice(0, index);\n        }\n      }\n      return result + omission;\n    }\n\n    /**\n     * The inverse of `_.escape`; this method converts the HTML entities\n     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to\n     * their corresponding characters.\n     *\n     * **Note:** No other HTML entities are unescaped. To unescape additional\n     * HTML entities use a third-party library like [_he_](https://mths.be/he).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.6.0\n     * @category String\n     * @param {string} [string=''] The string to unescape.\n     * @returns {string} Returns the unescaped string.\n     * @example\n     *\n     * _.unescape('fred, barney, &amp; pebbles');\n     * // => 'fred, barney, & pebbles'\n     */\n    function unescape(string) {\n      string = toString(string);\n      return (string && reHasEscapedHtml.test(string))\n        ? string.replace(reEscapedHtml, unescapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Converts `string`, as space separated words, to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.upperCase('--foo-bar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('fooBar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('__foo_bar__');\n     * // => 'FOO BAR'\n     */\n    var upperCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toUpperCase();\n    });\n\n    /**\n     * Converts the first character of `string` to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.upperFirst('fred');\n     * // => 'Fred'\n     *\n     * _.upperFirst('FRED');\n     * // => 'FRED'\n     */\n    var upperFirst = createCaseFirst('toUpperCase');\n\n    /**\n     * Splits `string` into an array of its words.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {RegExp|string} [pattern] The pattern to match words.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the words of `string`.\n     * @example\n     *\n     * _.words('fred, barney, & pebbles');\n     * // => ['fred', 'barney', 'pebbles']\n     *\n     * _.words('fred, barney, & pebbles', /[^, ]+/g);\n     * // => ['fred', 'barney', '&', 'pebbles']\n     */\n    function words(string, pattern, guard) {\n      string = toString(string);\n      pattern = guard ? undefined : pattern;\n\n      if (pattern === undefined) {\n        return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n      }\n      return string.match(pattern) || [];\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Attempts to invoke `func`, returning either the result or the caught error\n     * object. Any additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Function} func The function to attempt.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {*} Returns the `func` result or error object.\n     * @example\n     *\n     * // Avoid throwing errors for invalid selectors.\n     * var elements = _.attempt(function(selector) {\n     *   return document.querySelectorAll(selector);\n     * }, '>_>');\n     *\n     * if (_.isError(elements)) {\n     *   elements = [];\n     * }\n     */\n    var attempt = baseRest(function(func, args) {\n      try {\n        return apply(func, undefined, args);\n      } catch (e) {\n        return isError(e) ? e : new Error(e);\n      }\n    });\n\n    /**\n     * Binds methods of an object to the object itself, overwriting the existing\n     * method.\n     *\n     * **Note:** This method doesn't set the \"length\" property of bound functions.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Object} object The object to bind and assign the bound methods to.\n     * @param {...(string|string[])} methodNames The object method names to bind.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var view = {\n     *   'label': 'docs',\n     *   'click': function() {\n     *     console.log('clicked ' + this.label);\n     *   }\n     * };\n     *\n     * _.bindAll(view, ['click']);\n     * jQuery(element).on('click', view.click);\n     * // => Logs 'clicked docs' when clicked.\n     */\n    var bindAll = flatRest(function(object, methodNames) {\n      arrayEach(methodNames, function(key) {\n        key = toKey(key);\n        baseAssignValue(object, key, bind(object[key], object));\n      });\n      return object;\n    });\n\n    /**\n     * Creates a function that iterates over `pairs` and invokes the corresponding\n     * function of the first predicate to return truthy. The predicate-function\n     * pairs are invoked with the `this` binding and arguments of the created\n     * function.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Array} pairs The predicate-function pairs.\n     * @returns {Function} Returns the new composite function.\n     * @example\n     *\n     * var func = _.cond([\n     *   [_.matches({ 'a': 1 }),           _.constant('matches A')],\n     *   [_.conforms({ 'b': _.isNumber }), _.constant('matches B')],\n     *   [_.stubTrue,                      _.constant('no match')]\n     * ]);\n     *\n     * func({ 'a': 1, 'b': 2 });\n     * // => 'matches A'\n     *\n     * func({ 'a': 0, 'b': 1 });\n     * // => 'matches B'\n     *\n     * func({ 'a': '1', 'b': '2' });\n     * // => 'no match'\n     */\n    function cond(pairs) {\n      var length = pairs == null ? 0 : pairs.length,\n          toIteratee = getIteratee();\n\n      pairs = !length ? [] : arrayMap(pairs, function(pair) {\n        if (typeof pair[1] != 'function') {\n          throw new TypeError(FUNC_ERROR_TEXT);\n        }\n        return [toIteratee(pair[0]), pair[1]];\n      });\n\n      return baseRest(function(args) {\n        var index = -1;\n        while (++index < length) {\n          var pair = pairs[index];\n          if (apply(pair[0], this, args)) {\n            return apply(pair[1], this, args);\n          }\n        }\n      });\n    }\n\n    /**\n     * Creates a function that invokes the predicate properties of `source` with\n     * the corresponding property values of a given object, returning `true` if\n     * all predicates return truthy, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.conformsTo` with\n     * `source` partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 2, 'b': 1 },\n     *   { 'a': 1, 'b': 2 }\n     * ];\n     *\n     * _.filter(objects, _.conforms({ 'b': function(n) { return n > 1; } }));\n     * // => [{ 'a': 1, 'b': 2 }]\n     */\n    function conforms(source) {\n      return baseConforms(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that returns `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {*} value The value to return from the new function.\n     * @returns {Function} Returns the new constant function.\n     * @example\n     *\n     * var objects = _.times(2, _.constant({ 'a': 1 }));\n     *\n     * console.log(objects);\n     * // => [{ 'a': 1 }, { 'a': 1 }]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => true\n     */\n    function constant(value) {\n      return function() {\n        return value;\n      };\n    }\n\n    /**\n     * Checks `value` to determine whether a default value should be returned in\n     * its place. The `defaultValue` is returned if `value` is `NaN`, `null`,\n     * or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Util\n     * @param {*} value The value to check.\n     * @param {*} defaultValue The default value.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * _.defaultTo(1, 10);\n     * // => 1\n     *\n     * _.defaultTo(undefined, 10);\n     * // => 10\n     */\n    function defaultTo(value, defaultValue) {\n      return (value == null || value !== value) ? defaultValue : value;\n    }\n\n    /**\n     * Creates a function that returns the result of invoking the given functions\n     * with the `this` binding of the created function, where each successive\n     * invocation is supplied the return value of the previous.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flowRight\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flow([_.add, square]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flow = createFlow();\n\n    /**\n     * This method is like `_.flow` except that it creates a function that\n     * invokes the given functions from right to left.\n     *\n     * @static\n     * @since 3.0.0\n     * @memberOf _\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flow\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flowRight([square, _.add]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flowRight = createFlow(true);\n\n    /**\n     * This method returns the first argument it receives.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {*} value Any value.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     *\n     * console.log(_.identity(object) === object);\n     * // => true\n     */\n    function identity(value) {\n      return value;\n    }\n\n    /**\n     * Creates a function that invokes `func` with the arguments of the created\n     * function. If `func` is a property name, the created function returns the\n     * property value for a given element. If `func` is an array or object, the\n     * created function returns `true` for elements that contain the equivalent\n     * source properties, otherwise it returns `false`.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Util\n     * @param {*} [func=_.identity] The value to convert to a callback.\n     * @returns {Function} Returns the callback.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, _.iteratee({ 'user': 'barney', 'active': true }));\n     * // => [{ 'user': 'barney', 'age': 36, 'active': true }]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, _.iteratee(['user', 'fred']));\n     * // => [{ 'user': 'fred', 'age': 40 }]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, _.iteratee('user'));\n     * // => ['barney', 'fred']\n     *\n     * // Create custom iteratee shorthands.\n     * _.iteratee = _.wrap(_.iteratee, function(iteratee, func) {\n     *   return !_.isRegExp(func) ? iteratee(func) : function(string) {\n     *     return func.test(string);\n     *   };\n     * });\n     *\n     * _.filter(['abc', 'def'], /ef/);\n     * // => ['def']\n     */\n    function iteratee(func) {\n      return baseIteratee(typeof func == 'function' ? func : baseClone(func, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between a given\n     * object and `source`, returning `true` if the given object has equivalent\n     * property values, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.isMatch` with `source`\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.filter(objects, _.matches({ 'a': 4, 'c': 6 }));\n     * // => [{ 'a': 4, 'b': 5, 'c': 6 }]\n     */\n    function matches(source) {\n      return baseMatches(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between the\n     * value at `path` of a given object to `srcValue`, returning `true` if the\n     * object value is equivalent, else `false`.\n     *\n     * **Note:** Partial comparisons will match empty array and empty object\n     * `srcValue` values against any array or object value, respectively. See\n     * `_.isEqual` for a list of supported value comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.find(objects, _.matchesProperty('a', 4));\n     * // => { 'a': 4, 'b': 5, 'c': 6 }\n     */\n    function matchesProperty(path, srcValue) {\n      return baseMatchesProperty(path, baseClone(srcValue, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that invokes the method at `path` of a given object.\n     * Any additional arguments are provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': _.constant(2) } },\n     *   { 'a': { 'b': _.constant(1) } }\n     * ];\n     *\n     * _.map(objects, _.method('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(objects, _.method(['a', 'b']));\n     * // => [2, 1]\n     */\n    var method = baseRest(function(path, args) {\n      return function(object) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * The opposite of `_.method`; this method creates a function that invokes\n     * the method at a given path of `object`. Any additional arguments are\n     * provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var array = _.times(3, _.constant),\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.methodOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.methodOf(object));\n     * // => [2, 0]\n     */\n    var methodOf = baseRest(function(object, args) {\n      return function(path) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * Adds all own enumerable string keyed function properties of a source\n     * object to the destination object. If `object` is a function, then methods\n     * are added to its prototype as well.\n     *\n     * **Note:** Use `_.runInContext` to create a pristine `lodash` function to\n     * avoid conflicts caused by modifying the original.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Function|Object} [object=lodash] The destination object.\n     * @param {Object} source The object of functions to add.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.chain=true] Specify whether mixins are chainable.\n     * @returns {Function|Object} Returns `object`.\n     * @example\n     *\n     * function vowels(string) {\n     *   return _.filter(string, function(v) {\n     *     return /[aeiou]/i.test(v);\n     *   });\n     * }\n     *\n     * _.mixin({ 'vowels': vowels });\n     * _.vowels('fred');\n     * // => ['e']\n     *\n     * _('fred').vowels().value();\n     * // => ['e']\n     *\n     * _.mixin({ 'vowels': vowels }, { 'chain': false });\n     * _('fred').vowels();\n     * // => ['e']\n     */\n    function mixin(object, source, options) {\n      var props = keys(source),\n          methodNames = baseFunctions(source, props);\n\n      if (options == null &&\n          !(isObject(source) && (methodNames.length || !props.length))) {\n        options = source;\n        source = object;\n        object = this;\n        methodNames = baseFunctions(source, keys(source));\n      }\n      var chain = !(isObject(options) && 'chain' in options) || !!options.chain,\n          isFunc = isFunction(object);\n\n      arrayEach(methodNames, function(methodName) {\n        var func = source[methodName];\n        object[methodName] = func;\n        if (isFunc) {\n          object.prototype[methodName] = function() {\n            var chainAll = this.__chain__;\n            if (chain || chainAll) {\n              var result = object(this.__wrapped__),\n                  actions = result.__actions__ = copyArray(this.__actions__);\n\n              actions.push({ 'func': func, 'args': arguments, 'thisArg': object });\n              result.__chain__ = chainAll;\n              return result;\n            }\n            return func.apply(object, arrayPush([this.value()], arguments));\n          };\n        }\n      });\n\n      return object;\n    }\n\n    /**\n     * Reverts the `_` variable to its previous value and returns a reference to\n     * the `lodash` function.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @returns {Function} Returns the `lodash` function.\n     * @example\n     *\n     * var lodash = _.noConflict();\n     */\n    function noConflict() {\n      if (root._ === this) {\n        root._ = oldDash;\n      }\n      return this;\n    }\n\n    /**\n     * This method returns `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Util\n     * @example\n     *\n     * _.times(2, _.noop);\n     * // => [undefined, undefined]\n     */\n    function noop() {\n      // No operation performed.\n    }\n\n    /**\n     * Creates a function that gets the argument at index `n`. If `n` is negative,\n     * the nth argument from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [n=0] The index of the argument to return.\n     * @returns {Function} Returns the new pass-thru function.\n     * @example\n     *\n     * var func = _.nthArg(1);\n     * func('a', 'b', 'c', 'd');\n     * // => 'b'\n     *\n     * var func = _.nthArg(-2);\n     * func('a', 'b', 'c', 'd');\n     * // => 'c'\n     */\n    function nthArg(n) {\n      n = toInteger(n);\n      return baseRest(function(args) {\n        return baseNth(args, n);\n      });\n    }\n\n    /**\n     * Creates a function that invokes `iteratees` with the arguments it receives\n     * and returns their results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to invoke.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.over([Math.max, Math.min]);\n     *\n     * func(1, 2, 3, 4);\n     * // => [4, 1]\n     */\n    var over = createOver(arrayMap);\n\n    /**\n     * Creates a function that checks if **all** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overEvery([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => false\n     *\n     * func(NaN);\n     * // => false\n     */\n    var overEvery = createOver(arrayEvery);\n\n    /**\n     * Creates a function that checks if **any** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overSome([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => true\n     *\n     * func(NaN);\n     * // => false\n     */\n    var overSome = createOver(arraySome);\n\n    /**\n     * Creates a function that returns the value at `path` of a given object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': 2 } },\n     *   { 'a': { 'b': 1 } }\n     * ];\n     *\n     * _.map(objects, _.property('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n     * // => [1, 2]\n     */\n    function property(path) {\n      return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n    }\n\n    /**\n     * The opposite of `_.property`; this method creates a function that returns\n     * the value at a given path of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var array = [0, 1, 2],\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.propertyOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));\n     * // => [2, 0]\n     */\n    function propertyOf(object) {\n      return function(path) {\n        return object == null ? undefined : baseGet(object, path);\n      };\n    }\n\n    /**\n     * Creates an array of numbers (positive and/or negative) progressing from\n     * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n     * `start` is specified without an `end` or `step`. If `end` is not specified,\n     * it's set to `start` with `start` then set to `0`.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.rangeRight\n     * @example\n     *\n     * _.range(4);\n     * // => [0, 1, 2, 3]\n     *\n     * _.range(-4);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 5);\n     * // => [1, 2, 3, 4]\n     *\n     * _.range(0, 20, 5);\n     * // => [0, 5, 10, 15]\n     *\n     * _.range(0, -4, -1);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.range(0);\n     * // => []\n     */\n    var range = createRange();\n\n    /**\n     * This method is like `_.range` except that it populates values in\n     * descending order.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.range\n     * @example\n     *\n     * _.rangeRight(4);\n     * // => [3, 2, 1, 0]\n     *\n     * _.rangeRight(-4);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 5);\n     * // => [4, 3, 2, 1]\n     *\n     * _.rangeRight(0, 20, 5);\n     * // => [15, 10, 5, 0]\n     *\n     * _.rangeRight(0, -4, -1);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.rangeRight(0);\n     * // => []\n     */\n    var rangeRight = createRange(true);\n\n    /**\n     * This method returns a new empty array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Array} Returns the new empty array.\n     * @example\n     *\n     * var arrays = _.times(2, _.stubArray);\n     *\n     * console.log(arrays);\n     * // => [[], []]\n     *\n     * console.log(arrays[0] === arrays[1]);\n     * // => false\n     */\n    function stubArray() {\n      return [];\n    }\n\n    /**\n     * This method returns `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `false`.\n     * @example\n     *\n     * _.times(2, _.stubFalse);\n     * // => [false, false]\n     */\n    function stubFalse() {\n      return false;\n    }\n\n    /**\n     * This method returns a new empty object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Object} Returns the new empty object.\n     * @example\n     *\n     * var objects = _.times(2, _.stubObject);\n     *\n     * console.log(objects);\n     * // => [{}, {}]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => false\n     */\n    function stubObject() {\n      return {};\n    }\n\n    /**\n     * This method returns an empty string.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {string} Returns the empty string.\n     * @example\n     *\n     * _.times(2, _.stubString);\n     * // => ['', '']\n     */\n    function stubString() {\n      return '';\n    }\n\n    /**\n     * This method returns `true`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `true`.\n     * @example\n     *\n     * _.times(2, _.stubTrue);\n     * // => [true, true]\n     */\n    function stubTrue() {\n      return true;\n    }\n\n    /**\n     * Invokes the iteratee `n` times, returning an array of the results of\n     * each invocation. The iteratee is invoked with one argument; (index).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} n The number of times to invoke `iteratee`.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.times(3, String);\n     * // => ['0', '1', '2']\n     *\n     *  _.times(4, _.constant(0));\n     * // => [0, 0, 0, 0]\n     */\n    function times(n, iteratee) {\n      n = toInteger(n);\n      if (n < 1 || n > MAX_SAFE_INTEGER) {\n        return [];\n      }\n      var index = MAX_ARRAY_LENGTH,\n          length = nativeMin(n, MAX_ARRAY_LENGTH);\n\n      iteratee = getIteratee(iteratee);\n      n -= MAX_ARRAY_LENGTH;\n\n      var result = baseTimes(length, iteratee);\n      while (++index < n) {\n        iteratee(index);\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a property path array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the new property path array.\n     * @example\n     *\n     * _.toPath('a.b.c');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toPath('a[0].b.c');\n     * // => ['a', '0', 'b', 'c']\n     */\n    function toPath(value) {\n      if (isArray(value)) {\n        return arrayMap(value, toKey);\n      }\n      return isSymbol(value) ? [value] : copyArray(stringToPath(toString(value)));\n    }\n\n    /**\n     * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {string} [prefix=''] The value to prefix the ID with.\n     * @returns {string} Returns the unique ID.\n     * @example\n     *\n     * _.uniqueId('contact_');\n     * // => 'contact_104'\n     *\n     * _.uniqueId();\n     * // => '105'\n     */\n    function uniqueId(prefix) {\n      var id = ++idCounter;\n      return toString(prefix) + id;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Adds two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {number} augend The first number in an addition.\n     * @param {number} addend The second number in an addition.\n     * @returns {number} Returns the total.\n     * @example\n     *\n     * _.add(6, 4);\n     * // => 10\n     */\n    var add = createMathOperation(function(augend, addend) {\n      return augend + addend;\n    }, 0);\n\n    /**\n     * Computes `number` rounded up to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round up.\n     * @param {number} [precision=0] The precision to round up to.\n     * @returns {number} Returns the rounded up number.\n     * @example\n     *\n     * _.ceil(4.006);\n     * // => 5\n     *\n     * _.ceil(6.004, 2);\n     * // => 6.01\n     *\n     * _.ceil(6040, -2);\n     * // => 6100\n     */\n    var ceil = createRound('ceil');\n\n    /**\n     * Divide two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} dividend The first number in a division.\n     * @param {number} divisor The second number in a division.\n     * @returns {number} Returns the quotient.\n     * @example\n     *\n     * _.divide(6, 4);\n     * // => 1.5\n     */\n    var divide = createMathOperation(function(dividend, divisor) {\n      return dividend / divisor;\n    }, 1);\n\n    /**\n     * Computes `number` rounded down to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round down.\n     * @param {number} [precision=0] The precision to round down to.\n     * @returns {number} Returns the rounded down number.\n     * @example\n     *\n     * _.floor(4.006);\n     * // => 4\n     *\n     * _.floor(0.046, 2);\n     * // => 0.04\n     *\n     * _.floor(4060, -2);\n     * // => 4000\n     */\n    var floor = createRound('floor');\n\n    /**\n     * Computes the maximum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * _.max([4, 2, 8, 6]);\n     * // => 8\n     *\n     * _.max([]);\n     * // => undefined\n     */\n    function max(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseGt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.max` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.maxBy(objects, function(o) { return o.n; });\n     * // => { 'n': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.maxBy(objects, 'n');\n     * // => { 'n': 2 }\n     */\n    function maxBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseGt)\n        : undefined;\n    }\n\n    /**\n     * Computes the mean of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * _.mean([4, 2, 8, 6]);\n     * // => 5\n     */\n    function mean(array) {\n      return baseMean(array, identity);\n    }\n\n    /**\n     * This method is like `_.mean` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be averaged.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.meanBy(objects, function(o) { return o.n; });\n     * // => 5\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.meanBy(objects, 'n');\n     * // => 5\n     */\n    function meanBy(array, iteratee) {\n      return baseMean(array, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * Computes the minimum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * _.min([4, 2, 8, 6]);\n     * // => 2\n     *\n     * _.min([]);\n     * // => undefined\n     */\n    function min(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseLt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.min` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.minBy(objects, function(o) { return o.n; });\n     * // => { 'n': 1 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.minBy(objects, 'n');\n     * // => { 'n': 1 }\n     */\n    function minBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseLt)\n        : undefined;\n    }\n\n    /**\n     * Multiply two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} multiplier The first number in a multiplication.\n     * @param {number} multiplicand The second number in a multiplication.\n     * @returns {number} Returns the product.\n     * @example\n     *\n     * _.multiply(6, 4);\n     * // => 24\n     */\n    var multiply = createMathOperation(function(multiplier, multiplicand) {\n      return multiplier * multiplicand;\n    }, 1);\n\n    /**\n     * Computes `number` rounded to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round.\n     * @param {number} [precision=0] The precision to round to.\n     * @returns {number} Returns the rounded number.\n     * @example\n     *\n     * _.round(4.006);\n     * // => 4\n     *\n     * _.round(4.006, 2);\n     * // => 4.01\n     *\n     * _.round(4060, -2);\n     * // => 4100\n     */\n    var round = createRound('round');\n\n    /**\n     * Subtract two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {number} minuend The first number in a subtraction.\n     * @param {number} subtrahend The second number in a subtraction.\n     * @returns {number} Returns the difference.\n     * @example\n     *\n     * _.subtract(6, 4);\n     * // => 2\n     */\n    var subtract = createMathOperation(function(minuend, subtrahend) {\n      return minuend - subtrahend;\n    }, 0);\n\n    /**\n     * Computes the sum of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * _.sum([4, 2, 8, 6]);\n     * // => 20\n     */\n    function sum(array) {\n      return (array && array.length)\n        ? baseSum(array, identity)\n        : 0;\n    }\n\n    /**\n     * This method is like `_.sum` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be summed.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.sumBy(objects, function(o) { return o.n; });\n     * // => 20\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sumBy(objects, 'n');\n     * // => 20\n     */\n    function sumBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSum(array, getIteratee(iteratee, 2))\n        : 0;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return wrapped values in chain sequences.\n    lodash.after = after;\n    lodash.ary = ary;\n    lodash.assign = assign;\n    lodash.assignIn = assignIn;\n    lodash.assignInWith = assignInWith;\n    lodash.assignWith = assignWith;\n    lodash.at = at;\n    lodash.before = before;\n    lodash.bind = bind;\n    lodash.bindAll = bindAll;\n    lodash.bindKey = bindKey;\n    lodash.castArray = castArray;\n    lodash.chain = chain;\n    lodash.chunk = chunk;\n    lodash.compact = compact;\n    lodash.concat = concat;\n    lodash.cond = cond;\n    lodash.conforms = conforms;\n    lodash.constant = constant;\n    lodash.countBy = countBy;\n    lodash.create = create;\n    lodash.curry = curry;\n    lodash.curryRight = curryRight;\n    lodash.debounce = debounce;\n    lodash.defaults = defaults;\n    lodash.defaultsDeep = defaultsDeep;\n    lodash.defer = defer;\n    lodash.delay = delay;\n    lodash.difference = difference;\n    lodash.differenceBy = differenceBy;\n    lodash.differenceWith = differenceWith;\n    lodash.drop = drop;\n    lodash.dropRight = dropRight;\n    lodash.dropRightWhile = dropRightWhile;\n    lodash.dropWhile = dropWhile;\n    lodash.fill = fill;\n    lodash.filter = filter;\n    lodash.flatMap = flatMap;\n    lodash.flatMapDeep = flatMapDeep;\n    lodash.flatMapDepth = flatMapDepth;\n    lodash.flatten = flatten;\n    lodash.flattenDeep = flattenDeep;\n    lodash.flattenDepth = flattenDepth;\n    lodash.flip = flip;\n    lodash.flow = flow;\n    lodash.flowRight = flowRight;\n    lodash.fromPairs = fromPairs;\n    lodash.functions = functions;\n    lodash.functionsIn = functionsIn;\n    lodash.groupBy = groupBy;\n    lodash.initial = initial;\n    lodash.intersection = intersection;\n    lodash.intersectionBy = intersectionBy;\n    lodash.intersectionWith = intersectionWith;\n    lodash.invert = invert;\n    lodash.invertBy = invertBy;\n    lodash.invokeMap = invokeMap;\n    lodash.iteratee = iteratee;\n    lodash.keyBy = keyBy;\n    lodash.keys = keys;\n    lodash.keysIn = keysIn;\n    lodash.map = map;\n    lodash.mapKeys = mapKeys;\n    lodash.mapValues = mapValues;\n    lodash.matches = matches;\n    lodash.matchesProperty = matchesProperty;\n    lodash.memoize = memoize;\n    lodash.merge = merge;\n    lodash.mergeWith = mergeWith;\n    lodash.method = method;\n    lodash.methodOf = methodOf;\n    lodash.mixin = mixin;\n    lodash.negate = negate;\n    lodash.nthArg = nthArg;\n    lodash.omit = omit;\n    lodash.omitBy = omitBy;\n    lodash.once = once;\n    lodash.orderBy = orderBy;\n    lodash.over = over;\n    lodash.overArgs = overArgs;\n    lodash.overEvery = overEvery;\n    lodash.overSome = overSome;\n    lodash.partial = partial;\n    lodash.partialRight = partialRight;\n    lodash.partition = partition;\n    lodash.pick = pick;\n    lodash.pickBy = pickBy;\n    lodash.property = property;\n    lodash.propertyOf = propertyOf;\n    lodash.pull = pull;\n    lodash.pullAll = pullAll;\n    lodash.pullAllBy = pullAllBy;\n    lodash.pullAllWith = pullAllWith;\n    lodash.pullAt = pullAt;\n    lodash.range = range;\n    lodash.rangeRight = rangeRight;\n    lodash.rearg = rearg;\n    lodash.reject = reject;\n    lodash.remove = remove;\n    lodash.rest = rest;\n    lodash.reverse = reverse;\n    lodash.sampleSize = sampleSize;\n    lodash.set = set;\n    lodash.setWith = setWith;\n    lodash.shuffle = shuffle;\n    lodash.slice = slice;\n    lodash.sortBy = sortBy;\n    lodash.sortedUniq = sortedUniq;\n    lodash.sortedUniqBy = sortedUniqBy;\n    lodash.split = split;\n    lodash.spread = spread;\n    lodash.tail = tail;\n    lodash.take = take;\n    lodash.takeRight = takeRight;\n    lodash.takeRightWhile = takeRightWhile;\n    lodash.takeWhile = takeWhile;\n    lodash.tap = tap;\n    lodash.throttle = throttle;\n    lodash.thru = thru;\n    lodash.toArray = toArray;\n    lodash.toPairs = toPairs;\n    lodash.toPairsIn = toPairsIn;\n    lodash.toPath = toPath;\n    lodash.toPlainObject = toPlainObject;\n    lodash.transform = transform;\n    lodash.unary = unary;\n    lodash.union = union;\n    lodash.unionBy = unionBy;\n    lodash.unionWith = unionWith;\n    lodash.uniq = uniq;\n    lodash.uniqBy = uniqBy;\n    lodash.uniqWith = uniqWith;\n    lodash.unset = unset;\n    lodash.unzip = unzip;\n    lodash.unzipWith = unzipWith;\n    lodash.update = update;\n    lodash.updateWith = updateWith;\n    lodash.values = values;\n    lodash.valuesIn = valuesIn;\n    lodash.without = without;\n    lodash.words = words;\n    lodash.wrap = wrap;\n    lodash.xor = xor;\n    lodash.xorBy = xorBy;\n    lodash.xorWith = xorWith;\n    lodash.zip = zip;\n    lodash.zipObject = zipObject;\n    lodash.zipObjectDeep = zipObjectDeep;\n    lodash.zipWith = zipWith;\n\n    // Add aliases.\n    lodash.entries = toPairs;\n    lodash.entriesIn = toPairsIn;\n    lodash.extend = assignIn;\n    lodash.extendWith = assignInWith;\n\n    // Add methods to `lodash.prototype`.\n    mixin(lodash, lodash);\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return unwrapped values in chain sequences.\n    lodash.add = add;\n    lodash.attempt = attempt;\n    lodash.camelCase = camelCase;\n    lodash.capitalize = capitalize;\n    lodash.ceil = ceil;\n    lodash.clamp = clamp;\n    lodash.clone = clone;\n    lodash.cloneDeep = cloneDeep;\n    lodash.cloneDeepWith = cloneDeepWith;\n    lodash.cloneWith = cloneWith;\n    lodash.conformsTo = conformsTo;\n    lodash.deburr = deburr;\n    lodash.defaultTo = defaultTo;\n    lodash.divide = divide;\n    lodash.endsWith = endsWith;\n    lodash.eq = eq;\n    lodash.escape = escape;\n    lodash.escapeRegExp = escapeRegExp;\n    lodash.every = every;\n    lodash.find = find;\n    lodash.findIndex = findIndex;\n    lodash.findKey = findKey;\n    lodash.findLast = findLast;\n    lodash.findLastIndex = findLastIndex;\n    lodash.findLastKey = findLastKey;\n    lodash.floor = floor;\n    lodash.forEach = forEach;\n    lodash.forEachRight = forEachRight;\n    lodash.forIn = forIn;\n    lodash.forInRight = forInRight;\n    lodash.forOwn = forOwn;\n    lodash.forOwnRight = forOwnRight;\n    lodash.get = get;\n    lodash.gt = gt;\n    lodash.gte = gte;\n    lodash.has = has;\n    lodash.hasIn = hasIn;\n    lodash.head = head;\n    lodash.identity = identity;\n    lodash.includes = includes;\n    lodash.indexOf = indexOf;\n    lodash.inRange = inRange;\n    lodash.invoke = invoke;\n    lodash.isArguments = isArguments;\n    lodash.isArray = isArray;\n    lodash.isArrayBuffer = isArrayBuffer;\n    lodash.isArrayLike = isArrayLike;\n    lodash.isArrayLikeObject = isArrayLikeObject;\n    lodash.isBoolean = isBoolean;\n    lodash.isBuffer = isBuffer;\n    lodash.isDate = isDate;\n    lodash.isElement = isElement;\n    lodash.isEmpty = isEmpty;\n    lodash.isEqual = isEqual;\n    lodash.isEqualWith = isEqualWith;\n    lodash.isError = isError;\n    lodash.isFinite = isFinite;\n    lodash.isFunction = isFunction;\n    lodash.isInteger = isInteger;\n    lodash.isLength = isLength;\n    lodash.isMap = isMap;\n    lodash.isMatch = isMatch;\n    lodash.isMatchWith = isMatchWith;\n    lodash.isNaN = isNaN;\n    lodash.isNative = isNative;\n    lodash.isNil = isNil;\n    lodash.isNull = isNull;\n    lodash.isNumber = isNumber;\n    lodash.isObject = isObject;\n    lodash.isObjectLike = isObjectLike;\n    lodash.isPlainObject = isPlainObject;\n    lodash.isRegExp = isRegExp;\n    lodash.isSafeInteger = isSafeInteger;\n    lodash.isSet = isSet;\n    lodash.isString = isString;\n    lodash.isSymbol = isSymbol;\n    lodash.isTypedArray = isTypedArray;\n    lodash.isUndefined = isUndefined;\n    lodash.isWeakMap = isWeakMap;\n    lodash.isWeakSet = isWeakSet;\n    lodash.join = join;\n    lodash.kebabCase = kebabCase;\n    lodash.last = last;\n    lodash.lastIndexOf = lastIndexOf;\n    lodash.lowerCase = lowerCase;\n    lodash.lowerFirst = lowerFirst;\n    lodash.lt = lt;\n    lodash.lte = lte;\n    lodash.max = max;\n    lodash.maxBy = maxBy;\n    lodash.mean = mean;\n    lodash.meanBy = meanBy;\n    lodash.min = min;\n    lodash.minBy = minBy;\n    lodash.stubArray = stubArray;\n    lodash.stubFalse = stubFalse;\n    lodash.stubObject = stubObject;\n    lodash.stubString = stubString;\n    lodash.stubTrue = stubTrue;\n    lodash.multiply = multiply;\n    lodash.nth = nth;\n    lodash.noConflict = noConflict;\n    lodash.noop = noop;\n    lodash.now = now;\n    lodash.pad = pad;\n    lodash.padEnd = padEnd;\n    lodash.padStart = padStart;\n    lodash.parseInt = parseInt;\n    lodash.random = random;\n    lodash.reduce = reduce;\n    lodash.reduceRight = reduceRight;\n    lodash.repeat = repeat;\n    lodash.replace = replace;\n    lodash.result = result;\n    lodash.round = round;\n    lodash.runInContext = runInContext;\n    lodash.sample = sample;\n    lodash.size = size;\n    lodash.snakeCase = snakeCase;\n    lodash.some = some;\n    lodash.sortedIndex = sortedIndex;\n    lodash.sortedIndexBy = sortedIndexBy;\n    lodash.sortedIndexOf = sortedIndexOf;\n    lodash.sortedLastIndex = sortedLastIndex;\n    lodash.sortedLastIndexBy = sortedLastIndexBy;\n    lodash.sortedLastIndexOf = sortedLastIndexOf;\n    lodash.startCase = startCase;\n    lodash.startsWith = startsWith;\n    lodash.subtract = subtract;\n    lodash.sum = sum;\n    lodash.sumBy = sumBy;\n    lodash.template = template;\n    lodash.times = times;\n    lodash.toFinite = toFinite;\n    lodash.toInteger = toInteger;\n    lodash.toLength = toLength;\n    lodash.toLower = toLower;\n    lodash.toNumber = toNumber;\n    lodash.toSafeInteger = toSafeInteger;\n    lodash.toString = toString;\n    lodash.toUpper = toUpper;\n    lodash.trim = trim;\n    lodash.trimEnd = trimEnd;\n    lodash.trimStart = trimStart;\n    lodash.truncate = truncate;\n    lodash.unescape = unescape;\n    lodash.uniqueId = uniqueId;\n    lodash.upperCase = upperCase;\n    lodash.upperFirst = upperFirst;\n\n    // Add aliases.\n    lodash.each = forEach;\n    lodash.eachRight = forEachRight;\n    lodash.first = head;\n\n    mixin(lodash, (function() {\n      var source = {};\n      baseForOwn(lodash, function(func, methodName) {\n        if (!hasOwnProperty.call(lodash.prototype, methodName)) {\n          source[methodName] = func;\n        }\n      });\n      return source;\n    }()), { 'chain': false });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The semantic version number.\n     *\n     * @static\n     * @memberOf _\n     * @type {string}\n     */\n    lodash.VERSION = VERSION;\n\n    // Assign default placeholders.\n    arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function(methodName) {\n      lodash[methodName].placeholder = lodash;\n    });\n\n    // Add `LazyWrapper` methods for `_.drop` and `_.take` variants.\n    arrayEach(['drop', 'take'], function(methodName, index) {\n      LazyWrapper.prototype[methodName] = function(n) {\n        n = n === undefined ? 1 : nativeMax(toInteger(n), 0);\n\n        var result = (this.__filtered__ && !index)\n          ? new LazyWrapper(this)\n          : this.clone();\n\n        if (result.__filtered__) {\n          result.__takeCount__ = nativeMin(n, result.__takeCount__);\n        } else {\n          result.__views__.push({\n            'size': nativeMin(n, MAX_ARRAY_LENGTH),\n            'type': methodName + (result.__dir__ < 0 ? 'Right' : '')\n          });\n        }\n        return result;\n      };\n\n      LazyWrapper.prototype[methodName + 'Right'] = function(n) {\n        return this.reverse()[methodName](n).reverse();\n      };\n    });\n\n    // Add `LazyWrapper` methods that accept an `iteratee` value.\n    arrayEach(['filter', 'map', 'takeWhile'], function(methodName, index) {\n      var type = index + 1,\n          isFilter = type == LAZY_FILTER_FLAG || type == LAZY_WHILE_FLAG;\n\n      LazyWrapper.prototype[methodName] = function(iteratee) {\n        var result = this.clone();\n        result.__iteratees__.push({\n          'iteratee': getIteratee(iteratee, 3),\n          'type': type\n        });\n        result.__filtered__ = result.__filtered__ || isFilter;\n        return result;\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.head` and `_.last`.\n    arrayEach(['head', 'last'], function(methodName, index) {\n      var takeName = 'take' + (index ? 'Right' : '');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this[takeName](1).value()[0];\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.initial` and `_.tail`.\n    arrayEach(['initial', 'tail'], function(methodName, index) {\n      var dropName = 'drop' + (index ? '' : 'Right');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);\n      };\n    });\n\n    LazyWrapper.prototype.compact = function() {\n      return this.filter(identity);\n    };\n\n    LazyWrapper.prototype.find = function(predicate) {\n      return this.filter(predicate).head();\n    };\n\n    LazyWrapper.prototype.findLast = function(predicate) {\n      return this.reverse().find(predicate);\n    };\n\n    LazyWrapper.prototype.invokeMap = baseRest(function(path, args) {\n      if (typeof path == 'function') {\n        return new LazyWrapper(this);\n      }\n      return this.map(function(value) {\n        return baseInvoke(value, path, args);\n      });\n    });\n\n    LazyWrapper.prototype.reject = function(predicate) {\n      return this.filter(negate(getIteratee(predicate)));\n    };\n\n    LazyWrapper.prototype.slice = function(start, end) {\n      start = toInteger(start);\n\n      var result = this;\n      if (result.__filtered__ && (start > 0 || end < 0)) {\n        return new LazyWrapper(result);\n      }\n      if (start < 0) {\n        result = result.takeRight(-start);\n      } else if (start) {\n        result = result.drop(start);\n      }\n      if (end !== undefined) {\n        end = toInteger(end);\n        result = end < 0 ? result.dropRight(-end) : result.take(end - start);\n      }\n      return result;\n    };\n\n    LazyWrapper.prototype.takeRightWhile = function(predicate) {\n      return this.reverse().takeWhile(predicate).reverse();\n    };\n\n    LazyWrapper.prototype.toArray = function() {\n      return this.take(MAX_ARRAY_LENGTH);\n    };\n\n    // Add `LazyWrapper` methods to `lodash.prototype`.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var checkIteratee = /^(?:filter|find|map|reject)|While$/.test(methodName),\n          isTaker = /^(?:head|last)$/.test(methodName),\n          lodashFunc = lodash[isTaker ? ('take' + (methodName == 'last' ? 'Right' : '')) : methodName],\n          retUnwrapped = isTaker || /^find/.test(methodName);\n\n      if (!lodashFunc) {\n        return;\n      }\n      lodash.prototype[methodName] = function() {\n        var value = this.__wrapped__,\n            args = isTaker ? [1] : arguments,\n            isLazy = value instanceof LazyWrapper,\n            iteratee = args[0],\n            useLazy = isLazy || isArray(value);\n\n        var interceptor = function(value) {\n          var result = lodashFunc.apply(lodash, arrayPush([value], args));\n          return (isTaker && chainAll) ? result[0] : result;\n        };\n\n        if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {\n          // Avoid lazy use if the iteratee has a \"length\" value other than `1`.\n          isLazy = useLazy = false;\n        }\n        var chainAll = this.__chain__,\n            isHybrid = !!this.__actions__.length,\n            isUnwrapped = retUnwrapped && !chainAll,\n            onlyLazy = isLazy && !isHybrid;\n\n        if (!retUnwrapped && useLazy) {\n          value = onlyLazy ? value : new LazyWrapper(this);\n          var result = func.apply(value, args);\n          result.__actions__.push({ 'func': thru, 'args': [interceptor], 'thisArg': undefined });\n          return new LodashWrapper(result, chainAll);\n        }\n        if (isUnwrapped && onlyLazy) {\n          return func.apply(this, args);\n        }\n        result = this.thru(interceptor);\n        return isUnwrapped ? (isTaker ? result.value()[0] : result.value()) : result;\n      };\n    });\n\n    // Add `Array` methods to `lodash.prototype`.\n    arrayEach(['pop', 'push', 'shift', 'sort', 'splice', 'unshift'], function(methodName) {\n      var func = arrayProto[methodName],\n          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',\n          retUnwrapped = /^(?:pop|shift)$/.test(methodName);\n\n      lodash.prototype[methodName] = function() {\n        var args = arguments;\n        if (retUnwrapped && !this.__chain__) {\n          var value = this.value();\n          return func.apply(isArray(value) ? value : [], args);\n        }\n        return this[chainName](function(value) {\n          return func.apply(isArray(value) ? value : [], args);\n        });\n      };\n    });\n\n    // Map minified method names to their real names.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var lodashFunc = lodash[methodName];\n      if (lodashFunc) {\n        var key = lodashFunc.name + '';\n        if (!hasOwnProperty.call(realNames, key)) {\n          realNames[key] = [];\n        }\n        realNames[key].push({ 'name': methodName, 'func': lodashFunc });\n      }\n    });\n\n    realNames[createHybrid(undefined, WRAP_BIND_KEY_FLAG).name] = [{\n      'name': 'wrapper',\n      'func': undefined\n    }];\n\n    // Add methods to `LazyWrapper`.\n    LazyWrapper.prototype.clone = lazyClone;\n    LazyWrapper.prototype.reverse = lazyReverse;\n    LazyWrapper.prototype.value = lazyValue;\n\n    // Add chain sequence methods to the `lodash` wrapper.\n    lodash.prototype.at = wrapperAt;\n    lodash.prototype.chain = wrapperChain;\n    lodash.prototype.commit = wrapperCommit;\n    lodash.prototype.next = wrapperNext;\n    lodash.prototype.plant = wrapperPlant;\n    lodash.prototype.reverse = wrapperReverse;\n    lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;\n\n    // Add lazy aliases.\n    lodash.prototype.first = lodash.prototype.head;\n\n    if (symIterator) {\n      lodash.prototype[symIterator] = wrapperToIterator;\n    }\n    return lodash;\n  });\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export lodash.\n  var _ = runInContext();\n\n  // Some AMD build optimizers, like r.js, check for condition patterns like:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose Lodash on the global object to prevent errors when Lodash is\n    // loaded by a script tag in the presence of an AMD loader.\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\n    // Use `_.noConflict` to remove Lodash from the global object.\n    root._ = _;\n\n    // Define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module.\n    define(function() {\n      return _;\n    });\n  }\n  // Check for `exports` after `define` in case a build optimizer adds it.\n  else if (freeModule) {\n    // Export for Node.js.\n    (freeModule.exports = _)._ = _;\n    // Export for CommonJS support.\n    freeExports._ = _;\n  }\n  else {\n    // Export to the global object.\n    root._ = _;\n  }\n}.call(this));\n","'use strict';\nimport { GitCommit, GitCommitLine, GitCommitType } from './commit';\n\nexport class GitBlameCommit extends GitCommit {\n    static is(commit: any): commit is GitBlameCommit {\n        return (\n            commit instanceof GitBlameCommit\n            //|| (commit.repoPath !== undefined && commit.sha !== undefined && commit.type === GitCommitType.Blame)\n        );\n    }\n\n    constructor(\n        repoPath: string,\n        sha: string,\n        author: string,\n        email: string | undefined,\n        authorDate: Date,\n        committerDate: Date,\n        message: string,\n        fileName: string,\n        originalFileName: string | undefined,\n        previousSha: string | undefined,\n        previousFileName: string | undefined,\n        public readonly lines: GitCommitLine[]\n    ) {\n        super(\n            GitCommitType.Blame,\n            repoPath,\n            sha,\n            author,\n            email,\n            authorDate,\n            committerDate,\n            message,\n            fileName,\n            originalFileName,\n            previousSha,\n            previousFileName\n        );\n    }\n\n    with(changes: {\n        sha?: string;\n        fileName?: string;\n        originalFileName?: string | null;\n        previousFileName?: string | null;\n        previousSha?: string | null;\n        lines?: GitCommitLine[] | null;\n    }): GitBlameCommit {\n        return new GitBlameCommit(\n            this.repoPath,\n            changes.sha || this.sha,\n            this.author,\n            this.email,\n            this.authorDate,\n            this.committerDate,\n            this.message,\n            changes.fileName || this.fileName,\n            this.getChangedValue(changes.originalFileName, this.originalFileName),\n            this.getChangedValue(changes.previousSha, this.previousSha),\n            this.getChangedValue(changes.previousFileName, this.previousFileName),\n            this.getChangedValue(changes.lines, changes.sha || changes.fileName ? [] : this.lines) || []\n        );\n    }\n}\n","'use strict';\nimport { Uri } from 'vscode';\nimport { GravatarDefaultStyle } from '../../configuration';\nimport { getGravatarUri } from '../../avatars';\n\nexport class GitContributor {\n    static is(contributor: any): contributor is GitContributor {\n        return contributor instanceof GitContributor;\n    }\n\n    constructor(\n        public readonly repoPath: string,\n        public readonly name: string,\n        public readonly email: string,\n        public readonly count: number\n    ) {}\n\n    getGravatarUri(fallback: GravatarDefaultStyle, size: number = 16): Uri {\n        return getGravatarUri(this.email, fallback, size);\n    }\n}\n","'use strict';\nimport { GitDiffParser } from '../parsers/diffParser';\nimport { memoize } from '../../system';\n\nexport interface GitDiffLine {\n    line: string;\n    state: 'added' | 'removed' | 'unchanged';\n}\n\nexport interface GitDiffHunkLine {\n    hunk: GitDiffHunk;\n    current: GitDiffLine | undefined;\n    previous: GitDiffLine | undefined;\n}\n\nexport class GitDiffHunk {\n    constructor(\n        public readonly diff: string,\n        public currentPosition: { start: number; end: number },\n        public previousPosition: { start: number; end: number }\n    ) {}\n\n    @memoize()\n    get lines(): GitDiffHunkLine[] {\n        return GitDiffParser.parseHunk(this);\n    }\n}\n\nexport interface GitDiff {\n    readonly hunks: GitDiffHunk[];\n\n    readonly diff?: string;\n}\n\nexport interface GitDiffShortStat {\n    readonly files: number;\n    readonly insertions: number;\n    readonly deletions: number;\n}\n","'use strict';\nimport { WorkspaceState } from '../../constants';\nimport { Container } from '../../container';\nimport { RemoteProvider } from '../remotes/factory';\n\nexport enum GitRemoteType {\n    Fetch = 'fetch',\n    Push = 'push'\n}\n\nexport class GitRemote {\n    static is(remote: any): remote is GitRemote {\n        return remote instanceof GitRemote;\n    }\n\n    static sort(remotes: GitRemote[]) {\n        return remotes.sort(\n            (a, b) =>\n                (a.default ? -1 : 1) - (b.default ? -1 : 1) ||\n                a.name.localeCompare(b.name, undefined, { numeric: true, sensitivity: 'base' })\n        );\n    }\n\n    constructor(\n        public readonly repoPath: string,\n        public readonly id: string,\n        public readonly name: string,\n        public readonly scheme: string,\n        public readonly domain: string,\n        public readonly path: string,\n        public readonly provider: RemoteProvider | undefined,\n        public readonly types: { type: GitRemoteType; url: string }[]\n    ) {}\n\n    get default() {\n        const defaultRemote = Container.context.workspaceState.get<string>(WorkspaceState.DefaultRemote);\n        return this.id === defaultRemote;\n    }\n\n    setAsDefault(state: boolean = true) {\n        return Container.context.workspaceState.update(WorkspaceState.DefaultRemote, state ? this.id : undefined);\n    }\n}\n","'use strict';\nimport * as fs from 'fs';\nimport * as paths from 'path';\nimport {\n    commands,\n    ConfigurationChangeEvent,\n    Disposable,\n    Event,\n    EventEmitter,\n    ProgressLocation,\n    RelativePattern,\n    Uri,\n    window,\n    workspace,\n    WorkspaceFolder\n} from 'vscode';\nimport { configuration, RemotesConfig } from '../../configuration';\nimport { StarredRepositories, WorkspaceState } from '../../constants';\nimport { Container } from '../../container';\nimport { Functions, gate, log } from '../../system';\nimport { GitBranch, GitContributor, GitDiffShortStat, GitRemote, GitStash, GitStatus, GitTag } from '../git';\nimport { GitUri } from '../gitUri';\nimport { RemoteProviderFactory, RemoteProviders } from '../remotes/factory';\nimport { Messages } from '../../messages';\nimport { Logger } from '../../logger';\nimport { logName } from '../../system/decorators/log';\n\nexport enum RepositoryChange {\n    Config = 'config',\n    Closed = 'closed',\n    // FileSystem = 'file-system',\n    Remotes = 'remotes',\n    Repository = 'repository',\n    Stashes = 'stashes',\n    Tags = 'tags'\n}\n\nexport class RepositoryChangeEvent {\n    readonly changes: RepositoryChange[] = [];\n\n    constructor(public readonly repository?: Repository) {}\n\n    changed(change: RepositoryChange, solely: boolean = false) {\n        if (solely) return this.changes.length === 1 && this.changes[0] === change;\n\n        return this.changes.includes(change);\n\n        // const changed = this.changes.includes(change);\n        // if (changed) return true;\n\n        // if (change === RepositoryChange.Repository) {\n        //     return this.changes.includes(RepositoryChange.Stashes);\n        // }\n\n        // return false;\n    }\n}\n\nexport interface RepositoryFileSystemChangeEvent {\n    readonly repository?: Repository;\n    readonly uris: Uri[];\n}\n\n@logName<Repository>((r, name) => `${name}(${r.id})`)\nexport class Repository implements Disposable {\n    static sort(repositories: Repository[]) {\n        return repositories.sort((a, b) => (a.starred ? -1 : 1) - (b.starred ? -1 : 1) || a.index - b.index);\n    }\n\n    private _onDidChange = new EventEmitter<RepositoryChangeEvent>();\n    get onDidChange(): Event<RepositoryChangeEvent> {\n        return this._onDidChange.event;\n    }\n\n    private _onDidChangeFileSystem = new EventEmitter<RepositoryFileSystemChangeEvent>();\n    get onDidChangeFileSystem(): Event<RepositoryFileSystemChangeEvent> {\n        return this._onDidChangeFileSystem.event;\n    }\n\n    readonly formattedName: string;\n    readonly id: string;\n    readonly index: number;\n    readonly name: string;\n    readonly normalizedPath: string;\n    readonly supportsChangeEvents: boolean = true;\n\n    private _branch: Promise<GitBranch | undefined> | undefined;\n    private readonly _disposable: Disposable;\n    private _fireChangeDebounced: ((e: RepositoryChangeEvent) => void) | undefined = undefined;\n    private _fireFileSystemChangeDebounced: ((e: RepositoryFileSystemChangeEvent) => void) | undefined = undefined;\n    private _fsWatchCounter = 0;\n    private _fsWatcherDisposable: Disposable | undefined;\n    private _pendingChanges: { repo?: RepositoryChangeEvent; fs?: RepositoryFileSystemChangeEvent } = {};\n    private _providers: RemoteProviders | undefined;\n    private _remotes: Promise<GitRemote[]> | undefined;\n    private _suspended: boolean;\n\n    constructor(\n        public readonly folder: WorkspaceFolder,\n        public readonly path: string,\n        public readonly root: boolean,\n        private readonly onAnyRepositoryChanged: (repo: Repository, reason: RepositoryChange) => void,\n        suspended: boolean,\n        closed: boolean = false\n    ) {\n        const relativePath = paths.relative(folder.uri.fsPath, path);\n        if (root) {\n            // Check if the repository is not contained by a workspace folder\n            const repoFolder = workspace.getWorkspaceFolder(GitUri.fromRepoPath(path));\n            if (repoFolder === undefined) {\n                // If it isn't within a workspace folder we can't get change events, see: https://github.com/Microsoft/vscode/issues/3025\n                this.supportsChangeEvents = false;\n                this.formattedName = this.name = paths.basename(path);\n            }\n            else {\n                this.formattedName = this.name = folder.name;\n            }\n        }\n        else {\n            this.formattedName = relativePath ? `${folder.name} (${relativePath})` : folder.name;\n            this.name = folder.name;\n        }\n        this.index = folder.index;\n\n        this.normalizedPath = (path.endsWith('/') ? path : `${path}/`).toLowerCase();\n        this.id = this.normalizedPath;\n\n        this._suspended = suspended;\n        this._closed = closed;\n\n        // TODO: createFileSystemWatcher doesn't work unless the folder is part of the workspaceFolders\n        // https://github.com/Microsoft/vscode/issues/3025\n        const watcher = workspace.createFileSystemWatcher(\n            new RelativePattern(\n                folder,\n                '{\\\n**/.git/config,\\\n**/.git/index,\\\n**/.git/HEAD,\\\n**/.git/refs/stash,\\\n**/.git/refs/heads/**,\\\n**/.git/refs/remotes/**,\\\n**/.git/refs/tags/**,\\\n**/.gitignore\\\n}'\n            )\n        );\n        this._disposable = Disposable.from(\n            watcher,\n            watcher.onDidChange(this.onRepositoryChanged, this),\n            watcher.onDidCreate(this.onRepositoryChanged, this),\n            watcher.onDidDelete(this.onRepositoryChanged, this),\n            configuration.onDidChange(this.onConfigurationChanged, this)\n        );\n        this.onConfigurationChanged(configuration.initializingChangeEvent);\n    }\n\n    dispose() {\n        this.stopWatchingFileSystem();\n\n        // // Clean up any disposables in storage\n        // for (const item of this.storage.values()) {\n        //     if (item != null && typeof item.dispose === 'function') {\n        //         item.dispose();\n        //     }\n        // }\n\n        this._disposable && this._disposable.dispose();\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        const section = configuration.name('remotes').value;\n        if (configuration.changed(e, section, this.folder.uri)) {\n            this._providers = RemoteProviderFactory.loadProviders(\n                configuration.get<RemotesConfig[] | null | undefined>(section, this.folder.uri)\n            );\n\n            if (!configuration.initializing(e)) {\n                this._remotes = undefined;\n                this.fireChange(RepositoryChange.Remotes);\n            }\n        }\n    }\n\n    private onFileSystemChanged(uri: Uri) {\n        // Ignore .git changes\n        if (/\\.git(?:\\/|\\\\|$)/.test(uri.fsPath)) return;\n\n        this.fireFileSystemChange(uri);\n    }\n\n    private onRepositoryChanged(uri: Uri) {\n        if (uri !== undefined && uri.path.endsWith('refs/stash')) {\n            this.fireChange(RepositoryChange.Stashes);\n\n            return;\n        }\n\n        this._branch = undefined;\n\n        if (uri !== undefined && uri.path.endsWith('refs/remotes')) {\n            this._remotes = undefined;\n            this.fireChange(RepositoryChange.Remotes);\n\n            return;\n        }\n\n        if (uri !== undefined && uri.path.endsWith('refs/tags')) {\n            this.fireChange(RepositoryChange.Tags);\n\n            return;\n        }\n\n        if (uri !== undefined && uri.path.endsWith('config')) {\n            this._remotes = undefined;\n            this.fireChange(RepositoryChange.Config, RepositoryChange.Remotes);\n\n            return;\n        }\n\n        this.onAnyRepositoryChanged(this, RepositoryChange.Repository);\n        this.fireChange(RepositoryChange.Repository);\n    }\n\n    private _closed: boolean = false;\n    get closed(): boolean {\n        return this._closed;\n    }\n    set closed(value: boolean) {\n        const changed = this._closed !== value;\n        this._closed = value;\n        if (changed) {\n            this.onAnyRepositoryChanged(this, RepositoryChange.Closed);\n            this.fireChange(RepositoryChange.Closed);\n        }\n    }\n\n    @gate()\n    @log()\n    async checkout(ref: string, options: { progress?: boolean } = {}) {\n        const { progress } = { progress: true, ...options };\n        if (!progress) return this.checkoutCore(ref);\n\n        return void (await window.withProgress(\n            {\n                location: ProgressLocation.Notification,\n                title: `Checking out ${this.formattedName} to ${ref}...`,\n                cancellable: false\n            },\n            () => this.checkoutCore(ref)\n        ));\n    }\n\n    private async checkoutCore(ref: string, options: { remote?: string } = {}) {\n        try {\n            void (await Container.git.checkout(this.path, ref));\n\n            this.fireChange(RepositoryChange.Repository);\n        }\n        catch (ex) {\n            Logger.error(ex);\n            Messages.showGenericErrorMessage('Unable to checkout repository');\n        }\n    }\n\n    containsUri(uri: Uri) {\n        if (GitUri.is(uri)) {\n            uri = uri.repoPath !== undefined ? GitUri.file(uri.repoPath) : uri.documentUri();\n        }\n\n        return this.folder === workspace.getWorkspaceFolder(uri);\n    }\n\n    @gate()\n    @log()\n    async fetch(options: { all?: boolean; progress?: boolean; prune?: boolean; remote?: string } = {}) {\n        const { progress, ...opts } = { progress: true, ...options };\n        if (!progress) return this.fetchCore(opts);\n\n        return void (await window.withProgress(\n            {\n                location: ProgressLocation.Notification,\n                title: `Fetching ${opts.remote ? `${opts.remote} of ` : ''}${this.formattedName}...`\n            },\n            () => this.fetchCore(opts)\n        ));\n    }\n\n    private async fetchCore(options: { all?: boolean; prune?: boolean; remote?: string } = {}) {\n        try {\n            void (await Container.git.fetch(this.path, options));\n\n            this.fireChange(RepositoryChange.Repository);\n        }\n        catch (ex) {\n            Logger.error(ex);\n            Messages.showGenericErrorMessage('Unable to fetch repository');\n        }\n    }\n\n    getBranch(): Promise<GitBranch | undefined> {\n        if (this._branch === undefined || !this.supportsChangeEvents) {\n            this._branch = Container.git.getBranch(this.path);\n        }\n        return this._branch;\n    }\n\n    getBranches(options: { filter?: (b: GitBranch) => boolean; sort?: boolean } = {}): Promise<GitBranch[]> {\n        return Container.git.getBranches(this.path, options);\n    }\n\n    getBranchesAndOrTags(\n        options: {\n            filterBranches?: (b: GitBranch) => boolean;\n            filterTags?: (t: GitTag) => boolean;\n            include?: 'all' | 'branches' | 'tags';\n            sort?: boolean;\n        } = {}\n    ) {\n        return Container.git.getBranchesAndOrTags(this.path, options);\n    }\n\n    getChangedFilesCount(sha?: string): Promise<GitDiffShortStat | undefined> {\n        return Container.git.getChangedFilesCount(this.path, sha);\n    }\n\n    getContributors(): Promise<GitContributor[]> {\n        return Container.git.getContributors(this.path);\n    }\n\n    async getLastFetched(): Promise<number> {\n        const hasRemotes = await this.hasRemotes();\n        if (!hasRemotes || Container.vsls.isMaybeGuest) return 0;\n\n        return new Promise<number>((resolve, reject) =>\n            fs.stat(paths.join(this.path, '.git/FETCH_HEAD'), (err, stat) => resolve(err ? 0 : stat.mtime.getTime()))\n        );\n    }\n\n    getRemotes(options: { sort?: boolean } = {}): Promise<GitRemote[]> {\n        if (this._remotes === undefined || !this.supportsChangeEvents) {\n            if (this._providers === undefined) {\n                const remotesCfg = configuration.get<RemotesConfig[] | null | undefined>(\n                    configuration.name('remotes').value,\n                    this.folder.uri\n                );\n                this._providers = RemoteProviderFactory.loadProviders(remotesCfg);\n            }\n\n            // Since we are caching the results, always sort\n            this._remotes = Container.git.getRemotesCore(this.path, this._providers, { sort: true });\n        }\n\n        return this._remotes;\n    }\n\n    getStashList(): Promise<GitStash | undefined> {\n        return Container.git.getStashList(this.path);\n    }\n\n    getStatus(): Promise<GitStatus | undefined> {\n        return Container.git.getStatusForRepo(this.path);\n    }\n\n    getTags(options?: { filter?: (t: GitTag) => boolean; includeRefs?: boolean; sort?: boolean }): Promise<GitTag[]> {\n        return Container.git.getTags(this.path, options);\n    }\n\n    async hasRemotes(): Promise<boolean> {\n        const remotes = await this.getRemotes();\n        return remotes !== undefined && remotes.length > 0;\n    }\n\n    async hasTrackingBranch(): Promise<boolean> {\n        const branch = await this.getBranch();\n        return branch !== undefined && branch.tracking !== undefined;\n    }\n\n    @gate()\n    @log()\n    async pull(options: { progress?: boolean; rebase?: boolean } = {}) {\n        const { progress, ...opts } = { progress: true, ...options };\n        if (!progress) return this.pullCore();\n\n        return void (await window.withProgress(\n            {\n                location: ProgressLocation.Notification,\n                title: `Pulling ${this.formattedName}...`\n            },\n            () => this.pullCore(opts)\n        ));\n    }\n\n    private async pullCore(options: { rebase?: boolean } = {}) {\n        try {\n            const tracking = await this.hasTrackingBranch();\n            if (tracking) {\n                void (await commands.executeCommand(options.rebase ? 'git.pullRebase' : 'git.pull', this.path));\n            }\n            else if (configuration.getAny<boolean>('git.fetchOnPull', Uri.file(this.path))) {\n                void (await Container.git.fetch(this.path));\n            }\n\n            this.fireChange(RepositoryChange.Repository);\n        }\n        catch (ex) {\n            Logger.error(ex);\n            Messages.showGenericErrorMessage('Unable to pull repository');\n        }\n    }\n\n    @gate()\n    @log()\n    async push(options: { force?: boolean; progress?: boolean } = {}) {\n        const { force, progress } = { progress: true, ...options };\n        if (!progress) return this.pushCore(force);\n\n        return void (await window.withProgress(\n            {\n                location: ProgressLocation.Notification,\n                title: `Pushing ${this.formattedName}...`\n            },\n            () => this.pushCore(force)\n        ));\n    }\n\n    private async pushCore(force: boolean = false) {\n        try {\n            void (await commands.executeCommand(force ? 'git.pushForce' : 'git.push', this.path));\n\n            this.fireChange(RepositoryChange.Repository);\n        }\n        catch (ex) {\n            Logger.error(ex);\n            Messages.showGenericErrorMessage('Unable to push repository');\n        }\n    }\n\n    resume() {\n        if (!this._suspended) return;\n\n        this._suspended = false;\n\n        // If we've come back into focus and we are dirty, fire the change events\n\n        if (this._pendingChanges.repo !== undefined) {\n            this._fireChangeDebounced!(this._pendingChanges.repo);\n        }\n\n        if (this._pendingChanges.fs !== undefined) {\n            this._fireFileSystemChangeDebounced!(this._pendingChanges.fs);\n        }\n    }\n\n    get starred() {\n        const starred = Container.context.workspaceState.get<StarredRepositories>(WorkspaceState.StarredRepositories);\n        return starred !== undefined && starred[this.id] === true;\n    }\n\n    star() {\n        return this.updateStarred(true);\n    }\n\n    unstar() {\n        return this.updateStarred(false);\n    }\n\n    private async updateStarred(star: boolean) {\n        let starred = Container.context.workspaceState.get<StarredRepositories>(WorkspaceState.StarredRepositories);\n        if (starred === undefined) {\n            starred = Object.create(null);\n        }\n\n        if (star) {\n            starred![this.id] = true;\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const { [this.id]: _, ...rest } = starred!;\n            starred = rest;\n        }\n        await Container.context.workspaceState.update(WorkspaceState.StarredRepositories, starred);\n    }\n\n    startWatchingFileSystem() {\n        this._fsWatchCounter++;\n        if (this._fsWatcherDisposable !== undefined) return;\n\n        // TODO: createFileSystemWatcher doesn't work unless the folder is part of the workspaceFolders\n        // https://github.com/Microsoft/vscode/issues/3025\n        const watcher = workspace.createFileSystemWatcher(new RelativePattern(this.folder, '**'));\n        this._fsWatcherDisposable = Disposable.from(\n            watcher,\n            watcher.onDidChange(this.onFileSystemChanged, this),\n            watcher.onDidCreate(this.onFileSystemChanged, this),\n            watcher.onDidDelete(this.onFileSystemChanged, this)\n        );\n    }\n\n    stopWatchingFileSystem() {\n        if (this._fsWatcherDisposable === undefined) return;\n        if (--this._fsWatchCounter > 0) return;\n\n        this._fsWatcherDisposable.dispose();\n        this._fsWatcherDisposable = undefined;\n    }\n\n    suspend() {\n        this._suspended = true;\n    }\n\n    private fireChange(...reasons: RepositoryChange[]) {\n        if (this._fireChangeDebounced === undefined) {\n            this._fireChangeDebounced = Functions.debounce(this.fireChangeCore, 250);\n        }\n\n        if (this._pendingChanges.repo === undefined) {\n            this._pendingChanges.repo = new RepositoryChangeEvent(this);\n        }\n\n        const e = this._pendingChanges.repo;\n\n        for (const reason of reasons) {\n            if (!e.changes.includes(reason)) {\n                e.changes.push(reason);\n            }\n        }\n\n        if (this._suspended) return;\n\n        this._fireChangeDebounced(e);\n    }\n\n    private fireChangeCore(e: RepositoryChangeEvent) {\n        this._pendingChanges.repo = undefined;\n\n        this._onDidChange.fire(e);\n    }\n\n    private fireFileSystemChange(uri: Uri) {\n        if (this._fireFileSystemChangeDebounced === undefined) {\n            this._fireFileSystemChangeDebounced = Functions.debounce(this.fireFileSystemChangeCore, 2500);\n        }\n\n        if (this._pendingChanges.fs === undefined) {\n            this._pendingChanges.fs = { repository: this, uris: [] };\n        }\n\n        const e = this._pendingChanges.fs;\n        e.uris.push(uri);\n\n        if (this._suspended) return;\n\n        this._fireFileSystemChangeDebounced(e);\n    }\n\n    private fireFileSystemChangeCore(e: RepositoryFileSystemChangeEvent) {\n        this._pendingChanges.fs = undefined;\n\n        this._onDidChangeFileSystem.fire(e);\n    }\n}\n","'use strict';\nimport { GitCommitType } from './commit';\nimport { GitFile } from './file';\nimport { GitLogCommit } from './logCommit';\n\nexport class GitStashCommit extends GitLogCommit {\n    static is(commit: any): commit is GitStashCommit {\n        return (\n            commit instanceof GitStashCommit\n            // || (commit.repoPath !== undefined &&\n            //     commit.sha !== undefined &&\n            //     (commit.type === GitCommitType.Stash || commit.type === GitCommitType.StashFile))\n        );\n    }\n\n    constructor(\n        type: GitCommitType,\n        public readonly stashName: string,\n        repoPath: string,\n        sha: string,\n        authorDate: Date,\n        committedDate: Date,\n        message: string,\n        fileName: string,\n        files: GitFile[]\n    ) {\n        super(type, repoPath, sha, 'You', undefined, authorDate, committedDate, message, fileName, files);\n    }\n\n    get shortSha() {\n        return this.stashName;\n    }\n\n    with(changes: {\n        type?: GitCommitType;\n        sha?: string | null;\n        fileName?: string;\n        authorDate?: Date;\n        committedDate?: Date;\n        message?: string;\n        files?: GitFile[] | null;\n    }): GitLogCommit {\n        return new GitStashCommit(\n            changes.type || this.type,\n            this.stashName,\n            this.repoPath,\n            this.getChangedValue(changes.sha, this.sha)!,\n            changes.authorDate || this.authorDate,\n            changes.committedDate || this.committerDate,\n            changes.message || this.message,\n            changes.fileName || this.fileName,\n            this.getChangedValue(changes.files, this.files) || []\n        );\n    }\n}\n","'use strict';\nimport { memoize } from '../../system';\n\nexport class GitTag {\n    static is(tag: any): tag is GitTag {\n        return tag instanceof GitTag;\n    }\n\n    static sort(tags: GitTag[]) {\n        return tags.sort((a, b) => a.name.localeCompare(b.name, undefined, { numeric: true, sensitivity: 'base' }));\n    }\n\n    constructor(\n        public readonly repoPath: string,\n        public readonly name: string,\n        public readonly sha?: string,\n        public readonly annotation?: string\n    ) {}\n\n    get ref() {\n        return this.name;\n    }\n\n    @memoize()\n    getBasename(): string {\n        const index = this.name.lastIndexOf('/');\n        return index !== -1 ? this.name.substring(index + 1) : this.name;\n    }\n}\n","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.dayjs_plugin_advancedFormat=t()}(this,function(){\"use strict\";return function(e,t,r){var n=t.prototype,o=n.format;r.en.ordinal=function(e){var t=[\"th\",\"st\",\"nd\",\"rd\"],r=e%100;return\"[\"+e+(t[(r-20)%10]||t[r]||t[0])+\"]\"},n.format=function(e){var t=this,r=this.$locale(),n=this.$utils(),i=(e||\"YYYY-MM-DDTHH:mm:ssZ\").replace(/\\[([^\\]]+)]|Q|wo|gggg|Do|X|x|k{1,2}|S/g,function(e){switch(e){case\"Q\":return Math.ceil((t.$M+1)/3);case\"Do\":return r.ordinal(t.$D);case\"gggg\":return t.weekYear();case\"wo\":return r.ordinal(t.week(),\"W\");case\"k\":case\"kk\":return n.s(String(0===t.$H?24:t.$H),\"k\"===e?1:2,\"0\");case\"X\":return Math.floor(t.$d.getTime()/1e3);case\"x\":return t.$d.getTime();default:return e}});return o.bind(this)(i)}}});\n","!function(e,r){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=r():\"function\"==typeof define&&define.amd?define(r):e.dayjs_plugin_relativeTime=r()}(this,function(){\"use strict\";return function(e,r,t){var n=r.prototype;t.en.relativeTime={future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"};var o=function(e,r,n,o){for(var d,i,a=n.$locale().relativeTime,u=[{l:\"s\",r:44,d:\"second\"},{l:\"m\",r:89},{l:\"mm\",r:44,d:\"minute\"},{l:\"h\",r:89},{l:\"hh\",r:21,d:\"hour\"},{l:\"d\",r:35},{l:\"dd\",r:25,d:\"day\"},{l:\"M\",r:45},{l:\"MM\",r:10,d:\"month\"},{l:\"y\",r:17},{l:\"yy\",d:\"year\"}],f=u.length,s=0;s<f;s+=1){var l=u[s];l.d&&(d=o?t(e).diff(n,l.d,!0):n.diff(e,l.d,!0));var m=Math.round(Math.abs(d));if(m<=l.r||!l.r){1===m&&s>0&&(l=u[s-1]),i=a[l.l].replace(\"%d\",m);break}}return r?i:(d>0?a.future:a.past).replace(\"%s\",i)};n.to=function(e,r){return o(e,r,this,!0)},n.from=function(e,r){return o(e,r,this)},n.toNow=function(e){return this.to(t(),e)},n.fromNow=function(e){return this.from(t(),e)}}});\n","'use strict';\nimport * as paths from 'path';\nimport { findExecutable, run } from './shell';\n\nexport interface GitLocation {\n    path: string;\n    version: string;\n}\n\nfunction parseVersion(raw: string): string {\n    return raw.replace(/^git version /, '');\n}\n\nasync function findSpecificGit(path: string): Promise<GitLocation> {\n    let version = await run<string>(path, ['--version'], 'utf8');\n    // If needed, let's update our path to avoid the search on every command\n    if (!path || path === 'git') {\n        const foundPath = findExecutable(path, ['--version']).cmd;\n\n        // Ensure that the path we found works\n        version = await run<string>(foundPath, ['--version'], 'utf8');\n        path = foundPath;\n    }\n\n    return {\n        path: path,\n        version: parseVersion(version.trim())\n    };\n}\n\nasync function findGitDarwin(): Promise<GitLocation> {\n    try {\n        let path = await run<string>('which', ['git'], 'utf8');\n        path = path.replace(/^\\s+|\\s+$/g, '');\n\n        if (path !== '/usr/bin/git') {\n            return findSpecificGit(path);\n        }\n\n        try {\n            await run<string>('xcode-select', ['-p'], 'utf8');\n            return findSpecificGit(path);\n        }\n        catch (ex) {\n            if (ex.code === 2) {\n                return Promise.reject(new Error('Unable to find git'));\n            }\n            return findSpecificGit(path);\n        }\n    }\n    catch (ex) {\n        return Promise.reject(new Error('Unable to find git'));\n    }\n}\n\nfunction findSystemGitWin32(basePath: string | null | undefined): Promise<GitLocation> {\n    if (basePath == null || basePath.length === 0) return Promise.reject(new Error('Unable to find git'));\n    return findSpecificGit(paths.join(basePath, 'Git', 'cmd', 'git.exe'));\n}\n\nfunction findGitWin32(): Promise<GitLocation> {\n    return findSystemGitWin32(process.env['ProgramW6432'])\n        .then(null, () => findSystemGitWin32(process.env['ProgramFiles(x86)']))\n        .then(null, () => findSystemGitWin32(process.env['ProgramFiles']))\n        .then(null, () => findSpecificGit('git'));\n}\n\nexport async function findGitPath(path?: string): Promise<GitLocation> {\n    try {\n        return await findSpecificGit(path || 'git');\n    }\n    catch (ex) {\n        try {\n            switch (process.platform) {\n                case 'darwin':\n                    return await findGitDarwin();\n                case 'win32':\n                    return await findGitWin32();\n                default:\n                    return Promise.reject('Unable to find git');\n            }\n        }\n        catch (ex) {\n            return Promise.reject(new Error('Unable to find git'));\n        }\n    }\n}\n","module.exports = require(\"child_process\");","'use strict';\nimport { commands, ExtensionContext, extensions, window, workspace } from 'vscode';\nimport { Commands, registerCommands } from './commands';\nimport { ViewShowBranchComparison } from './config';\nimport { Config, configuration, Configuration } from './configuration';\nimport { CommandContext, extensionQualifiedId, GlobalState, GlyphChars, setCommandContext } from './constants';\nimport { Container } from './container';\nimport { GitCommit, GitService, GitUri } from './git/gitService';\nimport { Logger, TraceLevel } from './logger';\nimport { Messages } from './messages';\nimport { Strings, Versions } from './system';\n// import { Telemetry } from './telemetry';\n\nexport async function activate(context: ExtensionContext) {\n    const start = process.hrtime();\n\n    // Pretend we are enabled (until we know otherwise) and set the view contexts to reduce flashing on load\n    setCommandContext(CommandContext.Enabled, true);\n\n    Logger.configure(context, configuration.get<TraceLevel>(configuration.name('outputLevel').value), o => {\n        if (GitUri.is(o)) {\n            return `GitUri(${o.toString(true)}${o.repoPath ? ` repoPath=${o.repoPath}` : ''}${\n                o.sha ? ` sha=${o.sha}` : ''\n            })`;\n        }\n\n        if (GitCommit.is(o)) {\n            return `GitCommit(${o.sha ? ` sha=${o.sha}` : ''}${o.repoPath ? ` repoPath=${o.repoPath}` : ''})`;\n        }\n\n        return undefined;\n    });\n\n    const gitlens = extensions.getExtension(extensionQualifiedId)!;\n    const gitlensVersion = gitlens.packageJSON.version;\n\n    const enabled = workspace.getConfiguration('git', null!).get<boolean>('enabled', true);\n    if (!enabled) {\n        Logger.log(`GitLens (v${gitlensVersion}) was NOT activated -- \"git.enabled\": false`);\n        setCommandContext(CommandContext.Enabled, false);\n\n        void Messages.showGitDisabledErrorMessage();\n\n        return;\n    }\n\n    Configuration.configure(context);\n\n    const cfg = configuration.get<Config>();\n\n    const previousVersion = context.globalState.get<string>(GlobalState.GitLensVersion);\n    await migrateSettings(context, previousVersion);\n\n    try {\n        await GitService.initialize();\n    }\n    catch (ex) {\n        Logger.error(ex, `GitLens (v${gitlensVersion}) activate`);\n        setCommandContext(CommandContext.Enabled, false);\n\n        if (ex.message.includes('Unable to find git')) {\n            await window.showErrorMessage(\n                \"GitLens was unable to find Git. Please make sure Git is installed. Also ensure that Git is either in the PATH, or that 'git.path' is pointed to its installed location.\"\n            );\n        }\n\n        return;\n    }\n\n    Container.initialize(context, cfg);\n\n    registerCommands(context);\n\n    const gitVersion = GitService.getGitVersion();\n\n    // Telemetry.configure(ApplicationInsightsKey);\n\n    // const telemetryContext: { [id: string]: any } = Object.create(null);\n    // telemetryContext.version = gitlensVersion;\n    // telemetryContext['git.version'] = gitVersion;\n    // Telemetry.setContext(telemetryContext);\n\n    notifyOnUnsupportedGitVersion(gitVersion);\n    void showWelcomePage(gitlensVersion, previousVersion);\n\n    context.globalState.update(GlobalState.GitLensVersion, gitlensVersion);\n\n    // Constantly over my data cap so stop collecting initialized event\n    // Telemetry.trackEvent('initialized', Objects.flatten(cfg, 'config', true));\n\n    Logger.log(\n        `GitLens (v${gitlensVersion}${cfg.mode.active ? `, mode: ${cfg.mode.active}` : ''}) activated ${\n            GlyphChars.Dot\n        } ${Strings.getDurationMilliseconds(start)} ms`\n    );\n}\n\nexport function deactivate() {\n    // nothing to do\n}\n\nasync function migrateSettings(context: ExtensionContext, previousVersion: string | undefined) {\n    if (previousVersion === undefined) return;\n\n    const previous = Versions.fromString(previousVersion);\n\n    try {\n        if (Versions.compare(previous, Versions.from(9, 8, 5)) !== 1) {\n            const name = configuration.name('views')('commitFormat').value;\n            const value = configuration.get<string>(name);\n            if (!/\\btips\\b/.test(value)) {\n                await configuration.updateEffective(name, `\\${ tips   }${value}`);\n            }\n        }\n        else if (Versions.compare(previous, Versions.from(9, 8, 2)) !== 1) {\n            const name = configuration.name('views')('repositories')('showBranchComparison').value;\n            await configuration.migrate(name, name, {\n                migrationFn: (v: boolean) => (v === false ? false : ViewShowBranchComparison.Working)\n            });\n        }\n        else if (Versions.compare(previous, Versions.from(9, 6, 3)) !== 1) {\n            const formatMigrationFn = (v: string) => {\n                if (v == null || v.length === 0) return v;\n\n                return (\n                    v\n                        // eslint-disable-next-line no-template-curly-in-string\n                        .replace(/\\$\\{authorAgo\\}/g, '${author}, ${ago}')\n                        // eslint-disable-next-line no-template-curly-in-string\n                        .replace(/\\$\\{authorAgoOrDate\\}/g, '${author}, ${agoOrDate}')\n                );\n            };\n\n            await Promise.all(\n                [\n                    configuration.name('blame')('format').value,\n                    configuration.name('currentLine')('format').value,\n                    configuration.name('hovers')('detailsMarkdownFormat').value,\n                    configuration.name('statusBar')('format').value,\n                    configuration.name('views')('commitFormat').value,\n                    configuration.name('views')('commitDescriptionFormat').value,\n                    configuration.name('views')('stashFormat').value,\n                    configuration.name('views')('stashDescriptionFormat').value\n                ].map(s =>\n                    configuration.migrate<string, string>(s, s, {\n                        migrationFn: formatMigrationFn\n                    })\n                )\n            );\n        }\n    }\n    catch (ex) {\n        Logger.error(ex, 'migrateSettings');\n    }\n}\n\nfunction notifyOnUnsupportedGitVersion(version: string) {\n    if (GitService.compareGitVersion('2.2.0') !== -1) return;\n\n    // If git is less than v2.2.0\n    void Messages.showGitVersionUnsupportedErrorMessage(version);\n}\n\nasync function showWelcomePage(version: string, previousVersion: string | undefined) {\n    try {\n        if (previousVersion === undefined) {\n            Logger.log('GitLens first-time install');\n\n            if (Container.config.showWhatsNewAfterUpgrades) {\n                await commands.executeCommand(Commands.ShowWelcomePage);\n            }\n\n            return;\n        }\n\n        if (previousVersion !== version) {\n            Logger.log(`GitLens upgraded from v${previousVersion} to v${version}`);\n        }\n\n        const [major, minor] = version.split('.');\n        const [prevMajor, prevMinor] = previousVersion.split('.');\n        if (\n            (major === prevMajor && minor === prevMinor) ||\n            // Don't notify on downgrades\n            (major < prevMajor || (major === prevMajor && minor < prevMinor))\n        ) {\n            return;\n        }\n\n        if (Container.config.showWhatsNewAfterUpgrades && major !== prevMajor) {\n            await commands.executeCommand(Commands.ShowWelcomePage);\n        }\n        else {\n            await Messages.showWhatsNewMessage(version);\n        }\n    }\n    finally {\n        void (await Messages.showSetupViewLayoutMessage(previousVersion));\n    }\n}\n","\"use strict\";\n\nvar BOMChar = '\\uFEFF';\n\nexports.PrependBOM = PrependBOMWrapper\nfunction PrependBOMWrapper(encoder, options) {\n    this.encoder = encoder;\n    this.addBOM = true;\n}\n\nPrependBOMWrapper.prototype.write = function(str) {\n    if (this.addBOM) {\n        str = BOMChar + str;\n        this.addBOM = false;\n    }\n\n    return this.encoder.write(str);\n}\n\nPrependBOMWrapper.prototype.end = function() {\n    return this.encoder.end();\n}\n\n\n//------------------------------------------------------------------------------\n\nexports.StripBOM = StripBOMWrapper;\nfunction StripBOMWrapper(decoder, options) {\n    this.decoder = decoder;\n    this.pass = false;\n    this.options = options || {};\n}\n\nStripBOMWrapper.prototype.write = function(buf) {\n    var res = this.decoder.write(buf);\n    if (this.pass || !res)\n        return res;\n\n    if (res[0] === BOMChar) {\n        res = res.slice(1);\n        if (typeof this.options.stripBOM === 'function')\n            this.options.stripBOM();\n    }\n\n    this.pass = true;\n    return res;\n}\n\nStripBOMWrapper.prototype.end = function() {\n    return this.decoder.end();\n}\n\n","\"use strict\";\n\n// Update this array if you add/rename/remove files in this directory.\n// We support Browserify by skipping automatic module discovery and requiring modules directly.\nvar modules = [\n    require(\"./internal\"),\n    require(\"./utf32\"),\n    require(\"./utf16\"),\n    require(\"./utf7\"),\n    require(\"./sbcs-codec\"),\n    require(\"./sbcs-data\"),\n    require(\"./sbcs-data-generated\"),\n    require(\"./dbcs-codec\"),\n    require(\"./dbcs-data\"),\n];\n\n// Put all encoding/alias/codec definitions to single object and export it.\nfor (var i = 0; i < modules.length; i++) {\n    var module = modules[i];\n    for (var enc in module)\n        if (Object.prototype.hasOwnProperty.call(module, enc))\n            exports[enc] = module[enc];\n}\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Export Node.js internal encodings.\n\nmodule.exports = {\n    // Encodings\n    utf8:   { type: \"_internal\", bomAware: true},\n    cesu8:  { type: \"_internal\", bomAware: true},\n    unicode11utf8: \"utf8\",\n\n    ucs2:   { type: \"_internal\", bomAware: true},\n    utf16le: \"ucs2\",\n\n    binary: { type: \"_internal\" },\n    base64: { type: \"_internal\" },\n    hex:    { type: \"_internal\" },\n\n    // Codec.\n    _internal: InternalCodec,\n};\n\n//------------------------------------------------------------------------------\n\nfunction InternalCodec(codecOptions, iconv) {\n    this.enc = codecOptions.encodingName;\n    this.bomAware = codecOptions.bomAware;\n\n    if (this.enc === \"base64\")\n        this.encoder = InternalEncoderBase64;\n    else if (this.enc === \"cesu8\") {\n        this.enc = \"utf8\"; // Use utf8 for decoding.\n        this.encoder = InternalEncoderCesu8;\n\n        // Add decoder for versions of Node not supporting CESU-8\n        if (Buffer.from('eda0bdedb2a9', 'hex').toString() !== '') {\n            this.decoder = InternalDecoderCesu8;\n            this.defaultCharUnicode = iconv.defaultCharUnicode;\n        }\n    }\n}\n\nInternalCodec.prototype.encoder = InternalEncoder;\nInternalCodec.prototype.decoder = InternalDecoder;\n\n//------------------------------------------------------------------------------\n\n// We use node.js internal decoder. Its signature is the same as ours.\nvar StringDecoder = require('string_decoder').StringDecoder;\n\nif (!StringDecoder.prototype.end) // Node v0.8 doesn't have this method.\n    StringDecoder.prototype.end = function() {};\n\n\nfunction InternalDecoder(options, codec) {\n    StringDecoder.call(this, codec.enc);\n}\n\nInternalDecoder.prototype = StringDecoder.prototype;\n\n\n//------------------------------------------------------------------------------\n// Encoder is mostly trivial\n\nfunction InternalEncoder(options, codec) {\n    this.enc = codec.enc;\n}\n\nInternalEncoder.prototype.write = function(str) {\n    return Buffer.from(str, this.enc);\n}\n\nInternalEncoder.prototype.end = function() {\n}\n\n\n//------------------------------------------------------------------------------\n// Except base64 encoder, which must keep its state.\n\nfunction InternalEncoderBase64(options, codec) {\n    this.prevStr = '';\n}\n\nInternalEncoderBase64.prototype.write = function(str) {\n    str = this.prevStr + str;\n    var completeQuads = str.length - (str.length % 4);\n    this.prevStr = str.slice(completeQuads);\n    str = str.slice(0, completeQuads);\n\n    return Buffer.from(str, \"base64\");\n}\n\nInternalEncoderBase64.prototype.end = function() {\n    return Buffer.from(this.prevStr, \"base64\");\n}\n\n\n//------------------------------------------------------------------------------\n// CESU-8 encoder is also special.\n\nfunction InternalEncoderCesu8(options, codec) {\n}\n\nInternalEncoderCesu8.prototype.write = function(str) {\n    var buf = Buffer.alloc(str.length * 3), bufIdx = 0;\n    for (var i = 0; i < str.length; i++) {\n        var charCode = str.charCodeAt(i);\n        // Naive implementation, but it works because CESU-8 is especially easy\n        // to convert from UTF-16 (which all JS strings are encoded in).\n        if (charCode < 0x80)\n            buf[bufIdx++] = charCode;\n        else if (charCode < 0x800) {\n            buf[bufIdx++] = 0xC0 + (charCode >>> 6);\n            buf[bufIdx++] = 0x80 + (charCode & 0x3f);\n        }\n        else { // charCode will always be < 0x10000 in javascript.\n            buf[bufIdx++] = 0xE0 + (charCode >>> 12);\n            buf[bufIdx++] = 0x80 + ((charCode >>> 6) & 0x3f);\n            buf[bufIdx++] = 0x80 + (charCode & 0x3f);\n        }\n    }\n    return buf.slice(0, bufIdx);\n}\n\nInternalEncoderCesu8.prototype.end = function() {\n}\n\n//------------------------------------------------------------------------------\n// CESU-8 decoder is not implemented in Node v4.0+\n\nfunction InternalDecoderCesu8(options, codec) {\n    this.acc = 0;\n    this.contBytes = 0;\n    this.accBytes = 0;\n    this.defaultCharUnicode = codec.defaultCharUnicode;\n}\n\nInternalDecoderCesu8.prototype.write = function(buf) {\n    var acc = this.acc, contBytes = this.contBytes, accBytes = this.accBytes, \n        res = '';\n    for (var i = 0; i < buf.length; i++) {\n        var curByte = buf[i];\n        if ((curByte & 0xC0) !== 0x80) { // Leading byte\n            if (contBytes > 0) { // Previous code is invalid\n                res += this.defaultCharUnicode;\n                contBytes = 0;\n            }\n\n            if (curByte < 0x80) { // Single-byte code\n                res += String.fromCharCode(curByte);\n            } else if (curByte < 0xE0) { // Two-byte code\n                acc = curByte & 0x1F;\n                contBytes = 1; accBytes = 1;\n            } else if (curByte < 0xF0) { // Three-byte code\n                acc = curByte & 0x0F;\n                contBytes = 2; accBytes = 1;\n            } else { // Four or more are not supported for CESU-8.\n                res += this.defaultCharUnicode;\n            }\n        } else { // Continuation byte\n            if (contBytes > 0) { // We're waiting for it.\n                acc = (acc << 6) | (curByte & 0x3f);\n                contBytes--; accBytes++;\n                if (contBytes === 0) {\n                    // Check for overlong encoding, but support Modified UTF-8 (encoding NULL as C0 80)\n                    if (accBytes === 2 && acc < 0x80 && acc > 0)\n                        res += this.defaultCharUnicode;\n                    else if (accBytes === 3 && acc < 0x800)\n                        res += this.defaultCharUnicode;\n                    else\n                        // Actually add character.\n                        res += String.fromCharCode(acc);\n                }\n            } else { // Unexpected continuation byte\n                res += this.defaultCharUnicode;\n            }\n        }\n    }\n    this.acc = acc; this.contBytes = contBytes; this.accBytes = accBytes;\n    return res;\n}\n\nInternalDecoderCesu8.prototype.end = function() {\n    var res = 0;\n    if (this.contBytes > 0)\n        res += this.defaultCharUnicode;\n    return res;\n}\n","module.exports = require(\"string_decoder\");","'use strict';\n\nvar Buffer = require('safer-buffer').Buffer;\n\n// == UTF32-LE/BE codec. ==========================================================\n\nexports._utf32 = Utf32Codec;\n\nfunction Utf32Codec(codecOptions, iconv) {\n    this.iconv = iconv;\n    this.bomAware = true;\n    this.isLE = codecOptions.isLE;\n}\n\nexports.utf32le = { type: '_utf32', isLE: true };\nexports.utf32be = { type: '_utf32', isLE: false };\n\n// Aliases\nexports.ucs4le = 'utf32le';\nexports.ucs4be = 'utf32be';\n\nUtf32Codec.prototype.encoder = Utf32Encoder;\nUtf32Codec.prototype.decoder = Utf32Decoder;\n\n// -- Encoding\n\nfunction Utf32Encoder(options, codec) {\n    this.isLE = codec.isLE;\n    this.highSurrogate = 0;\n}\n\nUtf32Encoder.prototype.write = function(str) {\n    var src = Buffer.from(str, 'ucs2');\n    var dst = Buffer.alloc(src.length * 2);\n    var write32 = this.isLE ? dst.writeUInt32LE : dst.writeUInt32BE;\n    var offset = 0;\n\n    for (var i = 0; i < src.length; i += 2) {\n        var code = src.readUInt16LE(i);\n        var isHighSurrogate = (0xD800 <= code && code < 0xDC00);\n        var isLowSurrogate = (0xDC00 <= code && code < 0xE000);\n\n        if (this.highSurrogate) {\n            if (isHighSurrogate || !isLowSurrogate) {\n                // There shouldn't be two high surrogates in a row, nor a high surrogate which isn't followed by a low\n                // surrogate. If this happens, keep the pending high surrogate as a stand-alone semi-invalid character\n                // (technically wrong, but expected by some applications, like Windows file names).\n                write32.call(dst, this.highSurrogate, offset);\n                offset += 4;\n            }\n            else {\n                // Create 32-bit value from high and low surrogates;\n                var codepoint = (((this.highSurrogate - 0xD800) << 10) | (code - 0xDC00)) + 0x10000;\n\n                write32.call(dst, codepoint, offset);\n                offset += 4;\n                this.highSurrogate = 0;\n\n                continue;\n            }\n        }\n\n        if (isHighSurrogate)\n            this.highSurrogate = code;\n        else {\n            // Even if the current character is a low surrogate, with no previous high surrogate, we'll\n            // encode it as a semi-invalid stand-alone character for the same reasons expressed above for\n            // unpaired high surrogates.\n            write32.call(dst, code, offset);\n            offset += 4;\n            this.highSurrogate = 0;\n        }\n    }\n\n    if (offset < dst.length)\n        dst = dst.slice(0, offset);\n\n    return dst;\n};\n\nUtf32Encoder.prototype.end = function() {\n    // Treat any leftover high surrogate as a semi-valid independent character.\n    if (!this.highSurrogate)\n        return;\n\n    var buf = Buffer.alloc(4);\n\n    if (this.isLE)\n        buf.writeUInt32LE(this.highSurrogate, 0);\n    else\n        buf.writeUInt32BE(this.highSurrogate, 0);\n\n    this.highSurrogate = 0;\n\n    return buf;\n};\n\n// -- Decoding\n\nfunction Utf32Decoder(options, codec) {\n    this.isLE = codec.isLE;\n    this.badChar = codec.iconv.defaultCharUnicode.charCodeAt(0);\n    this.overflow = null;\n}\n\nUtf32Decoder.prototype.write = function(src) {\n    if (src.length === 0)\n        return '';\n\n    if (this.overflow)\n        src = Buffer.concat([this.overflow, src]);\n\n    var goodLength = src.length - src.length % 4;\n\n    if (src.length !== goodLength) {\n        this.overflow = src.slice(goodLength);\n        src = src.slice(0, goodLength);\n    }\n    else\n        this.overflow = null;\n\n    var dst = Buffer.alloc(goodLength);\n    var offset = 0;\n\n    for (var i = 0; i < goodLength; i += 4) {\n        var codepoint = this.isLE ? src.readUInt32LE(i) : src.readUInt32BE(i);\n\n        if (codepoint < 0x10000) {\n            // Simple 16-bit character\n            dst.writeUInt16LE(codepoint, offset);\n            offset += 2;\n        }\n        else {\n            if (codepoint > 0x10FFFF) {\n                // Not a valid Unicode codepoint\n                dst.writeUInt16LE(this.badChar, offset);\n                offset += 2;\n            }\n            else {\n                // Create high and low surrogates.\n                codepoint -= 0x10000;\n                var high = 0xD800 | (codepoint >> 10);\n                var low = 0xDC00 + (codepoint & 0x3FF);\n                dst.writeUInt16LE(high, offset);\n                offset += 2;\n                dst.writeUInt16LE(low, offset);\n                offset += 2;\n            }\n        }\n    }\n\n    return dst.slice(0, offset).toString('ucs2');\n};\n\nUtf32Decoder.prototype.end = function() {\n    this.overflow = null;\n};\n\n// == UTF-32 Auto codec =============================================================\n// Decoder chooses automatically from UTF-32LE and UTF-32BE using BOM and space-based heuristic.\n// Defaults to UTF-32LE. http://en.wikipedia.org/wiki/UTF-32\n// Encoder/decoder default can be changed: iconv.decode(buf, 'utf32', {defaultEncoding: 'utf-32be'});\n\n// Encoder prepends BOM (which can be overridden with (addBOM: false}).\n\nexports.utf32 = Utf32AutoCodec;\nexports.ucs4 = Utf32AutoCodec;\n\nfunction Utf32AutoCodec(options, iconv) {\n    this.iconv = iconv;\n}\n\nUtf32AutoCodec.prototype.encoder = Utf32AutoEncoder;\nUtf32AutoCodec.prototype.decoder = Utf32AutoDecoder;\n\n// -- Encoding\n\nfunction Utf32AutoEncoder(options, codec) {\n    options = options || {};\n\n    if (options.addBOM === undefined)\n        options.addBOM = true;\n\n    this.encoder = codec.iconv.getEncoder(options.defaultEncoding || 'utf-32le', options);\n}\n\nUtf32AutoEncoder.prototype.write = function(str) {\n    return this.encoder.write(str);\n};\n\nUtf32AutoEncoder.prototype.end = function() {\n    return this.encoder.end();\n};\n\n// -- Decoding\n\nfunction Utf32AutoDecoder(options, codec) {\n    this.decoder = null;\n    this.initialBytes = [];\n    this.initialBytesLen = 0;\n    this.options = options || {};\n    this.iconv = codec.iconv;\n}\n\nUtf32AutoDecoder.prototype.write = function(buf) {\n    if (!this.decoder) {\n        // Codec is not chosen yet. Accumulate initial bytes.\n        this.initialBytes.push(buf);\n        this.initialBytesLen += buf.length;\n\n        if (this.initialBytesLen < 32) // We need more bytes to use space heuristic (see below)\n            return '';\n\n        // We have enough bytes -> detect endianness.\n        var buf2 = Buffer.concat(this.initialBytes),\n            encoding = detectEncoding(buf2, this.options.defaultEncoding);\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\n        this.initialBytes.length = this.initialBytesLen = 0;\n    }\n\n    return this.decoder.write(buf);\n};\n\nUtf32AutoDecoder.prototype.end = function() {\n    if (!this.decoder) {\n        var buf = Buffer.concat(this.initialBytes),\n            encoding = detectEncoding(buf, this.options.defaultEncoding);\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\n\n        var res = this.decoder.write(buf),\n            trail = this.decoder.end();\n\n        return trail ? (res + trail) : res;\n    }\n\n    return this.decoder.end();\n};\n\nfunction detectEncoding(buf, defaultEncoding) {\n    var enc = defaultEncoding || 'utf-32le';\n\n    if (buf.length >= 4) {\n        // Check BOM.\n        if (buf.readUInt32BE(0) === 0xFEFF) // UTF-32LE BOM\n            enc = 'utf-32be';\n        else if (buf.readUInt32LE(0) === 0xFEFF) // UTF-32LE BOM\n            enc = 'utf-32le';\n        else {\n            // No BOM found. Try to deduce encoding from initial content.\n            // Using the wrong endian-ism for UTF-32 will very often result in codepoints that are beyond\n            // the valid Unicode limit of 0x10FFFF. That will be used as the primary determinant.\n            //\n            // Further, we can suppose the content is mostly plain ASCII chars (U+00**).\n            // So, we count ASCII as if it was LE or BE, and decide from that.\n            var invalidLE = 0, invalidBE = 0;\n            var asciiCharsLE = 0, asciiCharsBE = 0, // Counts of chars in both positions\n                _len = Math.min(buf.length - (buf.length % 4), 128); // Len is always even.\n\n            for (var i = 0; i < _len; i += 4) {\n                var b0 = buf[i], b1  = buf[i + 1], b2 = buf[i + 2], b3 = buf[i + 3];\n\n                if (b0 !== 0 || b1 > 0x10) ++invalidBE;\n                if (b3 !== 0 || b2 > 0x10) ++invalidLE;\n\n                if (b0 === 0 && b1 === 0 && b2 === 0 && b3 !== 0) asciiCharsBE++;\n                if (b0 !== 0 && b1 === 0 && b2 === 0 && b3 === 0) asciiCharsLE++;\n            }\n\n            if (invalidBE < invalidLE)\n                enc = 'utf-32be';\n            else if (invalidLE < invalidBE)\n                enc = 'utf-32le';\n            if (asciiCharsBE > asciiCharsLE)\n                enc = 'utf-32be';\n            else if (asciiCharsBE < asciiCharsLE)\n                enc = 'utf-32le';\n        }\n    }\n\n    return enc;\n}\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Note: UTF16-LE (or UCS2) codec is Node.js native. See encodings/internal.js\n\n// == UTF16-BE codec. ==========================================================\n\nexports.utf16be = Utf16BECodec;\nfunction Utf16BECodec() {\n}\n\nUtf16BECodec.prototype.encoder = Utf16BEEncoder;\nUtf16BECodec.prototype.decoder = Utf16BEDecoder;\nUtf16BECodec.prototype.bomAware = true;\n\n\n// -- Encoding\n\nfunction Utf16BEEncoder() {\n}\n\nUtf16BEEncoder.prototype.write = function(str) {\n    var buf = Buffer.from(str, 'ucs2');\n    for (var i = 0; i < buf.length; i += 2) {\n        var tmp = buf[i]; buf[i] = buf[i+1]; buf[i+1] = tmp;\n    }\n    return buf;\n}\n\nUtf16BEEncoder.prototype.end = function() {\n}\n\n\n// -- Decoding\n\nfunction Utf16BEDecoder() {\n    this.overflowByte = -1;\n}\n\nUtf16BEDecoder.prototype.write = function(buf) {\n    if (buf.length == 0)\n        return '';\n\n    var buf2 = Buffer.alloc(buf.length + 1),\n        i = 0, j = 0;\n\n    if (this.overflowByte !== -1) {\n        buf2[0] = buf[0];\n        buf2[1] = this.overflowByte;\n        i = 1; j = 2;\n    }\n\n    for (; i < buf.length-1; i += 2, j+= 2) {\n        buf2[j] = buf[i+1];\n        buf2[j+1] = buf[i];\n    }\n\n    this.overflowByte = (i == buf.length-1) ? buf[buf.length-1] : -1;\n\n    return buf2.slice(0, j).toString('ucs2');\n}\n\nUtf16BEDecoder.prototype.end = function() {\n}\n\n\n// == UTF-16 codec =============================================================\n// Decoder chooses automatically from UTF-16LE and UTF-16BE using BOM and space-based heuristic.\n// Defaults to UTF-16LE, as it's prevalent and default in Node.\n// http://en.wikipedia.org/wiki/UTF-16 and http://encoding.spec.whatwg.org/#utf-16le\n// Decoder default can be changed: iconv.decode(buf, 'utf16', {defaultEncoding: 'utf-16be'});\n\n// Encoder uses UTF-16LE and prepends BOM (which can be overridden with addBOM: false).\n\nexports.utf16 = Utf16Codec;\nfunction Utf16Codec(codecOptions, iconv) {\n    this.iconv = iconv;\n}\n\nUtf16Codec.prototype.encoder = Utf16Encoder;\nUtf16Codec.prototype.decoder = Utf16Decoder;\n\n\n// -- Encoding (pass-through)\n\nfunction Utf16Encoder(options, codec) {\n    options = options || {};\n    if (options.addBOM === undefined)\n        options.addBOM = true;\n    this.encoder = codec.iconv.getEncoder('utf-16le', options);\n}\n\nUtf16Encoder.prototype.write = function(str) {\n    return this.encoder.write(str);\n}\n\nUtf16Encoder.prototype.end = function() {\n    return this.encoder.end();\n}\n\n\n// -- Decoding\n\nfunction Utf16Decoder(options, codec) {\n    this.decoder = null;\n    this.initialBytes = [];\n    this.initialBytesLen = 0;\n\n    this.options = options || {};\n    this.iconv = codec.iconv;\n}\n\nUtf16Decoder.prototype.write = function(buf) {\n    if (!this.decoder) {\n        // Codec is not chosen yet. Accumulate initial bytes.\n        this.initialBytes.push(buf);\n        this.initialBytesLen += buf.length;\n        \n        if (this.initialBytesLen < 16) // We need more bytes to use space heuristic (see below)\n            return '';\n\n        // We have enough bytes -> detect endianness.\n        var buf = Buffer.concat(this.initialBytes),\n            encoding = detectEncoding(buf, this.options.defaultEncoding);\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\n        this.initialBytes.length = this.initialBytesLen = 0;\n    }\n\n    return this.decoder.write(buf);\n}\n\nUtf16Decoder.prototype.end = function() {\n    if (!this.decoder) {\n        var buf = Buffer.concat(this.initialBytes),\n            encoding = detectEncoding(buf, this.options.defaultEncoding);\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\n\n        var res = this.decoder.write(buf),\n            trail = this.decoder.end();\n\n        return trail ? (res + trail) : res;\n    }\n    return this.decoder.end();\n}\n\nfunction detectEncoding(buf, defaultEncoding) {\n    var enc = defaultEncoding || 'utf-16le';\n\n    if (buf.length >= 2) {\n        // Check BOM.\n        if (buf[0] == 0xFE && buf[1] == 0xFF) // UTF-16BE BOM\n            enc = 'utf-16be';\n        else if (buf[0] == 0xFF && buf[1] == 0xFE) // UTF-16LE BOM\n            enc = 'utf-16le';\n        else {\n            // No BOM found. Try to deduce encoding from initial content.\n            // Most of the time, the content has ASCII chars (U+00**), but the opposite (U+**00) is uncommon.\n            // So, we count ASCII as if it was LE or BE, and decide from that.\n            var asciiCharsLE = 0, asciiCharsBE = 0, // Counts of chars in both positions\n                _len = Math.min(buf.length - (buf.length % 2), 64); // Len is always even.\n\n            for (var i = 0; i < _len; i += 2) {\n                if (buf[i] === 0 && buf[i+1] !== 0) asciiCharsBE++;\n                if (buf[i] !== 0 && buf[i+1] === 0) asciiCharsLE++;\n            }\n\n            if (asciiCharsBE > asciiCharsLE)\n                enc = 'utf-16be';\n            else if (asciiCharsBE < asciiCharsLE)\n                enc = 'utf-16le';\n        }\n    }\n\n    return enc;\n}\n\n\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// UTF-7 codec, according to https://tools.ietf.org/html/rfc2152\n// See also below a UTF-7-IMAP codec, according to http://tools.ietf.org/html/rfc3501#section-5.1.3\n\nexports.utf7 = Utf7Codec;\nexports.unicode11utf7 = 'utf7'; // Alias UNICODE-1-1-UTF-7\nfunction Utf7Codec(codecOptions, iconv) {\n    this.iconv = iconv;\n};\n\nUtf7Codec.prototype.encoder = Utf7Encoder;\nUtf7Codec.prototype.decoder = Utf7Decoder;\nUtf7Codec.prototype.bomAware = true;\n\n\n// -- Encoding\n\nvar nonDirectChars = /[^A-Za-z0-9'\\(\\),-\\.\\/:\\? \\n\\r\\t]+/g;\n\nfunction Utf7Encoder(options, codec) {\n    this.iconv = codec.iconv;\n}\n\nUtf7Encoder.prototype.write = function(str) {\n    // Naive implementation.\n    // Non-direct chars are encoded as \"+<base64>-\"; single \"+\" char is encoded as \"+-\".\n    return Buffer.from(str.replace(nonDirectChars, function(chunk) {\n        return \"+\" + (chunk === '+' ? '' : \n            this.iconv.encode(chunk, 'utf16-be').toString('base64').replace(/=+$/, '')) \n            + \"-\";\n    }.bind(this)));\n}\n\nUtf7Encoder.prototype.end = function() {\n}\n\n\n// -- Decoding\n\nfunction Utf7Decoder(options, codec) {\n    this.iconv = codec.iconv;\n    this.inBase64 = false;\n    this.base64Accum = '';\n}\n\nvar base64Regex = /[A-Za-z0-9\\/+]/;\nvar base64Chars = [];\nfor (var i = 0; i < 256; i++)\n    base64Chars[i] = base64Regex.test(String.fromCharCode(i));\n\nvar plusChar = '+'.charCodeAt(0), \n    minusChar = '-'.charCodeAt(0),\n    andChar = '&'.charCodeAt(0);\n\nUtf7Decoder.prototype.write = function(buf) {\n    var res = \"\", lastI = 0,\n        inBase64 = this.inBase64,\n        base64Accum = this.base64Accum;\n\n    // The decoder is more involved as we must handle chunks in stream.\n\n    for (var i = 0; i < buf.length; i++) {\n        if (!inBase64) { // We're in direct mode.\n            // Write direct chars until '+'\n            if (buf[i] == plusChar) {\n                res += this.iconv.decode(buf.slice(lastI, i), \"ascii\"); // Write direct chars.\n                lastI = i+1;\n                inBase64 = true;\n            }\n        } else { // We decode base64.\n            if (!base64Chars[buf[i]]) { // Base64 ended.\n                if (i == lastI && buf[i] == minusChar) {// \"+-\" -> \"+\"\n                    res += \"+\";\n                } else {\n                    var b64str = base64Accum + buf.slice(lastI, i).toString();\n                    res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n                }\n\n                if (buf[i] != minusChar) // Minus is absorbed after base64.\n                    i--;\n\n                lastI = i+1;\n                inBase64 = false;\n                base64Accum = '';\n            }\n        }\n    }\n\n    if (!inBase64) {\n        res += this.iconv.decode(buf.slice(lastI), \"ascii\"); // Write direct chars.\n    } else {\n        var b64str = base64Accum + buf.slice(lastI).toString();\n\n        var canBeDecoded = b64str.length - (b64str.length % 8); // Minimal chunk: 2 quads -> 2x3 bytes -> 3 chars.\n        base64Accum = b64str.slice(canBeDecoded); // The rest will be decoded in future.\n        b64str = b64str.slice(0, canBeDecoded);\n\n        res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n    }\n\n    this.inBase64 = inBase64;\n    this.base64Accum = base64Accum;\n\n    return res;\n}\n\nUtf7Decoder.prototype.end = function() {\n    var res = \"\";\n    if (this.inBase64 && this.base64Accum.length > 0)\n        res = this.iconv.decode(Buffer.from(this.base64Accum, 'base64'), \"utf16-be\");\n\n    this.inBase64 = false;\n    this.base64Accum = '';\n    return res;\n}\n\n\n// UTF-7-IMAP codec.\n// RFC3501 Sec. 5.1.3 Modified UTF-7 (http://tools.ietf.org/html/rfc3501#section-5.1.3)\n// Differences:\n//  * Base64 part is started by \"&\" instead of \"+\"\n//  * Direct characters are 0x20-0x7E, except \"&\" (0x26)\n//  * In Base64, \",\" is used instead of \"/\"\n//  * Base64 must not be used to represent direct characters.\n//  * No implicit shift back from Base64 (should always end with '-')\n//  * String must end in non-shifted position.\n//  * \"-&\" while in base64 is not allowed.\n\n\nexports.utf7imap = Utf7IMAPCodec;\nfunction Utf7IMAPCodec(codecOptions, iconv) {\n    this.iconv = iconv;\n};\n\nUtf7IMAPCodec.prototype.encoder = Utf7IMAPEncoder;\nUtf7IMAPCodec.prototype.decoder = Utf7IMAPDecoder;\nUtf7IMAPCodec.prototype.bomAware = true;\n\n\n// -- Encoding\n\nfunction Utf7IMAPEncoder(options, codec) {\n    this.iconv = codec.iconv;\n    this.inBase64 = false;\n    this.base64Accum = Buffer.alloc(6);\n    this.base64AccumIdx = 0;\n}\n\nUtf7IMAPEncoder.prototype.write = function(str) {\n    var inBase64 = this.inBase64,\n        base64Accum = this.base64Accum,\n        base64AccumIdx = this.base64AccumIdx,\n        buf = Buffer.alloc(str.length*5 + 10), bufIdx = 0;\n\n    for (var i = 0; i < str.length; i++) {\n        var uChar = str.charCodeAt(i);\n        if (0x20 <= uChar && uChar <= 0x7E) { // Direct character or '&'.\n            if (inBase64) {\n                if (base64AccumIdx > 0) {\n                    bufIdx += buf.write(base64Accum.slice(0, base64AccumIdx).toString('base64').replace(/\\//g, ',').replace(/=+$/, ''), bufIdx);\n                    base64AccumIdx = 0;\n                }\n\n                buf[bufIdx++] = minusChar; // Write '-', then go to direct mode.\n                inBase64 = false;\n            }\n\n            if (!inBase64) {\n                buf[bufIdx++] = uChar; // Write direct character\n\n                if (uChar === andChar)  // Ampersand -> '&-'\n                    buf[bufIdx++] = minusChar;\n            }\n\n        } else { // Non-direct character\n            if (!inBase64) {\n                buf[bufIdx++] = andChar; // Write '&', then go to base64 mode.\n                inBase64 = true;\n            }\n            if (inBase64) {\n                base64Accum[base64AccumIdx++] = uChar >> 8;\n                base64Accum[base64AccumIdx++] = uChar & 0xFF;\n\n                if (base64AccumIdx == base64Accum.length) {\n                    bufIdx += buf.write(base64Accum.toString('base64').replace(/\\//g, ','), bufIdx);\n                    base64AccumIdx = 0;\n                }\n            }\n        }\n    }\n\n    this.inBase64 = inBase64;\n    this.base64AccumIdx = base64AccumIdx;\n\n    return buf.slice(0, bufIdx);\n}\n\nUtf7IMAPEncoder.prototype.end = function() {\n    var buf = Buffer.alloc(10), bufIdx = 0;\n    if (this.inBase64) {\n        if (this.base64AccumIdx > 0) {\n            bufIdx += buf.write(this.base64Accum.slice(0, this.base64AccumIdx).toString('base64').replace(/\\//g, ',').replace(/=+$/, ''), bufIdx);\n            this.base64AccumIdx = 0;\n        }\n\n        buf[bufIdx++] = minusChar; // Write '-', then go to direct mode.\n        this.inBase64 = false;\n    }\n\n    return buf.slice(0, bufIdx);\n}\n\n\n// -- Decoding\n\nfunction Utf7IMAPDecoder(options, codec) {\n    this.iconv = codec.iconv;\n    this.inBase64 = false;\n    this.base64Accum = '';\n}\n\nvar base64IMAPChars = base64Chars.slice();\nbase64IMAPChars[','.charCodeAt(0)] = true;\n\nUtf7IMAPDecoder.prototype.write = function(buf) {\n    var res = \"\", lastI = 0,\n        inBase64 = this.inBase64,\n        base64Accum = this.base64Accum;\n\n    // The decoder is more involved as we must handle chunks in stream.\n    // It is forgiving, closer to standard UTF-7 (for example, '-' is optional at the end).\n\n    for (var i = 0; i < buf.length; i++) {\n        if (!inBase64) { // We're in direct mode.\n            // Write direct chars until '&'\n            if (buf[i] == andChar) {\n                res += this.iconv.decode(buf.slice(lastI, i), \"ascii\"); // Write direct chars.\n                lastI = i+1;\n                inBase64 = true;\n            }\n        } else { // We decode base64.\n            if (!base64IMAPChars[buf[i]]) { // Base64 ended.\n                if (i == lastI && buf[i] == minusChar) { // \"&-\" -> \"&\"\n                    res += \"&\";\n                } else {\n                    var b64str = base64Accum + buf.slice(lastI, i).toString().replace(/,/g, '/');\n                    res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n                }\n\n                if (buf[i] != minusChar) // Minus may be absorbed after base64.\n                    i--;\n\n                lastI = i+1;\n                inBase64 = false;\n                base64Accum = '';\n            }\n        }\n    }\n\n    if (!inBase64) {\n        res += this.iconv.decode(buf.slice(lastI), \"ascii\"); // Write direct chars.\n    } else {\n        var b64str = base64Accum + buf.slice(lastI).toString().replace(/,/g, '/');\n\n        var canBeDecoded = b64str.length - (b64str.length % 8); // Minimal chunk: 2 quads -> 2x3 bytes -> 3 chars.\n        base64Accum = b64str.slice(canBeDecoded); // The rest will be decoded in future.\n        b64str = b64str.slice(0, canBeDecoded);\n\n        res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n    }\n\n    this.inBase64 = inBase64;\n    this.base64Accum = base64Accum;\n\n    return res;\n}\n\nUtf7IMAPDecoder.prototype.end = function() {\n    var res = \"\";\n    if (this.inBase64 && this.base64Accum.length > 0)\n        res = this.iconv.decode(Buffer.from(this.base64Accum, 'base64'), \"utf16-be\");\n\n    this.inBase64 = false;\n    this.base64Accum = '';\n    return res;\n}\n\n\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Single-byte codec. Needs a 'chars' string parameter that contains 256 or 128 chars that\n// correspond to encoded bytes (if 128 - then lower half is ASCII). \n\nexports._sbcs = SBCSCodec;\nfunction SBCSCodec(codecOptions, iconv) {\n    if (!codecOptions)\n        throw new Error(\"SBCS codec is called without the data.\")\n    \n    // Prepare char buffer for decoding.\n    if (!codecOptions.chars || (codecOptions.chars.length !== 128 && codecOptions.chars.length !== 256))\n        throw new Error(\"Encoding '\"+codecOptions.type+\"' has incorrect 'chars' (must be of len 128 or 256)\");\n    \n    if (codecOptions.chars.length === 128) {\n        var asciiString = \"\";\n        for (var i = 0; i < 128; i++)\n            asciiString += String.fromCharCode(i);\n        codecOptions.chars = asciiString + codecOptions.chars;\n    }\n\n    this.decodeBuf = Buffer.from(codecOptions.chars, 'ucs2');\n    \n    // Encoding buffer.\n    var encodeBuf = Buffer.alloc(65536, iconv.defaultCharSingleByte.charCodeAt(0));\n\n    for (var i = 0; i < codecOptions.chars.length; i++)\n        encodeBuf[codecOptions.chars.charCodeAt(i)] = i;\n\n    this.encodeBuf = encodeBuf;\n}\n\nSBCSCodec.prototype.encoder = SBCSEncoder;\nSBCSCodec.prototype.decoder = SBCSDecoder;\n\n\nfunction SBCSEncoder(options, codec) {\n    this.encodeBuf = codec.encodeBuf;\n}\n\nSBCSEncoder.prototype.write = function(str) {\n    var buf = Buffer.alloc(str.length);\n    for (var i = 0; i < str.length; i++)\n        buf[i] = this.encodeBuf[str.charCodeAt(i)];\n    \n    return buf;\n}\n\nSBCSEncoder.prototype.end = function() {\n}\n\n\nfunction SBCSDecoder(options, codec) {\n    this.decodeBuf = codec.decodeBuf;\n}\n\nSBCSDecoder.prototype.write = function(buf) {\n    // Strings are immutable in JS -> we use ucs2 buffer to speed up computations.\n    var decodeBuf = this.decodeBuf;\n    var newBuf = Buffer.alloc(buf.length*2);\n    var idx1 = 0, idx2 = 0;\n    for (var i = 0; i < buf.length; i++) {\n        idx1 = buf[i]*2; idx2 = i*2;\n        newBuf[idx2] = decodeBuf[idx1];\n        newBuf[idx2+1] = decodeBuf[idx1+1];\n    }\n    return newBuf.toString('ucs2');\n}\n\nSBCSDecoder.prototype.end = function() {\n}\n","\"use strict\";\n\n// Manually added data to be used by sbcs codec in addition to generated one.\n\nmodule.exports = {\n    // Not supported by iconv, not sure why.\n    \"10029\": \"maccenteuro\",\n    \"maccenteuro\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"\"\n    },\n\n    \"808\": \"cp808\",\n    \"ibm808\": \"cp808\",\n    \"cp808\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"\"\n    },\n\n    \"mik\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"\"\n    },\n\n    // Aliases of generated encodings.\n    \"ascii8bit\": \"ascii\",\n    \"usascii\": \"ascii\",\n    \"ansix34\": \"ascii\",\n    \"ansix341968\": \"ascii\",\n    \"ansix341986\": \"ascii\",\n    \"csascii\": \"ascii\",\n    \"cp367\": \"ascii\",\n    \"ibm367\": \"ascii\",\n    \"isoir6\": \"ascii\",\n    \"iso646us\": \"ascii\",\n    \"iso646irv\": \"ascii\",\n    \"us\": \"ascii\",\n\n    \"latin1\": \"iso88591\",\n    \"latin2\": \"iso88592\",\n    \"latin3\": \"iso88593\",\n    \"latin4\": \"iso88594\",\n    \"latin5\": \"iso88599\",\n    \"latin6\": \"iso885910\",\n    \"latin7\": \"iso885913\",\n    \"latin8\": \"iso885914\",\n    \"latin9\": \"iso885915\",\n    \"latin10\": \"iso885916\",\n\n    \"csisolatin1\": \"iso88591\",\n    \"csisolatin2\": \"iso88592\",\n    \"csisolatin3\": \"iso88593\",\n    \"csisolatin4\": \"iso88594\",\n    \"csisolatincyrillic\": \"iso88595\",\n    \"csisolatinarabic\": \"iso88596\",\n    \"csisolatingreek\" : \"iso88597\",\n    \"csisolatinhebrew\": \"iso88598\",\n    \"csisolatin5\": \"iso88599\",\n    \"csisolatin6\": \"iso885910\",\n\n    \"l1\": \"iso88591\",\n    \"l2\": \"iso88592\",\n    \"l3\": \"iso88593\",\n    \"l4\": \"iso88594\",\n    \"l5\": \"iso88599\",\n    \"l6\": \"iso885910\",\n    \"l7\": \"iso885913\",\n    \"l8\": \"iso885914\",\n    \"l9\": \"iso885915\",\n    \"l10\": \"iso885916\",\n\n    \"isoir14\": \"iso646jp\",\n    \"isoir57\": \"iso646cn\",\n    \"isoir100\": \"iso88591\",\n    \"isoir101\": \"iso88592\",\n    \"isoir109\": \"iso88593\",\n    \"isoir110\": \"iso88594\",\n    \"isoir144\": \"iso88595\",\n    \"isoir127\": \"iso88596\",\n    \"isoir126\": \"iso88597\",\n    \"isoir138\": \"iso88598\",\n    \"isoir148\": \"iso88599\",\n    \"isoir157\": \"iso885910\",\n    \"isoir166\": \"tis620\",\n    \"isoir179\": \"iso885913\",\n    \"isoir199\": \"iso885914\",\n    \"isoir203\": \"iso885915\",\n    \"isoir226\": \"iso885916\",\n\n    \"cp819\": \"iso88591\",\n    \"ibm819\": \"iso88591\",\n\n    \"cyrillic\": \"iso88595\",\n\n    \"arabic\": \"iso88596\",\n    \"arabic8\": \"iso88596\",\n    \"ecma114\": \"iso88596\",\n    \"asmo708\": \"iso88596\",\n\n    \"greek\" : \"iso88597\",\n    \"greek8\" : \"iso88597\",\n    \"ecma118\" : \"iso88597\",\n    \"elot928\" : \"iso88597\",\n\n    \"hebrew\": \"iso88598\",\n    \"hebrew8\": \"iso88598\",\n\n    \"turkish\": \"iso88599\",\n    \"turkish8\": \"iso88599\",\n\n    \"thai\": \"iso885911\",\n    \"thai8\": \"iso885911\",\n\n    \"celtic\": \"iso885914\",\n    \"celtic8\": \"iso885914\",\n    \"isoceltic\": \"iso885914\",\n\n    \"tis6200\": \"tis620\",\n    \"tis62025291\": \"tis620\",\n    \"tis62025330\": \"tis620\",\n\n    \"10000\": \"macroman\",\n    \"10006\": \"macgreek\",\n    \"10007\": \"maccyrillic\",\n    \"10079\": \"maciceland\",\n    \"10081\": \"macturkish\",\n\n    \"cspc8codepage437\": \"cp437\",\n    \"cspc775baltic\": \"cp775\",\n    \"cspc850multilingual\": \"cp850\",\n    \"cspcp852\": \"cp852\",\n    \"cspc862latinhebrew\": \"cp862\",\n    \"cpgr\": \"cp869\",\n\n    \"msee\": \"cp1250\",\n    \"mscyrl\": \"cp1251\",\n    \"msansi\": \"cp1252\",\n    \"msgreek\": \"cp1253\",\n    \"msturk\": \"cp1254\",\n    \"mshebr\": \"cp1255\",\n    \"msarab\": \"cp1256\",\n    \"winbaltrim\": \"cp1257\",\n\n    \"cp20866\": \"koi8r\",\n    \"20866\": \"koi8r\",\n    \"ibm878\": \"koi8r\",\n    \"cskoi8r\": \"koi8r\",\n\n    \"cp21866\": \"koi8u\",\n    \"21866\": \"koi8u\",\n    \"ibm1168\": \"koi8u\",\n\n    \"strk10482002\": \"rk1048\",\n\n    \"tcvn5712\": \"tcvn\",\n    \"tcvn57121\": \"tcvn\",\n\n    \"gb198880\": \"iso646cn\",\n    \"cn\": \"iso646cn\",\n\n    \"csiso14jisc6220ro\": \"iso646jp\",\n    \"jisc62201969ro\": \"iso646jp\",\n    \"jp\": \"iso646jp\",\n\n    \"cshproman8\": \"hproman8\",\n    \"r8\": \"hproman8\",\n    \"roman8\": \"hproman8\",\n    \"xroman8\": \"hproman8\",\n    \"ibm1051\": \"hproman8\",\n\n    \"mac\": \"macintosh\",\n    \"csmacintosh\": \"macintosh\",\n};\n\n","\"use strict\";\n\n// Generated data for sbcs codec. Don't edit manually. Regenerate using generation/gen-sbcs.js script.\nmodule.exports = {\n  \"437\": \"cp437\",\n  \"737\": \"cp737\",\n  \"775\": \"cp775\",\n  \"850\": \"cp850\",\n  \"852\": \"cp852\",\n  \"855\": \"cp855\",\n  \"856\": \"cp856\",\n  \"857\": \"cp857\",\n  \"858\": \"cp858\",\n  \"860\": \"cp860\",\n  \"861\": \"cp861\",\n  \"862\": \"cp862\",\n  \"863\": \"cp863\",\n  \"864\": \"cp864\",\n  \"865\": \"cp865\",\n  \"866\": \"cp866\",\n  \"869\": \"cp869\",\n  \"874\": \"windows874\",\n  \"922\": \"cp922\",\n  \"1046\": \"cp1046\",\n  \"1124\": \"cp1124\",\n  \"1125\": \"cp1125\",\n  \"1129\": \"cp1129\",\n  \"1133\": \"cp1133\",\n  \"1161\": \"cp1161\",\n  \"1162\": \"cp1162\",\n  \"1163\": \"cp1163\",\n  \"1250\": \"windows1250\",\n  \"1251\": \"windows1251\",\n  \"1252\": \"windows1252\",\n  \"1253\": \"windows1253\",\n  \"1254\": \"windows1254\",\n  \"1255\": \"windows1255\",\n  \"1256\": \"windows1256\",\n  \"1257\": \"windows1257\",\n  \"1258\": \"windows1258\",\n  \"28591\": \"iso88591\",\n  \"28592\": \"iso88592\",\n  \"28593\": \"iso88593\",\n  \"28594\": \"iso88594\",\n  \"28595\": \"iso88595\",\n  \"28596\": \"iso88596\",\n  \"28597\": \"iso88597\",\n  \"28598\": \"iso88598\",\n  \"28599\": \"iso88599\",\n  \"28600\": \"iso885910\",\n  \"28601\": \"iso885911\",\n  \"28603\": \"iso885913\",\n  \"28604\": \"iso885914\",\n  \"28605\": \"iso885915\",\n  \"28606\": \"iso885916\",\n  \"windows874\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win874\": \"windows874\",\n  \"cp874\": \"windows874\",\n  \"windows1250\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1250\": \"windows1250\",\n  \"cp1250\": \"windows1250\",\n  \"windows1251\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1251\": \"windows1251\",\n  \"cp1251\": \"windows1251\",\n  \"windows1252\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1252\": \"windows1252\",\n  \"cp1252\": \"windows1252\",\n  \"windows1253\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1253\": \"windows1253\",\n  \"cp1253\": \"windows1253\",\n  \"windows1254\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1254\": \"windows1254\",\n  \"cp1254\": \"windows1254\",\n  \"windows1255\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1255\": \"windows1255\",\n  \"cp1255\": \"windows1255\",\n  \"windows1256\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1256\": \"windows1256\",\n  \"cp1256\": \"windows1256\",\n  \"windows1257\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1257\": \"windows1257\",\n  \"cp1257\": \"windows1257\",\n  \"windows1258\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1258\": \"windows1258\",\n  \"cp1258\": \"windows1258\",\n  \"iso88591\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28591\": \"iso88591\",\n  \"iso88592\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28592\": \"iso88592\",\n  \"iso88593\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28593\": \"iso88593\",\n  \"iso88594\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28594\": \"iso88594\",\n  \"iso88595\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28595\": \"iso88595\",\n  \"iso88596\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28596\": \"iso88596\",\n  \"iso88597\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28597\": \"iso88597\",\n  \"iso88598\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28598\": \"iso88598\",\n  \"iso88599\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28599\": \"iso88599\",\n  \"iso885910\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28600\": \"iso885910\",\n  \"iso885911\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28601\": \"iso885911\",\n  \"iso885913\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28603\": \"iso885913\",\n  \"iso885914\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28604\": \"iso885914\",\n  \"iso885915\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28605\": \"iso885915\",\n  \"iso885916\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28606\": \"iso885916\",\n  \"cp437\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm437\": \"cp437\",\n  \"csibm437\": \"cp437\",\n  \"cp737\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm737\": \"cp737\",\n  \"csibm737\": \"cp737\",\n  \"cp775\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm775\": \"cp775\",\n  \"csibm775\": \"cp775\",\n  \"cp850\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm850\": \"cp850\",\n  \"csibm850\": \"cp850\",\n  \"cp852\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm852\": \"cp852\",\n  \"csibm852\": \"cp852\",\n  \"cp855\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm855\": \"cp855\",\n  \"csibm855\": \"cp855\",\n  \"cp856\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm856\": \"cp856\",\n  \"csibm856\": \"cp856\",\n  \"cp857\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm857\": \"cp857\",\n  \"csibm857\": \"cp857\",\n  \"cp858\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm858\": \"cp858\",\n  \"csibm858\": \"cp858\",\n  \"cp860\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm860\": \"cp860\",\n  \"csibm860\": \"cp860\",\n  \"cp861\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm861\": \"cp861\",\n  \"csibm861\": \"cp861\",\n  \"cp862\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm862\": \"cp862\",\n  \"csibm862\": \"cp862\",\n  \"cp863\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm863\": \"cp863\",\n  \"csibm863\": \"cp863\",\n  \"cp864\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\n  },\n  \"ibm864\": \"cp864\",\n  \"csibm864\": \"cp864\",\n  \"cp865\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm865\": \"cp865\",\n  \"csibm865\": \"cp865\",\n  \"cp866\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm866\": \"cp866\",\n  \"csibm866\": \"cp866\",\n  \"cp869\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm869\": \"cp869\",\n  \"csibm869\": \"cp869\",\n  \"cp922\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm922\": \"cp922\",\n  \"csibm922\": \"cp922\",\n  \"cp1046\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1046\": \"cp1046\",\n  \"csibm1046\": \"cp1046\",\n  \"cp1124\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1124\": \"cp1124\",\n  \"csibm1124\": \"cp1124\",\n  \"cp1125\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1125\": \"cp1125\",\n  \"csibm1125\": \"cp1125\",\n  \"cp1129\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1129\": \"cp1129\",\n  \"csibm1129\": \"cp1129\",\n  \"cp1133\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1133\": \"cp1133\",\n  \"csibm1133\": \"cp1133\",\n  \"cp1161\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1161\": \"cp1161\",\n  \"csibm1161\": \"cp1161\",\n  \"cp1162\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1162\": \"cp1162\",\n  \"csibm1162\": \"cp1162\",\n  \"cp1163\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1163\": \"cp1163\",\n  \"csibm1163\": \"cp1163\",\n  \"maccroatian\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"maccyrillic\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macgreek\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"maciceland\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macroman\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macromania\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macthai\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macturkish\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macukraine\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"koi8r\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"koi8u\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"koi8ru\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"koi8t\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"armscii8\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \")(.,-\"\n  },\n  \"rk1048\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"tcvn\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0003\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\n  },\n  \"georgianacademy\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"georgianps\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"pt154\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"viscii\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0003\\u0004\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0015\\u0016\\u0017\\u0018\\u001a\\u001b\\u001c\\u001d\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\n  },\n  \"iso646cn\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}\"\n  },\n  \"iso646jp\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}\"\n  },\n  \"hproman8\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macintosh\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ascii\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"tis620\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  }\n}","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Multibyte codec. In this scheme, a character is represented by 1 or more bytes.\n// Our codec supports UTF-16 surrogates, extensions for GB18030 and unicode sequences.\n// To save memory and loading time, we read table files only when requested.\n\nexports._dbcs = DBCSCodec;\n\nvar UNASSIGNED = -1,\n    GB18030_CODE = -2,\n    SEQ_START  = -10,\n    NODE_START = -1000,\n    UNASSIGNED_NODE = new Array(0x100),\n    DEF_CHAR = -1;\n\nfor (var i = 0; i < 0x100; i++)\n    UNASSIGNED_NODE[i] = UNASSIGNED;\n\n\n// Class DBCSCodec reads and initializes mapping tables.\nfunction DBCSCodec(codecOptions, iconv) {\n    this.encodingName = codecOptions.encodingName;\n    if (!codecOptions)\n        throw new Error(\"DBCS codec is called without the data.\")\n    if (!codecOptions.table)\n        throw new Error(\"Encoding '\" + this.encodingName + \"' has no data.\");\n\n    // Load tables.\n    var mappingTable = codecOptions.table();\n\n\n    // Decode tables: MBCS -> Unicode.\n\n    // decodeTables is a trie, encoded as an array of arrays of integers. Internal arrays are trie nodes and all have len = 256.\n    // Trie root is decodeTables[0].\n    // Values: >=  0 -> unicode character code. can be > 0xFFFF\n    //         == UNASSIGNED -> unknown/unassigned sequence.\n    //         == GB18030_CODE -> this is the end of a GB18030 4-byte sequence.\n    //         <= NODE_START -> index of the next node in our trie to process next byte.\n    //         <= SEQ_START  -> index of the start of a character code sequence, in decodeTableSeq.\n    this.decodeTables = [];\n    this.decodeTables[0] = UNASSIGNED_NODE.slice(0); // Create root node.\n\n    // Sometimes a MBCS char corresponds to a sequence of unicode chars. We store them as arrays of integers here. \n    this.decodeTableSeq = [];\n\n    // Actual mapping tables consist of chunks. Use them to fill up decode tables.\n    for (var i = 0; i < mappingTable.length; i++)\n        this._addDecodeChunk(mappingTable[i]);\n\n    this.defaultCharUnicode = iconv.defaultCharUnicode;\n\n    \n    // Encode tables: Unicode -> DBCS.\n\n    // `encodeTable` is array mapping from unicode char to encoded char. All its values are integers for performance.\n    // Because it can be sparse, it is represented as array of buckets by 256 chars each. Bucket can be null.\n    // Values: >=  0 -> it is a normal char. Write the value (if <=256 then 1 byte, if <=65536 then 2 bytes, etc.).\n    //         == UNASSIGNED -> no conversion found. Output a default char.\n    //         <= SEQ_START  -> it's an index in encodeTableSeq, see below. The character starts a sequence.\n    this.encodeTable = [];\n    \n    // `encodeTableSeq` is used when a sequence of unicode characters is encoded as a single code. We use a tree of\n    // objects where keys correspond to characters in sequence and leafs are the encoded dbcs values. A special DEF_CHAR key\n    // means end of sequence (needed when one sequence is a strict subsequence of another).\n    // Objects are kept separately from encodeTable to increase performance.\n    this.encodeTableSeq = [];\n\n    // Some chars can be decoded, but need not be encoded.\n    var skipEncodeChars = {};\n    if (codecOptions.encodeSkipVals)\n        for (var i = 0; i < codecOptions.encodeSkipVals.length; i++) {\n            var val = codecOptions.encodeSkipVals[i];\n            if (typeof val === 'number')\n                skipEncodeChars[val] = true;\n            else\n                for (var j = val.from; j <= val.to; j++)\n                    skipEncodeChars[j] = true;\n        }\n        \n    // Use decode trie to recursively fill out encode tables.\n    this._fillEncodeTable(0, 0, skipEncodeChars);\n\n    // Add more encoding pairs when needed.\n    if (codecOptions.encodeAdd) {\n        for (var uChar in codecOptions.encodeAdd)\n            if (Object.prototype.hasOwnProperty.call(codecOptions.encodeAdd, uChar))\n                this._setEncodeChar(uChar.charCodeAt(0), codecOptions.encodeAdd[uChar]);\n    }\n\n    this.defCharSB  = this.encodeTable[0][iconv.defaultCharSingleByte.charCodeAt(0)];\n    if (this.defCharSB === UNASSIGNED) this.defCharSB = this.encodeTable[0]['?'];\n    if (this.defCharSB === UNASSIGNED) this.defCharSB = \"?\".charCodeAt(0);\n\n\n    // Load & create GB18030 tables when needed.\n    if (typeof codecOptions.gb18030 === 'function') {\n        this.gb18030 = codecOptions.gb18030(); // Load GB18030 ranges.\n\n        // Add GB18030 decode tables.\n        var thirdByteNodeIdx = this.decodeTables.length;\n        var thirdByteNode = this.decodeTables[thirdByteNodeIdx] = UNASSIGNED_NODE.slice(0);\n\n        var fourthByteNodeIdx = this.decodeTables.length;\n        var fourthByteNode = this.decodeTables[fourthByteNodeIdx] = UNASSIGNED_NODE.slice(0);\n\n        for (var i = 0x81; i <= 0xFE; i++) {\n            var secondByteNodeIdx = NODE_START - this.decodeTables[0][i];\n            var secondByteNode = this.decodeTables[secondByteNodeIdx];\n            for (var j = 0x30; j <= 0x39; j++)\n                secondByteNode[j] = NODE_START - thirdByteNodeIdx;\n        }\n        for (var i = 0x81; i <= 0xFE; i++)\n            thirdByteNode[i] = NODE_START - fourthByteNodeIdx;\n        for (var i = 0x30; i <= 0x39; i++)\n            fourthByteNode[i] = GB18030_CODE\n    }        \n}\n\nDBCSCodec.prototype.encoder = DBCSEncoder;\nDBCSCodec.prototype.decoder = DBCSDecoder;\n\n// Decoder helpers\nDBCSCodec.prototype._getDecodeTrieNode = function(addr) {\n    var bytes = [];\n    for (; addr > 0; addr >>= 8)\n        bytes.push(addr & 0xFF);\n    if (bytes.length == 0)\n        bytes.push(0);\n\n    var node = this.decodeTables[0];\n    for (var i = bytes.length-1; i > 0; i--) { // Traverse nodes deeper into the trie.\n        var val = node[bytes[i]];\n\n        if (val == UNASSIGNED) { // Create new node.\n            node[bytes[i]] = NODE_START - this.decodeTables.length;\n            this.decodeTables.push(node = UNASSIGNED_NODE.slice(0));\n        }\n        else if (val <= NODE_START) { // Existing node.\n            node = this.decodeTables[NODE_START - val];\n        }\n        else\n            throw new Error(\"Overwrite byte in \" + this.encodingName + \", addr: \" + addr.toString(16));\n    }\n    return node;\n}\n\n\nDBCSCodec.prototype._addDecodeChunk = function(chunk) {\n    // First element of chunk is the hex mbcs code where we start.\n    var curAddr = parseInt(chunk[0], 16);\n\n    // Choose the decoding node where we'll write our chars.\n    var writeTable = this._getDecodeTrieNode(curAddr);\n    curAddr = curAddr & 0xFF;\n\n    // Write all other elements of the chunk to the table.\n    for (var k = 1; k < chunk.length; k++) {\n        var part = chunk[k];\n        if (typeof part === \"string\") { // String, write as-is.\n            for (var l = 0; l < part.length;) {\n                var code = part.charCodeAt(l++);\n                if (0xD800 <= code && code < 0xDC00) { // Decode surrogate\n                    var codeTrail = part.charCodeAt(l++);\n                    if (0xDC00 <= codeTrail && codeTrail < 0xE000)\n                        writeTable[curAddr++] = 0x10000 + (code - 0xD800) * 0x400 + (codeTrail - 0xDC00);\n                    else\n                        throw new Error(\"Incorrect surrogate pair in \"  + this.encodingName + \" at chunk \" + chunk[0]);\n                }\n                else if (0x0FF0 < code && code <= 0x0FFF) { // Character sequence (our own encoding used)\n                    var len = 0xFFF - code + 2;\n                    var seq = [];\n                    for (var m = 0; m < len; m++)\n                        seq.push(part.charCodeAt(l++)); // Simple variation: don't support surrogates or subsequences in seq.\n\n                    writeTable[curAddr++] = SEQ_START - this.decodeTableSeq.length;\n                    this.decodeTableSeq.push(seq);\n                }\n                else\n                    writeTable[curAddr++] = code; // Basic char\n            }\n        } \n        else if (typeof part === \"number\") { // Integer, meaning increasing sequence starting with prev character.\n            var charCode = writeTable[curAddr - 1] + 1;\n            for (var l = 0; l < part; l++)\n                writeTable[curAddr++] = charCode++;\n        }\n        else\n            throw new Error(\"Incorrect type '\" + typeof part + \"' given in \"  + this.encodingName + \" at chunk \" + chunk[0]);\n    }\n    if (curAddr > 0xFF)\n        throw new Error(\"Incorrect chunk in \"  + this.encodingName + \" at addr \" + chunk[0] + \": too long\" + curAddr);\n}\n\n// Encoder helpers\nDBCSCodec.prototype._getEncodeBucket = function(uCode) {\n    var high = uCode >> 8; // This could be > 0xFF because of astral characters.\n    if (this.encodeTable[high] === undefined)\n        this.encodeTable[high] = UNASSIGNED_NODE.slice(0); // Create bucket on demand.\n    return this.encodeTable[high];\n}\n\nDBCSCodec.prototype._setEncodeChar = function(uCode, dbcsCode) {\n    var bucket = this._getEncodeBucket(uCode);\n    var low = uCode & 0xFF;\n    if (bucket[low] <= SEQ_START)\n        this.encodeTableSeq[SEQ_START-bucket[low]][DEF_CHAR] = dbcsCode; // There's already a sequence, set a single-char subsequence of it.\n    else if (bucket[low] == UNASSIGNED)\n        bucket[low] = dbcsCode;\n}\n\nDBCSCodec.prototype._setEncodeSequence = function(seq, dbcsCode) {\n    \n    // Get the root of character tree according to first character of the sequence.\n    var uCode = seq[0];\n    var bucket = this._getEncodeBucket(uCode);\n    var low = uCode & 0xFF;\n\n    var node;\n    if (bucket[low] <= SEQ_START) {\n        // There's already a sequence with  - use it.\n        node = this.encodeTableSeq[SEQ_START-bucket[low]];\n    }\n    else {\n        // There was no sequence object - allocate a new one.\n        node = {};\n        if (bucket[low] !== UNASSIGNED) node[DEF_CHAR] = bucket[low]; // If a char was set before - make it a single-char subsequence.\n        bucket[low] = SEQ_START - this.encodeTableSeq.length;\n        this.encodeTableSeq.push(node);\n    }\n\n    // Traverse the character tree, allocating new nodes as needed.\n    for (var j = 1; j < seq.length-1; j++) {\n        var oldVal = node[uCode];\n        if (typeof oldVal === 'object')\n            node = oldVal;\n        else {\n            node = node[uCode] = {}\n            if (oldVal !== undefined)\n                node[DEF_CHAR] = oldVal\n        }\n    }\n\n    // Set the leaf to given dbcsCode.\n    uCode = seq[seq.length-1];\n    node[uCode] = dbcsCode;\n}\n\nDBCSCodec.prototype._fillEncodeTable = function(nodeIdx, prefix, skipEncodeChars) {\n    var node = this.decodeTables[nodeIdx];\n    for (var i = 0; i < 0x100; i++) {\n        var uCode = node[i];\n        var mbCode = prefix + i;\n        if (skipEncodeChars[mbCode])\n            continue;\n\n        if (uCode >= 0)\n            this._setEncodeChar(uCode, mbCode);\n        else if (uCode <= NODE_START)\n            this._fillEncodeTable(NODE_START - uCode, mbCode << 8, skipEncodeChars);\n        else if (uCode <= SEQ_START)\n            this._setEncodeSequence(this.decodeTableSeq[SEQ_START - uCode], mbCode);\n    }\n}\n\n\n\n// == Encoder ==================================================================\n\nfunction DBCSEncoder(options, codec) {\n    // Encoder state\n    this.leadSurrogate = -1;\n    this.seqObj = undefined;\n    \n    // Static data\n    this.encodeTable = codec.encodeTable;\n    this.encodeTableSeq = codec.encodeTableSeq;\n    this.defaultCharSingleByte = codec.defCharSB;\n    this.gb18030 = codec.gb18030;\n}\n\nDBCSEncoder.prototype.write = function(str) {\n    var newBuf = Buffer.alloc(str.length * (this.gb18030 ? 4 : 3)),\n        leadSurrogate = this.leadSurrogate,\n        seqObj = this.seqObj, nextChar = -1,\n        i = 0, j = 0;\n\n    while (true) {\n        // 0. Get next character.\n        if (nextChar === -1) {\n            if (i == str.length) break;\n            var uCode = str.charCodeAt(i++);\n        }\n        else {\n            var uCode = nextChar;\n            nextChar = -1;    \n        }\n\n        // 1. Handle surrogates.\n        if (0xD800 <= uCode && uCode < 0xE000) { // Char is one of surrogates.\n            if (uCode < 0xDC00) { // We've got lead surrogate.\n                if (leadSurrogate === -1) {\n                    leadSurrogate = uCode;\n                    continue;\n                } else {\n                    leadSurrogate = uCode;\n                    // Double lead surrogate found.\n                    uCode = UNASSIGNED;\n                }\n            } else { // We've got trail surrogate.\n                if (leadSurrogate !== -1) {\n                    uCode = 0x10000 + (leadSurrogate - 0xD800) * 0x400 + (uCode - 0xDC00);\n                    leadSurrogate = -1;\n                } else {\n                    // Incomplete surrogate pair - only trail surrogate found.\n                    uCode = UNASSIGNED;\n                }\n                \n            }\n        }\n        else if (leadSurrogate !== -1) {\n            // Incomplete surrogate pair - only lead surrogate found.\n            nextChar = uCode; uCode = UNASSIGNED; // Write an error, then current char.\n            leadSurrogate = -1;\n        }\n\n        // 2. Convert uCode character.\n        var dbcsCode = UNASSIGNED;\n        if (seqObj !== undefined && uCode != UNASSIGNED) { // We are in the middle of the sequence\n            var resCode = seqObj[uCode];\n            if (typeof resCode === 'object') { // Sequence continues.\n                seqObj = resCode;\n                continue;\n\n            } else if (typeof resCode == 'number') { // Sequence finished. Write it.\n                dbcsCode = resCode;\n\n            } else if (resCode == undefined) { // Current character is not part of the sequence.\n\n                // Try default character for this sequence\n                resCode = seqObj[DEF_CHAR];\n                if (resCode !== undefined) {\n                    dbcsCode = resCode; // Found. Write it.\n                    nextChar = uCode; // Current character will be written too in the next iteration.\n\n                } else {\n                    // TODO: What if we have no default? (resCode == undefined)\n                    // Then, we should write first char of the sequence as-is and try the rest recursively.\n                    // Didn't do it for now because no encoding has this situation yet.\n                    // Currently, just skip the sequence and write current char.\n                }\n            }\n            seqObj = undefined;\n        }\n        else if (uCode >= 0) {  // Regular character\n            var subtable = this.encodeTable[uCode >> 8];\n            if (subtable !== undefined)\n                dbcsCode = subtable[uCode & 0xFF];\n            \n            if (dbcsCode <= SEQ_START) { // Sequence start\n                seqObj = this.encodeTableSeq[SEQ_START-dbcsCode];\n                continue;\n            }\n\n            if (dbcsCode == UNASSIGNED && this.gb18030) {\n                // Use GB18030 algorithm to find character(s) to write.\n                var idx = findIdx(this.gb18030.uChars, uCode);\n                if (idx != -1) {\n                    var dbcsCode = this.gb18030.gbChars[idx] + (uCode - this.gb18030.uChars[idx]);\n                    newBuf[j++] = 0x81 + Math.floor(dbcsCode / 12600); dbcsCode = dbcsCode % 12600;\n                    newBuf[j++] = 0x30 + Math.floor(dbcsCode / 1260); dbcsCode = dbcsCode % 1260;\n                    newBuf[j++] = 0x81 + Math.floor(dbcsCode / 10); dbcsCode = dbcsCode % 10;\n                    newBuf[j++] = 0x30 + dbcsCode;\n                    continue;\n                }\n            }\n        }\n\n        // 3. Write dbcsCode character.\n        if (dbcsCode === UNASSIGNED)\n            dbcsCode = this.defaultCharSingleByte;\n        \n        if (dbcsCode < 0x100) {\n            newBuf[j++] = dbcsCode;\n        }\n        else if (dbcsCode < 0x10000) {\n            newBuf[j++] = dbcsCode >> 8;   // high byte\n            newBuf[j++] = dbcsCode & 0xFF; // low byte\n        }\n        else {\n            newBuf[j++] = dbcsCode >> 16;\n            newBuf[j++] = (dbcsCode >> 8) & 0xFF;\n            newBuf[j++] = dbcsCode & 0xFF;\n        }\n    }\n\n    this.seqObj = seqObj;\n    this.leadSurrogate = leadSurrogate;\n    return newBuf.slice(0, j);\n}\n\nDBCSEncoder.prototype.end = function() {\n    if (this.leadSurrogate === -1 && this.seqObj === undefined)\n        return; // All clean. Most often case.\n\n    var newBuf = Buffer.alloc(10), j = 0;\n\n    if (this.seqObj) { // We're in the sequence.\n        var dbcsCode = this.seqObj[DEF_CHAR];\n        if (dbcsCode !== undefined) { // Write beginning of the sequence.\n            if (dbcsCode < 0x100) {\n                newBuf[j++] = dbcsCode;\n            }\n            else {\n                newBuf[j++] = dbcsCode >> 8;   // high byte\n                newBuf[j++] = dbcsCode & 0xFF; // low byte\n            }\n        } else {\n            // See todo above.\n        }\n        this.seqObj = undefined;\n    }\n\n    if (this.leadSurrogate !== -1) {\n        // Incomplete surrogate pair - only lead surrogate found.\n        newBuf[j++] = this.defaultCharSingleByte;\n        this.leadSurrogate = -1;\n    }\n    \n    return newBuf.slice(0, j);\n}\n\n// Export for testing\nDBCSEncoder.prototype.findIdx = findIdx;\n\n\n// == Decoder ==================================================================\n\nfunction DBCSDecoder(options, codec) {\n    // Decoder state\n    this.nodeIdx = 0;\n    this.prevBuf = Buffer.alloc(0);\n\n    // Static data\n    this.decodeTables = codec.decodeTables;\n    this.decodeTableSeq = codec.decodeTableSeq;\n    this.defaultCharUnicode = codec.defaultCharUnicode;\n    this.gb18030 = codec.gb18030;\n}\n\nDBCSDecoder.prototype.write = function(buf) {\n    var newBuf = Buffer.alloc(buf.length*2),\n        nodeIdx = this.nodeIdx, \n        prevBuf = this.prevBuf, prevBufOffset = this.prevBuf.length,\n        seqStart = -this.prevBuf.length, // idx of the start of current parsed sequence.\n        uCode;\n\n    if (prevBufOffset > 0) // Make prev buf overlap a little to make it easier to slice later.\n        prevBuf = Buffer.concat([prevBuf, buf.slice(0, 10)]);\n    \n    for (var i = 0, j = 0; i < buf.length; i++) {\n        var curByte = (i >= 0) ? buf[i] : prevBuf[i + prevBufOffset];\n\n        // Lookup in current trie node.\n        var uCode = this.decodeTables[nodeIdx][curByte];\n\n        if (uCode >= 0) { \n            // Normal character, just use it.\n        }\n        else if (uCode === UNASSIGNED) { // Unknown char.\n            // TODO: Callback with seq.\n            //var curSeq = (seqStart >= 0) ? buf.slice(seqStart, i+1) : prevBuf.slice(seqStart + prevBufOffset, i+1 + prevBufOffset);\n            i = seqStart; // Try to parse again, after skipping first byte of the sequence ('i' will be incremented by 'for' cycle).\n            uCode = this.defaultCharUnicode.charCodeAt(0);\n        }\n        else if (uCode === GB18030_CODE) {\n            var curSeq = (seqStart >= 0) ? buf.slice(seqStart, i+1) : prevBuf.slice(seqStart + prevBufOffset, i+1 + prevBufOffset);\n            var ptr = (curSeq[0]-0x81)*12600 + (curSeq[1]-0x30)*1260 + (curSeq[2]-0x81)*10 + (curSeq[3]-0x30);\n            var idx = findIdx(this.gb18030.gbChars, ptr);\n            uCode = this.gb18030.uChars[idx] + ptr - this.gb18030.gbChars[idx];\n        }\n        else if (uCode <= NODE_START) { // Go to next trie node.\n            nodeIdx = NODE_START - uCode;\n            continue;\n        }\n        else if (uCode <= SEQ_START) { // Output a sequence of chars.\n            var seq = this.decodeTableSeq[SEQ_START - uCode];\n            for (var k = 0; k < seq.length - 1; k++) {\n                uCode = seq[k];\n                newBuf[j++] = uCode & 0xFF;\n                newBuf[j++] = uCode >> 8;\n            }\n            uCode = seq[seq.length-1];\n        }\n        else\n            throw new Error(\"iconv-lite internal error: invalid decoding table value \" + uCode + \" at \" + nodeIdx + \"/\" + curByte);\n\n        // Write the character to buffer, handling higher planes using surrogate pair.\n        if (uCode > 0xFFFF) { \n            uCode -= 0x10000;\n            var uCodeLead = 0xD800 + Math.floor(uCode / 0x400);\n            newBuf[j++] = uCodeLead & 0xFF;\n            newBuf[j++] = uCodeLead >> 8;\n\n            uCode = 0xDC00 + uCode % 0x400;\n        }\n        newBuf[j++] = uCode & 0xFF;\n        newBuf[j++] = uCode >> 8;\n\n        // Reset trie node.\n        nodeIdx = 0; seqStart = i+1;\n    }\n\n    this.nodeIdx = nodeIdx;\n    this.prevBuf = (seqStart >= 0) ? buf.slice(seqStart) : prevBuf.slice(seqStart + prevBufOffset);\n    return newBuf.slice(0, j).toString('ucs2');\n}\n\nDBCSDecoder.prototype.end = function() {\n    var ret = '';\n\n    // Try to parse all remaining chars.\n    while (this.prevBuf.length > 0) {\n        // Skip 1 character in the buffer.\n        ret += this.defaultCharUnicode;\n        var buf = this.prevBuf.slice(1);\n\n        // Parse remaining as usual.\n        this.prevBuf = Buffer.alloc(0);\n        this.nodeIdx = 0;\n        if (buf.length > 0)\n            ret += this.write(buf);\n    }\n\n    this.nodeIdx = 0;\n    return ret;\n}\n\n// Binary search for GB18030. Returns largest i such that table[i] <= val.\nfunction findIdx(table, val) {\n    if (table[0] > val)\n        return -1;\n\n    var l = 0, r = table.length;\n    while (l < r-1) { // always table[l] <= val < table[r]\n        var mid = l + Math.floor((r-l+1)/2);\n        if (table[mid] <= val)\n            l = mid;\n        else\n            r = mid;\n    }\n    return l;\n}\n\n","\"use strict\";\n\n// Description of supported double byte encodings and aliases.\n// Tables are not require()-d until they are needed to speed up library load.\n// require()-s are direct to support Browserify.\n\nmodule.exports = {\n    \n    // == Japanese/ShiftJIS ====================================================\n    // All japanese encodings are based on JIS X set of standards:\n    // JIS X 0201 - Single-byte encoding of ASCII +  + Kana chars at 0xA1-0xDF.\n    // JIS X 0208 - Main set of 6879 characters, placed in 94x94 plane, to be encoded by 2 bytes. \n    //              Has several variations in 1978, 1983, 1990 and 1997.\n    // JIS X 0212 - Supplementary plane of 6067 chars in 94x94 plane. 1990. Effectively dead.\n    // JIS X 0213 - Extension and modern replacement of 0208 and 0212. Total chars: 11233.\n    //              2 planes, first is superset of 0208, second - revised 0212.\n    //              Introduced in 2000, revised 2004. Some characters are in Unicode Plane 2 (0x2xxxx)\n\n    // Byte encodings are:\n    //  * Shift_JIS: Compatible with 0201, uses not defined chars in top half as lead bytes for double-byte\n    //               encoding of 0208. Lead byte ranges: 0x81-0x9F, 0xE0-0xEF; Trail byte ranges: 0x40-0x7E, 0x80-0x9E, 0x9F-0xFC.\n    //               Windows CP932 is a superset of Shift_JIS. Some companies added more chars, notably KDDI.\n    //  * EUC-JP:    Up to 3 bytes per character. Used mostly on *nixes.\n    //               0x00-0x7F       - lower part of 0201\n    //               0x8E, 0xA1-0xDF - upper part of 0201\n    //               (0xA1-0xFE)x2   - 0208 plane (94x94).\n    //               0x8F, (0xA1-0xFE)x2 - 0212 plane (94x94).\n    //  * JIS X 208: 7-bit, direct encoding of 0208. Byte ranges: 0x21-0x7E (94 values). Uncommon.\n    //               Used as-is in ISO2022 family.\n    //  * ISO2022-JP: Stateful encoding, with escape sequences to switch between ASCII, \n    //                0201-1976 Roman, 0208-1978, 0208-1983.\n    //  * ISO2022-JP-1: Adds esc seq for 0212-1990.\n    //  * ISO2022-JP-2: Adds esc seq for GB2313-1980, KSX1001-1992, ISO8859-1, ISO8859-7.\n    //  * ISO2022-JP-3: Adds esc seq for 0201-1976 Kana set, 0213-2000 Planes 1, 2.\n    //  * ISO2022-JP-2004: Adds 0213-2004 Plane 1.\n    //\n    // After JIS X 0213 appeared, Shift_JIS-2004, EUC-JISX0213 and ISO2022-JP-2004 followed, with just changing the planes.\n    //\n    // Overall, it seems that it's a mess :( http://www8.plala.or.jp/tkubota1/unicode-symbols-map2.html\n\n    'shiftjis': {\n        type: '_dbcs',\n        table: function() { return require('./tables/shiftjis.json') },\n        encodeAdd: {'\\u00a5': 0x5C, '\\u203E': 0x7E},\n        encodeSkipVals: [{from: 0xED40, to: 0xF940}],\n    },\n    'csshiftjis': 'shiftjis',\n    'mskanji': 'shiftjis',\n    'sjis': 'shiftjis',\n    'windows31j': 'shiftjis',\n    'ms31j': 'shiftjis',\n    'xsjis': 'shiftjis',\n    'windows932': 'shiftjis',\n    'ms932': 'shiftjis',\n    '932': 'shiftjis',\n    'cp932': 'shiftjis',\n\n    'eucjp': {\n        type: '_dbcs',\n        table: function() { return require('./tables/eucjp.json') },\n        encodeAdd: {'\\u00a5': 0x5C, '\\u203E': 0x7E},\n    },\n\n    // TODO: KDDI extension to Shift_JIS\n    // TODO: IBM CCSID 942 = CP932, but F0-F9 custom chars and other char changes.\n    // TODO: IBM CCSID 943 = Shift_JIS = CP932 with original Shift_JIS lower 128 chars.\n\n\n    // == Chinese/GBK ==========================================================\n    // http://en.wikipedia.org/wiki/GBK\n    // We mostly implement W3C recommendation: https://www.w3.org/TR/encoding/#gbk-encoder\n\n    // Oldest GB2312 (1981, ~7600 chars) is a subset of CP936\n    'gb2312': 'cp936',\n    'gb231280': 'cp936',\n    'gb23121980': 'cp936',\n    'csgb2312': 'cp936',\n    'csiso58gb231280': 'cp936',\n    'euccn': 'cp936',\n\n    // Microsoft's CP936 is a subset and approximation of GBK.\n    'windows936': 'cp936',\n    'ms936': 'cp936',\n    '936': 'cp936',\n    'cp936': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json') },\n    },\n\n    // GBK (~22000 chars) is an extension of CP936 that added user-mapped chars and some other.\n    'gbk': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json').concat(require('./tables/gbk-added.json')) },\n    },\n    'xgbk': 'gbk',\n    'isoir58': 'gbk',\n\n    // GB18030 is an algorithmic extension of GBK.\n    // Main source: https://www.w3.org/TR/encoding/#gbk-encoder\n    // http://icu-project.org/docs/papers/gb18030.html\n    // http://source.icu-project.org/repos/icu/data/trunk/charset/data/xml/gb-18030-2000.xml\n    // http://www.khngai.com/chinese/charmap/tblgbk.php?page=0\n    'gb18030': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json').concat(require('./tables/gbk-added.json')) },\n        gb18030: function() { return require('./tables/gb18030-ranges.json') },\n        encodeSkipVals: [0x80],\n        encodeAdd: {'': 0xA2E3},\n    },\n\n    'chinese': 'gb18030',\n\n\n    // == Korean ===============================================================\n    // EUC-KR, KS_C_5601 and KS X 1001 are exactly the same.\n    'windows949': 'cp949',\n    'ms949': 'cp949',\n    '949': 'cp949',\n    'cp949': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp949.json') },\n    },\n\n    'cseuckr': 'cp949',\n    'csksc56011987': 'cp949',\n    'euckr': 'cp949',\n    'isoir149': 'cp949',\n    'korean': 'cp949',\n    'ksc56011987': 'cp949',\n    'ksc56011989': 'cp949',\n    'ksc5601': 'cp949',\n\n\n    // == Big5/Taiwan/Hong Kong ================================================\n    // There are lots of tables for Big5 and cp950. Please see the following links for history:\n    // http://moztw.org/docs/big5/  http://www.haible.de/bruno/charsets/conversion-tables/Big5.html\n    // Variations, in roughly number of defined chars:\n    //  * Windows CP 950: Microsoft variant of Big5. Canonical: http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP950.TXT\n    //  * Windows CP 951: Microsoft variant of Big5-HKSCS-2001. Seems to be never public. http://me.abelcheung.org/articles/research/what-is-cp951/\n    //  * Big5-2003 (Taiwan standard) almost superset of cp950.\n    //  * Unicode-at-on (UAO) / Mozilla 1.8. Falling out of use on the Web. Not supported by other browsers.\n    //  * Big5-HKSCS (-2001, -2004, -2008). Hong Kong standard. \n    //    many unicode code points moved from PUA to Supplementary plane (U+2XXXX) over the years.\n    //    Plus, it has 4 combining sequences.\n    //    Seems that Mozilla refused to support it for 10 yrs. https://bugzilla.mozilla.org/show_bug.cgi?id=162431 https://bugzilla.mozilla.org/show_bug.cgi?id=310299\n    //    because big5-hkscs is the only encoding to include astral characters in non-algorithmic way.\n    //    Implementations are not consistent within browsers; sometimes labeled as just big5.\n    //    MS Internet Explorer switches from big5 to big5-hkscs when a patch applied.\n    //    Great discussion & recap of what's going on https://bugzilla.mozilla.org/show_bug.cgi?id=912470#c31\n    //    In the encoder, it might make sense to support encoding old PUA mappings to Big5 bytes seq-s.\n    //    Official spec: http://www.ogcio.gov.hk/en/business/tech_promotion/ccli/terms/doc/2003cmp_2008.txt\n    //                   http://www.ogcio.gov.hk/tc/business/tech_promotion/ccli/terms/doc/hkscs-2008-big5-iso.txt\n    // \n    // Current understanding of how to deal with Big5(-HKSCS) is in the Encoding Standard, http://encoding.spec.whatwg.org/#big5-encoder\n    // Unicode mapping (http://www.unicode.org/Public/MAPPINGS/OBSOLETE/EASTASIA/OTHER/BIG5.TXT) is said to be wrong.\n\n    'windows950': 'cp950',\n    'ms950': 'cp950',\n    '950': 'cp950',\n    'cp950': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp950.json') },\n    },\n\n    // Big5 has many variations and is an extension of cp950. We use Encoding Standard's as a consensus.\n    'big5': 'big5hkscs',\n    'big5hkscs': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp950.json').concat(require('./tables/big5-added.json')) },\n        encodeSkipVals: [0xa2cc],\n    },\n\n    'cnbig5': 'big5hkscs',\n    'csbig5': 'big5hkscs',\n    'xxbig5': 'big5hkscs',\n};\n","\"use strict\";\n\nvar Buffer = require(\"buffer\").Buffer,\n    Transform = require(\"stream\").Transform;\n\n\n// == Exports ==================================================================\nmodule.exports = function(iconv) {\n    \n    // Additional Public API.\n    iconv.encodeStream = function encodeStream(encoding, options) {\n        return new IconvLiteEncoderStream(iconv.getEncoder(encoding, options), options);\n    }\n\n    iconv.decodeStream = function decodeStream(encoding, options) {\n        return new IconvLiteDecoderStream(iconv.getDecoder(encoding, options), options);\n    }\n\n    iconv.supportsStreams = true;\n\n\n    // Not published yet.\n    iconv.IconvLiteEncoderStream = IconvLiteEncoderStream;\n    iconv.IconvLiteDecoderStream = IconvLiteDecoderStream;\n    iconv._collect = IconvLiteDecoderStream.prototype.collect;\n};\n\n\n// == Encoder stream =======================================================\nfunction IconvLiteEncoderStream(conv, options) {\n    this.conv = conv;\n    options = options || {};\n    options.decodeStrings = false; // We accept only strings, so we don't need to decode them.\n    Transform.call(this, options);\n}\n\nIconvLiteEncoderStream.prototype = Object.create(Transform.prototype, {\n    constructor: { value: IconvLiteEncoderStream }\n});\n\nIconvLiteEncoderStream.prototype._transform = function(chunk, encoding, done) {\n    if (typeof chunk != 'string')\n        return done(new Error(\"Iconv encoding stream needs strings as its input.\"));\n    try {\n        var res = this.conv.write(chunk);\n        if (res && res.length) this.push(res);\n        done();\n    }\n    catch (e) {\n        done(e);\n    }\n}\n\nIconvLiteEncoderStream.prototype._flush = function(done) {\n    try {\n        var res = this.conv.end();\n        if (res && res.length) this.push(res);\n        done();\n    }\n    catch (e) {\n        done(e);\n    }\n}\n\nIconvLiteEncoderStream.prototype.collect = function(cb) {\n    var chunks = [];\n    this.on('error', cb);\n    this.on('data', function(chunk) { chunks.push(chunk); });\n    this.on('end', function() {\n        cb(null, Buffer.concat(chunks));\n    });\n    return this;\n}\n\n\n// == Decoder stream =======================================================\nfunction IconvLiteDecoderStream(conv, options) {\n    this.conv = conv;\n    options = options || {};\n    options.encoding = this.encoding = 'utf8'; // We output strings.\n    Transform.call(this, options);\n}\n\nIconvLiteDecoderStream.prototype = Object.create(Transform.prototype, {\n    constructor: { value: IconvLiteDecoderStream }\n});\n\nIconvLiteDecoderStream.prototype._transform = function(chunk, encoding, done) {\n    if (!Buffer.isBuffer(chunk))\n        return done(new Error(\"Iconv decoding stream needs buffers as its input.\"));\n    try {\n        var res = this.conv.write(chunk);\n        if (res && res.length) this.push(res, this.encoding);\n        done();\n    }\n    catch (e) {\n        done(e);\n    }\n}\n\nIconvLiteDecoderStream.prototype._flush = function(done) {\n    try {\n        var res = this.conv.end();\n        if (res && res.length) this.push(res, this.encoding);                \n        done();\n    }\n    catch (e) {\n        done(e);\n    }\n}\n\nIconvLiteDecoderStream.prototype.collect = function(cb) {\n    var res = '';\n    this.on('error', cb);\n    this.on('data', function(chunk) { res += chunk; });\n    this.on('end', function() {\n        cb(null, res);\n    });\n    return this;\n}\n\n","\"use strict\";\nvar Buffer = require(\"buffer\").Buffer;\n// Note: not polyfilled with safer-buffer on a purpose, as overrides Buffer\n\n// == Extend Node primitives to use iconv-lite =================================\n\nmodule.exports = function (iconv) {\n    var original = undefined; // Place to keep original methods.\n\n    // Node authors rewrote Buffer internals to make it compatible with\n    // Uint8Array and we cannot patch key functions since then.\n    // Note: this does use older Buffer API on a purpose\n    iconv.supportsNodeEncodingsExtension = !(Buffer.from || new Buffer(0) instanceof Uint8Array);\n\n    iconv.extendNodeEncodings = function extendNodeEncodings() {\n        if (original) return;\n        original = {};\n\n        if (!iconv.supportsNodeEncodingsExtension) {\n            console.error(\"ACTION NEEDED: require('iconv-lite').extendNodeEncodings() is not supported in your version of Node\");\n            console.error(\"See more info at https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility\");\n            return;\n        }\n\n        var nodeNativeEncodings = {\n            'hex': true, 'utf8': true, 'utf-8': true, 'ascii': true, 'binary': true, \n            'base64': true, 'ucs2': true, 'ucs-2': true, 'utf16le': true, 'utf-16le': true,\n        };\n\n        Buffer.isNativeEncoding = function(enc) {\n            return enc && nodeNativeEncodings[enc.toLowerCase()];\n        }\n\n        // -- SlowBuffer -----------------------------------------------------------\n        var SlowBuffer = require('buffer').SlowBuffer;\n\n        original.SlowBufferToString = SlowBuffer.prototype.toString;\n        SlowBuffer.prototype.toString = function(encoding, start, end) {\n            encoding = String(encoding || 'utf8').toLowerCase();\n\n            // Use native conversion when possible\n            if (Buffer.isNativeEncoding(encoding))\n                return original.SlowBufferToString.call(this, encoding, start, end);\n\n            // Otherwise, use our decoding method.\n            if (typeof start == 'undefined') start = 0;\n            if (typeof end == 'undefined') end = this.length;\n            return iconv.decode(this.slice(start, end), encoding);\n        }\n\n        original.SlowBufferWrite = SlowBuffer.prototype.write;\n        SlowBuffer.prototype.write = function(string, offset, length, encoding) {\n            // Support both (string, offset, length, encoding)\n            // and the legacy (string, encoding, offset, length)\n            if (isFinite(offset)) {\n                if (!isFinite(length)) {\n                    encoding = length;\n                    length = undefined;\n                }\n            } else {  // legacy\n                var swap = encoding;\n                encoding = offset;\n                offset = length;\n                length = swap;\n            }\n\n            offset = +offset || 0;\n            var remaining = this.length - offset;\n            if (!length) {\n                length = remaining;\n            } else {\n                length = +length;\n                if (length > remaining) {\n                    length = remaining;\n                }\n            }\n            encoding = String(encoding || 'utf8').toLowerCase();\n\n            // Use native conversion when possible\n            if (Buffer.isNativeEncoding(encoding))\n                return original.SlowBufferWrite.call(this, string, offset, length, encoding);\n\n            if (string.length > 0 && (length < 0 || offset < 0))\n                throw new RangeError('attempt to write beyond buffer bounds');\n\n            // Otherwise, use our encoding method.\n            var buf = iconv.encode(string, encoding);\n            if (buf.length < length) length = buf.length;\n            buf.copy(this, offset, 0, length);\n            return length;\n        }\n\n        // -- Buffer ---------------------------------------------------------------\n\n        original.BufferIsEncoding = Buffer.isEncoding;\n        Buffer.isEncoding = function(encoding) {\n            return Buffer.isNativeEncoding(encoding) || iconv.encodingExists(encoding);\n        }\n\n        original.BufferByteLength = Buffer.byteLength;\n        Buffer.byteLength = SlowBuffer.byteLength = function(str, encoding) {\n            encoding = String(encoding || 'utf8').toLowerCase();\n\n            // Use native conversion when possible\n            if (Buffer.isNativeEncoding(encoding))\n                return original.BufferByteLength.call(this, str, encoding);\n\n            // Slow, I know, but we don't have a better way yet.\n            return iconv.encode(str, encoding).length;\n        }\n\n        original.BufferToString = Buffer.prototype.toString;\n        Buffer.prototype.toString = function(encoding, start, end) {\n            encoding = String(encoding || 'utf8').toLowerCase();\n\n            // Use native conversion when possible\n            if (Buffer.isNativeEncoding(encoding))\n                return original.BufferToString.call(this, encoding, start, end);\n\n            // Otherwise, use our decoding method.\n            if (typeof start == 'undefined') start = 0;\n            if (typeof end == 'undefined') end = this.length;\n            return iconv.decode(this.slice(start, end), encoding);\n        }\n\n        original.BufferWrite = Buffer.prototype.write;\n        Buffer.prototype.write = function(string, offset, length, encoding) {\n            var _offset = offset, _length = length, _encoding = encoding;\n            // Support both (string, offset, length, encoding)\n            // and the legacy (string, encoding, offset, length)\n            if (isFinite(offset)) {\n                if (!isFinite(length)) {\n                    encoding = length;\n                    length = undefined;\n                }\n            } else {  // legacy\n                var swap = encoding;\n                encoding = offset;\n                offset = length;\n                length = swap;\n            }\n\n            encoding = String(encoding || 'utf8').toLowerCase();\n\n            // Use native conversion when possible\n            if (Buffer.isNativeEncoding(encoding))\n                return original.BufferWrite.call(this, string, _offset, _length, _encoding);\n\n            offset = +offset || 0;\n            var remaining = this.length - offset;\n            if (!length) {\n                length = remaining;\n            } else {\n                length = +length;\n                if (length > remaining) {\n                    length = remaining;\n                }\n            }\n\n            if (string.length > 0 && (length < 0 || offset < 0))\n                throw new RangeError('attempt to write beyond buffer bounds');\n\n            // Otherwise, use our encoding method.\n            var buf = iconv.encode(string, encoding);\n            if (buf.length < length) length = buf.length;\n            buf.copy(this, offset, 0, length);\n            return length;\n\n            // TODO: Set _charsWritten.\n        }\n\n\n        // -- Readable -------------------------------------------------------------\n        if (iconv.supportsStreams) {\n            var Readable = require('stream').Readable;\n\n            original.ReadableSetEncoding = Readable.prototype.setEncoding;\n            Readable.prototype.setEncoding = function setEncoding(enc, options) {\n                // Use our own decoder, it has the same interface.\n                // We cannot use original function as it doesn't handle BOM-s.\n                this._readableState.decoder = iconv.getDecoder(enc, options);\n                this._readableState.encoding = enc;\n            }\n\n            Readable.prototype.collect = iconv._collect;\n        }\n    }\n\n    // Remove iconv-lite Node primitive extensions.\n    iconv.undoExtendNodeEncodings = function undoExtendNodeEncodings() {\n        if (!iconv.supportsNodeEncodingsExtension)\n            return;\n        if (!original)\n            throw new Error(\"require('iconv-lite').undoExtendNodeEncodings(): Nothing to undo; extendNodeEncodings() is not called.\")\n\n        delete Buffer.isNativeEncoding;\n\n        var SlowBuffer = require('buffer').SlowBuffer;\n\n        SlowBuffer.prototype.toString = original.SlowBufferToString;\n        SlowBuffer.prototype.write = original.SlowBufferWrite;\n\n        Buffer.isEncoding = original.BufferIsEncoding;\n        Buffer.byteLength = original.BufferByteLength;\n        Buffer.prototype.toString = original.BufferToString;\n        Buffer.prototype.write = original.BufferWrite;\n\n        if (iconv.supportsStreams) {\n            var Readable = require('stream').Readable;\n\n            Readable.prototype.setEncoding = original.ReadableSetEncoding;\n            delete Readable.prototype.collect;\n        }\n\n        original = undefined;\n    }\n}\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n"],"sourceRoot":""}